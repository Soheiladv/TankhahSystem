{% load i18n humanize %}
{% if documents %}
<ul class="list-group list-group-flush">
    {% for doc in documents %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
            <i class="fas fa-file-alt me-2 text-secondary"></i>
            <a href="{{ doc.file.url }}" target="_blank">{{ doc.file.name  }}</a>
            <small class="text-muted d-block ps-4">
                {% translate "آپلود شده توسط:" %} {{ doc.uploaded_by.get_full_name|default:doc.uploaded_by.username|default:"-" }}
                - {{ doc.uploaded_at|date:"Y/m/d H:i" }}
                {% if doc.file_size %} ({{ doc.file_size|filesizeformat }}) {% endif %}
            </small>
        </div>
        <div>
            {# لینک حذف سند اگر کاربر مجاز است #}
            {% comment %}
            {% if perms.tankhah.delete_factordocument %}
            <a href="{% url 'tankhah:factor_document_delete' doc.pk %}" class="btn btn-outline-danger btn-sm py-0 px-1" title="{% translate 'حذف سند' %}">
                <i class="fas fa-trash-alt fa-xs"></i>
            </a>
            {% endif %}
            {% endcomment %}
        </div>
    </li>
    {% endfor %}
</ul>
{% else %}
<p class="text-center text-muted p-3">{% translate "هیچ سندی برای این فاکتور ضمیمه نشده است." %}</p>
{% endif %}
{# دکمه افزودن سند اگر کاربر مجاز است و فاکتور قفل نیست #}
{% if not factor_package.factor_base.instance.is_locked %}
<div class="p-3 border-top">
     <!--  <a href="{% url 'factor_document_upload' factor_id %}" class="btn btn-sm btn-outline-success">
        <i class="fas fa-plus-circle"></i> {% translate "افزودن سند جدید" %}
    </a> -->
</div>
{% endif %}