# ุณุณุชู ูพุดุชุจุงูโฺฏุฑ ุจุฑูุฒุฑุณุงู ุดุฏู

## ูุนุฑู
ุณุณุชู ูพุดุชุจุงูโฺฏุฑ ุจุฑูุฒุฑุณุงู ุดุฏู ุจุฑุง ูพุดุชุจุงูโฺฏุฑ ุงุฒ ูุฑ ุฏู ุฏุชุงุจุณ (ุงุตู ู ูุงฺฏ) ุทุฑุงุญ ุดุฏู ุงุณุช.

## ูฺฺฏโูุง ุฌุฏุฏ

### ๐ ูพุดุชุจุงูโฺฏุฑ ุฏูฺฏุงูู
- **ุฏุชุงุจุณ ุงุตู**: ุดุงูู ุฏุงุฏูโูุง ุงุตู ุณุณุชู
- **ุฏุชุงุจุณ ูุงฺฏ**: ุดุงูู ุฏุงุฏูโูุง version_tracker ู audit_log

### ๐ ูุฏุฑุช ูุงูโูุง ูพุดุชุจุงู
- ูุดุฑุฏูโุณุงุฒ ุฎูุฏฺฉุงุฑ
- ูพุงฺฉุณุงุฒ ูุงูโูุง ูุฏู
- ููุงุด ุขูุงุฑ ุญุฌู ู ุชุนุฏุงุฏ ูุงูโูุง

### ๐ค ูพุดุชุจุงูโฺฏุฑ ุฎูุฏฺฉุงุฑ
- ุงุณฺฉุฑูพุชโูุง ุฎูุฏฺฉุงุฑ
- ุจุฑุฑุณ ูุถุนุช ูพุดุชุจุงูโฺฏุฑ
- ูุงฺฏโฺฏุฐุงุฑ ฺฉุงูู

## ุฏุณุชูุฑุงุช ูุฏุฑุช

### ูพุดุชุจุงูโฺฏุฑ ฺฉุงูู
```bash
# ูพุดุชุจุงูโฺฏุฑ ุงุฒ ูุฑ ุฏู ุฏุชุงุจุณ
python manage.py backup_all_databases

# ูพุดุชุจุงูโฺฏุฑ ุจุง ูุดุฑุฏูโุณุงุฒ
python manage.py backup_all_databases --compress

# ูพุดุชุจุงูโฺฏุฑ ุจุง ุฑูุฒฺฏุฐุงุฑ
python manage.py backup_all_databases --encrypt

# ูพุดุชุจุงูโฺฏุฑ + ูพุงฺฉุณุงุฒ ูุงูโูุง ูุฏู
python manage.py backup_all_databases --cleanup
```

### ุจุงุฒุงุจ
```bash
# ุจุงุฒุงุจ ูุฑ ุฏู ุฏุชุงุจุณ
python manage.py restore_all_databases --file backup_file.sql

# ุจุงุฒุงุจ ููุท ุฏุชุงุจุณ ุงุตู
python manage.py restore_all_databases --file backup_file.sql --database main

# ุจุงุฒุงุจ ููุท ุฏุชุงุจุณ ูุงฺฏ
python manage.py restore_all_databases --file backup_file.sql --database logs
```

### ูุฏุฑุช ูุงูโูุง ูพุดุชุจุงู
```bash
# ููุงุด ูุณุช ูุงูโูุง ูพุดุชุจุงู
python manage.py manage_backups --list

# ููุงุด ุญุฌู ูุงูโูุง
python manage.py manage_backups --size

# ูพุงฺฉุณุงุฒ ูุงูโูุง ูุฏูโุชุฑ ุงุฒ 7 ุฑูุฒ
python manage.py manage_backups --cleanup --days 7
```

## ุงุณฺฉุฑูพุชโูุง ุฎูุฏฺฉุงุฑ

### ูพุดุชุจุงูโฺฏุฑ ุฎูุฏฺฉุงุฑ
```bash
# ุงุฌุฑุง ูพุดุชุจุงูโฺฏุฑ
python scripts/auto_backup.py

# ุจุฑุฑุณ ูุถุนุช ูพุดุชุจุงูโฺฏุฑ
python scripts/auto_backup.py --check

# ุงุฌุฑุง ุฏุฑ Windows
scripts/backup.bat
```

### ุชูุธู Task Scheduler (Windows)
1. ุจุงุฒ ฺฉุฑุฏู Task Scheduler
2. ุงุฌุงุฏ Task ุฌุฏุฏ
3. ุชูุธู Trigger: ุฑูุฒุงูู ุฏุฑ ุณุงุนุช ูุดุฎุต
4. ุชูุธู Action: ุงุฌุฑุง `scripts/backup.bat`

### ุชูุธู Cron (Linux/Mac)
```bash
# ูุฑุงุด crontab
crontab -e

# ุงุถุงูู ฺฉุฑุฏู ุฎุท ุฒุฑ ุจุฑุง ูพุดุชุจุงูโฺฏุฑ ุฑูุฒุงูู ุฏุฑ ุณุงุนุช 2 ุตุจุญ
0 2 * * * /path/to/project/scripts/auto_backup.py
```

## ุณุงุฎุชุงุฑ ูุงูโูุง ูพุดุชุจุงู

```
backups/
โโโ tankhasystem_20241201_020000.sql.gz    # ุฏุชุงุจุณ ุงุตู
โโโ tankhah_logs_db_20241201_020000.sql.gz # ุฏุชุงุจุณ ูุงฺฏ
โโโ tankhasystem_20241202_020000.sql.gz
โโโ tankhah_logs_db_20241202_020000.sql.gz
โโโ ...
```

## ุชูุธูุงุช

### ูุชุบุฑูุง ูุญุท (.env)
```env
# ุฏุชุงุจุณ ุงุตู
DATABASE_DEFAULT_NAME=tankhasystem
DATABASE_DEFAULT_USER=root
DATABASE_DEFAULT_PASSWORD=
DATABASE_DEFAULT_HOST=127.0.0.1
DATABASE_DEFAULT_PORT=3306

# ุฏุชุงุจุณ ูุงฺฏ
DATABASE_LOGS_NAME=tankhah_logs_db
DATABASE_LOGS_USER=root
DATABASE_LOGS_PASSWORD=
DATABASE_LOGS_HOST=localhost
DATABASE_LOGS_PORT=3306
```

### ุชูุธูุงุช Django (settings.py)
```python
# ุชูุธูุงุช ูพุดุชุจุงูโฺฏุฑ
DBBACKUP_STORAGE = 'django.core.files.storage.FileSystemStorage'
DBBACKUP_STORAGE_OPTIONS = {'location': os.path.join(BASE_DIR, 'backups')}
DBBACKUP_CLEANUP_KEEP_DAYS = 7
DBBACKUP_MAIL_ADMINS = True
```

## ูฺฉุงุช ููู

### ๐ ุงููุช
- ูุงูโูุง ูพุดุชุจุงู ุฑุง ุฏุฑ ูฺฉุงู ุงูู ูฺฏูโุฏุงุฑุฏ
- ุงุฒ ุฑูุฒฺฏุฐุงุฑ ุจุฑุง ูุงูโูุง ุญุณุงุณ ุงุณุชูุงุฏู ฺฉูุฏ
- ุฏุณุชุฑุณ ุจู ูพูุดู backups ุฑุง ูุญุฏูุฏ ฺฉูุฏ

### ๐ ูุงูุชูุฑูฺฏ
- ูุงฺฏโูุง ูพุดุชุจุงูโฺฏุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ุญุฌู ูุงูโูุง ูพุดุชุจุงู ุฑุง ูุงูุชูุฑ ฺฉูุฏ
- ุชุณุช ุจุงุฒุงุจ ุฑุง ุจู ุตูุฑุช ููุธู ุงูุฌุงู ุฏูุฏ

### โก ุจูููโุณุงุฒ
- ูุดุฑุฏูโุณุงุฒ ุจุฑุง ฺฉุงูุด ุญุฌู ูุงูโูุง
- ูพุงฺฉุณุงุฒ ููุธู ูุงูโูุง ูุฏู
- ุงุณุชูุงุฏู ุงุฒ ูพุดุชุจุงูโฺฏุฑ ุชูุงุถู ุจุฑุง ูุงูโูุง ุจุฒุฑฺฏ

## ุนุจโุงุจ

### ูุดฺฉู: ุฎุทุง ุฏุฑ ุงุชุตุงู ุจู ุฏุชุงุจุณ
- ุจุฑุฑุณ ุชูุธูุงุช ุงุชุตุงู ุฏุฑ .env
- ุงุทููุงู ุงุฒ ุฏุฑ ุฏุณุชุฑุณ ุจูุฏู MySQL
- ุจุฑุฑุณ ูุฌูุฒูุง ฺฉุงุฑุจุฑ ุฏุชุงุจุณ

### ูุดฺฉู: ุฎุทุง ุฏุฑ ููุดุชู ูุงู
- ุจุฑุฑุณ ูุฌูุฒูุง ููุดุชู ุฏุฑ ูพูุดู backups
- ุงุทููุงู ุงุฒ ูุฌูุฏ ูุถุง ฺฉุงู ุฏุณฺฉ
- ุจุฑุฑุณ ูุณุฑ ูพูุดู backups

### ูุดฺฉู: ูุงูโูุง ูพุดุชุจุงู ุฎุงู
- ุจุฑุฑุณ ุชูุธูุงุช DBBACKUP_CONNECTORS
- ุงุทููุงู ุงุฒ ุตุญุช ูุงู ุฏุชุงุจุณโูุง
- ุจุฑุฑุณ ูุงฺฏโูุง ุฎุทุง

## ุชุบุฑุงุช ุงุฎุฑ

### ูุณุฎู 2.0.0
- ูพุดุชุจุงูโฺฏุฑ ุงุฒ ูุฑ ุฏู ุฏุชุงุจุณ
- ุฏุณุชูุฑุงุช ูุฏุฑุช ูพุดุฑูุชู
- ุงุณฺฉุฑูพุชโูุง ุฎูุฏฺฉุงุฑ
- ุจูุจูุฏ ูุฏุฑุช ูุงูโูุง
- ูุงฺฏโฺฏุฐุงุฑ ฺฉุงูู
