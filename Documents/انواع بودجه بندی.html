<!DOCTYPE html>
<!-- saved from url=(0046)https://gemini.google.com/app/184a9f472ac9ab94 -->
<html lang="fa" dir="rtl"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./انواع بودجه بندی_files/cb=gapi.loaded_0" nonce="" async=""></script><!--<base href="https://gemini.google.com/">--><base href="."><link rel="preconnect" href="https://www.gstatic.com/"><meta name="referrer" content="origin"><meta name="viewport" content="initial-scale=1,minimum-scale=1,width=device-width,interactive-widget=resizes-content"><meta name="color-scheme" content="only"><meta name="google-site-verification" content="NDfDvTdbFxsd1TbRRZVQZULBTRT2-fatyuQ1TT8gack"><meta name="twitter:card" content="summary_large_image"><meta property="og:site_name" content="Gemini"><link rel="icon" href="https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg" sizes="any" type="image/svg+xml"><link rel="icon" href="https://www.gstatic.com/lamda/images/gemini_favicon_f069958c85030456e93de685481c559f160ea06b.png" sizes="any" type="image/png"><link rel="apple-touch-icon" href="https://www.gstatic.com/lamda/images/gemini_home_icon_8d62f72e7aae54b6859f1.png" sizes="any" type="image/png"><link rel="preconnect" href="https://www.google.com/"><link rel="preconnect" href="https://lh3.googleusercontent.com/"><link rel="preconnect" href="https://waa-pa.clients6.google.com/"><link rel="preconnect" href="https://ogads-pa.clients6.google.com/"><link rel="preconnect" href="https://www.gstatic.com/"><link rel="preconnect" href="https://www.googletagmanager.com/"><link rel="preload" href="./انواع بودجه بندی_files/m=_b" as="script" nonce=""><script type="text/javascript" async="" src="./انواع بودجه بندی_files/js" nonce=""></script><script data-id="_gd" nonce="">window.WIZ_global_data = {"AEJOSc":false,"B7TsWc":"","BTQaEe":false,"CVUPx":false,"DEh2U":false,"Di4zjc":false,"DnVkpd":"مزایا و معایب داشتن ساعت هوشمند را توضیح بده.∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/d1_80f6e1bd6c69c9119609c.jpg∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/da1_c764ba209b31ccdba4be8.jpg∞ساعت‌های هوشمند مزایای زیادی دارند که می‌توانند زندگی افراد را آسان‌تر و لذت‌بخش‌تر کنند. برخی از مهم‌ترین مزایای ساعت هوشمند عبارتند از:\nدسترسی سریع به اعلان‌ها: ساعت‌های هوشمند به شما امکان می‌دهند تا بدون نیاز به برداشتن گوشی، اعلان‌های پیام، تماس، ایمیل و سایر برنامه‌ها را مشاهده کنید. این می‌تواند به شما کمک کند تا از دست دادن پیام‌های مهم جلوگیری کنید.\n∰من در پروسه یک مصاحبه کاری برای شغل مدیر رسانه اجتماعی هستم و می‌خواهم آماده شوم.∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/d2_8452866de7af347e70b9e.jpg∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/da2_481ecd14a7e50ee8081da.jpg∞تبریک می‌گویم که برای شغل مدیر رسانه اجتماعی مصاحبه می‌کنید. این یک موقعیت هیجان‌انگیز است که فرصتی برای شما فراهم می‌کند تا مهارت‌ها و خلاقیت خود را در زمینه رسانه‌های اجتماعی به کار بگیرید.\nدر اینجا چند نکته برای آماده شدن برای مصاحبه کاری شما آورده شده است:\n. درباره شرکت تحقیق کنید. قبل از مصاحبه، حتماً در مورد شرکتی که برای آن مصاحبه می‌کنید تحقیق کنید.\n∰۱۰ توصیه برای نوشتن توصیه‌نامه بده.∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/d3_1982987beeac22f1b0070.jpg∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/da3_b337c3c2fd24a258affb2.jpg∞توصیه‌نامه یک نامه رسمی است که توسط یک شخص معتبر برای حمایت از درخواست شغلی، پذیرش تحصیلی یا بورس تحصیلی نوشته می‌شود. یک توصیه‌نامه خوب باید شامل اطلاعات دقیق و مرتبطی در مورد متقاضی باشد و به خواننده کمک کند تا درک بهتری از نقاط قوت و شایستگی‌های متقاضی داشته باشد.\nدر اینجا ۱۰ توصیه برای نوشتن توصیه‌نامه آورده شده است:\n. شخصاً متقاضی را بشناسید.\n","DpimGf":false,"Dv5Jv":false,"EOzIkf":"UMwOLzU_6bA","EP1ykd":["/_/*","/corp","/corp/*","/corp2","/corp2/*","/emulator","/emulator/*","/staging","/staging/*"],"FABJ3e":"https://docs.google.com/picker","FdrFJe":"-8307834232197337018","GK6dn":"","GtQXDc":"Give me caption options to tell the world about my new fur baby, Finn. Use emojis∞https://www.gstatic.com/lamda/images/landing/a/u18/en/m1_02050367fdbe8690faba4.jpg∞https://www.gstatic.com/lamda/images/landing/a/u18/en/ma1_21f7d57cc2164a94180f6.png∞Sure, here are some caption options to tell the world about your new fur baby, Finn, using emojis:\n🐶 Meet my new best friend, Finn! He’s a bundle of joy and I can’t wait for all the adventures we’ll have together. #newpuppy #furryfriend #Finn\n🐾 Finn has stolen my heart! He’s the cutest and cuddliest puppy I’ve ever met. #puppylove #FinnFan #doglover\n🐕‍🦺 Finn is officially part of the family! He’s already brought so much joy into our lives. #welcomehomeFinn #adoptdontshop #dogsofinstagram\n🐶 Finn is my little shadow! He follows me everywhere I go. #puptastic #FinnAdventures #dogdays\n🐾 Finn is always up for a good cuddle! He’s the perfect lapdog. #snugglebuddy #FinnTheCuddleBug #bestdoggoever∰Describe a new fashion trend that’s inspired by retro styles.∞https://www.gstatic.com/lamda/images/landing/a/u18/en/m2_0837b565aa77b98938d28.jpg∞https://www.gstatic.com/lamda/images/landing/a/u18/en/ma2_4dc50c5a1ccf43229c150.png∞New fashion trend inspired by retro styles:\nThe Neo-Glam Revival\nThe Neo-Glam Revival is a new fashion trend that takes inspiration from the glamorous styles of the 1970s and 1980s. This trend is all about bold colors, metallics, and over-the-top silhouettes.\nSome of the key pieces of the Neo-Glam Revival include:\nSequin dresses: Sequin dresses are a must-have for anyone who wants to channel the Neo-Glam Revival trend. These dresses are perfect for a night out on the town, and they’ll make you feel like a million bucks.\nMetallic suits: Metallic suits are another key piece of the Neo-Glam Revival trend. These suits are perfect for making a statement, and they can be dressed up or down depending on the occasion.∰Draft a guide on how to set up the perfect movie marathon night with friends.∞https://www.gstatic.com/lamda/images/landing/a/u18/en/m3_d4e89a863f2a97bd080a7.jpg∞https://www.gstatic.com/lamda/images/landing/a/u18/en/ma3_45eebba09a87a8a8c95e6.png∞How to Set Up the Perfect Movie Marathon Night with Friends\nMovie marathons are a great way to spend time with friends and enjoy your favorite films. But to make sure your marathon is a success, there are a few things you need to do to prepare.\n1. Choose your movies\nThe most important thing is to choose movies that everyone will enjoy. If you’re not sure what to pick, try doing a poll of your friends to see what they’re interested in. You can also choose a theme for your marathon, such as all comedies, all horror movies, or all movies from a particular decade.\n2. Set a schedule\nOnce you’ve chosen your movies, it’s a good idea to set a schedule for the night. This will help ensure that you have enough time to watch all of the movies and also take breaks for snacks and bathroom visits.","Im6cmf":"/_/BardChatUi","IrULFb":"","JNl6me":"/punctual/prod/assistant-bard","L8cmRe":" ","LoQv7e":true,"Lz8rbb":true,"MT7f9b":[],"MUE6Ne":"BardChatUi","MuJWjd":false,"P1qjVc":false,"QrtxK":"0","RL9Dob":["می‌تواند یک غذای گیاهی متعادل و سریع پیشنهاد بدهد که سرشار از پروتئین و فیبر باشد","می‌تواند با گل کلم، خیار و ماست یک غذای گیاهی خوب درست کند","می‌تواند کمکتان کند یک ارائه برای اعلان محصول جدید طرح‌ریزی کنید","می‌تواند فهرست وسائل لازم را برای اولین سفر تکی ماهیگیری و کمپینگ شما بنویسد","می‌تواند یک طرح سه‌ماهه برای یادگیری زبان فرانسه درست کند","می‌تواند به شما بگوید چه چیزهایی امسال مد است و چه لباس‌هایی را براساس مد امسال باید بخرید"],"RMwZnf":[],"S06Grb":"101174103305296889865","S6lZl":103135050,"SDPG4c":false,"SNlM0e":"ADQT3uoJnMhaYvBs56Tv22liNPzO:1744221460286","SVs1zb":false,"TSDtV":"%.@.[[null,[[45680923,999999,null,null,null,null,\"Ts10ge\"],[45629829,null,null,0.75,null,null,\"ovZJSd\"],[45651155,null,true,null,null,null,\"EP2fbd\"],[45428999,null,null,null,\"\",null,\"vjNJ5e\"],[45689501,null,null,null,\"https://github.com/apps/gemini-by-google-dev/installations/new\",null,\"t6BLI\"],[45615671,null,false,null,null,null,\"ZJmXsb\"],[45629317,null,null,null,\"https://www.gstatic.com/lamda/images/app_upsell/en_badge_web_generic_3943bbffa169559934849.png\",null,\"nrJXhc\"],[45661090,null,false,null,null,null,\"nrIKKd\"],[45686189,null,true,null,null,null,\"Lg23Lb\"],[45658643,null,false,null,null,null,\"fXNzlf\"],[45648844,null,false,null,null,null,\"OFpCnd\"],[45429005,null,false,null,null,null,\"MIRgHd\"],[45640656,null,true,null,null,null,\"lY9fBc\"],[45655024,null,false,null,null,null,\"bYdfdc\"],[45661179,null,true,null,null,null,\"v7fyTe\"],[45459631,null,null,null,\"1.0 Ultra\",null,\"GrrrNd\"],[45428796,null,false,null,null,null,\"ZL8UD\"],[45428828,null,null,null,\"bogileeiidjcenihjaaohdaeidkhbhkp\",null,\"sjy4Td\"],[45428809,null,false,null,null,null,\"UBmfq\"],[45430373,null,true,null,null,null,\"toQ3Xd\"],[45615674,null,true,null,null,null,\"YqJKoe\"],[45663939,null,null,null,null,null,\"AXSAqe\",[\"[[\\\"researcher\\\"]]\"]],[45448126,null,null,null,\"\",null,\"YcAzte\"],[45679061,null,false,null,null,null,\"T2x23\"],[45682634,null,false,null,null,null,\"N8VYIb\"],[45668501,null,true,null,null,null,\"gGPh1\"],[45619292,null,false,null,null,null,\"ALERH\"],[45656690,null,false,null,null,null,\"swKSab\"],[45640658,null,true,null,null,null,\"LWjSf\"],[45428930,null,false,null,null,null,\"wL7YAf\"],[45619148,null,false,null,null,null,\"qOKuUe\"],[45671620,null,false,null,null,null,\"kabrmb\"],[45429048,null,false,null,null,null,\"A9qu0b\"],[45428832,null,false,null,null,null,\"lVLUV\"],[45663624,null,false,null,null,null,\"GpIVY\"],[45676785,null,false,null,null,null,\"b7n1ib\"],[45664020,null,true,null,null,null,\"sKVCWc\"],[45428795,null,false,null,null,null,\"C2P4R\"],[45681677,null,true,null,null,null,\"D7FEUc\"],[45532386,null,false,null,null,null,\"lX4xnb\"],[45672055,null,false,null,null,null,\"baipKc\"],[45667692,null,true,null,null,null,\"iLw9Af\"],[45677269,null,true,null,null,null,\"J4zCWd\"],[45531077,null,false,null,null,null,\"a3Klbc\"],[45664959,null,true,null,null,null,\"OKMbWb\"],[45629137,null,true,null,null,null,\"E2QOsc\"],[45641389,null,null,null,null,null,\"QRog6\",[\"[[173899]]\"]],[45686679,null,true,null,null,null,\"neP5f\"],[45622144,null,true,null,null,null,\"wqsqRd\"],[45615223,null,null,null,\"22.99\",null,\"rAlAVd\"],[45685029,null,false,null,null,null,\"aAR2Wc\"],[45670623,null,true,null,null,null,\"cTWF7\"],[45641042,null,true,null,null,null,\"zgNNQd\"],[45429037,null,false,null,null,null,\"blId8b\"],[45688131,null,false,null,null,null,\"QQQ7uf\"],[45688132,null,false,null,null,null,\"Bva4pf\"],[45637827,null,true,null,null,null,\"CwM2Ze\"],[45623848,null,null,null,null,null,\"MZY7Ee\",[\"[]\"]],[45647753,null,false,null,null,null,\"yEoaze\"],[45428946,null,null,null,\"https://support.google.com/bard?p\\u003dlm_ext_data\",null,\"jJLkNb\"],[45626773,null,true,null,null,null,\"Aj2MYb\"],[45626221,null,true,null,null,null,\"MXA0zc\"],[45629637,null,true,null,null,null,\"u0oBhc\"],[45687391,null,false,null,null,null,\"lPttlc\"],[45617690,null,false,null,null,null,\"dPLjid\"],[45647096,1209600,null,null,null,null,\"OrDyK\"],[45678574,null,false,null,null,null,\"v7JiI\"],[45462879,null,true,null,null,null,\"a4ZjHe\"],[45689251,null,false,null,null,null,\"P6xzgb\"],[45675157,null,false,null,null,null,\"sn9Lsf\"],[45648846,null,false,null,null,null,\"W3z3oe\"],[45619479,null,false,null,null,null,\"H82Usd\"],[45631173,null,true,null,null,null,\"SAwdWd\"],[45666022,null,false,null,null,null,\"P4nGld\"],[45428781,null,true,null,null,null,\"u2A5yf\"],[45650207,null,false,null,null,null,\"ckm37e\"],[45428963,null,false,null,null,null,\"wfjXpd\"],[45428868,null,true,null,null,null,\"nnDOtb\"],[45688644,null,false,null,null,null,\"RJpag\"],[45677779,null,false,null,null,null,\"aiXaGd\"],[45684677,null,true,null,null,null,\"fEh5oc\"],[45616225,null,null,null,\"https://www.gstatic.com/lamda/images/app_upsell/upsell_hero_6a6ea7ad39f3a87e36497.gif\",null,\"JmDHue\"],[45673324,null,false,null,null,null,\"TganFd\"],[45683361,null,false,null,null,null,\"xubhxb\"],[45644859,null,true,null,null,null,\"EyQG2c\"],[45639766,null,null,null,\"https://drive.google.com\",null,\"ygiTRc\"],[45476425,null,false,null,null,null,\"ybXtUb\"],[45675105,null,true,null,null,null,\"y2Y6mf\"],[45675939,null,true,null,null,null,\"By9o8d\"],[45616767,4,null,null,null,null,\"jOQANd\"],[45676661,null,true,null,null,null,\"C03hId\"],[45619237,null,false,null,null,null,\"ojVpQ\"],[45680307,null,true,null,null,null,\"lzmxC\"],[45647035,null,true,null,null,null,\"Z0igBd\"],[45678094,1,null,null,null,null,\"JRbYhb\"],[45462043,null,true,null,null,null,\"cS5vif\"],[45684703,null,false,null,null,null,\"Ayyfqd\"],[45429009,null,true,null,null,null,\"dqLoDf\"],[45657095,null,true,null,null,null,\"cdX4xc\"],[45676044,1073741824,null,null,null,null,\"fBq6Pb\"],[45637839,null,true,null,null,null,\"E2O05d\"],[45652208,null,false,null,null,null,\"H0azJ\"],[45476970,null,false,null,null,null,\"RscM2b\"],[45630155,null,true,null,null,null,\"JwDpTc\"],[45663728,null,true,null,null,null,\"RvXYff\"],[45675814,null,true,null,null,null,\"XrHWWc\"],[45640709,null,false,null,null,null,\"Jt5CZ\"],[45644186,null,true,null,null,null,\"WTh9t\"],[45677569,null,true,null,null,null,\"vnKm7e\"],[45679795,null,null,null,null,null,\"FML4xf\",[\"[[\\\"9c17b1863f581b8a\\\",\\\"933eaa010f672fd8\\\",\\\"7ca48d02d802f20a\\\"]]\"]],[45683762,null,false,null,null,null,\"sVACp\"],[45630276,null,true,null,null,null,\"xsrUoe\"],[45645597,null,true,null,null,null,\"t2iln\"],[45639769,null,null,null,\"drive/v2internal\",null,\"FYqZeb\"],[45644695,null,true,null,null,null,\"ydWKNd\"],[45680434,null,false,null,null,null,\"XjAlZb\"],[45683866,null,true,null,null,null,\"MKEyge\"],[45682210,null,false,null,null,null,\"FFEkgc\"],[45647985,null,true,null,null,null,\"aqauSe\"],[45626218,null,true,null,null,null,\"Wud8Ab\"],[45690003,15,null,null,null,null,\"O9Evqc\"],[45658471,null,true,null,null,null,\"RMGEBb\"],[45614841,null,false,null,null,null,\"oVANbe\"],[45643438,null,true,null,null,null,\"rm3Cf\"],[45674217,null,null,null,\"mp3\",null,\"QptiRe\"],[45616227,null,null,null,\"https://gemini.google.com/app/download/mobile?android-min-version\\u003d301356232\\u0026ios-min-version\\u003d322.0\\u0026is_sa\\u003d1\\u0026campaign_id\\u003dmweb_upsell_android\\u0026utm_source\\u003dmweb_upsell\\u0026utm_medium\\u003dproduct_promo\\u0026utm_campaign\\u003dmweb_upsell_android\\u0026pt\\u003d9008\\u0026mt\\u003d8\\u0026ct\\u003dp-growth-product-mweb-upsell\",null,\"gJHS4b\"],[45428931,null,false,null,null,null,\"oG0vDf\"],[45676796,null,true,null,null,null,\"hABSrd\"],[45616763,100,null,null,null,null,\"HtFbGe\"],[45675749,null,true,null,null,null,\"YkPNZ\"],[45684701,null,false,null,null,null,\"wk64Kd\"],[45667150,null,false,null,null,null,\"tr8tjf\"],[45690108,null,false,null,null,null,\"ZKpXxc\"],[45428974,null,false,null,null,null,\"dFLbXe\"],[45637840,null,true,null,null,null,\"oQvF9\"],[45476323,null,false,null,null,null,\"f7btTe\"],[45688397,null,false,null,null,null,\"XhYRrf\"],[45688032,null,null,null,null,null,\"qYIF1d\",[\"[[\\\"ttlt7zuoalji1b35\\\"]]\"]],[45646913,null,false,null,null,null,\"JjwG6d\"],[45673978,null,true,null,null,null,\"xhI3ib\"],[45617944,null,true,null,null,null,\"yFgPc\"],[45676890,null,true,null,null,null,\"Xob7Re\"],[45651115,null,false,null,null,null,\"WTYgEe\"],[45631079,null,false,null,null,null,\"uQykAc\"],[45687231,7000,null,null,null,null,\"SN1zl\"],[45689044,null,false,null,null,null,\"SIzilb\"],[45615391,null,false,null,null,null,\"B7jSYe\"],[45684107,null,true,null,null,null,\"cgm5Ob\"],[45430312,null,true,null,null,null,\"PQbih\"],[45650544,null,false,null,null,null,\"zDffjc\"],[45645715,null,true,null,null,null,\"JhnuJe\"],[45644567,null,false,null,null,null,\"DRykBd\"],[45428786,null,true,null,null,null,\"dOJemc\"],[45665150,null,true,null,null,null,\"srPPnf\"],[45624292,null,false,null,null,null,\"XXO2J\"],[45664323,null,true,null,null,null,\"MkeP5b\"],[45632535,0,null,null,null,null,\"UmQirc\"],[45675323,null,true,null,null,null,\"KatWR\"],[45620586,null,false,null,null,null,\"saHcWc\"],[45616224,null,false,null,null,null,\"nO10if\"],[45615771,null,null,null,\"w5z-jxbLPxQ\",null,\"xfkApb\"],[45683014,null,false,null,null,null,\"HnD99b\"],[45625498,null,false,null,null,null,\"uMZtsc\"],[45656464,null,true,null,null,null,\"kyKaue\"],[45530938,null,true,null,null,null,\"Ec9pnb\"],[45630771,null,true,null,null,null,\"RBnxNb\"],[45619266,null,false,null,null,null,\"Cmhn5c\"],[45616364,null,false,null,null,null,\"JheC6c\"],[45629942,null,null,null,\"https://apps.apple.com/app/google-gemini/id6477489729?\\u0026pt\\u003d9008\\u0026ct\\u003dmweb_upsell_ios\\u0026mt\\u003d8\",null,\"ZUR3ze\"],[45619210,null,false,null,null,null,\"QtpGEd\"],[45681004,null,true,null,null,null,\"y9rbwb\"],[45668267,null,false,null,null,null,\"JZCQOd\"],[45623461,null,true,null,null,null,\"LwECn\"],[45682623,null,false,null,null,null,\"oH2Xbf\"],[45641715,null,false,null,null,null,\"a0ou4e\"],[45428776,450,null,null,null,null,\"S2jpNe\"],[45679326,25,null,null,null,null,\"VIlUfb\"],[45663911,null,true,null,null,null,\"urswwd\"],[45654743,null,null,null,\"https://chromebook.com/perks?id\\u003dgamgee.standard.2024\",null,\"BZVHDb\"],[45653437,5000,null,null,null,null,\"KmGUYb\"],[45683943,null,false,null,null,null,\"cgylae\"],[45477334,null,null,null,\"long\",null,\"VVI04\"],[45674272,null,false,null,null,null,\"ai570d\"],[45619226,null,true,null,null,null,\"rKOjab\"],[45681182,null,false,null,null,null,\"wldHbc\"],[45618550,null,false,null,null,null,\"D1Mxme\"],[45621965,null,false,null,null,null,\"nIY79c\"],[45428797,null,true,null,null,null,\"PWBRLb\"],[45683512,null,true,null,null,null,\"WUqVC\"],[45675534,null,true,null,null,null,\"LCaMBe\"],[45622043,null,true,null,null,null,\"Ec1bsc\"],[45642250,null,true,null,null,null,\"t7mAfe\"],[45630792,null,true,null,null,null,\"AFrKGe\"],[45655171,null,true,null,null,null,\"VQGSJf\"],[45686427,null,false,null,null,null,\"hShbLb\"],[45688966,null,false,null,null,null,\"nH6Pee\"],[45428770,null,true,null,null,null,\"bhR9Yd\"],[45428959,null,true,null,null,null,\"bfpEu\"],[45653854,null,true,null,null,null,\"dYf0Ob\"],[45625101,null,true,null,null,null,\"fH0Q8e\"],[45685743,null,true,null,null,null,\"ItXOUc\"],[45428847,null,true,null,null,null,\"zActZ\"],[45654742,null,true,null,null,null,\"FCejBc\"],[45682096,null,true,null,null,null,\"nobP9b\"],[45684682,null,true,null,null,null,\"i82jxe\"],[45545694,null,null,null,\"https://google.qualtrics.com/jfe/form/SV_ebLK9JXt8ibzObs\",null,\"QoNBHd\"],[45621723,null,null,null,null,null,\"bfc7jf\",[\"[[\\\"https://www.gstatic.com/lamda/images/app_upsell/carousel_panel_3_b064fa48eddf7bee4476f.png\\\",\\\"https://www.gstatic.com/lamda/images/app_upsell/carousel_panel_4_9f6bef535c3db1b3027f9.png\\\",\\\"https://www.gstatic.com/lamda/images/app_upsell/carousel_panel_5_cbf4bf87eb526457d659d.png\\\",\\\"https://www.gstatic.com/lamda/images/app_upsell/carousel_panel_6_31943dccf4ec068d3c743.png\\\"]]\"]],[45630433,null,true,null,null,null,\"nnRHBc\"],[45428989,null,true,null,null,null,\"t8IUAd\"],[45663648,null,false,null,null,null,\"yGlQMd\"],[45661419,null,true,null,null,null,\"aK7V4\"],[45680096,null,false,null,null,null,\"aG2CSb\"],[45650214,null,true,null,null,null,\"mP2GQ\"],[45666037,null,true,null,null,null,\"XeMQQc\"],[45661214,null,true,null,null,null,\"Pv3fad\"],[45645024,null,false,null,null,null,\"TE62U\"],[45684100,null,null,null,null,null,\"fbyN6e\",[\"[]\"]],[45428920,null,true,null,null,null,\"DgAwnd\"],[45668251,null,true,null,null,null,\"aV2m1b\"],[45613712,null,true,null,null,null,\"IuIggc\"],[45428824,null,true,null,null,null,\"cFmmyb\"],[45656803,null,true,null,null,null,\"kgpxZe\"],[45620714,null,true,null,null,null,\"uIcTAf\"],[45626094,null,null,null,\"\",null,\"scLJRb\"],[45640357,null,true,null,null,null,\"whET8e\"],[45428789,null,true,null,null,null,\"zoiHab\"],[45668808,null,true,null,null,null,\"ZmYkuc\"],[45664451,null,true,null,null,null,\"hfcwRb\"],[45647122,null,true,null,null,null,\"rZ38ie\"],[45616760,null,true,null,null,null,\"wHuqtd\"],[45675841,null,true,null,null,null,\"grP9wb\"],[45631039,262144,null,null,null,null,\"KVwAie\"],[45634997,null,true,null,null,null,\"wkaXqb\"],[45688511,null,false,null,null,null,\"mqji9d\"],[45639094,null,false,null,null,null,\"BO1AN\"],[45620331,null,true,null,null,null,\"HDaRV\"],[45429003,null,true,null,null,null,\"GjRToc\"],[45638870,null,null,null,\"https://one.google.com/aipremium/invite?utm_source\\u003dgemini\\u0026utm_medium\\u003dweb\\u0026utm_campaign\\u003dinvite_friends\",null,\"UGDWb\"],[45668342,null,true,null,null,null,\"tgBNpd\"],[45429040,null,false,null,null,null,\"PXGHjb\"],[45675121,null,false,null,null,null,\"NhNBGf\"],[45654979,null,true,null,null,null,\"dueZdc\"],[45624306,null,true,null,null,null,\"hZYbfc\"],[45667518,null,true,null,null,null,\"Kh8MPe\"],[45585392,null,false,null,null,null,\"uOvQO\"],[45683889,5,null,null,null,null,\"BThAp\"],[45615697,null,true,null,null,null,\"n1vvS\"],[45618044,null,true,null,null,null,\"m7CEF\"],[45634549,null,true,null,null,null,\"aL3Dtd\"],[45618950,null,true,null,null,null,\"wpPj7e\"],[45460077,null,true,null,null,null,\"DDUfIf\"],[45623225,null,false,null,null,null,\"OegeKc\"],[45428994,null,false,null,null,null,\"Zk5Jrf\"],[45428804,null,false,null,null,null,\"MCu3Xb\"],[45657988,null,true,null,null,null,\"tGbQQb\"],[45688838,null,null,null,\"\",null,\"Mfc8Ad\"],[45658294,null,false,null,null,null,\"Bh1Cpe\"],[45532085,null,true,null,null,null,\"ysJ8Kd\"],[45625530,null,true,null,null,null,\"bCVmgd\"],[45679591,null,false,null,null,null,\"nm3tUd\"],[45622524,null,true,null,null,null,\"gwBtk\"],[45649898,null,false,null,null,null,\"ybIVD\"],[45673891,null,false,null,null,null,\"gMlrye\"],[45681312,null,true,null,null,null,\"wLl77c\"],[45647137,null,true,null,null,null,\"bONRf\"],[45683635,null,false,null,null,null,\"EceMjd\"],[45622196,null,true,null,null,null,\"lSlABc\"],[45624285,null,true,null,null,null,\"lDQInd\"],[45629203,null,true,null,null,null,\"nhg6A\"],[45656005,null,true,null,null,null,\"DNTFub\"],[45670035,null,true,null,null,null,\"z1JEdc\"],[45642725,null,true,null,null,null,\"fqPYgf\"],[45665850,null,true,null,null,null,\"BZorIb\"],[45681005,50,null,null,null,null,\"kSdfnd\"],[45634074,null,false,null,null,null,\"wHZ85d\"],[45642397,null,false,null,null,null,\"B2sk8c\"],[45647763,null,false,null,null,null,\"D932c\"],[45689609,null,null,null,null,null,\"LWpc9e\",[\"[]\"]],[45683039,null,false,null,null,null,\"TvoGb\"],[45643063,null,false,null,null,null,\"gdPvQb\"],[45654176,null,null,null,\"\",null,\"U2LOE\"],[45671643,null,false,null,null,null,\"dmhmOc\"],[45460527,null,true,null,null,null,\"sFEMxd\"],[45684130,null,true,null,null,null,\"tl65Me\"],[45642396,null,false,null,null,null,\"jF5FHb\"],[45620735,null,true,null,null,null,\"ErCsNb\"],[45626772,null,false,null,null,null,\"wxXPsf\"],[45681882,null,true,null,null,null,\"L9O2J\"],[45659514,null,true,null,null,null,\"NYEDYc\"],[45428820,null,null,null,\"\",null,\"SYkNib\"],[45630514,null,false,null,null,null,\"iwoQ0d\"],[45632647,null,true,null,null,null,\"MlNyCe\"],[45428802,null,null,null,\"long\",null,\"fdxTnc\"],[45429006,600,null,null,null,null,\"nwVHb\"],[45617159,null,true,null,null,null,\"vY239b\"],[45622440,7,null,null,null,null,\"fMrGLc\"],[45680286,null,false,null,null,null,\"aWSlo\"],[45689409,null,false,null,null,null,\"VaMLsd\"],[45633389,null,false,null,null,null,\"p7VUac\"],[45671165,null,true,null,null,null,\"cQ481e\"],[45673253,null,false,null,null,null,\"o35w0\"],[45682306,null,false,null,null,null,\"NtAvVe\"],[45532353,null,true,null,null,null,\"MWSZEd\"],[45428943,null,true,null,null,null,\"uyWy2b\"],[45670621,null,false,null,null,null,\"c6RXZd\"],[45686692,null,false,null,null,null,\"zIaAvf\"],[45428801,null,null,null,\"A\",null,\"uzRZnf\"],[45666994,null,true,null,null,null,\"iOlkgb\"],[45664100,null,false,null,null,null,\"YvYm9b\"],[45630970,null,true,null,null,null,\"CiX7Ye\"],[45654883,null,false,null,null,null,\"iO1smb\"],[45654145,0,null,null,null,null,\"eU4HS\"],[45655382,null,true,null,null,null,\"Sitagf\"],[45678004,null,false,null,null,null,\"Jiz9tc\"],[45677631,null,true,null,null,null,\"doudtd\"],[45612622,null,true,null,null,null,\"M7lMec\"],[45683806,null,false,null,null,null,\"MgWghe\"],[45630801,null,true,null,null,null,\"ioVFB\"],[45641800,null,false,null,null,null,\"CVvMz\"],[45630315,null,false,null,null,null,\"MfBd0c\"],[45428812,null,false,null,null,null,\"yXter\"],[45675188,null,true,null,null,null,\"MJNFvc\"],[45681822,null,false,null,null,null,\"TwrtIf\"],[45428771,null,true,null,null,null,\"NDdEFe\"],[45430892,5,null,null,null,null,\"EoecI\"],[45681648,null,false,null,null,null,\"NGh9Se\"],[45630517,null,true,null,null,null,\"qfohu\"],[45645457,null,true,null,null,null,\"nkZuze\"],[45430100,null,false,null,null,null,\"EPOeff\"],[45619561,null,false,null,null,null,\"CCkOlc\"],[45532323,null,false,null,null,null,\"fcYmx\"],[45666388,null,false,null,null,null,\"ZGvoj\"],[45684135,null,false,null,null,null,\"KoNO\"],[45680680,null,true,null,null,null,\"u5F2Pb\"],[45642259,null,true,null,null,null,\"z3UR2e\"],[45676695,null,true,null,null,null,\"oTbWxe\"],[45656894,null,false,null,null,null,\"VR1Llb\"],[45428768,null,false,null,null,null,\"Gpdzvb\"],[45639839,null,false,null,null,null,\"VUquDb\"],[45649882,null,true,null,null,null,\"VUgSAe\"],[45642449,180000,null,null,null,null,\"RlhfHd\"],[45428980,null,true,null,null,null,\"EPwnqf\"],[45428947,null,true,null,null,null,\"GZkcu\"],[45639768,null,null,null,\"https://content.googleapis.com\",null,\"cPm7U\"],[45676455,null,false,null,null,null,\"hkv6ve\"],[45655702,null,false,null,null,null,\"Rbrg4c\"],[45617372,null,true,null,null,null,\"LWQ5tc\"],[45477171,null,false,null,null,null,\"zMhdY\"],[45428988,10000,null,null,null,null,\"bsXk5d\"],[45681899,null,true,null,null,null,\"Cbm6wb\"],[45664056,null,true,null,null,null,\"F30Yud\"],[45676406,null,null,null,\"comment-tag\",null,\"TrhWHf\"],[45626891,null,true,null,null,null,\"pD7Rnb\"],[45669839,null,true,null,null,null,\"PaUFSd\"],[45428957,null,false,null,null,null,\"KmCOEe\"],[45428817,null,null,null,\"\",null,\"FT8rIc\"],[45477761,null,true,null,null,null,\"f8Zmxe\"],[45650128,null,false,null,null,null,\"vMQCad\"],[45630519,null,true,null,null,null,\"HABUzf\"],[45664203,null,false,null,null,null,\"KvGz9c\"],[45620935,null,false,null,null,null,\"jLH4af\"],[45625458,null,true,null,null,null,\"WCZJ7\"],[45428970,null,true,null,null,null,\"bMcUgd\"],[45630680,null,false,null,null,null,\"g6qpod\"],[45674830,null,false,null,null,null,\"ItPpwd\"],[45657367,null,true,null,null,null,\"wdbE8d\"],[45630761,null,null,0.4,null,null,\"jGwg3d\"],[45649952,null,false,null,null,null,\"iKZfHb\"],[45671653,null,false,null,null,null,\"bqqQdd\"],[45632999,null,false,null,null,null,\"XL3Q1c\"],[45685562,null,true,null,null,null,\"XiHahe\"],[45532161,null,true,null,null,null,\"W4D56c\"],[45428821,null,null,null,\"\",null,\"V4RVX\"],[45654976,null,true,null,null,null,\"pDRG9c\"],[45631335,null,true,null,null,null,\"Eqvej\"],[45681082,30,null,null,null,null,\"H2ASHf\"],[45637468,null,true,null,null,null,\"QxwYjb\"],[45684576,null,true,null,null,null,\"Ww0HTb\"],[45646323,null,true,null,null,null,\"jgPhvb\"],[45687420,1073741824,null,null,null,null,\"Ni8WYb\"],[45668082,null,false,null,null,null,\"nqrHib\"],[45668816,null,false,null,null,null,\"gQZOGe\"],[45650728,null,false,null,null,null,\"DxrTme\"],[45659768,null,true,null,null,null,\"JlLAxb\"],[45642307,null,false,null,null,null,\"qp67wb\"],[45667648,null,false,null,null,null,\"GxMeFb\"],[45676173,null,true,null,null,null,\"oNb1ub\"],[45672226,null,true,null,null,null,\"QbWyB\"],[45428992,null,false,null,null,null,\"wgf6dc\"],[45646986,null,false,null,null,null,\"K0udEb\"],[45678095,null,true,null,null,null,\"LXdCuc\"],[45669316,null,true,null,null,null,\"JIGkec\"],[45615023,null,null,null,\"linear\",null,\"z9h8tc\"],[45428888,null,false,null,null,null,\"D0xBnf\"],[45685588,null,true,null,null,null,\"bs3aQc\"],[45687795,null,false,null,null,null,\"BLrBBf\"],[45684312,null,false,null,null,null,\"AOY1P\"],[45677808,null,false,null,null,null,\"R9Yvqf\"],[45629789,600,null,null,null,null,\"ra2Xg\"],[45689552,null,null,null,\"\",null,\"E7OUT\"],[45670485,null,null,null,\"googlers@google.com\",null,\"qYzhlb\"],[45676498,null,true,null,null,null,\"n0ePZd\"],[45642727,null,true,null,null,null,\"eEzwGe\"],[45429052,null,false,null,null,null,\"Dqw65b\"],[45635300,null,true,null,null,null,\"z9pTF\"],[45428875,null,false,null,null,null,\"UivFTe\"],[45684132,null,true,null,null,null,\"ROQXmf\"],[45658689,null,true,null,null,null,\"FArsEf\"],[45675848,null,false,null,null,null,\"BLFhfe\"],[45649949,null,false,null,null,null,\"YiFkXc\"],[45686826,null,false,null,null,null,\"Ju4Red\"],[45585466,null,false,null,null,null,\"kbk4Dc\"],[45668486,null,null,null,\"Done. Feel free to ask me follow-up questions or request changes.\",null,\"Ae1tie\"],[45428986,null,true,null,null,null,\"sutdVd\"],[45428964,null,null,null,null,null,\"wriWf\",[\"[[1,259200000,2,604800000,3,2592000000]]\"]],[45688939,null,null,null,\"\",null,\"OPV09c\"],[45532017,null,false,null,null,null,\"TH5Fqc\"],[45689927,null,false,null,null,null,\"N6On5c\"],[45680504,null,true,null,null,null,\"TJClCb\"],[45652199,null,true,null,null,null,\"N3vjn\"],[45428861,null,true,null,null,null,\"iyWZuc\"],[45674738,null,false,null,null,null,\"O4pBkf\"],[45680903,null,false,null,null,null,\"mRU66e\"],[45627975,null,true,null,null,null,\"wYiFJ\"],[45666024,null,null,null,\"\",null,\"cTodqc\"],[45428917,null,false,null,null,null,\"kUw4sd\"],[45679481,null,false,null,null,null,\"SB8aqe\"],[45670130,null,false,null,null,null,\"Im8JOb\"],[45687097,null,false,null,null,null,\"PKDvae\"],[45628557,null,true,null,null,null,\"VQtLZe\"],[45688692,null,false,null,null,null,\"Wir9qd\"],[45672007,null,false,null,null,null,\"AS9xrc\"],[45687419,null,false,null,null,null,\"dzBSnf\"],[45633324,null,false,null,null,null,\"EAU6Ac\"],[45688575,null,false,null,null,null,\"lJFMpd\"],[45615457,null,null,null,\"€\",null,\"DDN3Kd\"],[45430330,null,false,null,null,null,\"VdXbxc\"],[45658016,null,false,null,null,null,\"wEvU0b\"],[45626370,null,true,null,null,null,\"kPNM5e\"],[45630504,null,null,0.9,null,null,\"RNdSGb\"],[45650790,null,false,null,null,null,\"tItPgb\"],[45687099,null,true,null,null,null,\"vTKPC\"],[45673987,null,true,null,null,null,\"vT30Qe\"],[45429641,null,false,null,null,null,\"o6i9Fe\"],[45644209,null,true,null,null,null,\"jPKHKe\"],[45648568,null,false,null,null,null,\"MHGsHf\"],[45652190,null,true,null,null,null,\"gxQepe\"],[45545492,null,true,null,null,null,\"S9j2mc\"],[45656277,null,true,null,null,null,\"O2Ndme\"],[45651019,null,true,null,null,null,\"B0Sw5d\"],[45626156,null,null,null,\"\",null,\"zi5kfe\"],[45619796,null,false,null,null,null,\"Itucn\"],[45688943,null,null,null,\"RESEARCH_TRAVEL◊◊RESEARCH_LIFESTYLE◊◊RESEARCH_GROWTH◊◊RESEARCH_SHOPPING◊◊RESEARCH_LEARNING◊◊RESEARCH_EVENTS◊◊RESEARCH_LOCAL◊◊RESEARCH_HEALTH◊◊RESEARCH_FINANCE◊◊RESEARCH_MARKET◊◊RESEARCH_BUSINESS◊◊RESEARCH_SCIENCE_TECHNOLOGY◊\",null,\"DWQZue\"],[45428985,null,false,null,null,null,\"c2ASrf\"],[45685834,null,false,null,null,null,\"k5zNRc\"],[45641095,null,true,null,null,null,\"qowave\"],[45598641,null,false,null,null,null,\"PBrABf\"],[45641734,null,true,null,null,null,\"owDRdc\"],[45627794,null,false,null,null,null,\"MIPaub\"],[45615897,null,null,null,\"Try for 2 months, at no charge\",null,\"K3Bzre\"],[45429045,null,true,null,null,null,\"SRbmLd\"],[45661215,null,false,null,null,null,\"vDcVz\"],[45642211,null,true,null,null,null,\"cA2Srd\"],[45626064,2,null,null,null,null,\"b27xs\"],[45688941,null,null,null,\"\",null,\"BedaFb\"],[45685548,null,false,null,null,null,\"feQLcd\"],[45668409,null,true,null,null,null,\"sVqZ9d\"],[45663042,null,true,null,null,null,\"GaRAXb\"],[45650192,null,true,null,null,null,\"ukScse\"],[45428981,null,true,null,null,null,\"NNDrGb\"],[45646397,null,false,null,null,null,\"D6Gm7c\"],[45611828,null,true,null,null,null,\"i3rE6b\"],[45683795,null,false,null,null,null,\"C3VKF\"],[45623467,null,true,null,null,null,\"EzBG9d\"],[45675547,null,true,null,null,null,\"i1pBVc\"],[45669213,null,true,null,null,null,\"pQUN7e\"],[45680906,null,false,null,null,null,\"Pfr35b\"],[45545695,null,null,null,\"https://one.google.com/explore-plan/gemini-advanced\",null,\"CJmWWb\"],[45617673,null,null,null,\"https://www.gstatic.com/lamda/images/app_upsell/apollo_launch_qr_code_9cfd6d7a0efb8fb8e817d.png\",null,\"ePjQRb\"],[45630752,null,true,null,null,null,\"gKERx\"],[45446528,null,true,null,null,null,\"VsvxJc\"],[45644454,null,true,null,null,null,\"tF6oCd\"],[45460354,null,false,null,null,null,\"f25R\"],[45628916,null,true,null,null,null,\"b1W7Ab\"],[45673774,null,false,null,null,null,\"ZVmxwf\"],[45655213,null,true,null,null,null,\"q9VoY\"],[45669548,null,false,null,null,null,\"hb4oCb\"],[45650729,null,false,null,null,null,\"Q9CG8e\"],[45627628,null,true,null,null,null,\"QZytud\"],[45662690,null,false,null,null,null,\"JAEDrc\"],[45531918,null,false,null,null,null,\"hJRDJe\"],[45679208,null,false,null,null,null,\"npEtfd\"],[45674255,null,false,null,null,null,\"JXWiAb\"],[45682625,null,true,null,null,null,\"ZVK3n\"],[45428884,null,true,null,null,null,\"M9slI\"],[45633859,null,false,null,null,null,\"LLnOXd\"],[45620792,null,false,null,null,null,\"QNBrOe\"],[45671034,null,false,null,null,null,\"yOyArf\"],[45668703,null,true,null,null,null,\"HvtfLc\"],[45689782,null,false,null,null,null,\"Sdhkxc\"],[45664101,null,false,null,null,null,\"XTN0p\"],[98188546,null,false,null,null,null,\"hz6ji\"],[45683313,null,false,null,null,null,\"lPI4Xc\"],[45667219,null,null,null,\"\",null,\"Lxkftb\"],[45428941,null,true,null,null,null,\"JhP9Ab\"],[45683522,null,false,null,null,null,\"vj27le\"],[45688101,null,false,null,null,null,\"Q4CyKc\"],[45674806,null,true,null,null,null,\"QFTjq\"],[45428823,null,true,null,null,null,\"N5iGOb\"],[45679581,null,false,null,null,null,\"PgJXd\"],[45661905,null,true,null,null,null,\"duL5Jf\"],[45629072,null,false,null,null,null,\"xjvQM\"],[45653751,null,false,null,null,null,\"mj594e\"],[45664094,null,true,null,null,null,\"WZhhjf\"],[45630073,null,true,null,null,null,\"YleaMe\"],[45677154,null,true,null,null,null,\"tjaKX\"],[45667659,null,false,null,null,null,\"SWI0Ef\"],[45683210,null,true,null,null,null,\"pDx67d\"],[45428866,null,false,null,null,null,\"KM8Uz\"],[45658669,null,true,null,null,null,\"ktbRrb\"],[45627539,null,false,null,null,null,\"suzTUc\"],[45646093,null,false,null,null,null,\"yVEDNe\"],[45683608,null,false,null,null,null,\"mjgQbc\"],[45428777,null,true,null,null,null,\"v0lRP\"],[45683072,null,false,null,null,null,\"lV390e\"],[45477170,null,false,null,null,null,\"qiMUy\"],[45638078,null,false,null,null,null,\"WW1Goc\"],[45661194,null,false,null,null,null,\"sjSx2d\"],[45638174,null,null,null,null,null,\"kVK2Mc\",[\"[]\"]],[45477876,null,true,null,null,null,\"NTvo4b\"],[45428834,null,false,null,null,null,\"eQe3le\"],[45532090,null,false,null,null,null,\"aoxKWe\"],[45618835,null,true,null,null,null,\"RnZ2Se\"],[45645379,null,false,null,null,null,\"uZHC2d\"],[45627419,null,true,null,null,null,\"h0Dxbd\"],[45660511,null,true,null,null,null,\"jXFhg\"],[45688099,null,false,null,null,null,\"ck7HNe\"],[45633959,null,false,null,null,null,\"URAbOb\"],[45681820,null,true,null,null,null,\"fR9NUe\"],[45625842,null,true,null,null,null,\"EJb54c\"],[45683577,null,false,null,null,null,\"ZP5V9e\"],[45460333,null,false,null,null,null,\"KsgoYe\"],[45687954,null,false,null,null,null,\"FV9XLd\"],[45632978,null,false,null,null,null,\"cnSgad\"],[45619247,null,true,null,null,null,\"LWo8Fc\"],[45616766,1100,null,null,null,null,\"xsqlac\"],[45667858,null,false,null,null,null,\"XN4ENb\"],[45635301,null,false,null,null,null,\"MdxZ4b\"],[45683691,null,true,null,null,null,\"b3yJRc\"],[45428831,null,false,null,null,null,\"hCWf3\"],[45585383,null,false,null,null,null,\"lGKrTc\"],[45688695,null,null,null,null,null,\"QtUyqd\",[\"[[\\\"1acf3172319789ce\\\",\\\"852fc722e6249d28\\\"]]\"]],[45686710,null,false,null,null,null,\"essA7d\"],[45640154,null,true,null,null,null,\"lyemed\"],[45679799,null,null,null,null,null,\"Ht9xpb\",[\"[[\\\"203e6bb81620bcfe\\\",\\\"2525e3954d185b3c\\\"]]\"]],[45428772,null,false,null,null,null,\"JJ9cyf\"],[45675822,null,true,null,null,null,\"Ue3dob\"],[45428953,null,null,null,\"\",null,\"Bsjw\"],[45641799,null,false,null,null,null,\"d5i0ub\"],[45618072,null,true,null,null,null,\"nLPBk\"],[45647155,null,true,null,null,null,\"wcmSuc\"],[45626774,null,true,null,null,null,\"QbK4zc\"],[45641739,null,true,null,null,null,\"fwj5nb\"],[45634115,null,true,null,null,null,\"afNFdc\"],[45532352,null,true,null,null,null,\"VEx3Ib\"],[45625153,null,false,null,null,null,\"JyPzY\"],[45642726,null,true,null,null,null,\"ic68We\"],[45428874,null,true,null,null,null,\"wR5Wsf\"],[45674187,null,false,null,null,null,\"SiXrae\"],[45677359,null,false,null,null,null,\"Y3Xc4b\"],[45655706,null,false,null,null,null,\"gcJh\"],[45631646,3,null,null,null,null,\"ajwtab\"],[45627984,null,false,null,null,null,\"ZTQ6Ke\"],[45681081,30,null,null,null,null,\"CNq7Ic\"],[45459828,null,null,null,\"2024.05.29\",null,\"nkd7Te\"],[45651304,null,false,null,null,null,\"O0bLFe\"],[45621513,null,true,null,null,null,\"jRG5rf\"],[45477793,8,null,null,null,null,\"iypwud\"],[45688899,null,false,null,null,null,\"BxY8yc\"],[45638077,null,false,null,null,null,\"tvaRD\"],[45690320,null,false,null,null,null,\"Skelud\"],[45428815,null,null,null,\"\",null,\"EnxeXb\"],[45655994,null,true,null,null,null,\"DZPI7c\"],[45640343,null,true,null,null,null,\"NrhbTb\"],[45650458,null,false,null,null,null,\"hzAOpb\"],[45676145,2000,null,null,null,null,\"uJNL6\"],[45674950,null,false,null,null,null,\"YYGNDf\"],[45677130,null,false,null,null,null,\"t0fATc\"],[45625713,null,null,null,\"\",null,\"nkTr4\"],[45643225,2000,null,null,null,null,\"zIbDJc\"],[45663532,1000,null,null,null,null,\"yu3Mad\"],[45461824,null,false,null,null,null,\"F1uEqc\"],[45619412,null,false,null,null,null,\"Irdmyb\"],[45638146,null,true,null,null,null,\"vAhzOe\"],[45679943,null,true,null,null,null,\"JpYeNb\"],[45631752,null,null,null,\"https://chromebook.com/perks?id\\u003dgamgee.2024\",null,\"BcA28\"],[45638416,null,null,null,\"\",null,\"INNRbd\"],[45428794,null,false,null,null,null,\"qDfgef\"],[45658436,null,true,null,null,null,\"QRNbKc\"],[45428949,null,true,null,null,null,\"CyJqIe\"],[45653904,null,true,null,null,null,\"Pge0Wd\"],[45462628,null,false,null,null,null,\"eozznb\"],[45674218,null,null,10,null,null,\"PPauEb\"],[45630192,null,true,null,null,null,\"Vx3Fm\"],[45633323,null,false,null,null,null,\"XFB6kd\"],[45671560,null,false,null,null,null,\"byfXLe\"],[45639578,null,true,null,null,null,\"aqvHF\"],[45614913,null,false,null,null,null,\"adYtYe\"],[45428769,null,true,null,null,null,\"dy8Dc\"],[45429046,null,true,null,null,null,\"USmOid\"],[45683360,null,false,null,null,null,\"v1iMjf\"],[45668976,null,true,null,null,null,\"xQHZC\"],[45634164,null,true,null,null,null,\"GCNIwc\"],[45428827,null,null,null,\"autoclose\",null,\"s2Th7b\"],[45624466,null,false,null,null,null,\"CSvDLd\"],[45688837,null,null,null,\"\",null,\"QSMwke\"],[45649588,null,false,null,null,null,\"jnbtqd\"],[45685231,null,false,null,null,null,\"tCSzG\"],[45633345,null,false,null,null,null,\"jmhppe\"],[45684193,null,true,null,null,null,\"Oyjh7\"],[45642724,null,true,null,null,null,\"q9C59\"],[45428869,null,true,null,null,null,\"cfLRs\"],[45634252,null,false,null,null,null,\"F7Gbud\"],[45429038,null,false,null,null,null,\"W2GHkb\"],[45686312,null,true,null,null,null,\"id1sye\"],[45628133,null,true,null,null,null,\"mZbSlb\"],[45637598,null,true,null,null,null,\"NXtyLc\"],[45639767,null,null,null,\"https://docs.google.com\",null,\"qBx4Ze\"],[45642305,null,true,null,null,null,\"qHrkBb\"],[45678333,null,true,null,null,null,\"ExMQhc\"],[45683362,null,false,null,null,null,\"hUkRH\"],[45428813,null,false,null,null,null,\"GjjeKc\"],[45460271,null,true,null,null,null,\"KtJoBd\"],[45642398,null,false,null,null,null,\"iYUsJf\"],[45670772,null,false,null,null,null,\"OBa07e\"],[45428775,600,null,null,null,null,\"wyKPNc\"],[45429044,null,true,null,null,null,\"TdcgFd\"],[45651022,null,true,null,null,null,\"ztqUTe\"],[45684758,null,true,null,null,null,\"sbtwzb\"],[45658739,null,true,null,null,null,\"D3wVnd\"],[45428830,null,false,null,null,null,\"DrVhcc\"],[45428973,null,true,null,null,null,\"cb2MTe\"],[45668754,2000,null,null,null,null,\"cBnPnd\"],[45652198,null,true,null,null,null,\"pQxRIb\"],[45642611,null,false,null,null,null,\"TM2czc\"],[45638173,null,null,null,null,null,\"wxbFQb\",[\"[[181501,223238,188576,241573]]\"]],[45624168,null,true,null,null,null,\"Gyeqyd\"],[45429007,null,true,null,null,null,\"X5S6nc\"],[45677000,null,true,null,null,null,\"EW62Gf\"],[45617354,null,true,null,null,null,\"x2Cv4d\"],[45637471,null,null,null,\"https://admin.google.com/ServiceNotAllowed?application\\u003d47208553126\",null,\"elHr8e\"],[45678680,null,true,null,null,null,\"pQEM8\"],[45651955,null,true,null,null,null,\"Kya1Df\"],[45689328,20,null,null,null,null,\"Vlv7Ke\"],[45616365,null,false,null,null,null,\"rBiRhe\"],[45676600,null,false,null,null,null,\"c0bNEd\"],[45477509,null,true,null,null,null,\"DRfend\"],[45642306,null,true,null,null,null,\"GpYnNc\"],[45459957,null,false,null,null,null,\"jaafxe\"],[45682772,null,false,null,null,null,\"iN7W4e\"],[45653917,null,false,null,null,null,\"hmqb0e\"],[45686639,null,false,null,null,null,\"NcAbVb\"],[45651303,null,false,null,null,null,\"lQiOme\"],[45428818,null,null,null,\"\",null,\"RShSyd\"],[45428782,null,true,null,null,null,\"IDzJye\"],[45674736,null,true,null,null,null,\"OrN5Ee\"],[45673469,null,false,null,null,null,\"rCVHAc\"],[45642408,null,true,null,null,null,\"Caqjic\"],[45658308,null,true,null,null,null,\"qQnP3\"],[45676360,null,false,null,null,null,\"L0SaW\"],[45674425,null,null,-1,null,null,\"qPQPlf\"],[45665806,null,true,null,null,null,\"XJnky\"],[45428881,null,true,null,null,null,\"hfvOQ\"],[45682161,null,false,null,null,null,\"M8lDab\"],[45428819,null,null,null,\"\",null,\"ciqDjf\"],[45667793,null,false,null,null,null,\"Dz9Knf\"],[45664528,null,true,null,null,null,\"oHtCi\"],[45430702,null,false,null,null,null,\"u72BCb\"],[45669616,null,false,null,null,null,\"WsMQI\"],[45428871,null,true,null,null,null,\"u2B5ld\"],[45675847,null,true,null,null,null,\"WEFcfd\"],[45631438,null,false,null,null,null,\"zgT1We\"],[45672275,null,true,null,null,null,\"Hnma4e\"],[45667293,null,true,null,null,null,\"PU7am\"],[45656261,null,false,null,null,null,\"Dlzgpb\"],[45531052,10,null,null,null,null,\"oIQuKd\"],[45661424,null,true,null,null,null,\"FFfb5b\"],[45678542,null,true,null,null,null,\"fCvTie\"],[45675439,null,true,null,null,null,\"L8kkBc\"],[45639528,null,false,null,null,null,\"aSBGMc\"],[45619084,null,true,null,null,null,\"qsGtYd\"],[45620361,null,true,null,null,null,\"S56aEc\"],[45660144,null,null,null,null,null,\"N83Imf\",[\"[\\\"INVALID\\\"]\"]],[45655023,null,false,null,null,null,\"Ugmbld\"],[45688944,null,null,null,\"WRITE_EMAIL◊◊WRITE_STORY◊◊WRITE_REVIEW◊◊WRITE_SPEECH◊◊WRITE_ESSAY◊◊WRITE_REPORT◊◊WRITE_LESSON_PLAN◊◊WRITE_COVER_LETTER◊◊WRITE_RESUME◊◊WRITE_SCRIPT◊◊WRITE_POEM◊◊WRITE_PLAN◊◊WRITE_PRESENTATION◊◊WRITE_CODE◊\",null,\"ZE4B5c\"],[45637485,null,true,null,null,null,\"QFLQEe\"],[45687670,null,false,null,null,null,\"KjOezc\"],[45531325,null,true,null,null,null,\"dtDaWb\"],[45646562,null,true,null,null,null,\"T2iLLc\"],[45677317,null,true,null,null,null,\"DpdWDc\"],[45625531,null,true,null,null,null,\"q4AdCc\"],[45614572,null,false,null,null,null,\"l3A20c\"],[45683876,1500,null,null,null,null,\"wwybJe\"],[45666923,null,false,null,null,null,\"igMmA\"],[45658303,2592000,null,null,null,null,\"rQAXid\"],[45689060,null,false,null,null,null,\"iC7d2\"],[45637828,null,false,null,null,null,\"Mo7Tee\"],[45649880,null,false,null,null,null,\"Fievie\"],[45677155,3600000,null,null,null,null,\"gqGXWb\"],[45671200,null,true,null,null,null,\"JykXQc\"],[45631223,null,true,null,null,null,\"unvZid\"],[45616226,null,null,null,\"https://www.gstatic.com/lamda/images/app_upsell/get_app_qrcode_3c1080c06ee3a68045d0b.png\",null,\"LJ8CPd\"],[45641388,100,null,null,null,null,\"qVIbnc\"],[45477335,null,null,null,\"generic\",null,\"R3TA7\"],[45671120,null,true,null,null,null,\"CmHsJe\"],[45615399,null,null,null,\"https://forms.gle/YJJdSVYpJ9V3Jjng7\",null,\"gMKKGd\"],[45644070,null,false,null,null,null,\"H5E5Te\"],[45676599,null,false,null,null,null,\"Hlifqb\"],[45678977,null,false,null,null,null,\"K0LEld\"],[45672236,null,null,null,\"https://www.gstatic.com/lamda/images/app_upsell/get_app_qrcode_desktop_v3_1636471d50b52cbc2db74.png\",null,\"v6TN1c\"],[45448123,null,true,null,null,null,\"sSWVUb\"],[45676331,null,false,null,null,null,\"wbvind\"],[45674270,null,false,null,null,null,\"rjd1F\"],[45684133,null,true,null,null,null,\"twp3Ue\"],[45679325,null,true,null,null,null,\"RGo7n\"],[45654780,null,false,null,null,null,\"WdSBVe\"],[45639348,null,false,null,null,null,\"IltEW\"],[45660995,null,true,null,null,null,\"qlTVdd\"],[45478045,null,true,null,null,null,\"sHhZGb\"],[45651911,null,true,null,null,null,\"cWJ1pe\"],[45616764,600,null,null,null,null,\"ibjGO\"],[45428950,null,false,null,null,null,\"z5P61b\"],[45650900,null,true,null,null,null,\"lrvEbf\"],[45621702,null,null,null,\"\",null,\"VmVS0\"],[45674882,null,false,null,null,null,\"i5hXDd\"],[45428979,null,null,null,\",EXTENSIONS\",null,\"xXJfxd\"],[45626771,null,false,null,null,null,\"VzIao\"],[45629941,null,null,null,\"https://gemini.google.com/app/download/mobile?android-min-version\\u003d301356232\\u0026ios-min-version\\u003d322.0\\u0026is_sa\\u003d1\\u0026campaign_id\\u003dmweb_upsell_android\\u0026utm_source\\u003dmweb_upsell\\u0026utm_medium\\u003dproduct_promo\\u0026utm_campaign\\u003dmweb_upsell_android\\u0026pt\\u003d9008\\u0026mt\\u003d8\\u0026ct\\u003dp-growth-product-mweb-upsell\",null,\"RoyRSe\"],[45614467,null,false,null,null,null,\"nZg1xf\"],[45531058,2,null,null,null,null,\"WZhdjc\"],[45677001,null,false,null,null,null,\"ucmyAf\"],[45683359,null,false,null,null,null,\"m60RAe\"],[45622106,604800,null,null,null,null,\"zIUTof\"],[45461066,null,true,null,null,null,\"rJo8cb\"],[45630548,null,true,null,null,null,\"UWAfDc\"],[45531268,null,true,null,null,null,\"AcM3Jb\"],[45626796,null,false,null,null,null,\"bg6Boc\"],[45655698,null,false,null,null,null,\"l72XSd\"],[45632603,null,true,null,null,null,\"UcAI2b\"],[45428814,null,null,null,\"\",null,\"NlFqId\"],[45459630,null,null,null,\"1.0 Pro\",null,\"uBcNQb\"],[45614125,null,true,null,null,null,\"gFLIS\"],[45622268,null,false,null,null,null,\"Njmbvb\"],[45619022,null,false,null,null,null,\"V2Lb8b\"],[45648567,null,false,null,null,null,\"XAsB7\"],[45683692,null,false,null,null,null,\"Gs3h6d\"],[45653723,null,false,null,null,null,\"UxJxc\"],[45685407,null,true,null,null,null,\"VLRMub\"],[45684998,null,false,null,null,null,\"FkkOw\"],[45477333,null,null,null,\"A\",null,\"Jhpsjf\"],[45643897,null,false,null,null,null,\"mpCNef\"],[45478132,null,true,null,null,null,\"iJ0Jgc\"],[45630762,1024,null,null,null,null,\"vJsOef\"],[45681751,null,true,null,null,null,\"T2645b\"],[45659674,null,true,null,null,null,\"hKW5p\"],[45611950,null,false,null,null,null,\"ZQzpYd\"],[45663628,null,false,null,null,null,\"BwBPeb\"],[45679696,null,true,null,null,null,\"M4927b\"],[45675538,null,false,null,null,null,\"CewW3e\"],[45650149,null,true,null,null,null,\"OBkBAc\"],[45685130,null,true,null,null,null,\"fbOF4d\"],[45685971,null,false,null,null,null,\"nj5MI\"],[45630697,null,false,null,null,null,\"jryiee\"],[45687803,null,false,null,null,null,\"JFJCde\"],[45651442,null,false,null,null,null,\"t15u8\"],[45428862,null,true,null,null,null,\"Q3WW5d\"],[45648566,null,true,null,null,null,\"fkga1c\"],[45655940,null,false,null,null,null,\"qZMy3c\"],[45659027,null,true,null,null,null,\"H7axre\"],[45531293,null,false,null,null,null,\"NjB72d\"],[45430437,null,true,null,null,null,\"zhrBWb\"],[45642612,null,false,null,null,null,\"NO97bb\"],[45671410,null,true,null,null,null,\"ApRxN\"],[45663068,null,false,null,null,null,\"lcVcV\"],[45681543,null,false,null,null,null,\"CddSpe\"],[45639199,null,false,null,null,null,\"IpmKgc\"],[45676213,null,true,null,null,null,\"QSAkk\"],[45684909,null,null,null,null,null,\"i3pG5e\",[\"[]\"]],[45428803,null,null,null,\"generic\",null,\"su0vJe\"],[45651020,null,true,null,null,null,\"ICxYff\"],[45644532,null,false,null,null,null,\"QWoXUb\"],[45476436,null,false,null,null,null,\"RGVN0\"],[45428998,null,false,null,null,null,\"Z8LnKf\"],[45459555,null,false,null,null,null,\"Imeoqb\"],[45532120,null,true,null,null,null,\"Zw3Lfc\"],[45616003,null,false,null,null,null,\"vnHwMb\"],[45689182,null,false,null,null,null,\"KW30md\"],[45428958,null,null,null,\"\",null,\"ZQkGbe\"],[45658319,null,true,null,null,null,\"z4NcDc\"],[45653427,null,false,null,null,null,\"VE8Dfc\"],[45664529,null,true,null,null,null,\"wYgqJc\"],[45623469,null,true,null,null,null,\"uMJj9\"],[45663256,null,false,null,null,null,\"pJvZO\"],[45679957,null,true,null,null,null,\"UNTxNb\"],[45428773,null,true,null,null,null,\"PpjYh\"],[45428806,null,null,null,null,null,\"Iwc3f\",[\"[[173898,187627,204702,206152]]\"]],[45674395,null,true,null,null,null,\"cqXpNe\"],[45622289,null,false,null,null,null,\"TpSYq\"],[45668807,null,false,null,null,null,\"EQjvJ\"],[45678005,null,false,null,null,null,\"i9Zejb\"],[45639311,null,false,null,null,null,\"i9N3Mb\"],[45654709,null,false,null,null,null,\"VHFdqb\"],[45639372,null,true,null,null,null,\"mqSAFb\"],[45630434,null,true,null,null,null,\"Rjuisd\"],[45462946,null,false,null,null,null,\"qTUBL\"],[45683253,null,false,null,null,null,\"nIIHue\"],[45677877,null,true,null,null,null,\"ek2bBf\"],[45666660,null,null,null,\"https://apps.apple.com/app/google-gemini/id6477489729?\\u0026pt\\u003d9008\\u0026ct\\u003dmweb_marketing_lp\\u0026mt\\u003d8\",null,\"r4nLSe\"],[45428791,null,false,null,null,null,\"GXtH5b\"],[45613575,null,false,null,null,null,\"uP2Ijd\"],[45684535,null,true,null,null,null,\"e2SHJe\"],[45615073,null,true,null,null,null,\"G0jBvf\"],[45667372,null,null,null,null,null,\"ypakxf\",[\"[[\\\"e5a44cb1dae2b489\\\",\\\"cd472a54d2abba7e\\\",\\\"6cb69cd4b6cae77d\\\",\\\"0e0f3a3749fc6a5c\\\",\\\"d1f674dda82d1455\\\"]]\"]],[45617595,null,null,null,\"en,en-gb,ko,ja,ru,de,fr,zh,zh-CN,zh-TW,es,es-419,es-MX,it,nl,pl,pt,pt-BR,pt-PT,id,th,hi,vi,tr,ar,ar-001,ar-EG,ar-SA,bn,sv,cs,hu,el,fa,ro,da,sk,fi,uk,no,bg,sr,he,hr,lt,sl,et,iw,lv,sw,te,ta,gu,kn,ml,mr,ur,en-AU,en-IN,nl-BE,es-ES,en-CA,fr-CA\",null,\"Zm72Wd\"],[45666045,null,true,null,null,null,\"eHvkc\"],[45676359,null,true,null,null,null,\"D5lzsf\"],[45653518,null,false,null,null,null,\"qongeb\"],[45679796,null,null,null,null,null,\"ZmWwYd\",[\"[[\\\"f8f8f5ea629f5d37\\\"]]\"]],[45637280,null,true,null,null,null,\"f76Foe\"],[45677382,null,true,null,null,null,\"k7RK1e\"],[45681591,null,false,null,null,null,\"XybjPc\"],[45675333,60,null,null,null,null,\"IHiHaf\"],[45650070,null,false,null,null,null,\"lpaGZc\"],[45619815,null,false,null,null,null,\"mxIlVe\"],[45664208,null,true,null,null,null,\"OK1JBd\"],[45641965,null,true,null,null,null,\"WBhhEd\"],[45639226,null,false,null,null,null,\"sfShFf\"],[45668737,null,false,null,null,null,\"tyC5af\"],[45428836,null,false,null,null,null,\"GfjHye\"],[45476402,null,false,null,null,null,\"WTktif\"],[45677946,null,false,null,null,null,\"tMwzuc\"],[45674219,null,true,null,null,null,\"QRgo5\"],[45428987,null,false,null,null,null,\"AhYsMd\"],[45428865,null,false,null,null,null,\"Xd8Xqd\"],[45612174,null,false,null,null,null,\"ISQcPb\"],[45684647,null,true,null,null,null,\"CE56L\"],[45460353,null,true,null,null,null,\"fuuyUd\"],[45677469,null,false,null,null,null,\"J9mHjc\"],[45677434,null,true,null,null,null,\"Jvxdef\"],[45460923,null,false,null,null,null,\"wJ60J\"],[45668806,null,true,null,null,null,\"ZNZcRe\"],[45629940,1,null,null,null,null,\"RZjwEe\"],[45626220,null,true,null,null,null,\"uWwmlf\"],[45623655,null,true,null,null,null,\"kRU3Vb\"],[45626219,null,true,null,null,null,\"lwXuzd\"],[45644105,null,true,null,null,null,\"oNbQbe\"],[45681927,null,false,null,null,null,\"lRhZne\"],[45616228,null,null,null,\"https://apps.apple.com/app/google-gemini/id6477489729?\\u0026pt\\u003d9008\\u0026ct\\u003dmweb_upsell_ios\\u0026mt\\u003d8\",null,\"QVarrd\"],[45656546,null,null,null,\"\",null,\"JuV3Ge\"],[45650814,null,true,null,null,null,\"m2lbtc\"],[45462001,null,true,null,null,null,\"sVGw9e\"],[45683050,null,false,null,null,null,\"h9J6ad\"],[45688963,null,false,null,null,null,\"pqhepf\"],[45651051,null,true,null,null,null,\"s625pc\"],[45688942,null,null,null,\"\",null,\"pVfXAc\"],[45643900,null,false,null,null,null,\"dEOndd\"],[45642311,null,false,null,null,null,\"d74RUe\"],[45651305,null,false,null,null,null,\"QCFASd\"],[45429036,null,false,null,null,null,\"At5kvb\"],[45613343,null,true,null,null,null,\"q2nq9c\"],[45679873,null,false,null,null,null,\"gNSvK\"],[45661184,null,true,null,null,null,\"sJ2Qyf\"],[45665212,null,true,null,null,null,\"ZxFW9d\"],[45637355,null,true,null,null,null,\"xxkPUc\"],[45429047,null,true,null,null,null,\"VxXs8b\"],[45683443,null,false,null,null,null,\"lqpAdc\"],[45620779,null,false,null,null,null,\"PNb5Te\"],[45660760,null,false,null,null,null,\"BK4DWd\"],[45682522,null,true,null,null,null,\"ooo37c\"],[45686313,3000,null,null,null,null,\"vhj8ac\"],[45623654,null,null,null,\"\",null,\"YLU8Eb\"],[45659291,null,false,null,null,null,\"FZNrHe\"],[45676212,null,false,null,null,null,\"nM0iwf\"],[45651021,null,true,null,null,null,\"Hm1eK\"],[45642175,null,true,null,null,null,\"e5VYZb\"],[45669097,null,true,null,null,null,\"WiW09d\"],[45685580,null,false,null,null,null,\"sub1Yb\"],[45689807,null,false,null,null,null,\"Zyq5Pe\"],[45430747,2,null,null,null,null,\"hnd4Y\"],[45668123,null,true,null,null,null,\"C8SWdf\"],[45428785,null,false,null,null,null,\"dg5L0c\"],[45634534,null,false,null,null,null,\"aK2ZLc\"],[45650059,null,true,null,null,null,\"rsKKsc\"],[45674253,null,false,null,null,null,\"C3jcff\"],[45636650,null,false,null,null,null,\"UL35Lc\"],[45684451,null,false,null,null,null,\"dvgyy\"],[45689562,null,false,null,null,null,\"qikDBf\"],[45642914,null,false,null,null,null,\"AOfQDb\"],[45625823,null,true,null,null,null,\"rcSkcd\"],[45626799,null,true,null,null,null,\"Oaupxf\"],[45428942,null,null,null,\"A\",null,\"INYTP\"],[45532356,null,true,null,null,null,\"WHzOMe\"],[45667362,null,false,null,null,null,\"k9W6Ke\"],[45680249,null,false,null,null,null,\"MGMoke\"],[45664148,null,true,null,null,null,\"xapkFe\"],[45428826,null,false,null,null,null,\"RHa86c\"],[45650792,null,false,null,null,null,\"Hj8UCb\"],[45650005,null,true,null,null,null,\"pnNxQd\"],[45663720,null,true,null,null,null,\"fSaUPb\"],[45676410,null,true,null,null,null,\"aR9k6\"],[45429051,null,false,null,null,null,\"HQ37Sc\"],[45428787,null,true,null,null,null,\"xxtp7b\"],[45660363,null,false,null,null,null,\"ZNc3Ye\"],[45428863,null,true,null,null,null,\"MSWOPb\"],[45655059,null,false,null,null,null,\"YhvIdb\"],[45674491,null,true,null,null,null,\"VRXo3b\"],[45428951,null,true,null,null,null,\"Lq6d5b\"],[45674254,null,true,null,null,null,\"VEY4sd\"],[45461555,null,true,null,null,null,\"LSJ3je\"],[45678753,null,null,null,\"word\",null,\"IJfhMb\"],[45648565,null,false,null,null,null,\"Efccdb\"],[45460849,null,false,null,null,null,\"rJI8Ed\"],[45617672,null,null,null,\"https://www.gstatic.com/lamda/images/app_upsell/apollo_launch_qr_code_9cfd6d7a0efb8fb8e817d.png\",null,\"Gh9inf\"],[45681398,null,false,null,null,null,\"wTb2Df\"],[45637674,null,true,null,null,null,\"PmXqSb\"],[45656163,null,false,null,null,null,\"EIwgmb\"],[45674153,null,false,null,null,null,\"nIy8Tb\"],[45640534,null,true,null,null,null,\"abmWLd\"],[45642246,null,false,null,null,null,\"FqIZQ\"],[45428940,6,null,null,null,null,\"pcrjce\"],[45661642,null,true,null,null,null,\"veGEj\"],[45630516,null,true,null,null,null,\"zhp6W\"],[45668224,null,true,null,null,null,\"hjyiY\"],[45642486,null,false,null,null,null,\"uc9aZ\"],[45685083,null,true,null,null,null,\"tYuqZb\"],[45672173,null,false,null,null,null,\"sd999e\"],[45682457,null,null,null,\"https://forms.gle/puztc63QF9ETorvZ7\",null,\"fMsFXc\"],[45648381,null,true,null,null,null,\"RJ0Knf\"],[45430660,null,true,null,null,null,\"pYKG7c\"],[45658793,null,false,null,null,null,\"KAEZle\"],[45655638,null,true,null,null,null,\"Pzq70d\"],[45631038,null,null,null,\"image/jpeg\",null,\"drXRHf\"],[45619063,null,true,null,null,null,\"WjK4Hf\"],[45678041,null,true,null,null,null,\"DoPvpe\"],[45680964,null,true,null,null,null,\"X04spc\"],[45677129,null,false,null,null,null,\"J8X5ic\"],[98103781,null,false,null,null,null,\"Nk6Dhb\"],[45620523,null,false,null,null,null,\"cuum5b\"],[45428822,null,false,null,null,null,\"QlnIve\"],[45654526,null,true,null,null,null,\"F99i3d\"],[45634060,null,false,null,null,null,\"UO6B9b\"],[45477172,null,false,null,null,null,\"hvNe7b\"],[45428808,null,false,null,null,null,\"PYw67c\"],[45647658,null,true,null,null,null,\"KLK9se\"],[45666206,null,true,null,null,null,\"tgaNPe\"],[45640710,null,false,null,null,null,\"sgF2ud\"],[45428788,null,true,null,null,null,\"dvz1Qb\"],[45446431,null,true,null,null,null,\"ZTMVRc\"],[45628854,null,true,null,null,null,\"rTzNw\"],[45676040,null,null,null,\"f299729663a2343f\",null,\"bZNVW\"],[45621701,null,null,null,\"en,ja,ko,\",null,\"SH1ZGd\"],[45428766,null,true,null,null,null,\"X2gi0\"],[45679865,null,true,null,null,null,\"UR2tsc\"],[45674611,null,false,null,null,null,\"EnKu6d\"],[45642249,null,true,null,null,null,\"g3wRP\"],[45627889,null,true,null,null,null,\"Ag13mb\"],[45643064,null,false,null,null,null,\"CC8cR\"],[45477094,null,false,null,null,null,\"tKgvB\"],[45682870,null,false,null,null,null,\"VPM0vc\"],[45630520,null,false,null,null,null,\"l6Gitf\"],[45678969,null,true,null,null,null,\"qh8lCb\"],[45428825,null,false,null,null,null,\"gK7L5b\"],[45676744,null,false,null,null,null,\"RRUdLc\"],[45428945,null,null,null,\"https://support.google.com/bard?p\\u003dlm_ws_ext\",null,\"h8LGF\"],[45428816,null,null,null,\"\",null,\"eqLaFe\"],[45666607,null,true,null,null,null,\"fyrSE\"],[45667097,null,true,null,null,null,\"HAK9ab\"],[45633813,null,true,null,null,null,\"vmSZ0c\"],[45428793,null,false,null,null,null,\"OXqNEd\"],[45689335,null,false,null,null,null,\"cK8cRd\"],[45674737,null,true,null,null,null,\"T769Kb\"],[45658304,2,null,null,null,null,\"l52MFf\"],[45687930,null,false,null,null,null,\"ZHlnM\"],[45622730,null,true,null,null,null,\"GdOIVb\"],[45688475,null,false,null,null,null,\"YigM0d\"],[45629316,null,null,null,\"https://www.gstatic.com/lamda/images/app_upsell/App_Store_Badge_US-UK_RGB_blk_092917_80272c92e9019a2eb8b45.svg\",null,\"IjlrSc\"],[45629475,null,true,null,null,null,\"SO4Ojf\"],[45676696,70,null,null,null,null,\"kaiArb\"],[45649666,null,false,null,null,null,\"gHm36c\"],[45641964,null,false,null,null,null,\"asUzLe\"],[45462783,null,false,null,null,null,\"ussZDb\"],[45678415,null,false,null,null,null,\"UDbrnf\"],[45628248,null,true,null,null,null,\"Uwl88c\"],[45615224,null,null,null,\"EUR\",null,\"bw5YWe\"],[45615185,null,false,null,null,null,\"EGoMfb\"],[45644791,null,true,null,null,null,\"h2COIe\"],[45630987,null,true,null,null,null,\"BfHGgd\"],[45658241,null,false,null,null,null,\"xU79Tb\"],[45687165,null,false,null,null,null,\"p8oYbe\"],[45639072,null,true,null,null,null,\"pI60V\"],[45680983,null,true,null,null,null,\"HZXXud\"],[45627605,null,false,null,null,null,\"BXzJLb\"],[45428879,null,false,null,null,null,\"V7M35c\"],[45674273,null,true,null,null,null,\"miiDIc\"],[45674423,null,true,null,null,null,\"hq7Cw\"],[45645717,null,true,null,null,null,\"Njk3nc\"],[45626662,null,false,null,null,null,\"UTJC9c\"],[45679388,null,false,null,null,null,\"WHPUod\"],[45668426,20,null,null,null,null,\"loaUHe\"],[45429021,null,false,null,null,null,\"gmtlGc\"],[45653733,null,true,null,null,null,\"waxWyb\"],[45670358,null,false,null,null,null,\"kd4Iuf\"],[45677899,null,null,null,\"1acf3172319789ce\",null,\"f1mbUe\"],[45672571,null,true,null,null,null,\"yargIb\"],[45623006,null,false,null,null,null,\"pu07Lc\"],[45611873,null,false,null,null,null,\"plbTu\"],[45640354,null,false,null,null,null,\"U5dLxb\"],[45625466,null,true,null,null,null,\"v1wzw\"],[45679862,null,true,null,null,null,\"gaDQ0d\"],[45675839,null,false,null,null,null,\"HTKr1b\"],[45428954,null,false,null,null,null,\"UDCqee\"],[45676146,2500,null,null,null,null,\"P2V93\"],[45683862,null,true,null,null,null,\"INqfxf\"],[45643901,null,false,null,null,null,\"oVckdd\"],[45478052,null,true,null,null,null,\"TpdKre\"],[45626226,null,true,null,null,null,\"o0RSAc\"],[45671499,null,true,null,null,null,\"vyDM6c\"],[45666359,null,true,null,null,null,\"XMtci\"],[45461650,null,null,null,\"\",null,\"qhPuve\"],[45675876,null,true,null,null,null,\"GJDTPc\"],[45676891,null,true,null,null,null,\"rbQwqd\"],[45668668,null,true,null,null,null,\"vo0Uw\"],[45428872,null,false,null,null,null,\"MkVjq\"],[45648752,null,true,null,null,null,\"gTQNAf\"],[45682808,null,true,null,null,null,\"Wo7Qz\"],[45448125,null,null,null,\"\",null,\"xmar6b\"],[45618047,null,true,null,null,null,\"cGdGIf\"],[45428858,null,null,null,\"https://www.youtube.com/watch?v\\u003dvhbkCEnNXcY\",null,\"DZt4Td\"],[45686043,null,false,null,null,null,\"QY5wjd\"],[45659213,null,false,null,null,null,\"oyM9Ec\"],[45630435,null,true,null,null,null,\"teDrCc\"],[45659183,null,false,null,null,null,\"OhbiHf\"],[45683636,null,false,null,null,null,\"uVDUmd\"],[45650559,0,null,null,null,null,\"SGN0I\"],[45621144,null,false,null,null,null,\"wsyJvb\"],[45681785,null,false,null,null,null,\"q3JBkc\"],[45672286,null,true,null,null,null,\"ZK1Adb\"],[45618370,null,false,null,null,null,\"yNOknf\"],[45676706,null,false,null,null,null,\"zU8fIe\"],[45430984,null,true,null,null,null,\"IJCBZc\"],[45428944,null,null,null,\"\",null,\"X089o\"],[45460870,null,false,null,null,null,\"KmbjZb\"],[45642852,null,false,null,null,null,\"lty8tf\"],[45686413,null,true,null,null,null,\"GhXNub\"],[45615673,null,true,null,null,null,\"WuiI4\"],[45685680,null,false,null,null,null,\"YRued\"],[45661985,null,false,null,null,null,\"v6AnOb\"],[45650257,null,true,null,null,null,\"qKHdof\"],[45659427,null,true,null,null,null,\"GQhkhd\"],[45688836,null,false,null,null,null,\"JHDLHf\"],[45645254,2,null,null,null,null,\"gC26rd\"],[45674424,null,true,null,null,null,\"lVYWXb\"],[45677437,null,false,null,null,null,\"BbUWnc\"],[45652220,null,true,null,null,null,\"qWvkFb\"],[45631641,null,false,null,null,null,\"XgpeRd\"],[45428955,null,false,null,null,null,\"Fg6lEc\"],[45675131,null,false,null,null,null,\"EXbSW\"],[45685184,null,false,null,null,null,\"zaU5ue\"],[45687826,null,false,null,null,null,\"Efj05b\"],[45428887,null,true,null,null,null,\"SjfDNd\"],[45671768,null,false,null,null,null,\"ezfCGd\"],[45640657,null,true,null,null,null,\"tRgz6e\"],[45629285,null,false,null,null,null,\"GIF4Ve\"],[45650152,null,true,null,null,null,\"VL0MEc\"],[45617359,null,false,null,null,null,\"D5Zegf\"],[45632872,null,false,null,null,null,\"Dk9fde\"],[45670489,null,true,null,null,null,\"HEI5Mc\"],[45621135,null,true,null,null,null,\"IMTkwf\"],[45646995,null,true,null,null,null,\"YXsPfd\"],[45635299,null,true,null,null,null,\"Zw5Bg\"],[45647595,null,null,null,\"sub-sentence\",null,\"iOmOd\"],[45428939,null,false,null,null,null,\"mHnQUe\"],[45428778,null,true,null,null,null,\"eU70Od\"],[45620524,null,null,null,\"https://gemini.google.com/app/download/mobile?android-min-version\\u003d301356232\\u0026ios-min-version\\u003d322.0\\u0026is_sa\\u003d1\\u0026campaign_id\\u003dmweb_upsell_android\\u0026utm_source\\u003dmweb_upsell\\u0026utm_medium\\u003dproduct_promo\\u0026utm_campaign\\u003dmweb_upsell_android\\u0026pt\\u003d9008\\u0026mt\\u003d8\\u0026ct\\u003dp-growth-product-mweb-upsell\",null,\"PdiR5\"],[45532382,null,false,null,null,null,\"rXE3bd\"],[45626935,null,null,null,\"https://g.co/gemini/\",null,\"c4pO1d\"],[45623468,null,true,null,null,null,\"qjNpze\"],[45623243,null,false,null,null,null,\"isfJee\"],[45645731,null,true,null,null,null,\"SCE8sc\"],[45667220,0,null,null,null,null,\"RfAx0c\"],[45622690,null,true,null,null,null,\"pZdg3d\"],[45676405,null,true,null,null,null,\"Fdt04c\"],[45639476,null,false,null,null,null,\"osIUGb\"],[45650208,null,false,null,null,null,\"jANL0d\"],[45462953,null,true,null,null,null,\"isAH5b\"],[45687923,null,false,null,null,null,\"YMp8Md\"],[45687834,null,true,null,null,null,\"NP7C9\"],[45585472,null,true,null,null,null,\"jhtVz\"],[45666984,null,true,null,null,null,\"T2fNEb\"],[45649881,null,true,null,null,null,\"dRznHf\"],[45638677,null,false,null,null,null,\"l6Vdmb\"],[45629859,null,true,null,null,null,\"GHetMe\"],[45655010,null,false,null,null,null,\"O19h2d\"],[45668250,null,null,null,\"948b866104ccf484\",null,\"blBjP\"],[45689553,null,null,null,\"\",null,\"ZIaGXe\"],[45674949,null,false,null,null,null,\"N65tL\"],[45658977,null,true,null,null,null,\"cg9UGb\"],[45650272,null,true,null,null,null,\"MvXhwb\"],[45531128,null,false,null,null,null,\"tpypic\"],[45648771,null,true,null,null,null,\"Ox8GH\"],[45674428,null,false,null,null,null,\"G5EKvf\"],[45637678,null,true,null,null,null,\"cLBnV\"],[45428997,null,true,null,null,null,\"qu2F1e\"],[45628394,null,true,null,null,null,\"M77k1\"],[45428829,null,false,null,null,null,\"EySdu\"],[45689045,null,false,null,null,null,\"OOT4Qc\"],[45679367,null,true,null,null,null,\"SA2dEd\"],[45620940,null,false,null,null,null,\"npJW5c\"],[45673264,null,null,null,\"selection-tag\",null,\"d0z2x\"],[45621260,null,false,null,null,null,\"kej4Rd\"],[45682810,null,null,null,null,null,\"ht77b\",[\"[[\\\"2525e3954d185b3c\\\"]]\"]],[45686859,null,false,null,null,null,\"XKYwbd\"],[45687163,null,true,null,null,null,\"izuHod\"],[45668866,null,true,null,null,null,\"dho8qb\"],[45616366,null,false,null,null,null,\"stRmBd\"],[45670663,null,true,null,null,null,\"dq5e1d\"],[45655502,null,true,null,null,null,\"ks6VNb\"],[45617558,null,null,null,\"\",null,\"KPf9X\"],[45614565,null,true,null,null,null,\"NDdLd\"],[45678903,null,false,null,null,null,\"HbAGYb\"],[45663401,null,true,null,null,null,\"AENEDc\"],[45682324,null,true,null,null,null,\"kgZCBe\"],[45668252,null,true,null,null,null,\"fTJSle\"],[45428952,null,null,null,\"en,ja,ko,zh,id,th,hi,bn,vi,ar,sw,es,he,iw,mr,gu,kn,ml,ta,te,ur,ru,de,fr,it,nl,pl,pt,sv,sr,tr,uk,cs,hu,ro,da,sk,no,bg,hr,lt,et,lv,\",null,\"w29kzb\"],[45428971,null,true,null,null,null,\"X0EeRd\"],[45622099,null,false,null,null,null,\"Fmxvxf\"],[45631642,604800,null,null,null,null,\"eQhBIe\"],[45668675,null,true,null,null,null,\"UaZZE\"],[45678460,null,false,null,null,null,\"cKsko\"],[45667135,null,true,null,null,null,\"bRzDGe\"],[45618369,null,true,null,null,null,\"bzKQYe\"],[45650193,null,true,null,null,null,\"xmkMze\"],[45688652,null,null,null,null,null,\"VuGNnc\",[\"[]\"]],[45638791,null,true,null,null,null,\"Ssjdmd\"],[45681963,null,false,null,null,null,\"zKsv8\"],[45682193,null,true,null,null,null,\"PZ1Hlf\"],[45628891,null,true,null,null,null,\"AlNxof\"],[45663988,null,true,null,null,null,\"Revbib\"],[45681292,null,true,null,null,null,\"m23mHf\"],[45633204,null,false,null,null,null,\"UglAEb\"],[45651918,null,false,null,null,null,\"mvDdOc\"],[45676414,null,true,null,null,null,\"jSx2Ke\"],[45674326,null,true,null,null,null,\"vXohec\"],[45645259,null,true,null,null,null,\"bRrxlc\"],[45689564,30,null,null,null,null,\"n2Wjff\"],[45446506,null,false,null,null,null,\"LCcWLb\"],[45620525,null,null,null,\"https://apps.apple.com/app/google-gemini/id6477489729?\\u0026pt\\u003d9008\\u0026ct\\u003dmweb_upsell_ios\\u0026mt\\u003d8\",null,\"T5eP0b\"],[45668341,null,true,null,null,null,\"eUtuJd\"],[45685294,null,null,null,\"852fc722e6249d28\",null,\"WlPLm\"],[45685540,null,false,null,null,null,\"ZUOIWc\"],[45643339,null,true,null,null,null,\"p7niOb\"],[45680913,null,true,null,null,null,\"uNFmQd\"],[45665354,null,true,null,null,null,\"C6wA6d\"],[45623562,null,false,null,null,null,\"Ca9NTc\"],[45654833,null,true,null,null,null,\"cKaZT\"],[45428767,null,false,null,null,null,\"ns3DX\"],[45639427,null,true,null,null,null,\"d9fjL\"],[45686772,null,false,null,null,null,\"HFxrF\"],[45618951,null,true,null,null,null,\"CJRnHd\"],[45684019,null,true,null,null,null,\"f0Ud3c\"],[45615379,null,false,null,null,null,\"AmYeGd\"],[45678082,null,false,null,null,null,\"pZoHKc\"],[45677147,null,false,null,null,null,\"NxxXCe\"],[45626834,3,null,null,null,null,\"KQpMEf\"],[45688940,null,null,null,\"\",null,\"oYHLJd\"],[45676041,null,null,null,\"a8236212c11d3a06\",null,\"vnZtfe\"],[45643935,null,false,null,null,null,\"RFEwOd\"],[45615672,null,false,null,null,null,\"cjgNId\"],[45681911,null,false,null,null,null,\"ulzMRd\"],[45633000,null,false,null,null,null,\"BZKCM\"],[45461453,null,false,null,null,null,\"aNMuFc\"],[45616765,null,null,null,\"linear\",null,\"R4Crm\"],[45683270,null,false,null,null,null,\"evsTFc\"],[45656793,null,null,null,\"https://ai.google.dev/?utm_source\\u003dwebsite\\u0026utm_medium\\u003dreferral\\u0026utm_campaign\\u003dgeminichat\\u0026utm_content\\u003d\",null,\"u7EL4e\"],[45428774,100,null,null,null,null,\"lMN8F\"],[45683199,null,true,null,null,null,\"y90pUd\"],[45687331,null,false,null,null,null,\"WQUUmb\"],[45644978,null,true,null,null,null,\"Y6MxC\"],[45630302,null,false,null,null,null,\"gj3L8\"],[45670532,null,null,null,null,null,\"pqLHQc\",[\"[[\\\"948b866104ccf484\\\",\\\"b1e46a6037e6aa9f\\\",\\\"948b866104ccf484\\\",\\\"b1e46a6037e6aa9f\\\",\\\"9c17b1863f581b8a\\\",\\\"4d79521e1e77dd3b\\\"]]\"]],[45684537,null,false,null,null,null,\"t2QIge\"],[45633281,null,false,null,null,null,\"vCL4oc\"],[45630518,null,true,null,null,null,\"AEtLWd\"],[45659761,null,false,null,null,null,\"deavA\"],[45644109,null,true,null,null,null,\"alOM0\"],[45677947,null,true,null,null,null,\"Ypvmwf\"],[45679471,null,false,null,null,null,\"NPnghb\"]],\"CAMSoAIdmgXfkqcQBNb7BgTEBgOi3AUD78ixEgOT5QYD9R8DqZEFCqgiA8lEA/ewBYYY3rDfBgL1lgQK8coFAvrPBvIPAtqiBgPIBALy+QYCmCIC54sFA6O7BgGVDQLXPgKs2QYCvO8GgwgCm6cDA/aWBgOn9AbuC5xMA/FGA9iIBQMLAuCLBgDvDAG8EQPEDQPAPwKtRQOBrwYC7hkD8AzJJwLLKgK6GwIdAoEEDssCAoYWAokfArCcBoYF2EYCDwKUFwKrRQKCAqpdArwD8QSrgwYCiiUCoy0C+WgB/AAHnC4C/QLhBOgjBI8RApwUAskA0QQDvRQPpQMC5CMEqiUC/CIChxkCyZEGBb18BdABBFUFnhbsGQX9BQWSBAK7WwXqUAI\\u003d\"]]]","TZRIIe":true,"TuX5cc":"fa","UUFaWc":"%.@.null,1000,2]","UYXpSd":"نمره بدی در امتحان ژنتیک گرفته‌ام. کمکم کن یک برنامه مطالعه برای تقویت در این درس درست کنم.∞https://www.gstatic.com/lamda/images/landing/a/u18/fa-IR/d1_2f1efc65b1574eae64664.jpg∞https://www.gstatic.com/lamda/images/landing/a/u18/fa-IR/da1_a7f1dca9ff6db4fa9201f.png∞سلام! ناراحت نباشید که نمره امتحان ژنتیک شما خوب نشده است. با کمی برنامه‌ریزی و تلاش بیشتر می‌توانید خیلی زود این درس را بهتر یاد بگیرید.\n\nاول از همه، بیایید باهم یک برنامه مطالعه خوب و شدنی درست کنیم.\n\n۱. دلیل نمره پایین را پیدا کنید:","VVlN6d":"AIzaSyD6n9asBjvx1yBHfhFhfw_kpS9Faq0BZHM","Vvafkd":false,"W3Yyqf":"101174103305296889865","WZsZ1e":"sSksumLxyORWdz8Y/A0u2mA8e0SsW_9YBK","Ylro7b":"CgcSBWjK7pYx","Z9dR2":[],"ZjDxHf":"","aHPPod":"","ajWZrd":false,"b5W2zf":"default_BardChatUi","bTPVLd":"%.@.null,null,null,\"\"]","bvBfBd":"PROD","cfb2h":"boq_assistant-bard-web-server_20250407.06_p0","d2zJAe":"","dHb23c":[],"dLc0B":false,"doE3I":"228978296211","eptZe":"/_/BardChatUi/","fLTY0d":"","fPDxwd":[93841507,97496384,97750530,97840806,97965998,98006670,98106641,98118918],"fx9U0":false,"gGcLoe":false,"hwjqj":false,"i1PRRd":"AIzaSyBWW50ghQ5qHpMg1gxHV7U9t0wHE0qIUk4","iCzhFc":false,"kmz9uc":false,"lRWJfb":"","mXaIFf":true,"nPMdNb":"AIzaSyDmUQ6sj3nbs_ZiSsxsbP7L6qlPDT3cr4Q","nQyAE":{"HDaRV":"true","yXter":"false","u2B5ld":"true","qsGtYd":"true","hKW5p":"true","Zm72Wd":"en,en-gb,ko,ja,ru,de,fr,zh,zh-CN,zh-TW,es,es-419,es-MX,it,nl,pl,pt,pt-BR,pt-PT,id,th,hi,vi,tr,ar,ar-001,ar-EG,ar-SA,bn,sv,cs,hu,el,fa,ro,da,sk,fi,uk,no,bg,sr,he,hr,lt,sl,et,iw,lv,sw,te,ta,gu,kn,ml,mr,ur,en-AU,en-IN,nl-BE,es-ES,en-CA,fr-CA","Ssjdmd":"true","LCcWLb":"false","N83Imf":"%.@.\"INVALID\"]"},"oPEP7c":"soheiladv@gmail.com","oUbv8e":false,"p9hQne":"https://www.gstatic.com/_/boq-bard-web/_/r/","qDCSke":"101174103305296889865","qKIAYe":"feeds/mcudyrk2a4khkz","qoJndb":"","qwAQke":"BardChatUi","reRvtc":"","rtQCxc":-120,"svJlae":"Bard","svUc8c":1,"thykhd":"AFWLbD0wTNKd3MW04L_9SFz1lFFgR1j3OJJriarc2FKANJlhyW2GBqrU2cRNKP_f_j1mxdsZ-J9535xmyjoMEanrJn-jCFCD2pojFbC4RMw0JPBB_BL1WAHjPHeN","u21JSd":false,"u4g7r":"%.@.null,1,2]","uS02ke":"FLX2Z5mLD42ai-gPo5710AM","vCjA5b":"","vJQk6":false,"vXmutd":"%.@.\"HR\",\"ZZ\",\"z9PSbQ\\u003d\\u003d\"]","wC1N4":"","xFyxkf":1,"xnI9P":true,"xwAfE":true,"y2FhP":"prod","yFnxrf":1957,"yVlrc":"این چه گیاهی است و چگونه باید از آن مراقبت کنم؟∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/m1_0252c45ec944e22b63349.jpg∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/ma1_870ae44fdf60abf0a6047.jpg∞گیاهی که در تصویر می‌بینید، یک ارکیده فالانوپسیس است. فالانوپسیس‌ها یکی از محبوب‌ترین انواع ارکیده هستند که به دلیل نگهداری آسان و شکوفه‌های زیبا، به‌عنوان گیاه آپارتمانی مورد استفاده قرار می‌گیرند.\nنور\nفالانوپسیس‌ها به نور متوسط نیاز دارند. بهترین مکان برای قرار دادن آن، پنجره شرقی یا غربی است. اگر در منطقه‌ای با آب و هوای گرم زندگی می‌کنید، می‌توانید آن را در پنجره جنوبی قرار دهید.\nآبیاری\nخاک ارکیده فالانوپسیس باید همیشه مرطوب باشد، اما نباید خیس باشد. در تابستان، باید آن را هر هفته یک بار آبیاری کنید. در زمستان، می‌توانید فاصله بین آبیاری‌ها را افزایش دهید.\n∰خیلی ساده «هوش مصنوعی زایا» را با استفاده از قیاس‌های مرتبط توضیح بده.∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/m2_af9ebd08631c395c61de7.jpg∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/ma2_dffabc9f891847227f160.jpg∞هوش مصنوعی زایا یک ابزار خلاقانه است که می‌تواند متن، کد، تصاویر، موسیقی و فیلم‌های جدید ایجاد کند. به عنوان مثال، می‌تواند یک داستان جدید بنویسد، یک قطعه موسیقی جدید بسازد یا یک تصویر جدید نقاشی کند.\nمی‌توان هوش مصنوعی زایا را با یک ابزار خلاقانه مانند یک قلم، یک مداد یا یک دوربین مقایسه کرد. این ابزارها به شما امکان می‌دهند ایده‌های خود را به واقعیت تبدیل کنید، اما آنها نمی‌توانند به تنهایی خلاقیت کنند.\n∰می‌خواهم زبان جدیدی یاد بگیرم: ایتالیایی∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/m3_89dd28f6847ecdb041097.jpg∞https://www.gstatic.com/lamda/images/landing/a/i18n/fa/ma3_e5cbf381654b2a6ee11bb.jpg∞یادگیری زبان جدید می‌تواند یک چالش و همچنین یک تجربه بسیار لذت‌بخش باشد. ایتالیایی یک زبان زیبا و رمانتیک است که صحبت کردن آن می‌تواند به شما کمک کند تا با افراد جدیدی از سراسر جهان آشنا شوید و فرهنگ‌های جدیدی را تجربه کنید.\nدر اینجا چند نکته برای یادگیری زبان ایتالیایی آورده شده است:\nاز یک روش یادگیری مناسب استفاده کنید. روش‌های مختلفی برای یادگیری زبان وجود دارد،\n","ypY7lb":"AIzaSyAHCfkEDYwQD6HuUx2DyX3VylTrKZG7doM","zChJod":"%.@.]"};</script><script nonce=""></script><script nonce="">var _F_cssRowKey = 'boq-bard-web.BardChatUi.gq01Q5VIzW0.R.B1.O';var _F_combinedSignature = 'AL3bBk0jaVvVZfGyryZUK0WFHrQ_B9ec7Q';function _DumpException(e) {throw e;}</script><style data-href="https://www.gstatic.com/_/mss/boq-bard-web/_/ss/k=boq-bard-web.BardChatUi.gq01Q5VIzW0.R.B1.O/am=jyEg4ghu9-JG_3mQwwAQABgE/d=1/ed=1/rs=AL3bBk0L82kCzGHzEdmZlptz27E0jrwdZg/m=_b" nonce="">.picker-api-container,.picker-iframe-container{height:100%;width:100%;position:relative}.picker-close-button{position:absolute;z-index:100;top:12px;left:14px;width:36px;height:36px;border-radius:18px;border-width:0;background-color:rgba(0,0,0,0)}.picker-close-button:hover{background-color:rgba(60,64,67,.04)}.picker-close-button:active{background-color:rgba(60,64,67,.12)}.picker-close-button-svg{fill:#616161}.content-library .picker-close-button-svg{color:var(--dt-on-neutral-container,rgb(60,64,67))}.content-library .picker-loading-container{position:absolute;height:100%;width:100%;background-color:var(--dt-surface-container,#fff);align-items:center;justify-content:space-evenly;display:none}.content-library.loading .picker-loading-container{display:flex;background-color:#f0f4f9}.content-library.loading .picker-iframe-container,.content-library.loaded .picker-loading-container,.content-library.loading-timed-out .picker-loading-container{display:none}.goog-modalpopup,.modal-dialog{box-shadow:0 4px 16px rgba(0,0,0,.2);background:#fff;background-clip:padding-box;border:1px solid #acacac;border:1px solid rgba(0,0,0,.333);outline:0;position:absolute}.goog-modalpopup-bg,.modal-dialog-bg{background:#fff;right:0;position:absolute;top:0}div.goog-modalpopup-bg,div.modal-dialog-bg{filter:alpha(opacity=75);opacity:.75}.modal-dialog{color:#000;padding:30px 42px}.modal-dialog-title{background-color:#fff;color:#000;cursor:default;font-size:16px;font-weight:normal;line-height:24px;margin:0 0 16px}.modal-dialog-title-close{height:11px;opacity:.7;padding:17px;position:absolute;left:0;top:0;width:11px}.modal-dialog-title-close::after{content:"";background:url(https://ssl.gstatic.com/ui/v1/dialog/close-x.png);position:absolute;height:11px;width:11px;left:17px}.modal-dialog-title-close:hover{opacity:1}.modal-dialog-content{background-color:#fff;line-height:1.4em;word-wrap:break-word}.modal-dialog-buttons{margin-top:16px}.modal-dialog-buttons button{border-radius:2px;background-color:#f5f5f5;background-image:linear-gradient(top,#f5f5f5,#f1f1f1);border:1px solid #dcdcdc;border:1px solid rgba(0,0,0,.1);color:#444;cursor:default;font-family:inherit;font-size:11px;font-weight:bold;height:29px;line-height:27px;margin:0 0 0 16px;min-width:72px;outline:0;padding:0 8px}.modal-dialog-buttons button:hover{box-shadow:0 1px 1px rgba(0,0,0,.1);background-color:#f8f8f8;background-image:linear-gradient(top,#f8f8f8,#f1f1f1);border:1px solid #c6c6c6;color:#333}.modal-dialog-buttons button:active{box-shadow:0 1px 1px rgba(0,0,0,.1);background-color:#f8f8f8;background-image:linear-gradient(top,#f8f8f8,#f1f1f1);border:1px solid #c6c6c6;color:#333;box-shadow:inset 0 1px 2px rgba(0,0,0,.1)}.modal-dialog-buttons button:focus{border:1px solid #4d90fe}.modal-dialog-buttons button[disabled]{box-shadow:none;background:#fff;background-image:none;border:1px solid #f3f3f3;border:1px solid rgba(0,0,0,.05);color:#b8b8b8}.modal-dialog-buttons .goog-buttonset-action{background-color:#4d90fe;background-image:linear-gradient(top,#4d90fe,#4787ed);border:1px solid #3079ed;color:#fff}.modal-dialog-buttons .goog-buttonset-action:hover{background-color:#357ae8;background-image:linear-gradient(top,#4d90fe,#357ae8);border:1px solid #2f5bb7;color:#fff}.modal-dialog-buttons .goog-buttonset-action:active{background-color:#357ae8;background-image:linear-gradient(top,#4d90fe,#357ae8);border:1px solid #2f5bb7;color:#fff;box-shadow:inset 0 1px 2px rgba(0,0,0,.3)}.modal-dialog-buttons .goog-buttonset-action:focus{box-shadow:inset 0 0 0 1px #fff;border:1px solid #fff;border:rgba(0,0,0,0) solid 1px;outline:1px solid #4d90fe;outline:rgba(0,0,0,0) 0}.modal-dialog-buttons .goog-buttonset-action[disabled]{box-shadow:none;background:#4d90fe;color:#fff;filter:alpha(opacity=50);opacity:.5}.jfk-alert,.jfk-confirm,.jfk-prompt{width:512px}.google-picker.modal-dialog{background-color:var(--dt-background,#fff);border:none;padding:0;transition:top .5s ease-in-out;z-index:1004;border-radius:8px;box-shadow:0 4px 8px 3px rgba(60,64,67,.15),0 1px 3px rgba(60,64,67,.3);overflow:hidden}.google-picker.modal-dialog .picker-close-button{top:20px;left:18px}.google-picker.modal-dialog-bg{background-color:var(--dt-scrim,rgba(32,33,36,.6));z-index:1003}.google-picker.transparent-picker.modal-dialog{background-color:transparent;border:none;box-shadow:none;padding:0}.google-picker.transparent-picker.modal-dialog-content{background-color:transparent}.initial-input-area{--input-area-margin-inline-start:72px;--input-area-padding-inline:0px;--input-area-border-radius:32px;-webkit-margin-start:var(--input-area-margin-inline-start);margin-inline-start:var(--input-area-margin-inline-start);bottom:48px;display:flex;padding-inline:var(--input-area-padding-inline);position:absolute;width:calc(100% - var(--input-area-margin-inline-start) - var(--input-area-padding-inline)*2);z-index:2}@media screen and (max-width:960px){.initial-input-area{--input-area-margin-inline-start:0px;--input-area-padding-inline:16px;bottom:12px}}@media screen and (min-width:960px){.sidenav-open-on-init .initial-input-area{--input-area-margin-inline-start:320px}}.initial-input-area-container{display:grid;grid-template:"upload-icon input-area icons"/auto 1fr auto;gap:8px;box-sizing:border-box;align-items:center;background-color:var(--gem-sys-color--surface);border:1px solid var(--gem-sys-color--outline-variant);border-radius:var(--input-area-border-radius);height:var(--input-area-outer-height,60px);margin:0 auto;max-width:760px;width:100%;padding-inline:8px}.initial-input-area-container textarea{line-height:24px;background-color:transparent;border:none;box-sizing:border-box;color:var(--gem-sys-color--on-surface);height:var(--input-area-height,60px);outline:none;padding:calc(var(--input-area-height, 60px)/2 - 13px) 0;resize:none;grid-area:input-area}.initial-input-area-container textarea::-webkit-input-placeholder{color:var(--bard-color-form-field-placeholder)}.initial-input-area-container textarea::placeholder{color:var(--bard-color-form-field-placeholder)}.initial-input-area-container textarea:not(:placeholder-shown)~.speech-icon{display:none}.initial-input-area-container textarea:not(:placeholder-shown)~.send-icon{display:block}.send-icon.send-icon{display:none}.upload-icon,.speech-icon,.send-icon{color:var(--mat-icon-button-disabled-icon-color);padding:9px}.upload-icon{grid-area:upload-icon}.speech-icon,.send-icon{justify-self:flex-end;grid-area:icons}.enable-studio-entry-point{--input-area-outer-height:auto;--input-area-border-radius:24px;--input-area-height:42px;--input-area-icon-size:40px}.enable-studio-entry-point .initial-input-area-container{padding:var(--gem-sys-spacing--s);grid-template:"input-area input-area" 1fr "upload-icon icons" 1fr/1fr 1fr;row-gap:var(--gem-sys-spacing--s)}.enable-studio-entry-point .upload-icon{box-sizing:border-box;display:flex;align-items:center;justify-content:center;width:var(--input-area-icon-size);height:var(--input-area-icon-size);background-color:var(--gem-sys-color--surface-container-low);border-radius:var(--gem-sys-shape--corner-full)}.enable-studio-entry-point textarea{padding:calc(var(--gem-sys-spacing--s) + 1px) var(--gem-sys-spacing--m)}html{--mat-sys-on-surface:initial}.mat-app-background{background-color:var(--mat-app-background-color,var(--mat-sys-background,transparent));color:var(--mat-app-text-color,var(--mat-sys-on-background,inherit))}.mat-elevation-z0,.mat-mdc-elevation-specific.mat-elevation-z0{box-shadow:var(--mat-app-elevation-shadow-level-0,none)}.mat-elevation-z1,.mat-mdc-elevation-specific.mat-elevation-z1{box-shadow:var(--mat-app-elevation-shadow-level-1,none)}.mat-elevation-z2,.mat-mdc-elevation-specific.mat-elevation-z2{box-shadow:var(--mat-app-elevation-shadow-level-2,none)}.mat-elevation-z3,.mat-mdc-elevation-specific.mat-elevation-z3{box-shadow:var(--mat-app-elevation-shadow-level-3,none)}.mat-elevation-z4,.mat-mdc-elevation-specific.mat-elevation-z4{box-shadow:var(--mat-app-elevation-shadow-level-4,none)}.mat-elevation-z5,.mat-mdc-elevation-specific.mat-elevation-z5{box-shadow:var(--mat-app-elevation-shadow-level-5,none)}.mat-elevation-z6,.mat-mdc-elevation-specific.mat-elevation-z6{box-shadow:var(--mat-app-elevation-shadow-level-6,none)}.mat-elevation-z7,.mat-mdc-elevation-specific.mat-elevation-z7{box-shadow:var(--mat-app-elevation-shadow-level-7,none)}.mat-elevation-z8,.mat-mdc-elevation-specific.mat-elevation-z8{box-shadow:var(--mat-app-elevation-shadow-level-8,none)}.mat-elevation-z9,.mat-mdc-elevation-specific.mat-elevation-z9{box-shadow:var(--mat-app-elevation-shadow-level-9,none)}.mat-elevation-z10,.mat-mdc-elevation-specific.mat-elevation-z10{box-shadow:var(--mat-app-elevation-shadow-level-10,none)}.mat-elevation-z11,.mat-mdc-elevation-specific.mat-elevation-z11{box-shadow:var(--mat-app-elevation-shadow-level-11,none)}.mat-elevation-z12,.mat-mdc-elevation-specific.mat-elevation-z12{box-shadow:var(--mat-app-elevation-shadow-level-12,none)}.mat-elevation-z13,.mat-mdc-elevation-specific.mat-elevation-z13{box-shadow:var(--mat-app-elevation-shadow-level-13,none)}.mat-elevation-z14,.mat-mdc-elevation-specific.mat-elevation-z14{box-shadow:var(--mat-app-elevation-shadow-level-14,none)}.mat-elevation-z15,.mat-mdc-elevation-specific.mat-elevation-z15{box-shadow:var(--mat-app-elevation-shadow-level-15,none)}.mat-elevation-z16,.mat-mdc-elevation-specific.mat-elevation-z16{box-shadow:var(--mat-app-elevation-shadow-level-16,none)}.mat-elevation-z17,.mat-mdc-elevation-specific.mat-elevation-z17{box-shadow:var(--mat-app-elevation-shadow-level-17,none)}.mat-elevation-z18,.mat-mdc-elevation-specific.mat-elevation-z18{box-shadow:var(--mat-app-elevation-shadow-level-18,none)}.mat-elevation-z19,.mat-mdc-elevation-specific.mat-elevation-z19{box-shadow:var(--mat-app-elevation-shadow-level-19,none)}.mat-elevation-z20,.mat-mdc-elevation-specific.mat-elevation-z20{box-shadow:var(--mat-app-elevation-shadow-level-20,none)}.mat-elevation-z21,.mat-mdc-elevation-specific.mat-elevation-z21{box-shadow:var(--mat-app-elevation-shadow-level-21,none)}.mat-elevation-z22,.mat-mdc-elevation-specific.mat-elevation-z22{box-shadow:var(--mat-app-elevation-shadow-level-22,none)}.mat-elevation-z23,.mat-mdc-elevation-specific.mat-elevation-z23{box-shadow:var(--mat-app-elevation-shadow-level-23,none)}.mat-elevation-z24,.mat-mdc-elevation-specific.mat-elevation-z24{box-shadow:var(--mat-app-elevation-shadow-level-24,none)}mat-icon.gds-icon-s,img.gds-icon-s{font-size:var(--gem-sys-typography-icon-scale--icon-s-font-size);width:var(--gem-sys-typography-icon-scale--icon-s-font-size);height:var(--gem-sys-typography-icon-scale--icon-s-font-size);--mat-menu-item-icon-size:var(--gem-sys-typography-icon-scale--icon-s-font-size);line-height:1}mat-icon.gds-icon-m,img.gds-icon-m{font-size:var(--gem-sys-typography-icon-scale--icon-m-font-size);width:var(--gem-sys-typography-icon-scale--icon-m-font-size);height:var(--gem-sys-typography-icon-scale--icon-m-font-size);--mat-menu-item-icon-size:var(--gem-sys-typography-icon-scale--icon-m-font-size);line-height:1}mat-icon.gds-icon-l,img.gds-icon-l{font-size:var(--gem-sys-typography-icon-scale--icon-l-font-size);width:var(--gem-sys-typography-icon-scale--icon-l-font-size);height:var(--gem-sys-typography-icon-scale--icon-l-font-size);--mat-menu-item-icon-size:var(--gem-sys-typography-icon-scale--icon-l-font-size);line-height:1}mat-icon.gds-icon-xl,img.gds-icon-xl{font-size:var(--gem-sys-typography-icon-scale--icon-xl-font-size);width:var(--gem-sys-typography-icon-scale--icon-xl-font-size);height:var(--gem-sys-typography-icon-scale--icon-xl-font-size);--mat-menu-item-icon-size:var(--gem-sys-typography-icon-scale--icon-xl-font-size);line-height:1}mat-icon.icon-filled{font-variation-settings:"FILL" 1}.gmat-display-1{font-size:4rem;font-weight:400;line-height:4.75rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-display-2{font-size:3.5rem;font-weight:400;line-height:4rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-display-3{font-size:2.75rem;font-weight:400;line-height:3.25rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-headline-1{font-size:2.25rem;font-weight:400;line-height:2.75rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-headline-2{font-size:2rem;font-weight:400;line-height:2.5rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-headline-3{font-size:1.75rem;font-weight:400;line-height:2.25rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-headline-4{font-size:1.5rem;font-weight:400;line-height:2rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-headline-5{font-size:1.375rem;font-weight:400;line-height:1.75rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-headline-6{font-size:1.125rem;font-weight:400;line-height:1.5rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-subhead-1{font-size:1rem;font-weight:500;line-height:1.5rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-subhead-2{font-size:.875rem;font-weight:500;line-height:1.25rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-subtitle-1{font-size:1rem;font-weight:500;line-height:1.5rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-subtitle-2{font-size:.875rem;font-weight:500;line-height:1.25rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-overline{font-size:.75rem;font-weight:500;line-height:1rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:.1px}.gmat-body-1{font-size:1rem;font-weight:400;line-height:1.5rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-body-2{font-size:.875rem;font-weight:400;line-height:1.25rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gmat-caption{font-size:.75rem;font-weight:400;line-height:1rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:.1px}.gmat-button .mat-flat-button,.gmat-button .mat-stroked-button,.gmat-button .mat-raised-button,.gmat-button .mat-button,.gmat-button.mat-flat-button,.gmat-button.mat-stroked-button,.gmat-button.mat-raised-button,.gmat-button.mat-button,.gmat-button-typography{font-size:.875rem;font-weight:500;line-height:1.25rem;font-family:"Google Sans","Helvetica Neue",sans-serif;letter-spacing:normal}.gds-body-l{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--body-l-font-size);font-weight:var(--gem-sys-typography-type-scale--body-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-l-line-height)}.gds-body-m{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--body-m-font-size);font-weight:var(--gem-sys-typography-type-scale--body-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-m-line-height)}.gds-body-m-alt{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--body-m-alt-font-size);font-weight:var(--gem-sys-typography-type-scale--body-m-alt-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-m-alt-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-m-alt-line-height)}.gds-display-l{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--display-l-font-size);font-weight:var(--gem-sys-typography-type-scale--display-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--display-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--display-l-line-height)}.gds-display-s{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--display-s-font-size);font-weight:var(--gem-sys-typography-type-scale--display-s-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--display-s-font-tracking);line-height:var(--gem-sys-typography-type-scale--display-s-line-height)}.gds-display-m{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--display-m-font-size);font-weight:var(--gem-sys-typography-type-scale--display-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--display-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--display-m-line-height)}.gds-headline-m{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--headline-m-font-size);font-weight:var(--gem-sys-typography-type-scale--headline-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--headline-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--headline-m-line-height)}.gds-label-l{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--label-l-font-size);font-weight:var(--gem-sys-typography-type-scale--label-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-l-line-height)}.gds-label-m{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--label-m-font-size);font-weight:var(--gem-sys-typography-type-scale--label-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-m-line-height)}.gds-label-m-alt{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--label-m-alt-font-size);font-weight:var(--gem-sys-typography-type-scale--label-m-alt-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-m-alt-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-m-alt-line-height)}.gds-title-l{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--title-l-font-size);font-weight:var(--gem-sys-typography-type-scale--title-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-l-line-height)}.gds-title-m{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--title-m-font-size);font-weight:var(--gem-sys-typography-type-scale--title-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-m-line-height)}.gds-title-m-alt{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--title-m-alt-font-size);font-weight:var(--gem-sys-typography-type-scale--title-m-alt-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-m-alt-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-m-alt-line-height)}.gds-title-s{font-family:"Google Sans","Helvetica Neue",sans-serif;font-size:var(--gem-sys-typography-type-scale--title-s-font-size);font-weight:var(--gem-sys-typography-type-scale--title-s-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-s-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-s-line-height)}.gds-elevation-0{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.gds-elevation-1{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.gds-elevation-2{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.gds-elevation-3{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.gds-elevation-4{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.gds-elevation-5{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;right:0}[dir=rtl] .cdk-visually-hidden{right:auto;left:0}@media (pointer:fine){::-webkit-scrollbar,::-webkit-scrollbar-corner{background:transparent;height:12px;width:12px}::-webkit-scrollbar-thumb{background:content-box transparent;border:2px solid transparent;border-radius:var(--gem-sys-shape--corner-full);min-height:48px;min-width:48px}@supports not (scrollbar-color:auto){:hover{will-change:scrollbar-color}}:hover::-webkit-scrollbar-thumb{background:content-box var(--gem-sys-color--surface-container-highest)}::-webkit-scrollbar-thumb:active,::-webkit-scrollbar-thumb:hover{background:content-box var(--gem-sys-color--outline-variant)}::-webkit-scrollbar-button{height:0;width:0}@supports not (selector(::-webkit-scrollbar)){*{scrollbar-color:transparent transparent;scrollbar-gutter:auto;scrollbar-width:thin}*:hover{scrollbar-color:var(--gem-sys-color--surface-container-highest) transparent}}}html{--mat-focus-indicator-border-width:1px;--mat-focus-indicator-border-color:black;--mat-focus-indicator-display:block}@media (forced-colors:active){:root{--mat-focus-indicator-border-width:3px}}:focus:not(:focus-visible){--mat-focus-indicator-display:none}.mat-mdc-icon-button{--mat-focus-indicator-border-radius:50%}.mat-mdc-list-item-interactive{--mat-focus-indicator-border-radius:0 30px 30px 0}single-image .overlay-container .on-hover-button{opacity:0}single-image .overlay-container:hover .on-hover-button,single-image .overlay-container .on-hover-button.active,single-image .overlay-container .on-hover-button:focus:not(.cdk-mouse-focused){opacity:1}single-image .overlay-container:hover .on-hover-button[disabled],single-image .overlay-container .on-hover-button.active[disabled],single-image .overlay-container .on-hover-button:focus:not(.cdk-mouse-focused)[disabled]{opacity:.5}single-image.generated-image .placeholder{aspect-ratio:1}single-image.generated-image .image,single-image.generated-image .placeholder{height:auto}@media screen and (min-width:600px){single-image.generated-image .image,single-image.generated-image .placeholder{width:240px}}@media screen and (min-width:600px){single-image.generated-image.large .image,single-image.generated-image.large .placeholder{width:456px}}single-image.generated-image .generated-image-button,.select-image-dialog_content .generated-image-button,.generated-image-expansion-dialog-action-buttons .generated-image-button{padding:0;border-radius:50%}single-image.generated-image .generated-image-button .button-icon-wrapper,.select-image-dialog_content .generated-image-button .button-icon-wrapper,.generated-image-expansion-dialog-action-buttons .generated-image-button .button-icon-wrapper{display:grid;place-content:center;border-radius:50%}single-image.generated-image .generated-image-button .button-icon-wrapper .button-icon,.select-image-dialog_content .generated-image-button .button-icon-wrapper .button-icon,.generated-image-expansion-dialog-action-buttons .generated-image-button .button-icon-wrapper .button-icon{color:var(--gem-sys-color--on-surface-variant)}single-image.generated-image .generated-image-button{height:32px;width:32px;min-width:32px}single-image.generated-image .generated-image-button .button-icon-wrapper,.select-image-dialog_content .generated-image-button .button-icon-wrapper{background:var(--bard-color-image-overlay-background);height:32px;width:32px}single-image.generated-image .generated-image-button .button-icon-wrapper .button-icon,.select-image-dialog_content .generated-image-button .button-icon-wrapper .button-icon{height:20px;aspect-ratio:1/1;font-size:20px;color:var(--gem-sys-color--on-surface-variant)}single-image.generated-image .generated-image-button .button-icon-wrapper mat-spinner,.select-image-dialog_content .generated-image-button .button-icon-wrapper mat-spinner{stroke:var(--gem-sys-color--primary)}single-image.generated-image .loader-cell,.select-image-dialog_content .loader-cell{width:164px;aspect-ratio:1}@media screen and (max-width:600px){single-image.generated-image .loader-cell,.select-image-dialog_content .loader-cell{width:calc(100% + 20px)}}single-image.generated-image .loader-cell::before,.select-image-dialog_content .loader-cell::before{box-shadow:0 0 0 240px var(--bard-color-imagen-selection-dialog-background);pointer-events:none;z-index:2}single-image.generated-image .loader-cell.filler,.select-image-dialog_content .loader-cell.filler{background-color:var(--bard-color-imagen-selection-dialog-background);flex-grow:1;aspect-ratio:auto}single-image.generated-image .loader-cell button,.select-image-dialog_content .loader-cell button{margin:10px}@media screen and (max-width:600px){:root .generated-image-change-image-dialog.mat-mdc-dialog-panel{min-width:100%;min-height:100%}:root .generated-image-change-image-dialog.mat-mdc-dialog-panel mat-dialog-container.mat-mdc-dialog-container .mat-mdc-dialog-surface{border-radius:0}}:root .generated-image-change-image-dialog.mat-mdc-dialog-panel mat-dialog-container.mat-mdc-dialog-container .dialog-title{padding-bottom:0}:root .generated-image-prompt-dialog.mat-mdc-menu-panel{border-radius:12px}:root .generated-image-prompt-dialog.mat-mdc-menu-panel .mat-mdc-menu-content{padding:0}generated-image single-image .placeholder.loading,generated-video single-image .placeholder.loading{animation:none;background:transparent}generated-image .loader,generated-video .loader{overflow:hidden;border-radius:16px;position:absolute;inset:0}generated-image .loader::before,generated-video .loader::before{content:"";position:absolute;display:block;inset:-100%;background:linear-gradient(-90deg,var(--bard-color-imagen-loading-gradient-step-1),var(--bard-color-imagen-loading-gradient-step-2),var(--bard-color-imagen-loading-gradient-step-3),var(--bard-color-imagen-loading-gradient-step-2),var(--bard-color-imagen-loading-gradient-step-1),var(--bard-color-imagen-loading-gradient-step-2),var(--bard-color-imagen-loading-gradient-step-3),var(--bard-color-imagen-loading-gradient-step-2));background-size:200% 200%;background-position:-100%;background-repeat:repeat;transform:rotate(-33deg);transform-origin:center}generated-image .loader.animate::before,generated-video .loader.animate::before{animation:animateGradient 4.3s linear infinite}generated-image .loader.animate.done-generating::before,generated-video .loader.animate.done-generating::before{animation:fadeOut .2s linear;animation-fill-mode:forwards}generated-image .loader .placeholder.loading,generated-video .loader .placeholder.loading{background:none}.generated-images-container.loader-grid,.image-gallery.loader-grid{border-radius:16px;display:flex;flex-wrap:wrap;gap:10px;position:relative;overflow:hidden;width:490px}.generated-images-container.loader-grid::before,.image-gallery.loader-grid::before{content:"";position:absolute;display:block;inset:-100%;background:linear-gradient(-90deg,var(--bard-color-imagen-loading-gradient-step-1),var(--bard-color-imagen-loading-gradient-step-2),var(--bard-color-imagen-loading-gradient-step-3),var(--bard-color-imagen-loading-gradient-step-2),var(--bard-color-imagen-loading-gradient-step-1),var(--bard-color-imagen-loading-gradient-step-2),var(--bard-color-imagen-loading-gradient-step-3),var(--bard-color-imagen-loading-gradient-step-2));background-size:200% 200%;background-position:-100%;background-repeat:repeat;transform:rotate(-33deg);transform-origin:center}.generated-images-container.loader-grid.animate::before,.image-gallery.loader-grid.animate::before{animation:animateGradient 4.3s linear infinite}.generated-images-container.loader-grid.animate.done-generating::before,.image-gallery.loader-grid.animate.done-generating::before{animation:fadeOut .2s linear;animation-fill-mode:forwards}.generated-images-container.loader-grid .placeholder.loading,.image-gallery.loader-grid .placeholder.loading{background:none}@keyframes animateGradient{0%{background-position:-100%}100%{background-position:100%}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.single-large-image .generated-images-container{border-radius:16px;max-width:490px}@media screen and (min-width:600px){.single-large-image single-image.generated-image .image,.single-large-image single-image.generated-image .placeholder{width:456px}}.single-large-image .generated-images-container.loader-grid,.single-large-image .image-gallery.loader-grid{width:456px;overflow:hidden}.single-large-image .loader-cell{width:456px}@media screen and (max-width:600px){.single-large-image .loader-cell{width:calc(100% + 20px)}}.single-large-image .loader-cell::before{box-shadow:0 0 0 456px var(--gem-sys-color--surface);z-index:1;pointer-events:none}.side-by-side-immersive .loader-cell{width:160px}generated-image,generated-video{transform:scale(1);transition:transform .2s linear}generated-image.loading,generated-video.loading{transform:scale(0);transform-origin:center}:root .image-expansion-dialog-backdrop{background-color:rgba(var(--bard-color-lightbox-background-rgb),.9);backdrop-filter:blur(2px);animation:backdrop-opacity 83ms linear forwards}:root .mobile-generated-image-bottom-sheet-panel .mat-bottom-sheet-container.cdk-dialog-container{border-radius:28px 28px 0 0;padding-top:16px;padding-bottom:56px;background-color:var(--bard-color-lightbox-background)}:root .image-expansion-dialog-panel.image-expansion-dialog-panel .mat-mdc-dialog-container.cdk-dialog-container .mat-mdc-dialog-surface{background-color:transparent;border-radius:0;box-shadow:none}:root .image-expansion-dialog-panel.image-expansion-dialog-panel .mat-mdc-dialog-container.cdk-dialog-container .mat-mdc-dialog-surface .mat-mdc-dialog-content{padding:0;max-height:unset}:root .image-expansion-dialog-panel.image-expansion-dialog-panel .mat-mdc-dialog-container.cdk-dialog-container .mat-mdc-dialog-surface iframe:not(.image-expansion-dialog-interactive-iframe iframe){pointer-events:none}:root .image-expansion-dialog-panel.image-expansion-dialog-panel .mat-mdc-dialog-container.cdk-dialog-container .mat-mdc-dialog-surface iframe{border:none;position:absolute;width:100%;height:100%}:root .image-expansion-dialog-panel.image-expansion-dialog-panel .carousel-dots{display:none}:root .image-expansion-dialog-panel.image-expansion-dialog-panel .lens-icon-content{display:flex;align-items:center;gap:4px}:root .image-expansion-dialog-trigger-fade{animation:trigger-fade-out 83ms linear forwards}:root .image-expansion-dialog-link-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@keyframes trigger-fade-out{from{opacity:1}to{opacity:0}}@keyframes backdrop-opacity{from{opacity:0}to{opacity:1}}@media (max-width:768px){.global-consent-dialog-panel{width:100dvw;height:100dvh;overflow:none}}@media (max-width:768px){.source-dialog-panel{min-width:100vw;min-height:100vh}}@media (max-width:768px){.global-discovery-dialog-panel{min-width:364px;overflow:none}}.bard-multiline-tooltip{white-space:pre-wrap}.bard-singleline-tooltip{white-space:nowrap}rich-textarea .user-prompt-chip{background:var(--bard-color-zero-state-prompt-chip-background);border-radius:6px;color:var(--bard-color-zero-state-prompt-chip-text);display:inline-block;margin:2px 0;padding:1px 6px}:root .message-dialog-content a{color:var(--gem-sys-color--primary)}[dir=rtl] bard-avatar .bard-avatar .avatar_top-circle,[dir=rtl] bard-avatar .bard-avatar .avatar_bottom-circle{transform:scaleX(-1)}.bot-list-row-options-menu{--mat-menu-container-shape:8px;width:211px}:root .bot-row-container .text-container .bot-title mat-chip .mat-mdc-chip-action-label{font-size:9px}rich-textarea .ql-editor{position:relative;padding-inline:var(--rich-textarea-padding-inline-start,0) var(--rich-textarea-padding-inline-end,15px);padding-block:var(--rich-textarea-padding-block-start,0) var(--rich-textarea-padding-block-end,0);line-height:24px;overflow:auto;max-height:var(--textarea-max-height,calc(var(--textarea-max-rows, 0)*24px));word-break:break-word;direction:rtl;text-align:start}rich-textarea .ql-editor.scrollbar-present{-webkit-padding-end:48px;padding-inline-end:48px}rich-textarea .ql-editor.scrollbar-present.new-input-ui{-webkit-padding-end:var(--gem-sys-spacing--s);padding-inline-end:var(--gem-sys-spacing--s)}rich-textarea .ql-editor.isFullscreen{max-height:calc(var(--chat-container-height, calc(100vh - 128px)) - 48px - var(--uploader-height, 0px));height:calc(var(--chat-container-height, calc(100vh - 128px)) - 48px - var(--uploader-height, 0px))}rich-textarea .ql-editor.isFullscreen:not(.new-input-ui){-webkit-padding-end:60px;padding-inline-end:60px}rich-textarea .ql-editor.ql-blank::before{font-style:unset;color:var(--bard-color-form-field-placeholder);inset-inline:var(--rich-textarea-padding-inline-start,0) var(--rich-textarea-padding-inline-end,16px)}rich-textarea .ql-editor.ql-blank::after{content:attr(data-placeholder);display:block;margin-top:-24px;visibility:hidden}rich-textarea.enterprise .ql-editor.ql-blank::before{inset-inline:20px 16px}rich-textarea.enterprise .ql-editor.ql-blank::after{content:"encrypted";color:var(--bard-color-form-field-placeholder);font-family:"Google Symbols";position:absolute;visibility:visible;font-size:20px;margin-right:-3px}bots-creation-window .mat-mdc-text-field-wrapper{border-radius:var(--mdc-shape-small,16px);background-color:var(--gem-sys-color--surface)}bots-creation-window .instruction-actions-container .history-button:first-of-type .mat-mdc-button-persistent-ripple{border-start-end-radius:0;border-end-end-radius:0}bots-creation-window .instruction-actions-container .history-button:last-of-type .mat-mdc-button-persistent-ripple{border-start-start-radius:0;border-end-start-radius:0}bots-creation-window .instruction-bg p{margin:0}@media (max-width:768px){.global-gal-data-usage-dialog-panel{min-width:100vw;min-height:100%;overflow:none;align-items:center}}:root .light-theme{--bard-color-neutral-90:#e3e3e3;--bard-color-neutral-90-rgb:227,227,227;--bard-color-neutral-95:#f2f2f2;--bard-color-neutral-95-rgb:242,242,242;--bard-color-neutral-96:#f4f3f2;--bard-color-neutral-96-rgb:244,243,242;--bard-color-enterprise-greeting:#c7c7c7;--bard-color-enterprise-greeting-rgb:199,199,199;--bard-color-custom-primary-container:#d3e3fd;--bard-color-custom-primary-container-rgb:211,227,253;--bard-color-surface-tint:#6991d6;--bard-color-surface-tint-rgb:105,145,214;--bard-color-surface-tint-opacity-12:rgba(105,145,214,0.1215686275);--bard-color-surface-tint-opacity-12-rgb:105,145,214;--bard-color-tertiary-60:#1ea446;--bard-color-tertiary-60-rgb:30,164,70;--bard-color-surface-3-opacity-11:rgba(105,145,214,0.1098039216);--bard-color-surface-3-opacity-11-rgb:105,145,214;--bard-color-surface-5-opacity-14:rgba(105,145,214,0.1411764706);--bard-color-surface-5-opacity-14-rgb:105,145,214;--bard-color-footer-background:#f8f9fa;--bard-color-footer-background-rgb:248,249,250;--bard-color-skittle-loading-gradient-step-2:#f0f4f9;--bard-color-skittle-loading-gradient-step-2-rgb:240,244,249;--bard-color-draft-chip-background:#e8eaed;--bard-color-draft-chip-background-rgb:232,234,237;--bard-color-sidenav-background:#fff;--bard-color-sidenav-background-rgb:255,255,255;--bard-color-inverse-primary-background:#000;--bard-color-inverse-primary-background-rgb:0,0,0;--bard-color-response-container-flipped-background:#f3f6fc;--bard-color-response-container-flipped-background-rgb:243,246,252;--bard-color-sos-footer:#757575;--bard-color-sos-footer-rgb:117,117,117;--bard-color-code-comment:#5f6368;--bard-color-code-comment-rgb:95,99,104;--bard-color-code-variables:#d93025;--bard-color-code-variables-rgb:217,48,37;--bard-color-code-literal:#b55908;--bard-color-code-literal-rgb:181,89,8;--bard-color-code-class:#996900;--bard-color-code-class-rgb:153,105,0;--bard-color-code-string:#188038;--bard-color-code-string-rgb:24,128,56;--bard-color-code-quotes-and-meta:#1967d2;--bard-color-code-quotes-and-meta-rgb:25,103,210;--bard-color-code-keyword:#8430ce;--bard-color-code-keyword-rgb:132,48,206;--bard-color-code-chip-foreground:#8430ce;--bard-color-code-chip-foreground-rgb:132,48,206;--bard-color-code-chip-background:#f7e3ff;--bard-color-code-chip-background-rgb:247,227,255;--bard-color-code-chip-background-selected:#f0c6ff;--bard-color-code-chip-background-selected-rgb:240,198,255;--bard-color-continue-chat-discovery-tooltip-button-text:#0b57d0;--bard-color-continue-chat-discovery-tooltip-button-text-rgb:11,87,208;--bard-color-discovery-card-dialog-background:#fff;--bard-color-discovery-card-dialog-background-rgb:255,255,255;--bard-color-fact-check-tooltip-background:#fff;--bard-color-fact-check-tooltip-background-rgb:255,255,255;--bard-color-fact-check-tooltip-entailed-highlight:#ddf8d8;--bard-color-fact-check-tooltip-entailed-highlight-rgb:221,248,216;--bard-color-fact-check-tooltip-entailed-selected:rgba(128,218,128,0.75);--bard-color-fact-check-tooltip-entailed-selected-rgb:128,218,128;--bard-color-fact-check-tooltip-contradictory-highlight:#ffede1;--bard-color-fact-check-tooltip-contradictory-highlight-rgb:255,237,225;--bard-color-fact-check-tooltip-contradictory-selected:rgba(255,182,131,0.75);--bard-color-fact-check-tooltip-contradictory-selected-rgb:255,182,131;--bard-color-fact-check-button-complete:#d3e3fd;--bard-color-fact-check-button-complete-rgb:211,227,253;--bard-color-fact-title:#006c35;--bard-color-fact-title-rgb:0,108,53;--bard-color-fact-title-invalid:#9a4600;--bard-color-fact-title-invalid-rgb:154,70,0;--bard-color-recitation-background:#e7f2ff;--bard-color-recitation-background-rgb:231,242,255;--bard-color-tooltip-box-shadow:rgba(60,64,67,0.16);--bard-color-tooltip-box-shadow-rgb:60,64,67;--bard-color-sentence-prefix-color:#000;--bard-color-sentence-prefix-color-rgb:0,0,0;--bard-color-sentence-words-color:#80868b;--bard-color-sentence-words-color-rgb:128,134,139;--bard-color-image-overlay-background:rgba(255,255,255,0.75);--bard-color-image-overlay-background-rgb:255,255,255;--bard-color-pup-banner:#fbbc04;--bard-color-pup-banner-rgb:251,188,4;--bard-color-update-button-edit-container:#1a73e8;--bard-color-update-button-edit-container-rgb:26,115,232;--bard-color-share-link:#0842a0;--bard-color-share-link-rgb:8,66,160;--bard-color-strong-focus-indicator:#000;--bard-color-strong-focus-indicator-rgb:0,0,0;--bard-color-inverse-strong-focus-indicator:#fff;--bard-color-inverse-strong-focus-indicator-rgb:255,255,255;--bard-color-tool-fuse-background-left:#dddeff;--bard-color-tool-fuse-background-left-rgb:221,222,255;--bard-color-tool-fuse-background-middle:#e7e9fe;--bard-color-tool-fuse-background-middle-rgb:231,233,254;--bard-color-tool-fuse-background-right:#f3f6fc;--bard-color-tool-fuse-background-right-rgb:243,246,252;--bard-color-tool-fuse-foreground-left:#cbddff;--bard-color-tool-fuse-foreground-left-rgb:203,221,255;--bard-color-tool-fuse-foreground-middle:#d8e2ff;--bard-color-tool-fuse-foreground-middle-rgb:216,226,255;--bard-color-tool-fuse-foreground-right:#ccceff;--bard-color-tool-fuse-foreground-right-rgb:204,206,255;--bard-color-bard-avatar-v2-basic-circle-stop-1:#9168c0;--bard-color-bard-avatar-v2-basic-circle-stop-1-rgb:145,104,192;--bard-color-bard-avatar-v2-basic-circle-stop-2:#5684d1;--bard-color-bard-avatar-v2-basic-circle-stop-2-rgb:86,132,209;--bard-color-bard-avatar-v2-basic-circle-stop-3:#1ba1e3;--bard-color-bard-avatar-v2-basic-circle-stop-3-rgb:27,161,227;--bard-color-bard-avatar-v2-advanced-circle-stop-1:#9e72ba;--bard-color-bard-avatar-v2-advanced-circle-stop-1-rgb:158,114,186;--bard-color-bard-avatar-v2-advanced-circle-stop-2:#d65c67;--bard-color-bard-avatar-v2-advanced-circle-stop-2-rgb:214,92,103;--bard-color-bard-avatar-v2-advanced-circle-stop-3:#d6635c;--bard-color-bard-avatar-v2-advanced-circle-stop-3-rgb:214,99,92;--bard-color-icon-separator:#d9d9d9;--bard-color-icon-separator-rgb:217,217,217;--bard-color-chrome-experiment-badge:#1b6ef3;--bard-color-chrome-experiment-badge-rgb:27,110,243;--bard-color-onegooglebar-product-controls:#5f6368;--bard-color-onegooglebar-product-controls-rgb:95,99,104;--bard-color-share-title-card-border:#c4c7c5;--bard-color-share-title-card-border-rgb:196,199,197;--bard-color-share-title-card-icon:#0b57d0;--bard-color-share-title-card-icon-rgb:11,87,208;--bard-color-share-title-card-editmode-text:#0b57d0;--bard-color-share-title-card-editmode-text-rgb:11,87,208;--bard-color-share-title-card-editmode-focus:#3c4043;--bard-color-share-title-card-editmode-focus-rgb:60,64,67;--bard-color-share-selected-title-card-border:#0b57d0;--bard-color-share-selected-title-card-border-rgb:11,87,208;--bard-color-share-selected-title-card-background:rgba(11,87,208,0.12);--bard-color-share-selected-title-card-background-rgb:11,87,208;--bard-color-share-selected-title-card-text:#1f1f1f;--bard-color-share-selected-title-card-text-rgb:31,31,31;--bard-color-share-social-media-icon-focus:#e9eef6;--bard-color-share-social-media-icon-focus-rgb:233,238,246;--bard-color-share-copy-button-focus:#e9eef6;--bard-color-share-copy-button-focus-rgb:233,238,246;--bard-color-tunable-selection-textarea-background:#e9eef6;--bard-color-tunable-selection-textarea-background-rgb:233,238,246;--bard-color-tunable-selection-menu-background:#fff;--bard-color-tunable-selection-menu-background-rgb:255,255,255;--bard-color-tunable-selection-menu-text:#444746;--bard-color-tunable-selection-menu-text-rgb:68,71,70;--bard-color-tunable-selection-placeholder-text:rgba(68,71,70,0.4);--bard-color-tunable-selection-placeholder-text-rgb:68,71,70;--bard-color-tunable-selection-button:#fff;--bard-color-tunable-selection-button-rgb:255,255,255;--bard-color-tunable-selection-button-hover:#f0f4f9;--bard-color-tunable-selection-button-hover-rgb:240,244,249;--bard-color-tunable-selection-button-icon:#444746;--bard-color-tunable-selection-button-icon-rgb:68,71,70;--bard-color-tunable-selection-invalid-prompt:#1f1f1f;--bard-color-tunable-selection-invalid-prompt-rgb:31,31,31;--bard-color-tunable-selection-shimmer-advanced:#e5989f;--bard-color-tunable-selection-shimmer-advanced-rgb:229,152,159;--bard-color-tunable-selection-shimmer-non-advanced:#487fed;--bard-color-tunable-selection-shimmer-non-advanced-rgb:72,127,237;--bard-color-share-social-media-icon-background:#f8fafd;--bard-color-share-social-media-icon-background-rgb:248,250,253;--bard-color-form-field-outline:#80868b;--bard-color-form-field-outline-rgb:128,134,139;--bard-color-form-field-outline-active:#1a73e8;--bard-color-form-field-outline-active-rgb:26,115,232;--bard-color-form-field-outline-hover:#202124;--bard-color-form-field-outline-hover-rgb:32,33,36;--bard-color-form-field-placeholder:#5f6368;--bard-color-form-field-placeholder-rgb:95,99,104;--bard-color-zero-state-card-selected:#d3e3fd;--bard-color-zero-state-card-selected-rgb:211,227,253;--bard-color-zero-state-prompt-chip-background:#d3e3fd;--bard-color-zero-state-prompt-chip-background-rgb:211,227,253;--bard-color-zero-state-prompt-chip-text:#0b57d0;--bard-color-zero-state-prompt-chip-text-rgb:11,87,208;--bard-color-processing-animation-color-1:#e3e3e3;--bard-color-processing-animation-color-1-rgb:227,227,227;--bard-color-processing-animation-color-2:#f0f4f9;--bard-color-processing-animation-color-2-rgb:240,244,249;--bard-color-tts-token-highlight:#ff0;--bard-color-tts-token-highlight-rgb:255,255,0;--bard-color-tts-sentence-highlight:#e8e8e8;--bard-color-tts-sentence-highlight-rgb:232,232,232;--bard-color-onhover-conversation-metadata-button-v2:#dde3ea;--bard-color-onhover-conversation-metadata-button-v2-rgb:221,227,234;--bard-color-new-conversation-button:#dde3ea;--bard-color-new-conversation-button-rgb:221,227,234;--bard-color-on-new-conversation-button:#444746;--bard-color-on-new-conversation-button-rgb:68,71,70;--bard-color-icon-container-background:#fff;--bard-color-icon-container-background-rgb:255,255,255;--bard-color-bot-power-up-button-background:#e8eaed;--bard-color-bot-power-up-button-background-rgb:232,234,237;--bard-color-bot-onboarding-banner-bg-step-1:#efdbff;--bard-color-bot-onboarding-banner-bg-step-1-rgb:239,219,255;--bard-color-bot-onboarding-banner-bg-step-2:#c2e7ff;--bard-color-bot-onboarding-banner-bg-step-2-rgb:194,231,255;--bard-color-bot-onboarding-banner-bg-step-3:#c2e7ff;--bard-color-bot-onboarding-banner-bg-step-3-rgb:194,231,255;--bard-color-bot-onboarding-banner-bg-step-4:#efdbff;--bard-color-bot-onboarding-banner-bg-step-4-rgb:239,219,255;--bard-color-bot-logo-bg-default:#e1e3e1;--bard-color-bot-logo-bg-default-rgb:225,227,225;--bard-color-bot-logo-text-default:#5c5f5e;--bard-color-bot-logo-text-default-rgb:92,95,94;--bard-color-bot-logo-border-default:#a9acaa;--bard-color-bot-logo-border-default-rgb:169,172,170;--bard-color-lightbox-background:#fff;--bard-color-lightbox-background-rgb:255,255,255;--bard-color-image-lightbox-text:#757575;--bard-color-image-lightbox-text-rgb:117,117,117;--bard-color-image-placeholder-background:#d3dbe5;--bard-color-image-placeholder-background-rgb:211,219,229;--bard-color-chart-highlighted-background:#e9eef6;--bard-color-chart-highlighted-background-rgb:233,238,246;--bard-color-skeleton-loader-background-1:#f0f4f9;--bard-color-skeleton-loader-background-1-rgb:240,244,249;--bard-color-skeleton-loader-background-2:#e9eef6;--bard-color-skeleton-loader-background-2-rgb:233,238,246;--bard-color-skeleton-loader-background-3:#487fed;--bard-color-skeleton-loader-background-3-rgb:72,127,237;--bard-color-skeleton-loader-background-alt-1:#f0f4f9;--bard-color-skeleton-loader-background-alt-1-rgb:240,244,249;--bard-color-skeleton-loader-background-alt-2:#e8cde2;--bard-color-skeleton-loader-background-alt-2-rgb:232,205,226;--bard-color-skeleton-loader-background-alt-3:#e5989f;--bard-color-skeleton-loader-background-alt-3-rgb:229,152,159;--bard-color-skeleton-loader-background-grayscale-1:#f0f4f9;--bard-color-skeleton-loader-background-grayscale-1-rgb:240,244,249;--bard-color-skeleton-loader-background-grayscale-2:#d3dbe5;--bard-color-skeleton-loader-background-grayscale-2-rgb:211,219,229;--bard-color-skeleton-loader-background-grayscale-3:#f0f4f8;--bard-color-skeleton-loader-background-grayscale-3-rgb:240,244,248;--bard-color-gallery-separator-line:#e1e3e1;--bard-color-gallery-separator-line-rgb:225,227,225;--bard-color-gallery-image-card-text:#fff;--bard-color-gallery-image-card-text-rgb:255,255,255;--bard-color-brand-text-gradient-stop-1:#4285f4;--bard-color-brand-text-gradient-stop-1-rgb:66,133,244;--bard-color-brand-text-gradient-stop-2:#9b72cb;--bard-color-brand-text-gradient-stop-2-rgb:155,114,203;--bard-color-brand-text-gradient-stop-3:#d96570;--bard-color-brand-text-gradient-stop-3-rgb:217,101,112;--bard-color-adv-marketing-product-background:rgba(154,160,166,0.1);--bard-color-adv-marketing-product-background-rgb:154,160,166;--bard-color-adv-marketing-check:#80868b;--bard-color-adv-marketing-check-rgb:128,134,139;--bard-color-adv-marketing-privacy:#eceeef;--bard-color-adv-marketing-privacy-rgb:236,238,239;--bard-color-adv-marketing-basic-background:#222327;--bard-color-adv-marketing-basic-background-rgb:34,35,39;--bard-color-adv-marketing-disclaimer:#9aa0a6;--bard-color-adv-marketing-disclaimer-rgb:154,160,166;--bard-color-input-area-buttons-hover-background:#3c4043;--bard-color-input-area-buttons-hover-background-rgb:60,64,67;--bard-color-speech-dictation-mic-button-border:rgba(105,145,214,0.3019607843);--bard-color-speech-dictation-mic-button-border-rgb:105,145,214;--bard-color-sidenav-upgrade-button:#dde3ea;--bard-color-sidenav-upgrade-button-rgb:221,227,234;--bard-color-sidenav-mobile-controls:#444746;--bard-color-sidenav-mobile-controls-rgb:68,71,70;--bard-color-sidenav-scrim:rgba(19,19,20,0.4);--bard-color-sidenav-scrim-rgb:19,19,20;--bard-color-get-app-banner-background:#d6e2fb;--bard-color-get-app-banner-background-rgb:214,226,251;--bard-color-get-app-banner-text:#444746;--bard-color-get-app-banner-text-rgb:68,71,70;--bard-color-get-app-mobile-dialog-text:#fff;--bard-color-get-app-mobile-dialog-text-rgb:255,255,255;--bard-color-get-app-mobile-dialog-disclaimer:#e3e3e3;--bard-color-get-app-mobile-dialog-disclaimer-rgb:227,227,227;--bard-color-get-app-mobile-dialog-background:#14181d;--bard-color-get-app-mobile-dialog-background-rgb:20,24,29;--bard-color-get-app-qr-code-border:#fff;--bard-color-get-app-qr-code-border-rgb:255,255,255;--bard-color-imagen-loading-gradient-step-1:rgba(240,244,249,0.2);--bard-color-imagen-loading-gradient-step-1-rgb:240,244,249;--bard-color-imagen-loading-gradient-step-2:#f0f4f9;--bard-color-imagen-loading-gradient-step-2-rgb:240,244,249;--bard-color-imagen-loading-gradient-step-3:#d3dbe5;--bard-color-imagen-loading-gradient-step-3-rgb:211,219,229;--bard-color-imagen-selection-dialog-background:#fff;--bard-color-imagen-selection-dialog-background-rgb:255,255,255;--bard-color-adv-beta-tooltip-text:#1f1f1f;--bard-color-adv-beta-tooltip-text-rgb:31,31,31;--bard-color-enterprise-disclaimer-encrypted:#8e4e00;--bard-color-enterprise-disclaimer-encrypted-rgb:142,78,0;--bard-color-enterprise-disclaimer-encrypted-background:#ffdcc1;--bard-color-enterprise-disclaimer-encrypted-background-rgb:255,220,193;--bard-color-sxs-contextual-toolbar-bg:#fff;--bard-color-sxs-contextual-toolbar-bg-rgb:255,255,255;--bard-color-sxs-contextual-toolbar-button-hover:#f0f4f9;--bard-color-sxs-contextual-toolbar-button-hover-rgb:240,244,249;--bard-color-planner-status-indicator-bar-error:#ec928e;--bard-color-planner-status-indicator-bar-error-rgb:236,146,142;--bard-color-planner-status-indicator-bar-warning:#ffb683;--bard-color-planner-status-indicator-bar-warning-rgb:255,182,131;--bard-color-planner-status-indicator-bar-update:#7cacf8;--bard-color-planner-status-indicator-bar-update-rgb:124,172,248;--bard-color-resize-canvas-background:#ecf3fe;--bard-color-resize-canvas-background-rgb:236,243,254;--bard-color-immersive-editor-comment-selection:#ffe9c4;--bard-color-immersive-editor-comment-selection-rgb:255,233,196;--bard-color-immersive-editor-comment-selection-focused:#ffd289;--bard-color-immersive-editor-comment-selection-focused-rgb:255,210,137;--bard-color-immersive-editor-user-selection:#a8c7fa;--bard-color-immersive-editor-user-selection-rgb:168,199,250}:root .dark-theme{--bard-color-neutral-90:#37393b;--bard-color-neutral-90-rgb:55,57,59;--bard-color-neutral-95:#2a2a2a;--bard-color-neutral-95-rgb:42,42,42;--bard-color-neutral-96:#0e0e0f;--bard-color-neutral-96-rgb:14,14,15;--bard-color-enterprise-greeting:#474747;--bard-color-enterprise-greeting-rgb:71,71,71;--bard-color-custom-primary-container:#222327;--bard-color-custom-primary-container-rgb:34,35,39;--bard-color-surface-tint:#d1e1ff;--bard-color-surface-tint-rgb:209,225,255;--bard-color-surface-tint-opacity-12:rgba(209,225,255,0.1215686275);--bard-color-surface-tint-opacity-12-rgb:209,225,255;--bard-color-tertiary-60:#1ea446;--bard-color-tertiary-60-rgb:30,164,70;--bard-color-surface-3-opacity-11:rgba(209,225,255,0.1098039216);--bard-color-surface-3-opacity-11-rgb:209,225,255;--bard-color-surface-5-opacity-14:rgba(209,225,255,0.1411764706);--bard-color-surface-5-opacity-14-rgb:209,225,255;--bard-color-footer-background:#202124;--bard-color-footer-background-rgb:32,33,36;--bard-color-skittle-loading-gradient-step-2:#1e1f20;--bard-color-skittle-loading-gradient-step-2-rgb:30,31,32;--bard-color-draft-chip-background:#303030;--bard-color-draft-chip-background-rgb:48,48,48;--bard-color-sidenav-background:#000;--bard-color-sidenav-background-rgb:0,0,0;--bard-color-inverse-primary-background:#fff;--bard-color-inverse-primary-background-rgb:255,255,255;--bard-color-response-container-flipped-background:#222327;--bard-color-response-container-flipped-background-rgb:34,35,39;--bard-color-sos-footer:#ababab;--bard-color-sos-footer-rgb:171,171,171;--bard-color-code-comment:#80868b;--bard-color-code-comment-rgb:128,134,139;--bard-color-code-variables:#f28b82;--bard-color-code-variables-rgb:242,139,130;--bard-color-code-literal:#fa903e;--bard-color-code-literal-rgb:250,144,62;--bard-color-code-class:#fdd663;--bard-color-code-class-rgb:253,214,99;--bard-color-code-string:#81c995;--bard-color-code-string-rgb:129,201,149;--bard-color-code-quotes-and-meta:#8ab4f8;--bard-color-code-quotes-and-meta-rgb:138,180,248;--bard-color-code-keyword:#c58af9;--bard-color-code-keyword-rgb:197,138,249;--bard-color-code-chip-foreground:#f0c6ff;--bard-color-code-chip-foreground-rgb:240,198,255;--bard-color-code-chip-background:#4c2271;--bard-color-code-chip-background-rgb:76,34,113;--bard-color-code-chip-background-selected:#8430ce;--bard-color-code-chip-background-selected-rgb:132,48,206;--bard-color-continue-chat-discovery-tooltip-button-text:#d3e3fd;--bard-color-continue-chat-discovery-tooltip-button-text-rgb:211,227,253;--bard-color-discovery-card-dialog-background:#282a2c;--bard-color-discovery-card-dialog-background-rgb:40,42,44;--bard-color-fact-check-tooltip-background:#282a2c;--bard-color-fact-check-tooltip-background-rgb:40,42,44;--bard-color-fact-check-tooltip-entailed-highlight:rgba(68,194,101,0.25);--bard-color-fact-check-tooltip-entailed-highlight-rgb:68,194,101;--bard-color-fact-check-tooltip-entailed-selected:#00522c;--bard-color-fact-check-tooltip-entailed-selected-rgb:0,82,44;--bard-color-fact-check-tooltip-contradictory-highlight:rgba(255,125,65,0.25);--bard-color-fact-check-tooltip-contradictory-highlight-rgb:255,125,65;--bard-color-fact-check-tooltip-contradictory-selected:#753403;--bard-color-fact-check-tooltip-contradictory-selected-rgb:117,52,3;--bard-color-fact-check-button-complete:#282a2c;--bard-color-fact-check-button-complete-rgb:40,42,44;--bard-color-fact-title:#80da88;--bard-color-fact-title-rgb:128,218,136;--bard-color-fact-title-invalid:#ffb683;--bard-color-fact-title-invalid-rgb:255,182,131;--bard-color-recitation-background:rgba(118,172,255,0.25);--bard-color-recitation-background-rgb:118,172,255;--bard-color-tooltip-box-shadow:rgba(60,64,67,0.16);--bard-color-tooltip-box-shadow-rgb:60,64,67;--bard-color-sentence-prefix-color:#fff;--bard-color-sentence-prefix-color-rgb:255,255,255;--bard-color-sentence-words-color:#80868b;--bard-color-sentence-words-color-rgb:128,134,139;--bard-color-image-overlay-background:rgba(60,64,67,0.75);--bard-color-image-overlay-background-rgb:60,64,67;--bard-color-pup-banner:#fdd663;--bard-color-pup-banner-rgb:253,214,99;--bard-color-update-button-edit-container:#8ab4f8;--bard-color-update-button-edit-container-rgb:138,180,248;--bard-color-share-link:#a8c7fa;--bard-color-share-link-rgb:168,199,250;--bard-color-strong-focus-indicator:#fff;--bard-color-strong-focus-indicator-rgb:255,255,255;--bard-color-inverse-strong-focus-indicator:#000;--bard-color-inverse-strong-focus-indicator-rgb:0,0,0;--bard-color-tool-fuse-background-left:#222327;--bard-color-tool-fuse-background-left-rgb:34,35,39;--bard-color-tool-fuse-background-middle:#161c25;--bard-color-tool-fuse-background-middle-rgb:22,28,37;--bard-color-tool-fuse-background-right:#222327;--bard-color-tool-fuse-background-right-rgb:34,35,39;--bard-color-tool-fuse-foreground-left:#3b475b;--bard-color-tool-fuse-foreground-left-rgb:59,71,91;--bard-color-tool-fuse-foreground-middle:#4a5a73;--bard-color-tool-fuse-foreground-middle-rgb:74,90,115;--bard-color-tool-fuse-foreground-right:#4a4c67;--bard-color-tool-fuse-foreground-right-rgb:74,76,103;--bard-color-bard-avatar-v2-basic-circle-stop-1:#9168c0;--bard-color-bard-avatar-v2-basic-circle-stop-1-rgb:145,104,192;--bard-color-bard-avatar-v2-basic-circle-stop-2:#5684d1;--bard-color-bard-avatar-v2-basic-circle-stop-2-rgb:86,132,209;--bard-color-bard-avatar-v2-basic-circle-stop-3:#1ba1e3;--bard-color-bard-avatar-v2-basic-circle-stop-3-rgb:27,161,227;--bard-color-bard-avatar-v2-advanced-circle-stop-1:#9e72ba;--bard-color-bard-avatar-v2-advanced-circle-stop-1-rgb:158,114,186;--bard-color-bard-avatar-v2-advanced-circle-stop-2:#d65c67;--bard-color-bard-avatar-v2-advanced-circle-stop-2-rgb:214,92,103;--bard-color-bard-avatar-v2-advanced-circle-stop-3:#d6635c;--bard-color-bard-avatar-v2-advanced-circle-stop-3-rgb:214,99,92;--bard-color-icon-separator:#7a7a7a;--bard-color-icon-separator-rgb:122,122,122;--bard-color-chrome-experiment-badge:#a8c7fa;--bard-color-chrome-experiment-badge-rgb:168,199,250;--bard-color-onegooglebar-product-controls:rgba(255,255,255,0.87);--bard-color-onegooglebar-product-controls-rgb:255,255,255;--bard-color-share-title-card-border:#8e918f;--bard-color-share-title-card-border-rgb:142,145,143;--bard-color-share-title-card-icon:#0b57d0;--bard-color-share-title-card-icon-rgb:11,87,208;--bard-color-share-title-card-editmode-text:#0b57d0;--bard-color-share-title-card-editmode-text-rgb:11,87,208;--bard-color-share-title-card-editmode-focus:#e8eaed;--bard-color-share-title-card-editmode-focus-rgb:232,234,237;--bard-color-share-selected-title-card-border:#0b57d0;--bard-color-share-selected-title-card-border-rgb:11,87,208;--bard-color-share-selected-title-card-background:#d1e1ff;--bard-color-share-selected-title-card-background-rgb:209,225,255;--bard-color-share-selected-title-card-text:black;--bard-color-share-selected-title-card-text-rgb:0,0,0;--bard-color-share-social-media-icon-focus:#131314;--bard-color-share-social-media-icon-focus-rgb:19,19,20;--bard-color-share-social-media-icon-background:#43474e;--bard-color-share-social-media-icon-background-rgb:67,71,78;--bard-color-share-copy-button-focus:#50555a;--bard-color-share-copy-button-focus-rgb:80,85,90;--bard-color-tunable-selection-textarea-background:#1e1f20;--bard-color-tunable-selection-textarea-background-rgb:30,31,32;--bard-color-tunable-selection-menu-background:#282a2c;--bard-color-tunable-selection-menu-background-rgb:40,42,44;--bard-color-tunable-selection-menu-text:#e3e3e3;--bard-color-tunable-selection-menu-text-rgb:227,227,227;--bard-color-tunable-selection-placeholder-text:rgba(227,227,227,0.4);--bard-color-tunable-selection-placeholder-text-rgb:227,227,227;--bard-color-tunable-selection-button:#282a2c;--bard-color-tunable-selection-button-rgb:40,42,44;--bard-color-tunable-selection-button-hover:#333537;--bard-color-tunable-selection-button-hover-rgb:51,53,55;--bard-color-tunable-selection-button-icon:#e3e3e3;--bard-color-tunable-selection-button-icon-rgb:227,227,227;--bard-color-tunable-selection-invalid-prompt:#fff;--bard-color-tunable-selection-invalid-prompt-rgb:255,255,255;--bard-color-tunable-selection-shimmer-advanced:#d96570;--bard-color-tunable-selection-shimmer-advanced-rgb:217,101,112;--bard-color-tunable-selection-shimmer-non-advanced:#487fed;--bard-color-tunable-selection-shimmer-non-advanced-rgb:72,127,237;--bard-color-form-field-outline:#bdc1c6;--bard-color-form-field-outline-rgb:189,193,198;--bard-color-form-field-outline-active:#8ab4f8;--bard-color-form-field-outline-active-rgb:138,180,248;--bard-color-form-field-outline-hover:#f8f9fa;--bard-color-form-field-outline-hover-rgb:248,249,250;--bard-color-form-field-placeholder:#bdc1c6;--bard-color-form-field-placeholder-rgb:189,193,198;--bard-color-zero-state-card-selected:#3b4456;--bard-color-zero-state-card-selected-rgb:59,68,86;--bard-color-zero-state-prompt-chip-background:#3b4456;--bard-color-zero-state-prompt-chip-background-rgb:59,68,86;--bard-color-zero-state-prompt-chip-text:#aec6f6;--bard-color-zero-state-prompt-chip-text-rgb:174,198,246;--bard-color-processing-animation-color-1:#474747;--bard-color-processing-animation-color-1-rgb:71,71,71;--bard-color-processing-animation-color-2:#131314;--bard-color-processing-animation-color-2-rgb:19,19,20;--bard-color-tts-token-highlight:#660;--bard-color-tts-token-highlight-rgb:102,102,0;--bard-color-tts-sentence-highlight:#444;--bard-color-tts-sentence-highlight-rgb:68,68,68;--bard-color-onhover-conversation-metadata-button-v2:#37393b;--bard-color-onhover-conversation-metadata-button-v2-rgb:55,57,59;--bard-color-new-conversation-button:#282a2c;--bard-color-new-conversation-button-rgb:40,42,44;--bard-color-on-new-conversation-button:#e3e3e3;--bard-color-on-new-conversation-button-rgb:227,227,227;--bard-color-icon-container-background:#000;--bard-color-icon-container-background-rgb:0,0,0;--bard-color-bot-power-up-button-background:#303030;--bard-color-bot-power-up-button-background-rgb:48,48,48;--bard-color-bot-onboarding-banner-bg-step-1:rgba(33,123,254,0.3);--bard-color-bot-onboarding-banner-bg-step-1-rgb:33,123,254;--bard-color-bot-onboarding-banner-bg-step-2:rgba(7,142,251,0.3);--bard-color-bot-onboarding-banner-bg-step-2-rgb:7,142,251;--bard-color-bot-onboarding-banner-bg-step-3:rgba(172,135,235,0.3);--bard-color-bot-onboarding-banner-bg-step-3-rgb:172,135,235;--bard-color-bot-onboarding-banner-bg-step-4:rgba(238,77,93,0.3);--bard-color-bot-onboarding-banner-bg-step-4-rgb:238,77,93;--bard-color-bot-logo-bg-default:#191d1c;--bard-color-bot-logo-bg-default-rgb:25,29,28;--bard-color-bot-logo-text-default:#a9acaa;--bard-color-bot-logo-text-default-rgb:169,172,170;--bard-color-bot-logo-border-default:#5c5f5e;--bard-color-bot-logo-border-default-rgb:92,95,94;--bard-color-lightbox-background:#000;--bard-color-lightbox-background-rgb:0,0,0;--bard-color-image-lightbox-text:#ababab;--bard-color-image-lightbox-text-rgb:171,171,171;--bard-color-image-placeholder-background:#35383b;--bard-color-image-placeholder-background-rgb:53,56,59;--bard-color-chart-highlighted-background:#e9eef6;--bard-color-chart-highlighted-background-rgb:233,238,246;--bard-color-skeleton-loader-background-1:#1e1f20;--bard-color-skeleton-loader-background-1-rgb:30,31,32;--bard-color-skeleton-loader-background-2:#333537;--bard-color-skeleton-loader-background-2-rgb:51,53,55;--bard-color-skeleton-loader-background-3:#487fed;--bard-color-skeleton-loader-background-3-rgb:72,127,237;--bard-color-skeleton-loader-background-alt-1:#1e1f20;--bard-color-skeleton-loader-background-alt-1-rgb:30,31,32;--bard-color-skeleton-loader-background-alt-2:#543a52;--bard-color-skeleton-loader-background-alt-2-rgb:84,58,82;--bard-color-skeleton-loader-background-alt-3:#d96570;--bard-color-skeleton-loader-background-alt-3-rgb:217,101,112;--bard-color-skeleton-loader-background-grayscale-1:#161617;--bard-color-skeleton-loader-background-grayscale-1-rgb:22,22,23;--bard-color-skeleton-loader-background-grayscale-2:#35383b;--bard-color-skeleton-loader-background-grayscale-2-rgb:53,56,59;--bard-color-skeleton-loader-background-grayscale-3:#1e1f20;--bard-color-skeleton-loader-background-grayscale-3-rgb:30,31,32;--bard-color-gallery-separator-line:#e1e3e1;--bard-color-gallery-separator-line-rgb:225,227,225;--bard-color-gallery-image-card-text:#fff;--bard-color-gallery-image-card-text-rgb:255,255,255;--bard-color-brand-text-gradient-stop-1:#4285f4;--bard-color-brand-text-gradient-stop-1-rgb:66,133,244;--bard-color-brand-text-gradient-stop-2:#9b72cb;--bard-color-brand-text-gradient-stop-2-rgb:155,114,203;--bard-color-brand-text-gradient-stop-3:#d96570;--bard-color-brand-text-gradient-stop-3-rgb:217,101,112;--bard-color-adv-marketing-product-background:rgba(154,160,166,0.1);--bard-color-adv-marketing-product-background-rgb:154,160,166;--bard-color-adv-marketing-check:#80868b;--bard-color-adv-marketing-check-rgb:128,134,139;--bard-color-adv-marketing-privacy:#eceeef;--bard-color-adv-marketing-privacy-rgb:236,238,239;--bard-color-adv-marketing-basic-background:#222327;--bard-color-adv-marketing-basic-background-rgb:34,35,39;--bard-color-adv-marketing-disclaimer:#9aa0a6;--bard-color-adv-marketing-disclaimer-rgb:154,160,166;--bard-color-input-area-buttons-hover-background:#e8eaed;--bard-color-input-area-buttons-hover-background-rgb:232,234,237;--bard-color-speech-dictation-mic-button-border:rgba(0,74,119,0.5019607843);--bard-color-speech-dictation-mic-button-border-rgb:0,74,119;--bard-color-sidenav-upgrade-button:#37393b;--bard-color-sidenav-upgrade-button-rgb:55,57,59;--bard-color-sidenav-mobile-controls:#e3e3e3;--bard-color-sidenav-mobile-controls-rgb:227,227,227;--bard-color-sidenav-scrim:rgba(19,19,20,0.4);--bard-color-sidenav-scrim-rgb:19,19,20;--bard-color-get-app-banner-background:#004a77;--bard-color-get-app-banner-background-rgb:0,74,119;--bard-color-get-app-banner-text:#e3e3e3;--bard-color-get-app-banner-text-rgb:227,227,227;--bard-color-get-app-mobile-dialog-text:#fff;--bard-color-get-app-mobile-dialog-text-rgb:255,255,255;--bard-color-get-app-mobile-dialog-disclaimer:#e3e3e3;--bard-color-get-app-mobile-dialog-disclaimer-rgb:227,227,227;--bard-color-get-app-mobile-dialog-background:#14181d;--bard-color-get-app-mobile-dialog-background-rgb:20,24,29;--bard-color-get-app-qr-code-border:#fff;--bard-color-get-app-qr-code-border-rgb:255,255,255;--bard-color-imagen-loading-gradient-step-1:rgba(22,22,23,0.2);--bard-color-imagen-loading-gradient-step-1-rgb:22,22,23;--bard-color-imagen-loading-gradient-step-2:#1e1f20;--bard-color-imagen-loading-gradient-step-2-rgb:30,31,32;--bard-color-imagen-loading-gradient-step-3:#35383b;--bard-color-imagen-loading-gradient-step-3-rgb:53,56,59;--bard-color-imagen-selection-dialog-background:#202124;--bard-color-imagen-selection-dialog-background-rgb:32,33,36;--bard-color-adv-beta-tooltip-text:#c4c7c5;--bard-color-adv-beta-tooltip-text-rgb:196,199,197;--bard-color-enterprise-disclaimer-encrypted:#8e4e00;--bard-color-enterprise-disclaimer-encrypted-rgb:142,78,0;--bard-color-enterprise-disclaimer-encrypted-background:#ffdcc1;--bard-color-enterprise-disclaimer-encrypted-background-rgb:255,220,193;--bard-color-sxs-contextual-toolbar-bg:#282a2c;--bard-color-sxs-contextual-toolbar-bg-rgb:40,42,44;--bard-color-sxs-contextual-toolbar-button-hover:#333537;--bard-color-sxs-contextual-toolbar-button-hover-rgb:51,53,55;--bard-color-planner-status-indicator-bar-error:#ec928e;--bard-color-planner-status-indicator-bar-error-rgb:236,146,142;--bard-color-planner-status-indicator-bar-warning:#ffb683;--bard-color-planner-status-indicator-bar-warning-rgb:255,182,131;--bard-color-planner-status-indicator-bar-update:#7cacf8;--bard-color-planner-status-indicator-bar-update-rgb:124,172,248;--bard-color-resize-canvas-background:#041e49;--bard-color-resize-canvas-background-rgb:4,30,73;--bard-color-immersive-editor-comment-selection:#5d4718;--bard-color-immersive-editor-comment-selection-rgb:93,71,24;--bard-color-immersive-editor-comment-selection-focused:#835800;--bard-color-immersive-editor-comment-selection-focused-rgb:131,88,0;--bard-color-immersive-editor-user-selection:#36568d;--bard-color-immersive-editor-user-selection-rgb:54,86,141}:where(.theme-host){color-scheme:light;--mat-app-background-color:#fff;--mat-app-text-color:#1f1f1f;--mat-app-elevation-shadow-level-0:0px 0px 0px 0px rgba(0,0,0,0.2),0px 0px 0px 0px rgba(0,0,0,0.14),0px 0px 0px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-1:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-2:0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-3:0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-4:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-5:0px 3px 5px -1px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 1px 14px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-6:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-7:0px 4px 5px -2px rgba(0,0,0,0.2),0px 7px 10px 1px rgba(0,0,0,0.14),0px 2px 16px 1px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-8:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-9:0px 5px 6px -3px rgba(0,0,0,0.2),0px 9px 12px 1px rgba(0,0,0,0.14),0px 3px 16px 2px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-10:0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-11:0px 6px 7px -4px rgba(0,0,0,0.2),0px 11px 15px 1px rgba(0,0,0,0.14),0px 4px 20px 3px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-12:0px 7px 8px -4px rgba(0,0,0,0.2),0px 12px 17px 2px rgba(0,0,0,0.14),0px 5px 22px 4px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-13:0px 7px 8px -4px rgba(0,0,0,0.2),0px 13px 19px 2px rgba(0,0,0,0.14),0px 5px 24px 4px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-14:0px 7px 9px -4px rgba(0,0,0,0.2),0px 14px 21px 2px rgba(0,0,0,0.14),0px 5px 26px 4px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-15:0px 8px 9px -5px rgba(0,0,0,0.2),0px 15px 22px 2px rgba(0,0,0,0.14),0px 6px 28px 5px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-16:0px 8px 10px -5px rgba(0,0,0,0.2),0px 16px 24px 2px rgba(0,0,0,0.14),0px 6px 30px 5px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-17:0px 8px 11px -5px rgba(0,0,0,0.2),0px 17px 26px 2px rgba(0,0,0,0.14),0px 6px 32px 5px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-18:0px 9px 11px -5px rgba(0,0,0,0.2),0px 18px 28px 2px rgba(0,0,0,0.14),0px 7px 34px 6px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-19:0px 9px 12px -6px rgba(0,0,0,0.2),0px 19px 29px 2px rgba(0,0,0,0.14),0px 7px 36px 6px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-20:0px 10px 13px -6px rgba(0,0,0,0.2),0px 20px 31px 3px rgba(0,0,0,0.14),0px 8px 38px 7px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-21:0px 10px 13px -6px rgba(0,0,0,0.2),0px 21px 33px 3px rgba(0,0,0,0.14),0px 8px 40px 7px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-22:0px 10px 14px -6px rgba(0,0,0,0.2),0px 22px 35px 3px rgba(0,0,0,0.14),0px 8px 42px 7px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-23:0px 11px 14px -7px rgba(0,0,0,0.2),0px 23px 36px 3px rgba(0,0,0,0.14),0px 9px 44px 8px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-24:0px 11px 15px -7px rgba(0,0,0,0.2),0px 24px 38px 3px rgba(0,0,0,0.14),0px 9px 46px 8px rgba(0,0,0,0.12);--mat-ripple-color:rgba(31,31,31,0.1);--mat-option-selected-state-label-text-color:#001d35;--mat-option-label-text-color:#1f1f1f;--mat-option-hover-state-layer-color:rgba(31,31,31,0.08);--mat-option-focus-state-layer-color:rgba(31,31,31,0.12);--mat-option-selected-state-layer-color:#c2e7ff;--mat-option-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-option-label-text-line-height:1.25rem;--mat-option-label-text-size:1rem;--mat-option-label-text-tracking:0;--mat-option-label-text-weight:400;--mat-optgroup-label-text-color:#444746;--mat-optgroup-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-optgroup-label-text-line-height:1.25rem;--mat-optgroup-label-text-size:0.875rem;--mat-optgroup-label-text-tracking:0;--mat-optgroup-label-text-weight:500;--mat-pseudo-checkbox-full-selected-icon-color:#0b57d0;--mat-pseudo-checkbox-full-selected-checkmark-color:#fff;--mat-pseudo-checkbox-full-unselected-icon-color:#444746;--mat-pseudo-checkbox-full-disabled-selected-checkmark-color:#fff;--mat-pseudo-checkbox-full-disabled-unselected-icon-color:rgba(31,31,31,0.38);--mat-pseudo-checkbox-full-disabled-selected-icon-color:rgba(31,31,31,0.38);--mat-pseudo-checkbox-minimal-selected-checkmark-color:#0b57d0;--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color:rgba(31,31,31,0.38);--mat-bottom-sheet-container-text-color:#1f1f1f;--mat-bottom-sheet-container-background-color:#f8fafd;--mat-bottom-sheet-container-text-font:Google Sans Text,Google Sans,sans-serif;--mat-bottom-sheet-container-text-line-height:1.5rem;--mat-bottom-sheet-container-text-size:1rem;--mat-bottom-sheet-container-text-tracking:0;--mat-bottom-sheet-container-text-weight:400;--mat-bottom-sheet-container-shape:28px;--mat-button-toggle-hover-state-layer-opacity:0.08;--mat-button-toggle-focus-state-layer-opacity:0.12;--mat-button-toggle-text-color:#1f1f1f;--mat-button-toggle-state-layer-color:#1f1f1f;--mat-button-toggle-selected-state-background-color:#c2e7ff;--mat-button-toggle-selected-state-text-color:#001d35;--mat-button-toggle-disabled-state-text-color:rgba(31,31,31,0.38);--mat-button-toggle-disabled-selected-state-text-color:rgba(31,31,31,0.38);--mat-button-toggle-disabled-selected-state-background-color:rgba(31,31,31,0.12);--mat-button-toggle-divider-color:#747775;--mat-button-toggle-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-button-toggle-label-text-line-height:1.25rem;--mat-button-toggle-label-text-size:0.875rem;--mat-button-toggle-label-text-tracking:0;--mat-button-toggle-label-text-weight:500;--mat-button-toggle-height:40px;--mat-button-toggle-shape:9999px;--mat-button-toggle-background-color:transparent;--mat-button-toggle-disabled-state-background-color:transparent;--mat-divider-color:#747775;--mat-divider-width:1px;--mat-expansion-container-background-color:#fff;--mat-expansion-container-text-color:#1f1f1f;--mat-expansion-actions-divider-color:#747775;--mat-expansion-header-hover-state-layer-color:rgba(31,31,31,0.08);--mat-expansion-header-focus-state-layer-color:rgba(31,31,31,0.12);--mat-expansion-header-disabled-state-text-color:rgba(31,31,31,0.38);--mat-expansion-header-text-color:#1f1f1f;--mat-expansion-header-description-color:#444746;--mat-expansion-header-indicator-color:#444746;--mat-expansion-header-text-font:Google Sans Text,Google Sans,sans-serif;--mat-expansion-header-text-size:1rem;--mat-expansion-header-text-weight:500;--mat-expansion-header-text-line-height:1.5rem;--mat-expansion-header-text-tracking:0;--mat-expansion-container-text-font:Google Sans Text,Google Sans,sans-serif;--mat-expansion-container-text-line-height:1.5rem;--mat-expansion-container-text-size:1rem;--mat-expansion-container-text-tracking:0;--mat-expansion-container-text-weight:400;--mat-expansion-header-collapsed-state-height:48px;--mat-expansion-header-expanded-state-height:64px;--mat-expansion-container-shape:12px;--mat-expansion-legacy-header-indicator-display:none;--mat-expansion-header-indicator-display:inline-block;--mat-grid-list-tile-header-primary-text-size:400 1rem/1.5rem Google Sans Text,Google Sans,sans-serif;--mat-grid-list-tile-header-secondary-text-size:400 0.875rem/1.25rem Google Sans Text,Google Sans,sans-serif;--mat-grid-list-tile-footer-primary-text-size:400 1rem/1.5rem Google Sans Text,Google Sans,sans-serif;--mat-grid-list-tile-footer-secondary-text-size:400 0.875rem/1.25rem Google Sans Text,Google Sans,sans-serif;--mat-icon-color:inherit;--mat-sidenav-container-background-color:#fff;--mat-sidenav-container-text-color:#444746;--mat-sidenav-content-background-color:#fff;--mat-sidenav-content-text-color:#1f1f1f;--mat-sidenav-scrim-color:rgba(45,49,47,0.4);--mat-sidenav-container-shape:16px;--mat-sidenav-container-elevation-shadow:none;--mat-sidenav-container-width:360px;--mat-sidenav-container-divider-color:transparent;--mat-text-button-disabled-label-text-color:rgba(31,31,31,0.38);--mat-text-button-disabled-state-layer-color:#444746;--mat-text-button-focus-state-layer-opacity:0.12;--mat-text-button-label-text-color:#0b57d0;--mat-text-button-pressed-state-layer-opacity:0.12;--mat-text-button-ripple-color:rgba(11,87,208,0.12);--mat-text-button-state-layer-color:#0b57d0;--mat-text-button-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-text-button-label-text-size:0.875rem;--mat-text-button-label-text-tracking:0;--mat-text-button-label-text-weight:500;--mat-text-button-touch-target-display:block;--mat-text-button-container-height:40px;--mat-text-button-container-shape:9999px;--mat-text-button-horizontal-padding:12px;--mat-text-button-icon-offset:-4px;--mat-text-button-icon-spacing:8px;--mat-text-button-with-icon-horizontal-padding:16px;--mat-protected-button-container-elevation-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-protected-button-disabled-container-elevation-shadow:0px 0px 0px 0px rgba(0,0,0,0.2),0px 0px 0px 0px rgba(0,0,0,0.14),0px 0px 0px 0px rgba(0,0,0,0.12);--mat-protected-button-focus-container-elevation-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-protected-button-hover-container-elevation-shadow:0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12);--mat-protected-button-pressed-container-elevation-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-protected-button-container-color:#fff;--mat-protected-button-disabled-container-color:rgba(31,31,31,0.12);--mat-protected-button-disabled-label-text-color:rgba(31,31,31,0.38);--mat-protected-button-disabled-state-layer-color:#444746;--mat-protected-button-focus-state-layer-opacity:0.12;--mat-protected-button-label-text-color:#0b57d0;--mat-protected-button-pressed-state-layer-opacity:0.12;--mat-protected-button-ripple-color:rgba(11,87,208,0.12);--mat-protected-button-state-layer-color:#0b57d0;--mat-protected-button-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-protected-button-label-text-size:0.875rem;--mat-protected-button-label-text-tracking:0;--mat-protected-button-label-text-weight:500;--mat-protected-button-touch-target-display:block;--mat-protected-button-container-height:40px;--mat-protected-button-container-shape:9999px;--mat-protected-button-horizontal-padding:24px;--mat-protected-button-icon-spacing:8px;--mat-protected-button-icon-offset:-8px;--mat-filled-button-container-color:#0b57d0;--mat-filled-button-disabled-container-color:rgba(31,31,31,0.12);--mat-filled-button-disabled-label-text-color:rgba(31,31,31,0.38);--mat-filled-button-disabled-state-layer-color:#444746;--mat-filled-button-focus-state-layer-opacity:0.12;--mat-filled-button-label-text-color:#fff;--mat-filled-button-pressed-state-layer-opacity:0.12;--mat-filled-button-ripple-color:rgba(255,255,255,0.12);--mat-filled-button-state-layer-color:#fff;--mat-filled-button-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-filled-button-label-text-size:0.875rem;--mat-filled-button-label-text-tracking:0;--mat-filled-button-label-text-weight:500;--mat-filled-button-touch-target-display:block;--mat-filled-button-container-height:40px;--mat-filled-button-container-shape:9999px;--mat-filled-button-horizontal-padding:24px;--mat-filled-button-icon-spacing:8px;--mat-filled-button-icon-offset:-8px;--mat-outlined-button-disabled-label-text-color:rgba(31,31,31,0.38);--mat-outlined-button-disabled-outline-color:rgba(31,31,31,0.12);--mat-outlined-button-disabled-state-layer-color:#444746;--mat-outlined-button-focus-state-layer-opacity:0.12;--mat-outlined-button-label-text-color:#0b57d0;--mat-outlined-button-outline-color:#747775;--mat-outlined-button-pressed-state-layer-opacity:0.12;--mat-outlined-button-ripple-color:rgba(11,87,208,0.12);--mat-outlined-button-state-layer-color:#0b57d0;--mat-outlined-button-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-outlined-button-label-text-size:0.875rem;--mat-outlined-button-label-text-tracking:0;--mat-outlined-button-label-text-weight:500;--mat-outlined-button-container-height:40px;--mat-outlined-button-touch-target-display:block;--mat-outlined-button-outline-width:1px;--mat-outlined-button-container-shape:9999px;--mat-outlined-button-horizontal-padding:24px;--mat-outlined-button-icon-spacing:8px;--mat-outlined-button-icon-offset:-8px;--mat-tonal-button-container-color:#c2e7ff;--mat-tonal-button-label-text-color:#001d35;--mat-tonal-button-disabled-container-color:rgba(31,31,31,0.12);--mat-tonal-button-disabled-label-text-color:rgba(31,31,31,0.38);--mat-tonal-button-state-layer-color:#001d35;--mat-tonal-button-disabled-state-layer-color:#444746;--mat-tonal-button-ripple-color:rgba(0,29,53,0.12);--mat-tonal-button-focus-state-layer-opacity:0.12;--mat-tonal-button-pressed-state-layer-opacity:0.12;--mat-tonal-button-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-tonal-button-label-text-size:0.875rem;--mat-tonal-button-label-text-tracking:0;--mat-tonal-button-label-text-weight:500;--mat-tonal-button-container-height:40px;--mat-tonal-button-touch-target-display:block;--mat-tonal-button-container-shape:9999px;--mat-tonal-button-horizontal-padding:24px;--mat-tonal-button-icon-spacing:8px;--mat-tonal-button-icon-offset:-8px;--mat-card-elevated-container-color:#f8fafd;--mat-card-elevated-container-elevation:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-card-elevated-container-shape:12px;--mat-card-outlined-container-color:#fff;--mat-card-outlined-outline-color:#c4c7c5;--mat-card-outlined-container-elevation:0px 0px 0px 0px rgba(0,0,0,0.2),0px 0px 0px 0px rgba(0,0,0,0.14),0px 0px 0px 0px rgba(0,0,0,0.12);--mat-card-outlined-container-shape:12px;--mat-card-outlined-outline-width:1px;--mat-card-subtitle-text-color:#1f1f1f;--mat-card-title-text-font:Google Sans;--mat-card-title-text-line-height:1.75rem;--mat-card-title-text-size:1.375rem;--mat-card-title-text-tracking:0;--mat-card-title-text-weight:400;--mat-card-subtitle-text-font:Google Sans Text,Google Sans,sans-serif;--mat-card-subtitle-text-line-height:1.5rem;--mat-card-subtitle-text-size:1rem;--mat-card-subtitle-text-tracking:0;--mat-card-subtitle-text-weight:500;--mat-dialog-container-color:#fff;--mat-dialog-subhead-color:#1f1f1f;--mat-dialog-supporting-text-color:#444746;--mat-dialog-subhead-font:Google Sans;--mat-dialog-subhead-line-height:2rem;--mat-dialog-subhead-size:1.5rem;--mat-dialog-subhead-weight:400;--mat-dialog-subhead-tracking:0;--mat-dialog-supporting-text-font:Google Sans Text,Google Sans,sans-serif;--mat-dialog-supporting-text-line-height:1.25rem;--mat-dialog-supporting-text-size:0.875rem;--mat-dialog-supporting-text-weight:400;--mat-dialog-supporting-text-tracking:0;--mat-dialog-container-shape:28px;--mat-dialog-container-elevation-shadow:none;--mat-dialog-container-max-width:560px;--mat-dialog-container-small-max-width:calc(100vw - 32px);--mat-dialog-container-min-width:280px;--mat-dialog-actions-alignment:flex-end;--mat-dialog-actions-padding:16px 24px;--mat-dialog-content-padding:20px 24px;--mat-dialog-with-actions-content-padding:20px 24px 0;--mat-dialog-headline-padding:6px 24px 13px;--mat-icon-button-disabled-icon-color:rgba(31,31,31,0.38);--mat-icon-button-disabled-state-layer-color:#444746;--mat-icon-button-focus-state-layer-opacity:0.12;--mat-icon-button-hover-state-layer-opacity:0.08;--mat-icon-button-icon-color:#444746;--mat-icon-button-pressed-state-layer-opacity:0.12;--mat-icon-button-ripple-color:rgba(68,71,70,0.12);--mat-icon-button-state-layer-color:#444746;--mat-icon-button-touch-target-display:block;--mat-icon-button-state-layer-size:40px;--mat-icon-button-icon-size:24px;--mat-form-field-filled-caret-color:#0b57d0;--mat-form-field-filled-focus-active-indicator-color:#0b57d0;--mat-form-field-filled-focus-label-text-color:#0b57d0;--mat-form-field-filled-container-color:#e1e3e1;--mat-form-field-filled-disabled-container-color:rgba(31,31,31,0.04);--mat-form-field-filled-label-text-color:#444746;--mat-form-field-filled-hover-label-text-color:#444746;--mat-form-field-filled-disabled-label-text-color:rgba(31,31,31,0.38);--mat-form-field-filled-input-text-color:#1f1f1f;--mat-form-field-filled-disabled-input-text-color:rgba(31,31,31,0.38);--mat-form-field-filled-input-text-placeholder-color:#444746;--mat-form-field-filled-error-hover-label-text-color:#410e0b;--mat-form-field-filled-error-focus-label-text-color:#b3261e;--mat-form-field-filled-error-label-text-color:#b3261e;--mat-form-field-filled-active-indicator-color:#444746;--mat-form-field-filled-disabled-active-indicator-color:rgba(31,31,31,0.38);--mat-form-field-filled-hover-active-indicator-color:#1f1f1f;--mat-form-field-filled-error-active-indicator-color:#b3261e;--mat-form-field-filled-error-focus-active-indicator-color:#b3261e;--mat-form-field-filled-error-hover-active-indicator-color:#410e0b;--mat-form-field-filled-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-form-field-filled-label-text-size:1rem;--mat-form-field-filled-label-text-tracking:0;--mat-form-field-filled-label-text-weight:400;--mat-form-field-filled-active-indicator-height:1px;--mat-form-field-filled-focus-active-indicator-height:2px;--mat-form-field-filled-container-shape:4px;--mat-form-field-outlined-caret-color:#0b57d0;--mat-form-field-outlined-focus-outline-color:#0b57d0;--mat-form-field-outlined-focus-label-text-color:#0b57d0;--mat-form-field-outlined-label-text-color:#444746;--mat-form-field-outlined-hover-label-text-color:#1f1f1f;--mat-form-field-outlined-disabled-label-text-color:rgba(31,31,31,0.38);--mat-form-field-outlined-input-text-color:#1f1f1f;--mat-form-field-outlined-disabled-input-text-color:rgba(31,31,31,0.38);--mat-form-field-outlined-input-text-placeholder-color:#444746;--mat-form-field-outlined-error-focus-label-text-color:#b3261e;--mat-form-field-outlined-error-label-text-color:#b3261e;--mat-form-field-outlined-error-hover-label-text-color:#410e0b;--mat-form-field-outlined-outline-color:#747775;--mat-form-field-outlined-disabled-outline-color:rgba(31,31,31,0.12);--mat-form-field-outlined-hover-outline-color:#1f1f1f;--mat-form-field-outlined-error-focus-outline-color:#b3261e;--mat-form-field-outlined-error-hover-outline-color:#410e0b;--mat-form-field-outlined-error-outline-color:#b3261e;--mat-form-field-outlined-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-form-field-outlined-label-text-size:1rem;--mat-form-field-outlined-label-text-tracking:0;--mat-form-field-outlined-label-text-weight:400;--mat-form-field-outlined-outline-width:1px;--mat-form-field-outlined-focus-outline-width:2px;--mat-form-field-outlined-container-shape:4px;--mat-form-field-focus-select-arrow-color:#0b57d0;--mat-form-field-disabled-input-text-placeholder-color:rgba(31,31,31,0.38);--mat-form-field-state-layer-color:#1f1f1f;--mat-form-field-error-text-color:#b3261e;--mat-form-field-select-option-text-color:#1f1f1f;--mat-form-field-select-disabled-option-text-color:rgba(31,31,31,0.38);--mat-form-field-leading-icon-color:#444746;--mat-form-field-disabled-leading-icon-color:rgba(31,31,31,0.38);--mat-form-field-trailing-icon-color:#444746;--mat-form-field-disabled-trailing-icon-color:rgba(31,31,31,0.38);--mat-form-field-error-focus-trailing-icon-color:#b3261e;--mat-form-field-error-hover-trailing-icon-color:#410e0b;--mat-form-field-error-trailing-icon-color:#b3261e;--mat-form-field-enabled-select-arrow-color:#444746;--mat-form-field-disabled-select-arrow-color:rgba(31,31,31,0.38);--mat-form-field-hover-state-layer-opacity:0.08;--mat-form-field-container-text-font:Google Sans Text,Google Sans,sans-serif;--mat-form-field-container-text-line-height:1.5rem;--mat-form-field-container-text-size:1rem;--mat-form-field-container-text-tracking:0;--mat-form-field-container-text-weight:400;--mat-form-field-subscript-text-font:Google Sans Text,Google Sans,sans-serif;--mat-form-field-subscript-text-line-height:1rem;--mat-form-field-subscript-text-size:0.75rem;--mat-form-field-subscript-text-tracking:0.006rem;--mat-form-field-subscript-text-weight:400;--mat-form-field-container-height:56px;--mat-form-field-filled-label-display:block;--mat-form-field-container-vertical-padding:16px;--mat-form-field-filled-with-label-container-padding-top:24px;--mat-form-field-filled-with-label-container-padding-bottom:8px;--mat-form-field-focus-state-layer-opacity:0;--mat-list-active-indicator-color:#c2e7ff;--mat-list-list-item-leading-avatar-color:#d3e3fd;--mat-list-list-item-disabled-state-layer-color:#1f1f1f;--mat-list-list-item-disabled-state-layer-opacity:0.12;--mat-list-list-item-label-text-color:#1f1f1f;--mat-list-list-item-supporting-text-color:#444746;--mat-list-list-item-leading-icon-color:#444746;--mat-list-list-item-trailing-supporting-text-color:#444746;--mat-list-list-item-trailing-icon-color:#444746;--mat-list-list-item-selected-trailing-icon-color:#0b57d0;--mat-list-list-item-disabled-label-text-color:#1f1f1f;--mat-list-list-item-disabled-leading-icon-color:#1f1f1f;--mat-list-list-item-disabled-trailing-icon-color:#1f1f1f;--mat-list-list-item-hover-label-text-color:#1f1f1f;--mat-list-list-item-hover-state-layer-color:#1f1f1f;--mat-list-list-item-hover-state-layer-opacity:0.08;--mat-list-list-item-focus-label-text-color:#1f1f1f;--mat-list-list-item-focus-state-layer-color:#1f1f1f;--mat-list-list-item-focus-state-layer-opacity:0.12;--mat-list-list-item-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-list-list-item-label-text-line-height:1.5rem;--mat-list-list-item-label-text-size:1rem;--mat-list-list-item-label-text-tracking:0;--mat-list-list-item-label-text-weight:400;--mat-list-list-item-supporting-text-font:Google Sans Text,Google Sans,sans-serif;--mat-list-list-item-supporting-text-line-height:1.25rem;--mat-list-list-item-supporting-text-size:0.875rem;--mat-list-list-item-supporting-text-tracking:0;--mat-list-list-item-supporting-text-weight:400;--mat-list-list-item-trailing-supporting-text-font:Google Sans Text,Google Sans,sans-serif;--mat-list-list-item-trailing-supporting-text-line-height:1rem;--mat-list-list-item-trailing-supporting-text-size:0.688rem;--mat-list-list-item-trailing-supporting-text-tracking:0.006rem;--mat-list-list-item-trailing-supporting-text-weight:500;--mat-list-list-item-leading-icon-start-space:16px;--mat-list-list-item-leading-icon-end-space:16px;--mat-list-list-item-one-line-container-height:48px;--mat-list-list-item-two-line-container-height:64px;--mat-list-list-item-three-line-container-height:88px;--mat-list-active-indicator-shape:9999px;--mat-list-list-item-container-shape:0;--mat-list-list-item-leading-avatar-shape:9999px;--mat-list-list-item-container-color:transparent;--mat-list-list-item-leading-icon-size:24px;--mat-list-list-item-leading-avatar-size:40px;--mat-list-list-item-trailing-icon-size:24px;--mat-list-list-item-disabled-label-text-opacity:0.3;--mat-list-list-item-disabled-leading-icon-opacity:0.38;--mat-list-list-item-disabled-trailing-icon-opacity:0.38;--mat-slide-toggle-disabled-unselected-track-outline-color:#1f1f1f;--mat-slide-toggle-selected-focus-state-layer-opacity:0.12;--mat-slide-toggle-selected-hover-state-layer-opacity:0.08;--mat-slide-toggle-selected-pressed-state-layer-opacity:0.12;--mat-slide-toggle-track-outline-color:#747775;--mat-slide-toggle-unselected-focus-state-layer-opacity:0.12;--mat-slide-toggle-unselected-hover-state-layer-opacity:0.08;--mat-slide-toggle-unselected-pressed-state-layer-opacity:0.12;--mat-slide-toggle-selected-focus-state-layer-color:#0b57d0;--mat-slide-toggle-selected-handle-color:#fff;--mat-slide-toggle-selected-hover-state-layer-color:#0b57d0;--mat-slide-toggle-selected-pressed-state-layer-color:#0b57d0;--mat-slide-toggle-selected-focus-handle-color:#d3e3fd;--mat-slide-toggle-selected-hover-handle-color:#d3e3fd;--mat-slide-toggle-selected-pressed-handle-color:#d3e3fd;--mat-slide-toggle-selected-focus-track-color:#0b57d0;--mat-slide-toggle-selected-hover-track-color:#0b57d0;--mat-slide-toggle-selected-pressed-track-color:#0b57d0;--mat-slide-toggle-selected-track-color:#0b57d0;--mat-slide-toggle-disabled-selected-handle-color:#fff;--mat-slide-toggle-disabled-selected-icon-color:#1f1f1f;--mat-slide-toggle-disabled-selected-track-color:#1f1f1f;--mat-slide-toggle-disabled-unselected-handle-color:#1f1f1f;--mat-slide-toggle-disabled-unselected-icon-color:#e1e3e1;--mat-slide-toggle-disabled-unselected-track-color:#e1e3e1;--mat-slide-toggle-label-text-color:#1f1f1f;--mat-slide-toggle-selected-icon-color:#041e49;--mat-slide-toggle-unselected-hover-handle-color:#444746;--mat-slide-toggle-unselected-focus-handle-color:#444746;--mat-slide-toggle-unselected-focus-state-layer-color:#1f1f1f;--mat-slide-toggle-unselected-focus-track-color:#e1e3e1;--mat-slide-toggle-unselected-icon-color:#e1e3e1;--mat-slide-toggle-unselected-handle-color:#747775;--mat-slide-toggle-unselected-hover-state-layer-color:#1f1f1f;--mat-slide-toggle-unselected-hover-track-color:#e1e3e1;--mat-slide-toggle-unselected-pressed-handle-color:#444746;--mat-slide-toggle-unselected-pressed-track-color:#e1e3e1;--mat-slide-toggle-unselected-pressed-state-layer-color:#1f1f1f;--mat-slide-toggle-unselected-track-color:#e1e3e1;--mat-slide-toggle-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-slide-toggle-label-text-line-height:1.25rem;--mat-slide-toggle-label-text-size:0.875rem;--mat-slide-toggle-label-text-tracking:0;--mat-slide-toggle-label-text-weight:400;--mat-slide-toggle-disabled-selected-handle-opacity:1;--mat-slide-toggle-disabled-selected-icon-opacity:0.38;--mat-slide-toggle-disabled-track-opacity:0.12;--mat-slide-toggle-disabled-unselected-handle-opacity:0.38;--mat-slide-toggle-disabled-unselected-icon-opacity:0.38;--mat-slide-toggle-disabled-unselected-track-outline-width:2px;--mat-slide-toggle-handle-shape:9999px;--mat-slide-toggle-hidden-track-opacity:0;--mat-slide-toggle-hidden-track-transition:opacity 75ms;--mat-slide-toggle-pressed-handle-size:28px;--mat-slide-toggle-selected-handle-horizontal-margin:0 24px;--mat-slide-toggle-selected-handle-size:24px;--mat-slide-toggle-selected-icon-size:16px;--mat-slide-toggle-selected-pressed-handle-horizontal-margin:0 22px;--mat-slide-toggle-selected-track-outline-color:transparent;--mat-slide-toggle-selected-track-outline-width:2px;--mat-slide-toggle-selected-with-icon-handle-horizontal-margin:0 24px;--mat-slide-toggle-track-height:32px;--mat-slide-toggle-track-outline-width:2px;--mat-slide-toggle-track-shape:9999px;--mat-slide-toggle-track-width:52px;--mat-slide-toggle-unselected-handle-horizontal-margin:0 8px;--mat-slide-toggle-unselected-handle-size:16px;--mat-slide-toggle-unselected-icon-size:16px;--mat-slide-toggle-unselected-pressed-handle-horizontal-margin:0 2px;--mat-slide-toggle-unselected-with-icon-handle-horizontal-margin:0 4px;--mat-slide-toggle-visible-track-opacity:1;--mat-slide-toggle-visible-track-transition:opacity 75ms;--mat-slide-toggle-with-icon-handle-size:24px;--mat-slide-toggle-state-layer-size:40px;--mat-slider-handle-elevation:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-slider-active-track-color:#0b57d0;--mat-slider-focus-handle-color:#0b57d0;--mat-slider-focus-state-layer-color:rgba(11,87,208,0.2);--mat-slider-handle-color:#0b57d0;--mat-slider-hover-handle-color:#0b57d0;--mat-slider-hover-state-layer-color:rgba(11,87,208,0.05);--mat-slider-inactive-track-color:#e1e3e1;--mat-slider-ripple-color:#0b57d0;--mat-slider-with-tick-marks-active-container-color:#fff;--mat-slider-with-tick-marks-inactive-container-color:#444746;--mat-slider-disabled-active-track-color:#1f1f1f;--mat-slider-disabled-handle-color:#1f1f1f;--mat-slider-disabled-inactive-track-color:#1f1f1f;--mat-slider-label-container-color:#0b57d0;--mat-slider-label-label-text-color:#fff;--mat-slider-with-overlap-handle-outline-color:#fff;--mat-slider-with-tick-marks-disabled-container-color:#1f1f1f;--mat-slider-label-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-slider-label-label-text-size:0.75rem;--mat-slider-label-label-text-line-height:1rem;--mat-slider-label-label-text-tracking:0.006rem;--mat-slider-label-label-text-weight:500;--mat-slider-active-track-height:4px;--mat-slider-active-track-shape:9999px;--mat-slider-handle-height:20px;--mat-slider-handle-shape:9999px;--mat-slider-handle-width:20px;--mat-slider-inactive-track-height:4px;--mat-slider-inactive-track-shape:9999px;--mat-slider-value-indicator-border-radius:50% 50% 50% 0;--mat-slider-value-indicator-caret-display:none;--mat-slider-value-indicator-container-transform:translateX(-50%) rotate(-45deg);--mat-slider-value-indicator-height:28px;--mat-slider-value-indicator-padding:0;--mat-slider-value-indicator-text-transform:rotate(45deg);--mat-slider-value-indicator-width:28px;--mat-slider-with-overlap-handle-outline-width:1px;--mat-slider-with-tick-marks-active-container-opacity:0.38;--mat-slider-with-tick-marks-container-shape:9999px;--mat-slider-with-tick-marks-container-size:2px;--mat-slider-with-tick-marks-inactive-container-opacity:0.38;--mat-slider-value-indicator-opacity:1;--mat-snack-bar-container-color:#303030;--mat-snack-bar-supporting-text-color:#f2f2f2;--mat-snack-bar-button-color:#a8c7fa;--mat-snack-bar-supporting-text-font:Google Sans Text,Google Sans,sans-serif;--mat-snack-bar-supporting-text-line-height:1.25rem;--mat-snack-bar-supporting-text-size:0.875rem;--mat-snack-bar-supporting-text-weight:400;--mat-snack-bar-container-shape:4px;--mat-chip-disabled-outline-color:rgba(31,31,31,0.12);--mat-chip-focus-outline-color:#444746;--mat-chip-hover-state-layer-opacity:0.08;--mat-chip-outline-color:#747775;--mat-chip-selected-hover-state-layer-opacity:0.08;--mat-chip-selected-trailing-action-state-layer-color:#001d35;--mat-chip-trailing-action-focus-state-layer-opacity:0.12;--mat-chip-trailing-action-hover-state-layer-opacity:0.08;--mat-chip-trailing-action-state-layer-color:#444746;--mat-chip-disabled-label-text-color:rgba(31,31,31,0.38);--mat-chip-elevated-selected-container-color:#c2e7ff;--mat-chip-flat-disabled-selected-container-color:rgba(31,31,31,0.12);--mat-chip-focus-state-layer-color:#444746;--mat-chip-focus-state-layer-opacity:0.12;--mat-chip-hover-state-layer-color:#444746;--mat-chip-label-text-color:#444746;--mat-chip-selected-disabled-trailing-icon-color:#1f1f1f;--mat-chip-selected-focus-state-layer-color:#001d35;--mat-chip-selected-focus-state-layer-opacity:0.12;--mat-chip-selected-hover-state-layer-color:#001d35;--mat-chip-selected-label-text-color:#001d35;--mat-chip-selected-trailing-icon-color:#001d35;--mat-chip-with-icon-disabled-icon-color:#1f1f1f;--mat-chip-with-icon-icon-color:#444746;--mat-chip-with-icon-selected-icon-color:#001d35;--mat-chip-with-trailing-icon-disabled-trailing-icon-color:#1f1f1f;--mat-chip-with-trailing-icon-trailing-icon-color:#444746;--mat-chip-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-chip-label-text-line-height:1.25rem;--mat-chip-label-text-size:0.875rem;--mat-chip-label-text-tracking:0;--mat-chip-label-text-weight:500;--mat-chip-container-height:32px;--mat-chip-container-shape-radius:8px;--mat-chip-disabled-container-opacity:1;--mat-chip-flat-selected-outline-width:0;--mat-chip-outline-width:1px;--mat-chip-trailing-action-focus-opacity:1;--mat-chip-trailing-action-opacity:1;--mat-chip-with-avatar-avatar-shape-radius:24px;--mat-chip-with-avatar-avatar-size:24px;--mat-chip-with-avatar-disabled-avatar-opacity:0.38;--mat-chip-with-icon-disabled-icon-opacity:0.38;--mat-chip-with-icon-icon-size:18px;--mat-chip-with-trailing-icon-disabled-trailing-icon-opacity:0.38;--mat-chip-elevated-container-color:transparent;--mat-menu-item-label-text-color:#1f1f1f;--mat-menu-item-icon-color:#444746;--mat-menu-item-hover-state-layer-color:rgba(31,31,31,0.08);--mat-menu-item-focus-state-layer-color:rgba(31,31,31,0.12);--mat-menu-container-color:#f0f4f9;--mat-menu-divider-color:#e1e3e1;--mat-menu-item-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-menu-item-label-text-size:0.875rem;--mat-menu-item-label-text-tracking:0;--mat-menu-item-label-text-line-height:1.25rem;--mat-menu-item-label-text-weight:500;--mat-menu-container-shape:4px;--mat-menu-divider-bottom-spacing:8px;--mat-menu-divider-top-spacing:8px;--mat-menu-item-spacing:12px;--mat-menu-item-icon-size:24px;--mat-menu-item-leading-spacing:12px;--mat-menu-item-trailing-spacing:12px;--mat-menu-item-with-icon-leading-spacing:12px;--mat-menu-item-with-icon-trailing-spacing:12px;--mat-menu-container-elevation-shadow:0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);--mat-checkbox-disabled-selected-checkmark-color:#fff;--mat-checkbox-selected-focus-state-layer-opacity:0.12;--mat-checkbox-selected-hover-state-layer-opacity:0.08;--mat-checkbox-selected-pressed-state-layer-opacity:0.12;--mat-checkbox-unselected-focus-state-layer-opacity:0.12;--mat-checkbox-unselected-hover-state-layer-opacity:0.08;--mat-checkbox-unselected-pressed-state-layer-opacity:0.12;--mat-checkbox-disabled-label-color:rgba(31,31,31,0.38);--mat-checkbox-label-text-color:#1f1f1f;--mat-checkbox-disabled-selected-icon-color:rgba(31,31,31,0.38);--mat-checkbox-disabled-unselected-icon-color:rgba(31,31,31,0.38);--mat-checkbox-selected-checkmark-color:#fff;--mat-checkbox-selected-focus-icon-color:#0b57d0;--mat-checkbox-selected-hover-icon-color:#0b57d0;--mat-checkbox-selected-icon-color:#0b57d0;--mat-checkbox-selected-pressed-icon-color:#0b57d0;--mat-checkbox-unselected-focus-icon-color:#1f1f1f;--mat-checkbox-unselected-hover-icon-color:#1f1f1f;--mat-checkbox-unselected-icon-color:#444746;--mat-checkbox-selected-focus-state-layer-color:#0b57d0;--mat-checkbox-selected-hover-state-layer-color:#0b57d0;--mat-checkbox-selected-pressed-state-layer-color:#1f1f1f;--mat-checkbox-unselected-focus-state-layer-color:#1f1f1f;--mat-checkbox-unselected-hover-state-layer-color:#1f1f1f;--mat-checkbox-unselected-pressed-state-layer-color:#0b57d0;--mat-checkbox-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-checkbox-label-text-line-height:1.25rem;--mat-checkbox-label-text-size:0.875rem;--mat-checkbox-label-text-tracking:0;--mat-checkbox-label-text-weight:400;--mat-checkbox-state-layer-size:40px;--mat-checkbox-touch-target-display:block;--mat-tooltip-container-color:#303030;--mat-tooltip-supporting-text-color:#f2f2f2;--mat-tooltip-supporting-text-line-height:1rem;--mat-tooltip-supporting-text-font:Google Sans Text,Google Sans,sans-serif;--mat-tooltip-supporting-text-size:0.75rem;--mat-tooltip-supporting-text-weight:400;--mat-tooltip-supporting-text-tracking:0.006rem;--mat-tooltip-container-shape:4px;--mat-progress-bar-active-indicator-color:#0b57d0;--mat-progress-bar-track-color:#e1e3e1;--mat-progress-bar-active-indicator-height:4px;--mat-progress-bar-track-height:4px;--mat-progress-bar-track-shape:0;--mat-progress-spinner-active-indicator-color:#0b57d0;--mat-progress-spinner-active-indicator-width:4px;--mat-progress-spinner-size:48px;--mat-select-panel-background-color:#f0f4f9;--mat-select-enabled-trigger-text-color:#1f1f1f;--mat-select-disabled-trigger-text-color:rgba(31,31,31,0.38);--mat-select-placeholder-text-color:#444746;--mat-select-enabled-arrow-color:#444746;--mat-select-disabled-arrow-color:rgba(31,31,31,0.38);--mat-select-focused-arrow-color:#0b57d0;--mat-select-invalid-arrow-color:#b3261e;--mat-select-trigger-text-font:Google Sans Text,Google Sans,sans-serif;--mat-select-trigger-text-line-height:1.5rem;--mat-select-trigger-text-size:1rem;--mat-select-trigger-text-tracking:0;--mat-select-trigger-text-weight:400;--mat-select-arrow-transform:translateY(-8px);--mat-select-container-elevation-shadow:0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);--mat-radio-checked-ripple-color:#0b57d0;--mat-radio-disabled-label-color:rgba(31,31,31,0.38);--mat-radio-disabled-selected-icon-color:#1f1f1f;--mat-radio-disabled-unselected-icon-color:#1f1f1f;--mat-radio-label-text-color:#1f1f1f;--mat-radio-ripple-color:#1f1f1f;--mat-radio-selected-focus-icon-color:#0b57d0;--mat-radio-selected-hover-icon-color:#0b57d0;--mat-radio-selected-icon-color:#0b57d0;--mat-radio-selected-pressed-icon-color:#0b57d0;--mat-radio-unselected-focus-icon-color:#1f1f1f;--mat-radio-unselected-hover-icon-color:#1f1f1f;--mat-radio-unselected-icon-color:#444746;--mat-radio-unselected-pressed-icon-color:#1f1f1f;--mat-radio-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-radio-label-text-line-height:1.25rem;--mat-radio-label-text-size:0.875rem;--mat-radio-label-text-tracking:0;--mat-radio-label-text-weight:400;--mat-radio-touch-target-display:block;--mat-radio-state-layer-size:40px;--mat-radio-disabled-selected-icon-opacity:0.38;--mat-radio-disabled-unselected-icon-opacity:0.38;--mat-fab-extended-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-extended-focus-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-extended-hover-container-elevation-shadow:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);--mat-fab-extended-pressed-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-extended-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-fab-extended-label-text-size:0.875rem;--mat-fab-extended-label-text-tracking:0;--mat-fab-extended-label-text-weight:500;--mat-fab-extended-container-height:56px;--mat-fab-extended-container-shape:16px;--mat-fab-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-focus-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-hover-container-elevation-shadow:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);--mat-fab-pressed-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-container-color:#d3e3fd;--mat-fab-disabled-state-container-color:rgba(31,31,31,0.12);--mat-fab-disabled-state-foreground-color:rgba(31,31,31,0.38);--mat-fab-focus-state-layer-opacity:0.12;--mat-fab-foreground-color:#041e49;--mat-fab-hover-state-layer-opacity:0.08;--mat-fab-pressed-state-layer-opacity:0.12;--mat-fab-ripple-color:rgba(4,30,73,0.12);--mat-fab-state-layer-color:#041e49;--mat-fab-touch-target-display:block;--mat-fab-container-shape:16px;--mat-fab-small-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-small-focus-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-small-hover-container-elevation-shadow:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);--mat-fab-small-pressed-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-small-container-color:#d3e3fd;--mat-fab-small-disabled-state-container-color:rgba(31,31,31,0.12);--mat-fab-small-disabled-state-foreground-color:rgba(31,31,31,0.38);--mat-fab-small-focus-state-layer-opacity:0.12;--mat-fab-small-foreground-color:#041e49;--mat-fab-small-hover-state-layer-opacity:0.08;--mat-fab-small-pressed-state-layer-opacity:0.12;--mat-fab-small-ripple-color:rgba(4,30,73,0.12);--mat-fab-small-state-layer-color:#041e49;--mat-fab-small-container-shape:12px;--mat-tab-divider-color:#e1e3e1;--mat-tab-pagination-icon-color:#1f1f1f;--mat-tab-inactive-label-text-color:#1f1f1f;--mat-tab-active-label-text-color:#1f1f1f;--mat-tab-active-ripple-color:#1f1f1f;--mat-tab-inactive-ripple-color:#1f1f1f;--mat-tab-inactive-focus-label-text-color:#1f1f1f;--mat-tab-inactive-hover-label-text-color:#1f1f1f;--mat-tab-active-focus-label-text-color:#1f1f1f;--mat-tab-active-hover-label-text-color:#1f1f1f;--mat-tab-active-focus-indicator-color:#0b57d0;--mat-tab-active-hover-indicator-color:#0b57d0;--mat-tab-active-indicator-color:#0b57d0;--mat-tab-label-text-font:Google Sans Text,Google Sans,sans-serif;--mat-tab-label-text-size:0.875rem;--mat-tab-label-text-tracking:0;--mat-tab-label-text-line-height:1.25rem;--mat-tab-label-text-weight:500;--mat-tab-container-height:48px;--mat-tab-divider-height:1px;--mat-tab-active-indicator-height:2px;--mat-tab-active-indicator-shape:0;--mat-focus-indicator-border-color:#0b57d0;--mat-filled-button-hover-state-layer-opacity:0.08;--mat-outlined-button-hover-state-layer-opacity:0.08;--mat-protected-button-hover-state-layer-opacity:0.08;--mat-text-button-hover-state-layer-opacity:0.08;--mat-tonal-button-hover-state-layer-opacity:0.08;--mat-filled-button-focus-state-layer-opacity:0.1;--mat-outlined-button-focus-state-layer-opacity:0.1;--mat-protected-button-focus-state-layer-opacity:0.1;--mat-text-button-focus-state-layer-opacity:0.1;--mat-tonal-button-focus-state-layer-opacity:0.1;--mat-filled-button-pressed-state-layer-opacity:0.1;--mat-outlined-button-pressed-state-layer-opacity:0.1;--mat-protected-button-pressed-state-layer-opacity:0.1;--mat-text-button-pressed-state-layer-opacity:0.1;--mat-tonal-button-pressed-state-layer-opacity:0.1;--mat-filled-button-disabled-label-text-color:rgba(var(--gem-sys-color--on-surface--rgb),0.38);--mat-outlined-button-disabled-label-text-color:rgba(var(--gem-sys-color--on-surface--rgb),0.38);--mat-protected-button-disabled-label-text-color:rgba(var(--gem-sys-color--on-surface--rgb),0.38);--mat-text-button-disabled-label-text-color:rgba(var(--gem-sys-color--on-surface--rgb),0.38);--mat-tonal-button-disabled-label-text-color:rgba(var(--gem-sys-color--on-surface--rgb),0.38);--mat-filled-button-disabled-container-color:rgba(var(--gem-sys-color--on-surface--rgb),0.12);--mat-protected-button-disabled-container-color:rgba(var(--gem-sys-color--on-surface--rgb),0.12);--mat-tonal-button-disabled-container-color:rgba(var(--gem-sys-color--on-surface--rgb),0.12);--mat-outlined-button-disabled-outline-color:rgba(var(--gem-sys-color--on-surface--rgb),0.12);--mat-filled-button-container-color:var(--gem-sys-color--primary);--mat-protected-button-container-color:var(--gem-sys-color--primary);--mat-tonal-button-container-color:var(--gem-sys-color--primary);--mat-filled-button-label-text-color:var(--gem-sys-color--on-primary);--mat-outlined-button-label-text-color:var(--gem-sys-color--on-primary);--mat-protected-button-label-text-color:var(--gem-sys-color--on-primary);--mat-text-button-label-text-color:var(--gem-sys-color--on-primary);--mat-tonal-button-label-text-color:var(--gem-sys-color--on-primary);--mat-filled-button-state-layer-color:var(--gem-sys-color--on-primary);--mat-outlined-button-state-layer-color:var(--gem-sys-color--on-primary);--mat-protected-button-state-layer-color:var(--gem-sys-color--on-primary);--mat-text-button-state-layer-color:var(--gem-sys-color--on-primary);--mat-tonal-button-state-layer-color:var(--gem-sys-color--on-primary);--mat-menu-container-shape:var(--gem-sys-shape--corner-large);--mat-menu-container-color:var(--gem-sys-color--surface-container);--mat-bottom-sheet-container-background-color:var(--gem-sys-color--surface-container);--mat-bottom-sheet-container-text-color:var(--gem-sys-color--on-surface);--mat-dialog-container-color:var(--gem-sys-color--surface-container);--mat-dialog-container-shape:var(--gem-sys-shape--corner-extra-large);--mat-dialog-subhead-font:Google Sans,Helvetica Neue,sans-serif;--mat-dialog-subhead-line-height:var(--gem-sys-typography-type-scale--title-l-line-height);--mat-dialog-subhead-size:var(--gem-sys-typography-type-scale--title-l-font-size);--mat-dialog-subhead-weight:var(--gem-sys-typography-type-scale--title-l-font-weight);--mat-dialog-subhead-tracking:var(--gem-sys-typography-type-scale--title-l-font-tracking);--mat-chip-elevated-selected-container-color:var(--gem-sys-color--secondary-container);--mat-chip-label-text-color:var(--gem-sys-color--on-surface-variant);--mat-chip-selected-label-text-color:var(--gem-sys-color--on-secondary-container)}:where(.theme-host) .katex .katex-svg{filter:invert(0)}:where(.theme-host) .cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;right:0}[dir=rtl] :where(.theme-host) .cdk-visually-hidden{right:auto;left:0}:where(.theme-host):where(.dark-theme){color-scheme:dark;--mat-app-background-color:#1f1f1f;--mat-app-text-color:#e3e3e3;--mat-app-elevation-shadow-level-0:0px 0px 0px 0px rgba(0,0,0,0.2),0px 0px 0px 0px rgba(0,0,0,0.14),0px 0px 0px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-1:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-2:0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-3:0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-4:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-5:0px 3px 5px -1px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 1px 14px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-6:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-7:0px 4px 5px -2px rgba(0,0,0,0.2),0px 7px 10px 1px rgba(0,0,0,0.14),0px 2px 16px 1px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-8:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-9:0px 5px 6px -3px rgba(0,0,0,0.2),0px 9px 12px 1px rgba(0,0,0,0.14),0px 3px 16px 2px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-10:0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-11:0px 6px 7px -4px rgba(0,0,0,0.2),0px 11px 15px 1px rgba(0,0,0,0.14),0px 4px 20px 3px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-12:0px 7px 8px -4px rgba(0,0,0,0.2),0px 12px 17px 2px rgba(0,0,0,0.14),0px 5px 22px 4px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-13:0px 7px 8px -4px rgba(0,0,0,0.2),0px 13px 19px 2px rgba(0,0,0,0.14),0px 5px 24px 4px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-14:0px 7px 9px -4px rgba(0,0,0,0.2),0px 14px 21px 2px rgba(0,0,0,0.14),0px 5px 26px 4px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-15:0px 8px 9px -5px rgba(0,0,0,0.2),0px 15px 22px 2px rgba(0,0,0,0.14),0px 6px 28px 5px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-16:0px 8px 10px -5px rgba(0,0,0,0.2),0px 16px 24px 2px rgba(0,0,0,0.14),0px 6px 30px 5px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-17:0px 8px 11px -5px rgba(0,0,0,0.2),0px 17px 26px 2px rgba(0,0,0,0.14),0px 6px 32px 5px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-18:0px 9px 11px -5px rgba(0,0,0,0.2),0px 18px 28px 2px rgba(0,0,0,0.14),0px 7px 34px 6px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-19:0px 9px 12px -6px rgba(0,0,0,0.2),0px 19px 29px 2px rgba(0,0,0,0.14),0px 7px 36px 6px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-20:0px 10px 13px -6px rgba(0,0,0,0.2),0px 20px 31px 3px rgba(0,0,0,0.14),0px 8px 38px 7px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-21:0px 10px 13px -6px rgba(0,0,0,0.2),0px 21px 33px 3px rgba(0,0,0,0.14),0px 8px 40px 7px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-22:0px 10px 14px -6px rgba(0,0,0,0.2),0px 22px 35px 3px rgba(0,0,0,0.14),0px 8px 42px 7px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-23:0px 11px 14px -7px rgba(0,0,0,0.2),0px 23px 36px 3px rgba(0,0,0,0.14),0px 9px 44px 8px rgba(0,0,0,0.12);--mat-app-elevation-shadow-level-24:0px 11px 15px -7px rgba(0,0,0,0.2),0px 24px 38px 3px rgba(0,0,0,0.14),0px 9px 46px 8px rgba(0,0,0,0.12);--mat-ripple-color:rgba(227,227,227,0.1);--mat-option-selected-state-label-text-color:#c2e7ff;--mat-option-label-text-color:#e3e3e3;--mat-option-hover-state-layer-color:rgba(227,227,227,0.08);--mat-option-focus-state-layer-color:rgba(227,227,227,0.12);--mat-option-selected-state-layer-color:#004a77;--mat-optgroup-label-text-color:#c4c7c5;--mat-pseudo-checkbox-full-selected-icon-color:#a8c7fa;--mat-pseudo-checkbox-full-selected-checkmark-color:#062e6f;--mat-pseudo-checkbox-full-unselected-icon-color:#c4c7c5;--mat-pseudo-checkbox-full-disabled-selected-checkmark-color:#1f1f1f;--mat-pseudo-checkbox-full-disabled-unselected-icon-color:rgba(227,227,227,0.38);--mat-pseudo-checkbox-full-disabled-selected-icon-color:rgba(227,227,227,0.38);--mat-pseudo-checkbox-minimal-selected-checkmark-color:#a8c7fa;--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color:rgba(227,227,227,0.38);--mat-bottom-sheet-container-text-color:#e3e3e3;--mat-bottom-sheet-container-background-color:#1b1b1b;--mat-button-toggle-hover-state-layer-opacity:0.08;--mat-button-toggle-focus-state-layer-opacity:0.12;--mat-button-toggle-text-color:#e3e3e3;--mat-button-toggle-state-layer-color:#e3e3e3;--mat-button-toggle-selected-state-background-color:#004a77;--mat-button-toggle-selected-state-text-color:#c2e7ff;--mat-button-toggle-disabled-state-text-color:rgba(227,227,227,0.38);--mat-button-toggle-disabled-selected-state-text-color:rgba(227,227,227,0.38);--mat-button-toggle-disabled-selected-state-background-color:rgba(227,227,227,0.12);--mat-button-toggle-divider-color:#8e918f;--mat-divider-color:#8e918f;--mat-expansion-container-background-color:#1f1f1f;--mat-expansion-container-text-color:#e3e3e3;--mat-expansion-actions-divider-color:#8e918f;--mat-expansion-header-hover-state-layer-color:rgba(227,227,227,0.08);--mat-expansion-header-focus-state-layer-color:rgba(227,227,227,0.12);--mat-expansion-header-disabled-state-text-color:rgba(227,227,227,0.38);--mat-expansion-header-text-color:#e3e3e3;--mat-expansion-header-description-color:#c4c7c5;--mat-expansion-header-indicator-color:#c4c7c5;--mat-sidenav-container-background-color:#1f1f1f;--mat-sidenav-container-text-color:#c4c7c5;--mat-sidenav-content-background-color:#1f1f1f;--mat-sidenav-content-text-color:#e3e3e3;--mat-sidenav-scrim-color:rgba(45,49,47,0.4);--mat-text-button-disabled-label-text-color:rgba(227,227,227,0.38);--mat-text-button-disabled-state-layer-color:#c4c7c5;--mat-text-button-focus-state-layer-opacity:0.12;--mat-text-button-hover-state-layer-opacity:0.08;--mat-text-button-label-text-color:#a8c7fa;--mat-text-button-pressed-state-layer-opacity:0.12;--mat-text-button-ripple-color:rgba(168,199,250,0.12);--mat-text-button-state-layer-color:#a8c7fa;--mat-protected-button-container-elevation-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-protected-button-disabled-container-elevation-shadow:0px 0px 0px 0px rgba(0,0,0,0.2),0px 0px 0px 0px rgba(0,0,0,0.14),0px 0px 0px 0px rgba(0,0,0,0.12);--mat-protected-button-focus-container-elevation-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-protected-button-hover-container-elevation-shadow:0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12);--mat-protected-button-pressed-container-elevation-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-protected-button-container-color:#1f1f1f;--mat-protected-button-disabled-container-color:rgba(227,227,227,0.12);--mat-protected-button-disabled-label-text-color:rgba(227,227,227,0.38);--mat-protected-button-disabled-state-layer-color:#c4c7c5;--mat-protected-button-focus-state-layer-opacity:0.12;--mat-protected-button-hover-state-layer-opacity:0.08;--mat-protected-button-label-text-color:#a8c7fa;--mat-protected-button-pressed-state-layer-opacity:0.12;--mat-protected-button-ripple-color:rgba(168,199,250,0.12);--mat-protected-button-state-layer-color:#a8c7fa;--mat-filled-button-container-color:#a8c7fa;--mat-filled-button-disabled-container-color:rgba(227,227,227,0.12);--mat-filled-button-disabled-label-text-color:rgba(227,227,227,0.38);--mat-filled-button-disabled-state-layer-color:#c4c7c5;--mat-filled-button-focus-state-layer-opacity:0.12;--mat-filled-button-hover-state-layer-opacity:0.08;--mat-filled-button-label-text-color:#062e6f;--mat-filled-button-pressed-state-layer-opacity:0.12;--mat-filled-button-ripple-color:rgba(6,46,111,0.12);--mat-filled-button-state-layer-color:#062e6f;--mat-outlined-button-disabled-label-text-color:rgba(227,227,227,0.38);--mat-outlined-button-disabled-outline-color:rgba(227,227,227,0.12);--mat-outlined-button-disabled-state-layer-color:#c4c7c5;--mat-outlined-button-focus-state-layer-opacity:0.12;--mat-outlined-button-hover-state-layer-opacity:0.08;--mat-outlined-button-label-text-color:#a8c7fa;--mat-outlined-button-outline-color:#8e918f;--mat-outlined-button-pressed-state-layer-opacity:0.12;--mat-outlined-button-ripple-color:rgba(168,199,250,0.12);--mat-outlined-button-state-layer-color:#a8c7fa;--mat-tonal-button-container-color:#004a77;--mat-tonal-button-label-text-color:#c2e7ff;--mat-tonal-button-disabled-container-color:rgba(227,227,227,0.12);--mat-tonal-button-disabled-label-text-color:rgba(227,227,227,0.38);--mat-tonal-button-state-layer-color:#c2e7ff;--mat-tonal-button-disabled-state-layer-color:#c4c7c5;--mat-tonal-button-ripple-color:rgba(194,231,255,0.12);--mat-tonal-button-hover-state-layer-opacity:0.08;--mat-tonal-button-focus-state-layer-opacity:0.12;--mat-tonal-button-pressed-state-layer-opacity:0.12;--mat-card-elevated-container-color:#1b1b1b;--mat-card-elevated-container-elevation:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-card-outlined-container-color:#1f1f1f;--mat-card-outlined-outline-color:#444746;--mat-card-outlined-container-elevation:0px 0px 0px 0px rgba(0,0,0,0.2),0px 0px 0px 0px rgba(0,0,0,0.14),0px 0px 0px 0px rgba(0,0,0,0.12);--mat-card-subtitle-text-color:#e3e3e3;--mat-dialog-container-color:#1f1f1f;--mat-dialog-subhead-color:#e3e3e3;--mat-dialog-supporting-text-color:#c4c7c5;--mat-icon-button-disabled-icon-color:rgba(227,227,227,0.38);--mat-icon-button-disabled-state-layer-color:#c4c7c5;--mat-icon-button-focus-state-layer-opacity:0.12;--mat-icon-button-hover-state-layer-opacity:0.08;--mat-icon-button-icon-color:#c4c7c5;--mat-icon-button-pressed-state-layer-opacity:0.12;--mat-icon-button-ripple-color:rgba(196,199,197,0.12);--mat-icon-button-state-layer-color:#c4c7c5;--mat-form-field-filled-caret-color:#a8c7fa;--mat-form-field-filled-focus-active-indicator-color:#a8c7fa;--mat-form-field-filled-focus-label-text-color:#a8c7fa;--mat-form-field-filled-container-color:#444746;--mat-form-field-filled-disabled-container-color:rgba(227,227,227,0.04);--mat-form-field-filled-label-text-color:#c4c7c5;--mat-form-field-filled-hover-label-text-color:#c4c7c5;--mat-form-field-filled-disabled-label-text-color:rgba(227,227,227,0.38);--mat-form-field-filled-input-text-color:#e3e3e3;--mat-form-field-filled-disabled-input-text-color:rgba(227,227,227,0.38);--mat-form-field-filled-input-text-placeholder-color:#c4c7c5;--mat-form-field-filled-error-hover-label-text-color:#f9dedc;--mat-form-field-filled-error-focus-label-text-color:#f2b8b5;--mat-form-field-filled-error-label-text-color:#f2b8b5;--mat-form-field-filled-active-indicator-color:#c4c7c5;--mat-form-field-filled-disabled-active-indicator-color:rgba(227,227,227,0.38);--mat-form-field-filled-hover-active-indicator-color:#e3e3e3;--mat-form-field-filled-error-active-indicator-color:#f2b8b5;--mat-form-field-filled-error-focus-active-indicator-color:#f2b8b5;--mat-form-field-filled-error-hover-active-indicator-color:#f9dedc;--mat-form-field-outlined-caret-color:#a8c7fa;--mat-form-field-outlined-focus-outline-color:#a8c7fa;--mat-form-field-outlined-focus-label-text-color:#a8c7fa;--mat-form-field-outlined-label-text-color:#c4c7c5;--mat-form-field-outlined-hover-label-text-color:#e3e3e3;--mat-form-field-outlined-disabled-label-text-color:rgba(227,227,227,0.38);--mat-form-field-outlined-input-text-color:#e3e3e3;--mat-form-field-outlined-disabled-input-text-color:rgba(227,227,227,0.38);--mat-form-field-outlined-input-text-placeholder-color:#c4c7c5;--mat-form-field-outlined-error-focus-label-text-color:#f2b8b5;--mat-form-field-outlined-error-label-text-color:#f2b8b5;--mat-form-field-outlined-error-hover-label-text-color:#f9dedc;--mat-form-field-outlined-outline-color:#8e918f;--mat-form-field-outlined-disabled-outline-color:rgba(227,227,227,0.12);--mat-form-field-outlined-hover-outline-color:#e3e3e3;--mat-form-field-outlined-error-focus-outline-color:#f2b8b5;--mat-form-field-outlined-error-hover-outline-color:#f9dedc;--mat-form-field-outlined-error-outline-color:#f2b8b5;--mat-form-field-focus-select-arrow-color:#a8c7fa;--mat-form-field-disabled-input-text-placeholder-color:rgba(227,227,227,0.38);--mat-form-field-state-layer-color:#e3e3e3;--mat-form-field-error-text-color:#f2b8b5;--mat-form-field-select-option-text-color:#1f1f1f;--mat-form-field-select-disabled-option-text-color:rgba(31,31,31,0.38);--mat-form-field-leading-icon-color:#c4c7c5;--mat-form-field-disabled-leading-icon-color:rgba(227,227,227,0.38);--mat-form-field-trailing-icon-color:#c4c7c5;--mat-form-field-disabled-trailing-icon-color:rgba(227,227,227,0.38);--mat-form-field-error-focus-trailing-icon-color:#f2b8b5;--mat-form-field-error-hover-trailing-icon-color:#f9dedc;--mat-form-field-error-trailing-icon-color:#f2b8b5;--mat-form-field-enabled-select-arrow-color:#c4c7c5;--mat-form-field-disabled-select-arrow-color:rgba(227,227,227,0.38);--mat-form-field-hover-state-layer-opacity:0.08;--mat-list-active-indicator-color:#004a77;--mat-list-list-item-leading-avatar-color:#0842a0;--mat-list-list-item-disabled-state-layer-color:#e3e3e3;--mat-list-list-item-disabled-state-layer-opacity:0.12;--mat-list-list-item-label-text-color:#e3e3e3;--mat-list-list-item-supporting-text-color:#c4c7c5;--mat-list-list-item-leading-icon-color:#c4c7c5;--mat-list-list-item-trailing-supporting-text-color:#c4c7c5;--mat-list-list-item-trailing-icon-color:#c4c7c5;--mat-list-list-item-selected-trailing-icon-color:#a8c7fa;--mat-list-list-item-disabled-label-text-color:#e3e3e3;--mat-list-list-item-disabled-leading-icon-color:#e3e3e3;--mat-list-list-item-disabled-trailing-icon-color:#e3e3e3;--mat-list-list-item-hover-label-text-color:#e3e3e3;--mat-list-list-item-hover-state-layer-color:#e3e3e3;--mat-list-list-item-hover-state-layer-opacity:0.08;--mat-list-list-item-focus-label-text-color:#e3e3e3;--mat-list-list-item-focus-state-layer-color:#e3e3e3;--mat-list-list-item-focus-state-layer-opacity:0.12;--mat-slide-toggle-disabled-unselected-track-outline-color:#e3e3e3;--mat-slide-toggle-selected-focus-state-layer-opacity:0.12;--mat-slide-toggle-selected-hover-state-layer-opacity:0.08;--mat-slide-toggle-selected-pressed-state-layer-opacity:0.12;--mat-slide-toggle-track-outline-color:#8e918f;--mat-slide-toggle-unselected-focus-state-layer-opacity:0.12;--mat-slide-toggle-unselected-hover-state-layer-opacity:0.08;--mat-slide-toggle-unselected-pressed-state-layer-opacity:0.12;--mat-slide-toggle-selected-focus-state-layer-color:#a8c7fa;--mat-slide-toggle-selected-handle-color:#062e6f;--mat-slide-toggle-selected-hover-state-layer-color:#a8c7fa;--mat-slide-toggle-selected-pressed-state-layer-color:#a8c7fa;--mat-slide-toggle-selected-focus-handle-color:#0842a0;--mat-slide-toggle-selected-hover-handle-color:#0842a0;--mat-slide-toggle-selected-pressed-handle-color:#0842a0;--mat-slide-toggle-selected-focus-track-color:#a8c7fa;--mat-slide-toggle-selected-hover-track-color:#a8c7fa;--mat-slide-toggle-selected-pressed-track-color:#a8c7fa;--mat-slide-toggle-selected-track-color:#a8c7fa;--mat-slide-toggle-disabled-selected-handle-color:#1f1f1f;--mat-slide-toggle-disabled-selected-icon-color:#e3e3e3;--mat-slide-toggle-disabled-selected-track-color:#e3e3e3;--mat-slide-toggle-disabled-unselected-handle-color:#e3e3e3;--mat-slide-toggle-disabled-unselected-icon-color:#444746;--mat-slide-toggle-disabled-unselected-track-color:#444746;--mat-slide-toggle-label-text-color:#e3e3e3;--mat-slide-toggle-selected-icon-color:#d3e3fd;--mat-slide-toggle-unselected-hover-handle-color:#c4c7c5;--mat-slide-toggle-unselected-focus-handle-color:#c4c7c5;--mat-slide-toggle-unselected-focus-state-layer-color:#e3e3e3;--mat-slide-toggle-unselected-focus-track-color:#444746;--mat-slide-toggle-unselected-icon-color:#444746;--mat-slide-toggle-unselected-handle-color:#8e918f;--mat-slide-toggle-unselected-hover-state-layer-color:#e3e3e3;--mat-slide-toggle-unselected-hover-track-color:#444746;--mat-slide-toggle-unselected-pressed-handle-color:#c4c7c5;--mat-slide-toggle-unselected-pressed-track-color:#444746;--mat-slide-toggle-unselected-pressed-state-layer-color:#e3e3e3;--mat-slide-toggle-unselected-track-color:#444746;--mat-slider-handle-elevation:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);--mat-slider-active-track-color:#a8c7fa;--mat-slider-focus-handle-color:#a8c7fa;--mat-slider-focus-state-layer-color:rgba(168,199,250,0.2);--mat-slider-handle-color:#a8c7fa;--mat-slider-hover-handle-color:#a8c7fa;--mat-slider-hover-state-layer-color:rgba(168,199,250,0.05);--mat-slider-inactive-track-color:#444746;--mat-slider-ripple-color:#a8c7fa;--mat-slider-with-tick-marks-active-container-color:#062e6f;--mat-slider-with-tick-marks-inactive-container-color:#c4c7c5;--mat-slider-disabled-active-track-color:#e3e3e3;--mat-slider-disabled-handle-color:#e3e3e3;--mat-slider-disabled-inactive-track-color:#e3e3e3;--mat-slider-label-container-color:#a8c7fa;--mat-slider-label-label-text-color:#062e6f;--mat-slider-with-overlap-handle-outline-color:#062e6f;--mat-slider-with-tick-marks-disabled-container-color:#e3e3e3;--mat-snack-bar-container-color:#e3e3e3;--mat-snack-bar-supporting-text-color:#303030;--mat-snack-bar-button-color:#0b57d0;--mat-chip-disabled-outline-color:rgba(227,227,227,0.12);--mat-chip-focus-outline-color:#c4c7c5;--mat-chip-hover-state-layer-opacity:0.08;--mat-chip-outline-color:#8e918f;--mat-chip-selected-hover-state-layer-opacity:0.08;--mat-chip-selected-trailing-action-state-layer-color:#c2e7ff;--mat-chip-trailing-action-focus-state-layer-opacity:0.12;--mat-chip-trailing-action-hover-state-layer-opacity:0.08;--mat-chip-trailing-action-state-layer-color:#c4c7c5;--mat-chip-disabled-label-text-color:rgba(227,227,227,0.38);--mat-chip-elevated-selected-container-color:#004a77;--mat-chip-flat-disabled-selected-container-color:rgba(227,227,227,0.12);--mat-chip-focus-state-layer-color:#c4c7c5;--mat-chip-focus-state-layer-opacity:0.12;--mat-chip-hover-state-layer-color:#c4c7c5;--mat-chip-label-text-color:#c4c7c5;--mat-chip-selected-disabled-trailing-icon-color:#e3e3e3;--mat-chip-selected-focus-state-layer-color:#c2e7ff;--mat-chip-selected-focus-state-layer-opacity:0.12;--mat-chip-selected-hover-state-layer-color:#c2e7ff;--mat-chip-selected-label-text-color:#c2e7ff;--mat-chip-selected-trailing-icon-color:#c2e7ff;--mat-chip-with-icon-disabled-icon-color:#e3e3e3;--mat-chip-with-icon-icon-color:#c4c7c5;--mat-chip-with-icon-selected-icon-color:#c2e7ff;--mat-chip-with-trailing-icon-disabled-trailing-icon-color:#e3e3e3;--mat-chip-with-trailing-icon-trailing-icon-color:#c4c7c5;--mat-menu-item-label-text-color:#e3e3e3;--mat-menu-item-icon-color:#c4c7c5;--mat-menu-item-hover-state-layer-color:rgba(227,227,227,0.08);--mat-menu-item-focus-state-layer-color:rgba(227,227,227,0.12);--mat-menu-container-color:#1e1f20;--mat-menu-divider-color:#444746;--mat-checkbox-disabled-selected-checkmark-color:#1f1f1f;--mat-checkbox-selected-focus-state-layer-opacity:0.12;--mat-checkbox-selected-hover-state-layer-opacity:0.08;--mat-checkbox-selected-pressed-state-layer-opacity:0.12;--mat-checkbox-unselected-focus-state-layer-opacity:0.12;--mat-checkbox-unselected-hover-state-layer-opacity:0.08;--mat-checkbox-unselected-pressed-state-layer-opacity:0.12;--mat-checkbox-disabled-label-color:rgba(227,227,227,0.38);--mat-checkbox-label-text-color:#e3e3e3;--mat-checkbox-disabled-selected-icon-color:rgba(227,227,227,0.38);--mat-checkbox-disabled-unselected-icon-color:rgba(227,227,227,0.38);--mat-checkbox-selected-checkmark-color:#062e6f;--mat-checkbox-selected-focus-icon-color:#a8c7fa;--mat-checkbox-selected-hover-icon-color:#a8c7fa;--mat-checkbox-selected-icon-color:#a8c7fa;--mat-checkbox-selected-pressed-icon-color:#a8c7fa;--mat-checkbox-unselected-focus-icon-color:#e3e3e3;--mat-checkbox-unselected-hover-icon-color:#e3e3e3;--mat-checkbox-unselected-icon-color:#c4c7c5;--mat-checkbox-selected-focus-state-layer-color:#a8c7fa;--mat-checkbox-selected-hover-state-layer-color:#a8c7fa;--mat-checkbox-selected-pressed-state-layer-color:#e3e3e3;--mat-checkbox-unselected-focus-state-layer-color:#e3e3e3;--mat-checkbox-unselected-hover-state-layer-color:#e3e3e3;--mat-checkbox-unselected-pressed-state-layer-color:#a8c7fa;--mat-tooltip-container-color:#e3e3e3;--mat-tooltip-supporting-text-color:#303030;--mat-progress-bar-active-indicator-color:#a8c7fa;--mat-progress-bar-track-color:#444746;--mat-progress-spinner-active-indicator-color:#a8c7fa;--mat-select-panel-background-color:#1e1f20;--mat-select-enabled-trigger-text-color:#e3e3e3;--mat-select-disabled-trigger-text-color:rgba(227,227,227,0.38);--mat-select-placeholder-text-color:#c4c7c5;--mat-select-enabled-arrow-color:#c4c7c5;--mat-select-disabled-arrow-color:rgba(227,227,227,0.38);--mat-select-focused-arrow-color:#a8c7fa;--mat-select-invalid-arrow-color:#f2b8b5;--mat-radio-checked-ripple-color:#a8c7fa;--mat-radio-disabled-label-color:rgba(227,227,227,0.38);--mat-radio-disabled-selected-icon-color:#e3e3e3;--mat-radio-disabled-unselected-icon-color:#e3e3e3;--mat-radio-label-text-color:#e3e3e3;--mat-radio-ripple-color:#e3e3e3;--mat-radio-selected-focus-icon-color:#a8c7fa;--mat-radio-selected-hover-icon-color:#a8c7fa;--mat-radio-selected-icon-color:#a8c7fa;--mat-radio-selected-pressed-icon-color:#a8c7fa;--mat-radio-unselected-focus-icon-color:#e3e3e3;--mat-radio-unselected-hover-icon-color:#e3e3e3;--mat-radio-unselected-icon-color:#c4c7c5;--mat-radio-unselected-pressed-icon-color:#e3e3e3;--mat-fab-extended-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-extended-focus-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-extended-hover-container-elevation-shadow:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);--mat-fab-extended-pressed-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-focus-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-hover-container-elevation-shadow:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);--mat-fab-pressed-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-container-color:#0842a0;--mat-fab-disabled-state-container-color:rgba(227,227,227,0.12);--mat-fab-disabled-state-foreground-color:rgba(227,227,227,0.38);--mat-fab-focus-state-layer-opacity:0.12;--mat-fab-foreground-color:#d3e3fd;--mat-fab-hover-state-layer-opacity:0.08;--mat-fab-pressed-state-layer-opacity:0.12;--mat-fab-ripple-color:rgba(211,227,253,0.12);--mat-fab-state-layer-color:#d3e3fd;--mat-fab-small-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-small-focus-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-small-hover-container-elevation-shadow:0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);--mat-fab-small-pressed-container-elevation-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);--mat-fab-small-container-color:#0842a0;--mat-fab-small-disabled-state-container-color:rgba(227,227,227,0.12);--mat-fab-small-disabled-state-foreground-color:rgba(227,227,227,0.38);--mat-fab-small-focus-state-layer-opacity:0.12;--mat-fab-small-foreground-color:#d3e3fd;--mat-fab-small-hover-state-layer-opacity:0.08;--mat-fab-small-pressed-state-layer-opacity:0.12;--mat-fab-small-ripple-color:rgba(211,227,253,0.12);--mat-fab-small-state-layer-color:#d3e3fd;--mat-tab-divider-color:#444746;--mat-tab-pagination-icon-color:#e3e3e3;--mat-tab-inactive-label-text-color:#e3e3e3;--mat-tab-active-label-text-color:#e3e3e3;--mat-tab-active-ripple-color:#e3e3e3;--mat-tab-inactive-ripple-color:#e3e3e3;--mat-tab-inactive-focus-label-text-color:#e3e3e3;--mat-tab-inactive-hover-label-text-color:#e3e3e3;--mat-tab-active-focus-label-text-color:#e3e3e3;--mat-tab-active-hover-label-text-color:#e3e3e3;--mat-tab-active-focus-indicator-color:#a8c7fa;--mat-tab-active-hover-indicator-color:#a8c7fa;--mat-tab-active-indicator-color:#a8c7fa;--mat-focus-indicator-border-color:#a8c7fa}:where(.theme-host):where(.dark-theme) .katex .katex-svg{filter:invert(100%)}:where(.theme-host) a[mat-flat-button],:where(.theme-host) button[mat-flat-button]{--mat-filled-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-outlined-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-protected-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-text-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-tonal-button-horizontal-padding:var(--gem-sys-spacing--xxl)}:where(.theme-host) a[mat-flat-button]:hover,:where(.theme-host) button[mat-flat-button]:hover{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}:where(.theme-host) a[mat-stroked-button],:where(.theme-host) button[mat-stroked-button]{--mat-filled-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-outlined-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-protected-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-text-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-tonal-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-outlined-button-outline-color:var(--gem-sys-color--outline);--mat-filled-button-state-layer-color:var(--gem-sys-color--primary);--mat-outlined-button-state-layer-color:var(--gem-sys-color--primary);--mat-protected-button-state-layer-color:var(--gem-sys-color--primary);--mat-text-button-state-layer-color:var(--gem-sys-color--primary);--mat-tonal-button-state-layer-color:var(--gem-sys-color--primary);--mat-filled-button-label-text-color:var(--gem-sys-color--primary);--mat-outlined-button-label-text-color:var(--gem-sys-color--primary);--mat-protected-button-label-text-color:var(--gem-sys-color--primary);--mat-text-button-label-text-color:var(--gem-sys-color--primary);--mat-tonal-button-label-text-color:var(--gem-sys-color--primary)}:where(.theme-host) a[mat-stroked-button]:focus,:where(.theme-host) button[mat-stroked-button]:focus{--mat-outlined-button-outline-color:var(--gem-sys-color--primary)}:where(.theme-host) a[mat-raised-button],:where(.theme-host) button[mat-raised-button]{--mat-filled-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-outlined-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-protected-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-text-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-tonal-button-horizontal-padding:var(--gem-sys-spacing--xxl);--mat-filled-button-state-layer-color:var(--gem-sys-color--on-primary-container);--mat-outlined-button-state-layer-color:var(--gem-sys-color--on-primary-container);--mat-protected-button-state-layer-color:var(--gem-sys-color--on-primary-container);--mat-text-button-state-layer-color:var(--gem-sys-color--on-primary-container);--mat-tonal-button-state-layer-color:var(--gem-sys-color--on-primary-container);--mat-filled-button-container-color:var(--gem-sys-color--surface-bright);--mat-protected-button-container-color:var(--gem-sys-color--surface-bright);--mat-tonal-button-container-color:var(--gem-sys-color--surface-bright);--mat-filled-button-label-text-color:var(--gem-sys-color--on-primary-container);--mat-outlined-button-label-text-color:var(--gem-sys-color--on-primary-container);--mat-protected-button-label-text-color:var(--gem-sys-color--on-primary-container);--mat-text-button-label-text-color:var(--gem-sys-color--on-primary-container);--mat-tonal-button-label-text-color:var(--gem-sys-color--on-primary-container)}:where(.theme-host) a[mat-button],:where(.theme-host) button[mat-button]{--mat-filled-button-horizontal-padding:var(--gem-sys-spacing--m);--mat-outlined-button-horizontal-padding:var(--gem-sys-spacing--m);--mat-protected-button-horizontal-padding:var(--gem-sys-spacing--m);--mat-text-button-horizontal-padding:var(--gem-sys-spacing--m);--mat-tonal-button-horizontal-padding:var(--gem-sys-spacing--m);--mat-filled-button-state-layer-color:var(--gem-sys-color--primary);--mat-outlined-button-state-layer-color:var(--gem-sys-color--primary);--mat-protected-button-state-layer-color:var(--gem-sys-color--primary);--mat-text-button-state-layer-color:var(--gem-sys-color--primary);--mat-tonal-button-state-layer-color:var(--gem-sys-color--primary);--mat-filled-button-label-text-color:var(--gem-sys-color--primary);--mat-outlined-button-label-text-color:var(--gem-sys-color--primary);--mat-protected-button-label-text-color:var(--gem-sys-color--primary);--mat-text-button-label-text-color:var(--gem-sys-color--primary);--mat-tonal-button-label-text-color:var(--gem-sys-color--primary)}:where(.theme-host) a[mat-flat-button].gds-button-secondary,:where(.theme-host) button[mat-flat-button].gds-button-secondary{--mat-filled-button-container-color:var(--gem-sys-color--surface-container-high);--mat-protected-button-container-color:var(--gem-sys-color--surface-container-high);--mat-tonal-button-container-color:var(--gem-sys-color--surface-container-high);--mat-filled-button-label-text-color:var(--gem-sys-color--on-primary-container);--mat-outlined-button-label-text-color:var(--gem-sys-color--on-primary-container);--mat-protected-button-label-text-color:var(--gem-sys-color--on-primary-container);--mat-text-button-label-text-color:var(--gem-sys-color--on-primary-container);--mat-tonal-button-label-text-color:var(--gem-sys-color--on-primary-container);--mat-filled-button-state-layer-color:var(--gem-sys-color--on-primary-container);--mat-outlined-button-state-layer-color:var(--gem-sys-color--on-primary-container);--mat-protected-button-state-layer-color:var(--gem-sys-color--on-primary-container);--mat-text-button-state-layer-color:var(--gem-sys-color--on-primary-container);--mat-tonal-button-state-layer-color:var(--gem-sys-color--on-primary-container)}:where(.theme-host) a[mat-flat-button].gds-button-tonal,:where(.theme-host) button[mat-flat-button].gds-button-tonal{--mat-filled-button-container-color:var(--gem-sys-color--secondary-container);--mat-protected-button-container-color:var(--gem-sys-color--secondary-container);--mat-tonal-button-container-color:var(--gem-sys-color--secondary-container);--mat-filled-button-label-text-color:var(--gem-sys-color--on-secondary-container);--mat-outlined-button-label-text-color:var(--gem-sys-color--on-secondary-container);--mat-protected-button-label-text-color:var(--gem-sys-color--on-secondary-container);--mat-text-button-label-text-color:var(--gem-sys-color--on-secondary-container);--mat-tonal-button-label-text-color:var(--gem-sys-color--on-secondary-container);--mat-filled-button-state-layer-color:var(--gem-sys-color--on-secondary-container);--mat-outlined-button-state-layer-color:var(--gem-sys-color--on-secondary-container);--mat-protected-button-state-layer-color:var(--gem-sys-color--on-secondary-container);--mat-text-button-state-layer-color:var(--gem-sys-color--on-secondary-container);--mat-tonal-button-state-layer-color:var(--gem-sys-color--on-secondary-container)}:where(.theme-host) button[mat-button].gds-mode-switch-button{--mat-filled-button-label-text-color:var(--gem-sys-color--on-surface-variant);--mat-outlined-button-label-text-color:var(--gem-sys-color--on-surface-variant);--mat-protected-button-label-text-color:var(--gem-sys-color--on-surface-variant);--mat-text-button-label-text-color:var(--gem-sys-color--on-surface-variant);--mat-tonal-button-label-text-color:var(--gem-sys-color--on-surface-variant);--mat-filled-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-outlined-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-protected-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-text-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-tonal-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-text-button-with-icon-horizontal-padding:0;--mat-filled-button-container-shape:var(--gem-sys-shape--corner-small);--mat-outlined-button-container-shape:var(--gem-sys-shape--corner-small);--mat-protected-button-container-shape:var(--gem-sys-shape--corner-small);--mat-text-button-container-shape:var(--gem-sys-shape--corner-small);--mat-tonal-button-container-shape:var(--gem-sys-shape--corner-small)}:where(.theme-host) button[mat-flat-button].gds-upsell-button{--mat-filled-button-container-color:var(--gem-sys-color--surface-container-highest);--mat-protected-button-container-color:var(--gem-sys-color--surface-container-highest);--mat-tonal-button-container-color:var(--gem-sys-color--surface-container-highest);--mat-filled-button-container-shape:var(--gem-sys-shape--corner-small);--mat-outlined-button-container-shape:var(--gem-sys-shape--corner-small);--mat-protected-button-container-shape:var(--gem-sys-shape--corner-small);--mat-text-button-container-shape:var(--gem-sys-shape--corner-small);--mat-tonal-button-container-shape:var(--gem-sys-shape--corner-small);--mat-filled-button-container-height:36px;--mat-outlined-button-container-height:36px;--mat-protected-button-container-height:36px;--mat-text-button-container-height:36px;--mat-tonal-button-container-height:36px;--mat-filled-button-label-text-color:var(--gem-sys-color--on-surface);--mat-outlined-button-label-text-color:var(--gem-sys-color--on-surface);--mat-protected-button-label-text-color:var(--gem-sys-color--on-surface);--mat-text-button-label-text-color:var(--gem-sys-color--on-surface);--mat-tonal-button-label-text-color:var(--gem-sys-color--on-surface);--mat-filled-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-outlined-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-protected-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-text-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-tonal-button-state-layer-color:var(--gem-sys-color--on-surface);gap:var(--gem-sys-spacing--s)}:where(.theme-host) button[mat-flat-button].gds-upsell-button:hover{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}:where(.theme-host) button[mat-flat-button].gds-referral-button{--mat-filled-button-container-color:var(--gem-sys-color--surface-dim);--mat-protected-button-container-color:var(--gem-sys-color--surface-dim);--mat-tonal-button-container-color:var(--gem-sys-color--surface-dim);--mat-filled-button-container-shape:var(--gem-sys-shape--corner-small);--mat-outlined-button-container-shape:var(--gem-sys-shape--corner-small);--mat-protected-button-container-shape:var(--gem-sys-shape--corner-small);--mat-text-button-container-shape:var(--gem-sys-shape--corner-small);--mat-tonal-button-container-shape:var(--gem-sys-shape--corner-small);--mat-filled-button-container-height:36px;--mat-outlined-button-container-height:36px;--mat-protected-button-container-height:36px;--mat-text-button-container-height:36px;--mat-tonal-button-container-height:36px;--mat-filled-button-label-text-color:var(--gem-sys-color--on-surface);--mat-outlined-button-label-text-color:var(--gem-sys-color--on-surface);--mat-protected-button-label-text-color:var(--gem-sys-color--on-surface);--mat-text-button-label-text-color:var(--gem-sys-color--on-surface);--mat-tonal-button-label-text-color:var(--gem-sys-color--on-surface);--mat-filled-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-outlined-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-protected-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-text-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-tonal-button-state-layer-color:var(--gem-sys-color--on-surface);--mat-filled-button-horizontal-padding:var(--gem-sys-spacing--l);--mat-outlined-button-horizontal-padding:var(--gem-sys-spacing--l);--mat-protected-button-horizontal-padding:var(--gem-sys-spacing--l);--mat-text-button-horizontal-padding:var(--gem-sys-spacing--l);--mat-tonal-button-horizontal-padding:var(--gem-sys-spacing--l);gap:var(--gem-sys-spacing--s)}:where(.theme-host) button[mat-flat-button].gds-referral-button:hover{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}:where(.theme-host) announcement-banner{--mat-icon-button-icon-color:var(--gem-sys-color--on-primary-container);--mat-icon-button-state-layer-color:var(--gem-sys-color--on-primary-container)}:where(.theme-host) .gds-mode-switch-menu.mat-mdc-menu-panel{--mat-menu-container-shape:var(--gem-sys-shape--corner-small);--mat-menu-item-with-icon-leading-spacing:var(--gem-sys-spacing--l);--mat-menu-item-with-icon-trailing-spacing:var(--gem-sys-spacing--l);--mat-menu-item-leading-spacing:var(--gem-sys-spacing--l);--mat-menu-item-trailing-spacing:var(--gem-sys-spacing--l);max-width:var(--mat-menu-panel-max-width,unset);min-width:var(--mat-menu-panel-min-width,320px)}:where(.theme-host) .gds-mode-switch-menu.mat-mdc-menu-panel .mat-mdc-menu-item{gap:var(--gem-sys-spacing--m)}:where(.theme-host) .gds-studio-create-task-menu.mat-mdc-menu-panel{--mat-menu-container-shape:var(--gem-sys-shape--corner-large);--mat-menu-item-with-icon-leading-spacing:var(--gem-sys-spacing--l);--mat-menu-item-with-icon-trailing-spacing:var(--gem-sys-spacing--l);--mat-menu-item-leading-spacing:var(--gem-sys-spacing--l);--mat-menu-item-trailing-spacing:var(--gem-sys-spacing--l);max-width:unset;width:278px}:where(.theme-host) .gds-studio-create-task-menu.mat-mdc-menu-panel .mat-mdc-menu-item{min-height:calc(var(--gem-sys-spacing--xxl) + var(--gem-sys-spacing--s)*2)}:where(.theme-host) mat-bottom-sheet-container.mat-bottom-sheet-container{padding:var(--gem-sys-spacing--m) 0 var(--gem-sys-spacing--xxl) 0;border-radius:var(--gem-sys-shape--corner-large) var(--gem-sys-shape--corner-large) 0 0}:where(.theme-host) mat-action-list.gds-mode-switch-menu-list{--mat-list-list-item-disabled-state-layer-color:transparent}:where(.theme-host) .mat-mdc-dialog-panel.full-screen-modal{--mat-dialog-container-shape:var(--gem-sys-shape--corner-none)}:where(.theme-host){--gem-sys-color--error:#b3261e;--gem-sys-color--error--rgb:179,38,30;--gem-sys-color--error-container:#f9dedc;--gem-sys-color--error-container--rgb:249,222,220;--gem-sys-color--gems-blue-high:#00629e;--gem-sys-color--gems-blue-high--rgb:0,98,158;--gem-sys-color--gems-blue-low:#bedcff;--gem-sys-color--gems-blue-low--rgb:190,220,255;--gem-sys-color--gems-cyan-high:#00677d;--gem-sys-color--gems-cyan-high--rgb:0,103,125;--gem-sys-color--gems-cyan-low:#92e5ff;--gem-sys-color--gems-cyan-low--rgb:146,229,255;--gem-sys-color--gems-grey-high:#5e5e5e;--gem-sys-color--gems-grey-high--rgb:94,94,94;--gem-sys-color--gems-grey-low:#d9d9d9;--gem-sys-color--gems-grey-low--rgb:217,217,217;--gem-sys-color--gems-orange-high:#96490a;--gem-sys-color--gems-orange-high--rgb:150,73,10;--gem-sys-color--gems-orange-low:#ffcfb4;--gem-sys-color--gems-orange-low--rgb:255,207,180;--gem-sys-color--gems-pink-high:#984062;--gem-sys-color--gems-pink-high--rgb:152,64,98;--gem-sys-color--gems-pink-low:#ffcbda;--gem-sys-color--gems-pink-low--rgb:255,203,218;--gem-sys-color--gems-purple-high:#9700d2;--gem-sys-color--gems-purple-high--rgb:151,0,210;--gem-sys-color--gems-purple-low:#f2ccff;--gem-sys-color--gems-purple-low--rgb:242,204,255;--gem-sys-color--gems-teal-high:#00696d;--gem-sys-color--gems-teal-high--rgb:0,105,109;--gem-sys-color--gems-teal-low:#93e7eb;--gem-sys-color--gems-teal-low--rgb:147,231,235;--gem-sys-color--gems-violet-high:#5132ff;--gem-sys-color--gems-violet-high--rgb:81,50,255;--gem-sys-color--gems-violet-low:#d9d4ff;--gem-sys-color--gems-violet-low--rgb:217,212,255;--gem-sys-color--gems-yellow-high:#7e5700;--gem-sys-color--gems-yellow-high--rgb:126,87,0;--gem-sys-color--gems-yellow-low:#ffd289;--gem-sys-color--gems-yellow-low--rgb:255,210,137;--gem-sys-color--image-stop:#d3dbe5;--gem-sys-color--image-stop--rgb:211,219,229;--gem-sys-color--inverse-on-surface:#f2f2f2;--gem-sys-color--inverse-on-surface--rgb:242,242,242;--gem-sys-color--inverse-primary:#a8c7fa;--gem-sys-color--inverse-primary--rgb:168,199,250;--gem-sys-color--inverse-surface:#303030;--gem-sys-color--inverse-surface--rgb:48,48,48;--gem-sys-color--on-error:#fff;--gem-sys-color--on-error--rgb:255,255,255;--gem-sys-color--on-error-container:#8c1d18;--gem-sys-color--on-error-container--rgb:140,29,24;--gem-sys-color--on-primary:#fff;--gem-sys-color--on-primary--rgb:255,255,255;--gem-sys-color--on-primary-container:#0842a0;--gem-sys-color--on-primary-container--rgb:8,66,160;--gem-sys-color--on-primary-fixed:#041e49;--gem-sys-color--on-primary-fixed--rgb:4,30,73;--gem-sys-color--on-primary-fixed-variant:#0842a0;--gem-sys-color--on-primary-fixed-variant--rgb:8,66,160;--gem-sys-color--on-secondary:#fff;--gem-sys-color--on-secondary--rgb:255,255,255;--gem-sys-color--on-secondary-container:#004a77;--gem-sys-color--on-secondary-container--rgb:0,74,119;--gem-sys-color--on-secondary-fixed:#001d35;--gem-sys-color--on-secondary-fixed--rgb:0,29,53;--gem-sys-color--on-secondary-fixed-variant:#004a77;--gem-sys-color--on-secondary-fixed-variant--rgb:0,74,119;--gem-sys-color--on-surface:#1b1c1d;--gem-sys-color--on-surface--rgb:27,28,29;--gem-sys-color--on-surface-low:#727676;--gem-sys-color--on-surface-low--rgb:114,118,118;--gem-sys-color--on-surface-variant:#575b5f;--gem-sys-color--on-surface-variant--rgb:87,91,95;--gem-sys-color--on-tertiary:#fff;--gem-sys-color--on-tertiary--rgb:255,255,255;--gem-sys-color--on-tertiary-container:#0f5223;--gem-sys-color--on-tertiary-container--rgb:15,82,35;--gem-sys-color--on-tertiary-fixed:#072711;--gem-sys-color--on-tertiary-fixed--rgb:7,39,17;--gem-sys-color--on-tertiary-fixed-variant:#0f5223;--gem-sys-color--on-tertiary-fixed-variant--rgb:15,82,35;--gem-sys-color--outline:#747775;--gem-sys-color--outline--rgb:116,119,117;--gem-sys-color--outline-gradient-stop-1:#ffa3f4;--gem-sys-color--outline-gradient-stop-1--rgb:255,163,244;--gem-sys-color--outline-solid-1:#ff6de4;--gem-sys-color--outline-solid-1--rgb:255,109,228;--gem-sys-color--outline-variant:#c4c7c5;--gem-sys-color--outline-variant--rgb:196,199,197;--gem-sys-color--primary:#0b57d0;--gem-sys-color--primary--rgb:11,87,208;--gem-sys-color--primary-fixed:#d3e3fd;--gem-sys-color--primary-fixed--rgb:211,227,253;--gem-sys-color--primary-fixed-dim:#a8c7fa;--gem-sys-color--primary-fixed-dim--rgb:168,199,250;--gem-sys-color--scrim:#000;--gem-sys-color--scrim--rgb:0,0,0;--gem-sys-color--secondary:#00639b;--gem-sys-color--secondary--rgb:0,99,155;--gem-sys-color--secondary-container:#c2e7ff;--gem-sys-color--secondary-container--rgb:194,231,255;--gem-sys-color--secondary-fixed:#c2e7ff;--gem-sys-color--secondary-fixed--rgb:194,231,255;--gem-sys-color--secondary-fixed-dim:#7fcfff;--gem-sys-color--secondary-fixed-dim--rgb:127,207,255;--gem-sys-color--shadow:#000;--gem-sys-color--shadow--rgb:0,0,0;--gem-sys-color--surface:#fff;--gem-sys-color--surface--rgb:255,255,255;--gem-sys-color--surface-bright:#fff;--gem-sys-color--surface-bright--rgb:255,255,255;--gem-sys-color--surface-container:#f0f4f9;--gem-sys-color--surface-container--rgb:240,244,249;--gem-sys-color--surface-container-high:#e9eef6;--gem-sys-color--surface-container-high--rgb:233,238,246;--gem-sys-color--surface-container-highest:#dde3ea;--gem-sys-color--surface-container-highest--rgb:221,227,234;--gem-sys-color--surface-container-low:#f8fafd;--gem-sys-color--surface-container-low--rgb:248,250,253;--gem-sys-color--surface-container-lowest:#fff;--gem-sys-color--surface-container-lowest--rgb:255,255,255;--gem-sys-color--surface-dim:#d3dbe5;--gem-sys-color--surface-dim--rgb:211,219,229;--gem-sys-color--tertiary:#146c2e;--gem-sys-color--tertiary--rgb:20,108,46;--gem-sys-color--tertiary-container:#c4eed0;--gem-sys-color--tertiary-container--rgb:196,238,208;--gem-sys-color--tertiary-fixed:#c4eed0;--gem-sys-color--tertiary-fixed--rgb:196,238,208;--gem-sys-color--tertiary-fixed-dim:#6dd58c;--gem-sys-color--tertiary-fixed-dim--rgb:109,213,140;--gem-sys-color--blue-high:#001944;--gem-sys-color--blue-high--rgb:0,25,68;--gem-sys-color--blue-low:#e7f2ff;--gem-sys-color--blue-low--rgb:231,242,255;--gem-sys-color--blue-medium:#a1c9ff;--gem-sys-color--blue-medium--rgb:161,201,255;--gem-sys-color--blue-primary:#1157ce;--gem-sys-color--blue-primary--rgb:17,87,206;--gem-sys-color--green-high:#002110;--gem-sys-color--green-high--rgb:0,33,16;--gem-sys-color--green-low:#ddf8d8;--gem-sys-color--green-low--rgb:221,248,216;--gem-sys-color--green-medium:#80da88;--gem-sys-color--green-medium--rgb:128,218,136;--gem-sys-color--green-primary:#006c35;--gem-sys-color--green-primary--rgb:0,108,53;--gem-sys-color--mic-gradient-stop-1:#ffaee4;--gem-sys-color--mic-gradient-stop-1--rgb:255,174,228;--gem-sys-color--mic-gradient-stop-2:#ad72ff;--gem-sys-color--mic-gradient-stop-2--rgb:173,114,255;--gem-sys-color--mic-gradient-stop-3:#c597ff;--gem-sys-color--mic-gradient-stop-3--rgb:197,151,255;--gem-sys-color--orange-high:#321200;--gem-sys-color--orange-high--rgb:50,18,0;--gem-sys-color--orange-low:#ffede1;--gem-sys-color--orange-low--rgb:255,237,225;--gem-sys-color--orange-medium:#ffb683;--gem-sys-color--orange-medium--rgb:255,182,131;--gem-sys-color--orange-primary:#9a4600;--gem-sys-color--orange-primary--rgb:154,70,0;--gem-sys-color--outline-gradient-stop-2:#c597ff;--gem-sys-color--outline-gradient-stop-2--rgb:197,151,255;--gem-sys-color--outline-gradient-stop-3:#7cacf8;--gem-sys-color--outline-gradient-stop-3--rgb:124,172,248;--gem-sys-color--outline-solid-2:#0b57d0;--gem-sys-color--outline-solid-2--rgb:11,87,208;--gem-sys-color--outline-solid-3:#fff;--gem-sys-color--outline-solid-3--rgb:255,255,255;--gem-sys-color--primary-container:#d3e3fd;--gem-sys-color--primary-container--rgb:211,227,253;--gem-sys-color--purple-high:#280255;--gem-sys-color--purple-high--rgb:40,2,85;--gem-sys-color--purple-low:#f7ecfe;--gem-sys-color--purple-low--rgb:247,236,254;--gem-sys-color--purple-medium:#d9bafd;--gem-sys-color--purple-medium--rgb:217,186,253;--gem-sys-color--purple-primary:#7438d2;--gem-sys-color--purple-primary--rgb:116,56,210;--gem-sys-color--red-high:#3a0907;--gem-sys-color--red-high--rgb:58,9,7;--gem-sys-color--red-low:#ffecee;--gem-sys-color--red-low--rgb:255,236,238;--gem-sys-color--red-medium:#ffb3ae;--gem-sys-color--red-medium--rgb:255,179,174;--gem-sys-color--red-primary:#b3251e;--gem-sys-color--red-primary--rgb:179,37,30;--gem-sys-color--soft-glow-blue-1:#4c8df6;--gem-sys-color--soft-glow-blue-1--rgb:76,141,246;--gem-sys-color--soft-glow-blue-2:#3271ea;--gem-sys-color--soft-glow-blue-2--rgb:50,113,234;--gem-sys-color--soft-glow-pink-1:#ff7dd2;--gem-sys-color--soft-glow-pink-1--rgb:255,125,210;--gem-sys-color--soft-glow-pink-2:#b60d6e;--gem-sys-color--soft-glow-pink-2--rgb:182,13,110;--gem-sys-color--surface-variant:#e3e3e3;--gem-sys-color--surface-variant--rgb:227,227,227;--gem-sys-color--text-advanced-stop-high:#ff8983;--gem-sys-color--text-advanced-stop-high--rgb:255,137,131;--gem-sys-color--text-advanced-stop-low:#ffd8ef;--gem-sys-color--text-advanced-stop-low--rgb:255,216,239;--gem-sys-color--text-basic-stop-high:#3271ea;--gem-sys-color--text-basic-stop-high--rgb:50,113,234;--gem-sys-color--text-basic-stop-low:#e7f2ff;--gem-sys-color--text-basic-stop-low--rgb:231,242,255;--gem-sys-color--universal-stop:#fafbff;--gem-sys-color--universal-stop--rgb:250,251,255;--gem-sys-shape--corner-extra-large:28px;--gem-sys-shape--corner-extra-large-top:28px 28px 0px 0px;--gem-sys-shape--corner-extra-small:4px;--gem-sys-shape--corner-extra-small-top:4px 4px 0px 0px;--gem-sys-shape--corner-full:9999px;--gem-sys-shape--corner-large:16px;--gem-sys-shape--corner-large-increased:20px;--gem-sys-shape--corner-large-max:1.5rem;--gem-sys-shape--corner-large-end:0px 16px 16px 0px;--gem-sys-shape--corner-large-start:16px 0px 0px 16px;--gem-sys-shape--corner-large-top:16px 16px 0px 0px;--gem-sys-shape--corner-medium:12px;--gem-sys-shape--corner-none:0px;--gem-sys-shape--corner-small:8px;--gem-sys-spacing--l:16px;--gem-sys-spacing--m:12px;--gem-sys-spacing--s:8px;--gem-sys-spacing--xl:20px;--gem-sys-spacing--xs:4px;--gem-sys-spacing--xxl:24px;--gem-sys-spacing--xxxl:28px;--gem-sys-typography-icon-scale--icon-l-font-name:"Google Symbols";--gem-sys-typography-icon-scale--icon-l-font-size:1.25rem;--gem-sys-typography-icon-scale--icon-l-font-tracking:0;--gem-sys-typography-icon-scale--icon-l-font-weight:400;--gem-sys-typography-icon-scale--icon-l-line-height:1.25rem;--gem-sys-typography-icon-scale--icon-l-shape:"ROND" 100;--gem-sys-typography-icon-scale--icon-m-font-name:"Google Symbols";--gem-sys-typography-icon-scale--icon-m-font-size:1.125rem;--gem-sys-typography-icon-scale--icon-m-font-tracking:0;--gem-sys-typography-icon-scale--icon-m-font-weight:500;--gem-sys-typography-icon-scale--icon-m-line-height:1.125rem;--gem-sys-typography-icon-scale--icon-m-shape:"ROND" 100;--gem-sys-typography-icon-scale--icon-s-font-name:"Google Symbols";--gem-sys-typography-icon-scale--icon-s-font-size:1rem;--gem-sys-typography-icon-scale--icon-s-font-tracking:0;--gem-sys-typography-icon-scale--icon-s-font-weight:500;--gem-sys-typography-icon-scale--icon-s-line-height:1rem;--gem-sys-typography-icon-scale--icon-s-shape:"ROND" 100;--gem-sys-typography-icon-scale--icon-xl-font-name:"Google Symbols";--gem-sys-typography-icon-scale--icon-xl-font-size:1.5rem;--gem-sys-typography-icon-scale--icon-xl-font-tracking:0;--gem-sys-typography-icon-scale--icon-xl-font-weight:400;--gem-sys-typography-icon-scale--icon-xl-line-height:1.5rem;--gem-sys-typography-icon-scale--icon-xl-shape:"ROND" 100;--gem-sys-typography-type-scale--body-l-dense-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--body-l-dense-font-size:1rem;--gem-sys-typography-type-scale--body-l-dense-font-tracking:0rem;--gem-sys-typography-type-scale--body-l-dense-font-weight:400;--gem-sys-typography-type-scale--body-l-dense-line-height:24px;--gem-sys-typography-type-scale--body-l-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--body-l-font-size:1rem;--gem-sys-typography-type-scale--body-l-font-tracking:0rem;--gem-sys-typography-type-scale--body-l-font-weight:400;--gem-sys-typography-type-scale--body-l-line-height:1.75rem;--gem-sys-typography-type-scale--body-m-alt-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--body-m-alt-font-weight:700;--gem-sys-typography-type-scale--body-m-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--body-m-font-size:0.875rem;--gem-sys-typography-type-scale--body-m-font-tracking:0rem;--gem-sys-typography-type-scale--body-m-font-weight:400;--gem-sys-typography-type-scale--body-m-line-height:1.25rem;--gem-sys-typography-type-scale--display-l-font-name:"Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--display-l-font-size:3.5625rem;--gem-sys-typography-type-scale--display-l-font-tracking:-0.03125rem;--gem-sys-typography-type-scale--display-l-font-weight:500;--gem-sys-typography-type-scale--display-l-line-height:4rem;--gem-sys-typography-type-scale--display-m-font-name:"Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--display-m-font-size:2.8125rem;--gem-sys-typography-type-scale--display-m-font-tracking:-0.03125rem;--gem-sys-typography-type-scale--display-m-font-weight:500;--gem-sys-typography-type-scale--display-m-line-height:3.25rem;--gem-sys-typography-type-scale--display-s-font-name:"Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--display-s-font-size:2rem;--gem-sys-typography-type-scale--display-s-font-tracking:0rem;--gem-sys-typography-type-scale--display-s-font-weight:500;--gem-sys-typography-type-scale--display-s-line-height:2.25rem;--gem-sys-typography-type-scale--headline-m-font-name:"Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--headline-m-font-size:1.75rem;--gem-sys-typography-type-scale--headline-m-font-tracking:0rem;--gem-sys-typography-type-scale--headline-m-font-weight:400;--gem-sys-typography-type-scale--headline-m-line-height:2.25rem;--gem-sys-typography-type-scale--label-l-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--label-l-font-size:0.875rem;--gem-sys-typography-type-scale--label-l-font-tracking:0rem;--gem-sys-typography-type-scale--label-l-font-weight:500;--gem-sys-typography-type-scale--label-l-line-height:1.25rem;--gem-sys-typography-type-scale--label-m-alt-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--label-m-alt-font-size:0.75rem;--gem-sys-typography-type-scale--label-m-alt-font-tracking:0.00625rem;--gem-sys-typography-type-scale--label-m-alt-font-weight:400;--gem-sys-typography-type-scale--label-m-alt-line-height:1rem;--gem-sys-typography-type-scale--label-m-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--label-m-font-size:0.75rem;--gem-sys-typography-type-scale--label-m-font-tracking:0.00625rem;--gem-sys-typography-type-scale--label-m-font-weight:500;--gem-sys-typography-type-scale--label-m-line-height:1rem;--gem-sys-typography-type-scale--title-l-font-name:"Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--title-l-font-size:1.25rem;--gem-sys-typography-type-scale--title-l-font-tracking:0rem;--gem-sys-typography-type-scale--title-l-font-weight:500;--gem-sys-typography-type-scale--title-l-line-height:1.75rem;--gem-sys-typography-type-scale--title-m-alt-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--title-m-alt-font-weight:400;--gem-sys-typography-type-scale--title-m-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--title-m-font-size:1rem;--gem-sys-typography-type-scale--title-m-font-tracking:0rem;--gem-sys-typography-type-scale--title-m-font-weight:500;--gem-sys-typography-type-scale--title-m-line-height:1.5rem;--gem-sys-typography-type-scale--title-s-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--title-s-font-size:0.875rem;--gem-sys-typography-type-scale--title-s-font-tracking:0rem;--gem-sys-typography-type-scale--title-s-font-weight:500;--gem-sys-typography-type-scale--title-s-line-height:1.25rem;--gem-sys-typography-type-scale--body-m-alt-font-size:0.875rem;--gem-sys-typography-type-scale--body-m-alt-font-tracking:0rem;--gem-sys-typography-type-scale--body-m-alt-line-height:1.25rem;--gem-sys-typography-type-scale--title-m-alt-font-size:1rem;--gem-sys-typography-type-scale--title-m-alt-font-tracking:0rem;--gem-sys-typography-type-scale--title-m-alt-line-height:1.5rem}@media screen and (max-width:960px){:where(.theme-host){--gem-sys-typography-type-scale--body-l-dense-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--body-l-dense-font-size:1rem;--gem-sys-typography-type-scale--body-l-dense-font-tracking:0rem;--gem-sys-typography-type-scale--body-l-dense-font-weight:400;--gem-sys-typography-type-scale--body-l-dense-line-height:22px;--gem-sys-typography-type-scale--body-l-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--body-l-font-size:1rem;--gem-sys-typography-type-scale--body-l-font-tracking:0rem;--gem-sys-typography-type-scale--body-l-font-weight:400;--gem-sys-typography-type-scale--body-l-line-height:1.625rem;--gem-sys-typography-type-scale--body-m-alt-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--body-m-alt-font-weight:700;--gem-sys-typography-type-scale--body-m-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--body-m-font-size:0.875rem;--gem-sys-typography-type-scale--body-m-font-tracking:0rem;--gem-sys-typography-type-scale--body-m-font-weight:400;--gem-sys-typography-type-scale--body-m-line-height:1.25rem;--gem-sys-typography-type-scale--display-l-font-name:"Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--display-l-font-size:2.8125rem;--gem-sys-typography-type-scale--display-l-font-tracking:-0.03125rem;--gem-sys-typography-type-scale--display-l-font-weight:500;--gem-sys-typography-type-scale--display-l-line-height:3rem;--gem-sys-typography-type-scale--display-m-font-name:"Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--display-m-font-size:2.25rem;--gem-sys-typography-type-scale--display-m-font-tracking:-0.03125rem;--gem-sys-typography-type-scale--display-m-font-weight:500;--gem-sys-typography-type-scale--display-m-line-height:2.75rem;--gem-sys-typography-type-scale--display-s-font-name:"Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--display-s-font-size:2rem;--gem-sys-typography-type-scale--display-s-font-tracking:0rem;--gem-sys-typography-type-scale--display-s-font-weight:500;--gem-sys-typography-type-scale--display-s-line-height:2.5rem;--gem-sys-typography-type-scale--headline-m-font-name:"Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--headline-m-font-size:1.5rem;--gem-sys-typography-type-scale--headline-m-font-tracking:0rem;--gem-sys-typography-type-scale--headline-m-font-weight:400;--gem-sys-typography-type-scale--headline-m-line-height:1.75rem;--gem-sys-typography-type-scale--label-l-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--label-l-font-size:0.875rem;--gem-sys-typography-type-scale--label-l-font-tracking:0rem;--gem-sys-typography-type-scale--label-l-font-weight:500;--gem-sys-typography-type-scale--label-l-line-height:1.25rem;--gem-sys-typography-type-scale--label-m-alt-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--label-m-alt-font-size:0.75rem;--gem-sys-typography-type-scale--label-m-alt-font-tracking:0.00625rem;--gem-sys-typography-type-scale--label-m-alt-font-weight:400;--gem-sys-typography-type-scale--label-m-alt-line-height:1rem;--gem-sys-typography-type-scale--label-m-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--label-m-font-size:0.75rem;--gem-sys-typography-type-scale--label-m-font-tracking:0.00625rem;--gem-sys-typography-type-scale--label-m-font-weight:500;--gem-sys-typography-type-scale--label-m-line-height:1rem;--gem-sys-typography-type-scale--title-l-font-name:"Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--title-l-font-size:1.25rem;--gem-sys-typography-type-scale--title-l-font-tracking:0rem;--gem-sys-typography-type-scale--title-l-font-weight:500;--gem-sys-typography-type-scale--title-l-line-height:1.625rem;--gem-sys-typography-type-scale--title-m-alt-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--title-m-alt-font-weight:400;--gem-sys-typography-type-scale--title-m-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--title-m-font-size:1rem;--gem-sys-typography-type-scale--title-m-font-tracking:0rem;--gem-sys-typography-type-scale--title-m-font-weight:500;--gem-sys-typography-type-scale--title-m-line-height:1.5rem;--gem-sys-typography-type-scale--title-s-font-name:"Google Sans Text, Google Sans",Roboto,Arial,sans-serif;--gem-sys-typography-type-scale--title-s-font-size:0.875rem;--gem-sys-typography-type-scale--title-s-font-tracking:0rem;--gem-sys-typography-type-scale--title-s-font-weight:500;--gem-sys-typography-type-scale--title-s-line-height:1.25rem;--gem-sys-typography-type-scale--body-m-alt-font-size:0.875rem;--gem-sys-typography-type-scale--body-m-alt-font-tracking:0rem;--gem-sys-typography-type-scale--body-m-alt-line-height:1.25rem;--gem-sys-typography-type-scale--title-m-alt-font-size:1rem;--gem-sys-typography-type-scale--title-m-alt-font-tracking:0rem;--gem-sys-typography-type-scale--title-m-alt-line-height:1.5rem}}:where(.theme-host):where(.dark-theme){--gem-sys-color--error:#f2b8b5;--gem-sys-color--error--rgb:242,184,181;--gem-sys-color--gems-blue-high:#60a9ed;--gem-sys-color--gems-blue-high--rgb:96,169,237;--gem-sys-color--gems-blue-low:#003d64;--gem-sys-color--gems-blue-low--rgb:0,61,100;--gem-sys-color--gems-cyan-high:#25b2d4;--gem-sys-color--gems-cyan-high--rgb:37,178,212;--gem-sys-color--gems-cyan-low:#00404e;--gem-sys-color--gems-cyan-low--rgb:0,64,78;--gem-sys-color--gems-grey-high:#a4a4a4;--gem-sys-color--gems-grey-high--rgb:164,164,164;--gem-sys-color--gems-grey-low:#3a3a3a;--gem-sys-color--gems-grey-low--rgb:58,58,58;--gem-sys-color--gems-orange-high:#ec8c4c;--gem-sys-color--gems-orange-high--rgb:236,140,76;--gem-sys-color--gems-orange-low:#612b00;--gem-sys-color--gems-orange-low--rgb:97,43,0;--gem-sys-color--gems-pink-high:#db8da7;--gem-sys-color--gems-pink-high--rgb:219,141,167;--gem-sys-color--gems-pink-low:#60263d;--gem-sys-color--gems-pink-low--rgb:96,38,61;--gem-sys-color--gems-purple-high:#c88ee1;--gem-sys-color--gems-purple-high--rgb:200,142,225;--gem-sys-color--gems-purple-low:#55226e;--gem-sys-color--gems-purple-low--rgb:85,34,110;--gem-sys-color--gems-teal-high:#00b6bc;--gem-sys-color--gems-teal-high--rgb:0,182,188;--gem-sys-color--gems-teal-low:#004144;--gem-sys-color--gems-teal-low--rgb:0,65,68;--gem-sys-color--gems-violet-high:#a299f3;--gem-sys-color--gems-violet-high--rgb:162,153,243;--gem-sys-color--gems-violet-low:#372d80;--gem-sys-color--gems-violet-low--rgb:55,45,128;--gem-sys-color--gems-yellow-high:#d89800;--gem-sys-color--gems-yellow-high--rgb:216,152,0;--gem-sys-color--gems-yellow-low:#4f3500;--gem-sys-color--gems-yellow-low--rgb:79,53,0;--gem-sys-color--image-stop:#35383b;--gem-sys-color--image-stop--rgb:53,56,59;--gem-sys-color--inverse-on-surface:#303030;--gem-sys-color--inverse-on-surface--rgb:48,48,48;--gem-sys-color--inverse-primary:#0b57d0;--gem-sys-color--inverse-primary--rgb:11,87,208;--gem-sys-color--inverse-surface:#e3e3e3;--gem-sys-color--inverse-surface--rgb:227,227,227;--gem-sys-color--on-error:#601410;--gem-sys-color--on-error--rgb:96,20,16;--gem-sys-color--on-error-container:#f9dedc;--gem-sys-color--on-error-container--rgb:249,222,220;--gem-sys-color--on-primary:#062e6f;--gem-sys-color--on-primary--rgb:6,46,111;--gem-sys-color--on-primary-container:#d3e3fd;--gem-sys-color--on-primary-container--rgb:211,227,253;--gem-sys-color--on-primary-fixed:#041e49;--gem-sys-color--on-primary-fixed--rgb:4,30,73;--gem-sys-color--on-primary-fixed-variant:#0842a0;--gem-sys-color--on-primary-fixed-variant--rgb:8,66,160;--gem-sys-color--on-secondary:#035;--gem-sys-color--on-secondary--rgb:0,51,85;--gem-sys-color--on-secondary-container:#c2e7ff;--gem-sys-color--on-secondary-container--rgb:194,231,255;--gem-sys-color--on-secondary-fixed:#001d35;--gem-sys-color--on-secondary-fixed--rgb:0,29,53;--gem-sys-color--on-secondary-fixed-variant:#004a77;--gem-sys-color--on-secondary-fixed-variant--rgb:0,74,119;--gem-sys-color--on-surface:#fff;--gem-sys-color--on-surface--rgb:255,255,255;--gem-sys-color--on-surface-low:#9a9b9c;--gem-sys-color--on-surface-low--rgb:154,155,156;--gem-sys-color--on-surface-variant:#a2a9b0;--gem-sys-color--on-surface-variant--rgb:162,169,176;--gem-sys-color--on-tertiary:#0a3818;--gem-sys-color--on-tertiary--rgb:10,56,24;--gem-sys-color--on-tertiary-container:#c4eed0;--gem-sys-color--on-tertiary-container--rgb:196,238,208;--gem-sys-color--on-tertiary-fixed:#072711;--gem-sys-color--on-tertiary-fixed--rgb:7,39,17;--gem-sys-color--on-tertiary-fixed-variant:#0f5223;--gem-sys-color--on-tertiary-fixed-variant--rgb:15,82,35;--gem-sys-color--outline:#9a9b9c;--gem-sys-color--outline--rgb:154,155,156;--gem-sys-color--outline-gradient-stop-1:#b7a9e5;--gem-sys-color--outline-gradient-stop-1--rgb:183,169,229;--gem-sys-color--outline-solid-1:#9f8edc;--gem-sys-color--outline-solid-1--rgb:159,142,220;--gem-sys-color--outline-variant:#4a5050;--gem-sys-color--outline-variant--rgb:74,80,80;--gem-sys-color--primary:#a8c7fa;--gem-sys-color--primary--rgb:168,199,250;--gem-sys-color--primary-container:#1f3760;--gem-sys-color--primary-container--rgb:31,55,96;--gem-sys-color--primary-fixed:#d3e3fd;--gem-sys-color--primary-fixed--rgb:211,227,253;--gem-sys-color--primary-fixed-dim:#a8c7fa;--gem-sys-color--primary-fixed-dim--rgb:168,199,250;--gem-sys-color--scrim:#000;--gem-sys-color--scrim--rgb:0,0,0;--gem-sys-color--secondary:#7fcfff;--gem-sys-color--secondary--rgb:127,207,255;--gem-sys-color--secondary-container:#004a77;--gem-sys-color--secondary-container--rgb:0,74,119;--gem-sys-color--secondary-fixed:#c2e7ff;--gem-sys-color--secondary-fixed--rgb:194,231,255;--gem-sys-color--secondary-fixed-dim:#7fcfff;--gem-sys-color--secondary-fixed-dim--rgb:127,207,255;--gem-sys-color--shadow:#000;--gem-sys-color--shadow--rgb:0,0,0;--gem-sys-color--surface:#1b1c1d;--gem-sys-color--surface--rgb:27,28,29;--gem-sys-color--surface-bright:#424548;--gem-sys-color--surface-bright--rgb:66,69,72;--gem-sys-color--surface-container:#282a2c;--gem-sys-color--surface-container--rgb:40,42,44;--gem-sys-color--surface-container-high:#333537;--gem-sys-color--surface-container-high--rgb:51,53,55;--gem-sys-color--surface-container-highest:#3d3f42;--gem-sys-color--surface-container-highest--rgb:61,63,66;--gem-sys-color--surface-container-low:#262627;--gem-sys-color--surface-container-low--rgb:38,38,39;--gem-sys-color--surface-container-lowest:#1b1c1d;--gem-sys-color--surface-container-lowest--rgb:27,28,29;--gem-sys-color--surface-dim:#131314;--gem-sys-color--surface-dim--rgb:19,19,20;--gem-sys-color--tertiary:#6dd58c;--gem-sys-color--tertiary--rgb:109,213,140;--gem-sys-color--tertiary-container:#0f5223;--gem-sys-color--tertiary-container--rgb:15,82,35;--gem-sys-color--tertiary-fixed:#c4eed0;--gem-sys-color--tertiary-fixed--rgb:196,238,208;--gem-sys-color--tertiary-fixed-dim:#6dd58c;--gem-sys-color--tertiary-fixed-dim--rgb:109,213,140;--gem-sys-color--blue-high:#e7f2ff;--gem-sys-color--blue-high--rgb:231,242,255;--gem-sys-color--blue-low:#04409f;--gem-sys-color--blue-low--rgb:4,64,159;--gem-sys-color--blue-medium:#76acff;--gem-sys-color--blue-medium--rgb:118,172,255;--gem-sys-color--blue-primary:#4e8ff8;--gem-sys-color--blue-primary--rgb:78,143,248;--gem-sys-color--error-container:#601410;--gem-sys-color--error-container--rgb:96,20,16;--gem-sys-color--green-high:#ddf8d8;--gem-sys-color--green-high--rgb:221,248,216;--gem-sys-color--green-low:#00522c;--gem-sys-color--green-low--rgb:0,82,44;--gem-sys-color--green-medium:#44c265;--gem-sys-color--green-medium--rgb:68,194,101;--gem-sys-color--green-primary:#1aa64a;--gem-sys-color--green-primary--rgb:26,166,74;--gem-sys-color--mic-gradient-stop-1:#ffaee4;--gem-sys-color--mic-gradient-stop-1--rgb:255,174,228;--gem-sys-color--mic-gradient-stop-2:#ad72ff;--gem-sys-color--mic-gradient-stop-2--rgb:173,114,255;--gem-sys-color--mic-gradient-stop-3:#c597ff;--gem-sys-color--mic-gradient-stop-3--rgb:197,151,255;--gem-sys-color--orange-high:#ffede1;--gem-sys-color--orange-high--rgb:255,237,225;--gem-sys-color--orange-low:#753403;--gem-sys-color--orange-low--rgb:117,52,3;--gem-sys-color--orange-medium:#ff8d41;--gem-sys-color--orange-medium--rgb:255,141,65;--gem-sys-color--orange-primary:#e86e00;--gem-sys-color--orange-primary--rgb:232,110,0;--gem-sys-color--outline-gradient-stop-2:#fdf8ff;--gem-sys-color--outline-gradient-stop-2--rgb:253,248,255;--gem-sys-color--outline-gradient-stop-3:#4c8df6;--gem-sys-color--outline-gradient-stop-3--rgb:76,141,246;--gem-sys-color--outline-solid-2:#0b57d0;--gem-sys-color--outline-solid-2--rgb:11,87,208;--gem-sys-color--outline-solid-3:#fff;--gem-sys-color--outline-solid-3--rgb:255,255,255;--gem-sys-color--purple-high:#f7ecfe;--gem-sys-color--purple-high--rgb:247,236,254;--gem-sys-color--purple-low:#5629a4;--gem-sys-color--purple-low--rgb:86,41,164;--gem-sys-color--purple-medium:#c597ff;--gem-sys-color--purple-medium--rgb:197,151,255;--gem-sys-color--purple-primary:#ad72ff;--gem-sys-color--purple-primary--rgb:173,114,255;--gem-sys-color--red-high:#ffecee;--gem-sys-color--red-high--rgb:255,236,238;--gem-sys-color--red-low:#8a1a16;--gem-sys-color--red-low--rgb:138,26,22;--gem-sys-color--red-medium:#ff8983;--gem-sys-color--red-medium--rgb:255,137,131;--gem-sys-color--red-primary:#f55e57;--gem-sys-color--red-primary--rgb:245,94,87;--gem-sys-color--soft-glow-blue-1:#4c8df6;--gem-sys-color--soft-glow-blue-1--rgb:76,141,246;--gem-sys-color--soft-glow-blue-2:#3271ea;--gem-sys-color--soft-glow-blue-2--rgb:50,113,234;--gem-sys-color--soft-glow-pink-1:#ff7dd2;--gem-sys-color--soft-glow-pink-1--rgb:255,125,210;--gem-sys-color--soft-glow-pink-2:#b60d6e;--gem-sys-color--soft-glow-pink-2--rgb:182,13,110;--gem-sys-color--surface-variant:#474747;--gem-sys-color--surface-variant--rgb:71,71,71;--gem-sys-color--text-advanced-stop-high:#f55e57;--gem-sys-color--text-advanced-stop-high--rgb:245,94,87;--gem-sys-color--text-advanced-stop-low:#620438;--gem-sys-color--text-advanced-stop-low--rgb:98,4,56;--gem-sys-color--text-basic-stop-high:#3271ea;--gem-sys-color--text-basic-stop-high--rgb:50,113,234;--gem-sys-color--text-basic-stop-low:#303030;--gem-sys-color--text-basic-stop-low--rgb:48,48,48;--gem-sys-color--universal-stop:#5e5e5e;--gem-sys-color--universal-stop--rgb:94,94,94}.mat-mdc-snack-bar-container{padding:16px}.mat-mdc-snack-bar-container.multi-line-snack-bar .mat-mdc-snack-bar-label{white-space:pre-line}.boqOnegoogleliteOgbOneGoogleBar{--og-bar-parts-side-padding:0px;display:flex;justify-content:flex-end;margin-top:12px;margin-bottom:12px;-webkit-margin-end:12px;margin-inline-end:12px}@media screen and (min-width:960px){.boqOnegoogleliteOgbOneGoogleBar{position:fixed;left:0;z-index:2}}chat-app{z-index:1}html{height:100%;width:100%;overflow:hidden}body{color:var(--gem-sys-color--on-surface);background-color:var(--gem-sys-color--surface);margin:0;height:100%;width:100%;display:flex;flex-direction:column;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}sentinel{}</style><style nonce="">@font-face{font-family:'Product Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/productsans/v9/pxiDypQkot1TnFhsFMOfGShVGdeOcEg.woff2)format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;}@font-face{font-family:'Product Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/productsans/v9/pxiDypQkot1TnFhsFMOfGShVF9eO.woff2)format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCajshE7g.woff2)format('woff2');unicode-range:U+0308,U+0530-058F,U+2010,U+2024,U+25CC,U+FB13-FB17;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCYjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0980-09FE,U+1CD0,U+1CD2,U+1CD5-1CD6,U+1CD8,U+1CE1,U+1CEA,U+1CED,U+1CF2,U+1CF5-1CF7,U+200C-200D,U+20B9,U+25CC,U+A8F1;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCHjshE7g.woff2)format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCOjshE7g.woff2)format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCLjshE7g.woff2)format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCbjshE7g.woff2)format('woff2');unicode-range:U+030E,U+1200-1399,U+2D80-2DDE,U+AB01-AB2E,U+1E7E0-1E7E6,U+1E7E8-1E7EB,U+1E7ED-1E7EE,U+1E7F0-1E7FE;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCVjshE7g.woff2)format('woff2');unicode-range:U+0589,U+10A0-10FF,U+1C90-1CBA,U+1CBD-1CBF,U+205A,U+2D00-2D2F,U+2E31;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCJjshE7g.woff2)format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCRjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A80-0AFF,U+200C-200D,U+20B9,U+25CC,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCpjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A01-0A76,U+200C-200D,U+20B9,U+25CC,U+262C,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCIjshE7g.woff2)format('woff2');unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCBjshE7g.woff2)format('woff2');unicode-range:U+1780-17FF,U+19E0-19FF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCDjshE7g.woff2)format('woff2');unicode-range:U+0E81-0EDF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCTjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0B01-0B77,U+1CDA,U+1CF2,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCXjshE7g.woff2)format('woff2');unicode-range:U+0964-0965,U+0D81-0DF4,U+1CF2,U+200C-200D,U+25CC,U+111E1-111F4;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCcjshE7g.woff2)format('woff2');unicode-range:U+0964-0965,U+0B82-0BFA,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCWjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0C00-0C7F,U+1CDA,U+1CF2,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCejshE7g.woff2)format('woff2');unicode-range:U+02D7,U+0303,U+0331,U+0E01-0E5B,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCFjshE7g.woff2)format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCEjshE7g.woff2)format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCKjsg.woff2)format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCajshE7g.woff2)format('woff2');unicode-range:U+0308,U+0530-058F,U+2010,U+2024,U+25CC,U+FB13-FB17;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCYjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0980-09FE,U+1CD0,U+1CD2,U+1CD5-1CD6,U+1CD8,U+1CE1,U+1CEA,U+1CED,U+1CF2,U+1CF5-1CF7,U+200C-200D,U+20B9,U+25CC,U+A8F1;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCHjshE7g.woff2)format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCOjshE7g.woff2)format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCLjshE7g.woff2)format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCbjshE7g.woff2)format('woff2');unicode-range:U+030E,U+1200-1399,U+2D80-2DDE,U+AB01-AB2E,U+1E7E0-1E7E6,U+1E7E8-1E7EB,U+1E7ED-1E7EE,U+1E7F0-1E7FE;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCVjshE7g.woff2)format('woff2');unicode-range:U+0589,U+10A0-10FF,U+1C90-1CBA,U+1CBD-1CBF,U+205A,U+2D00-2D2F,U+2E31;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCJjshE7g.woff2)format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCRjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A80-0AFF,U+200C-200D,U+20B9,U+25CC,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCpjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A01-0A76,U+200C-200D,U+20B9,U+25CC,U+262C,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCIjshE7g.woff2)format('woff2');unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCBjshE7g.woff2)format('woff2');unicode-range:U+1780-17FF,U+19E0-19FF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCDjshE7g.woff2)format('woff2');unicode-range:U+0E81-0EDF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCTjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0B01-0B77,U+1CDA,U+1CF2,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCXjshE7g.woff2)format('woff2');unicode-range:U+0964-0965,U+0D81-0DF4,U+1CF2,U+200C-200D,U+25CC,U+111E1-111F4;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCcjshE7g.woff2)format('woff2');unicode-range:U+0964-0965,U+0B82-0BFA,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCWjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0C00-0C7F,U+1CDA,U+1CF2,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCejshE7g.woff2)format('woff2');unicode-range:U+02D7,U+0303,U+0331,U+0E01-0E5B,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCFjshE7g.woff2)format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCEjshE7g.woff2)format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCKjsg.woff2)format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCajshE7g.woff2)format('woff2');unicode-range:U+0308,U+0530-058F,U+2010,U+2024,U+25CC,U+FB13-FB17;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCYjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0980-09FE,U+1CD0,U+1CD2,U+1CD5-1CD6,U+1CD8,U+1CE1,U+1CEA,U+1CED,U+1CF2,U+1CF5-1CF7,U+200C-200D,U+20B9,U+25CC,U+A8F1;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCHjshE7g.woff2)format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCOjshE7g.woff2)format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCLjshE7g.woff2)format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCbjshE7g.woff2)format('woff2');unicode-range:U+030E,U+1200-1399,U+2D80-2DDE,U+AB01-AB2E,U+1E7E0-1E7E6,U+1E7E8-1E7EB,U+1E7ED-1E7EE,U+1E7F0-1E7FE;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCVjshE7g.woff2)format('woff2');unicode-range:U+0589,U+10A0-10FF,U+1C90-1CBA,U+1CBD-1CBF,U+205A,U+2D00-2D2F,U+2E31;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCJjshE7g.woff2)format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCRjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A80-0AFF,U+200C-200D,U+20B9,U+25CC,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCpjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A01-0A76,U+200C-200D,U+20B9,U+25CC,U+262C,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCIjshE7g.woff2)format('woff2');unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCBjshE7g.woff2)format('woff2');unicode-range:U+1780-17FF,U+19E0-19FF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCDjshE7g.woff2)format('woff2');unicode-range:U+0E81-0EDF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCTjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0B01-0B77,U+1CDA,U+1CF2,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCXjshE7g.woff2)format('woff2');unicode-range:U+0964-0965,U+0D81-0DF4,U+1CF2,U+200C-200D,U+25CC,U+111E1-111F4;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCcjshE7g.woff2)format('woff2');unicode-range:U+0964-0965,U+0B82-0BFA,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCWjshE7g.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0C00-0C7F,U+1CDA,U+1CF2,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCejshE7g.woff2)format('woff2');unicode-range:U+02D7,U+0303,U+0331,U+0E01-0E5B,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCFjshE7g.woff2)format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCEjshE7g.woff2)format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;}@font-face{font-family:'Google Sans';font-style:italic;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaXrENHsxJlGDuGo1OIlL3L2JB874GPhFI9_IqmuTCKjsg.woff2)format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2rgCIlsw.woff2)format('woff2');unicode-range:U+0308,U+0530-058F,U+2010,U+2024,U+25CC,U+FB13-FB17;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2rACIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0980-09FE,U+1CD0,U+1CD2,U+1CD5-1CD6,U+1CD8,U+1CE1,U+1CEA,U+1CED,U+1CF2,U+1CF5-1CF7,U+200C-200D,U+20B9,U+25CC,U+A8F1;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2swCIlsw.woff2)format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2ugCIlsw.woff2)format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vwCIlsw.woff2)format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2rwCIlsw.woff2)format('woff2');unicode-range:U+030E,U+1200-1399,U+2D80-2DDE,U+AB01-AB2E,U+1E7E0-1E7E6,U+1E7E8-1E7EB,U+1E7ED-1E7EE,U+1E7F0-1E7FE;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2oQCIlsw.woff2)format('woff2');unicode-range:U+0589,U+10A0-10FF,U+1C90-1CBA,U+1CBD-1CBF,U+205A,U+2D00-2D2F,U+2E31;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vQCIlsw.woff2)format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2pQCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A80-0AFF,U+200C-200D,U+20B9,U+25CC,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2nQCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A01-0A76,U+200C-200D,U+20B9,U+25CC,U+262C,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vACIlsw.woff2)format('woff2');unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2tQCIlsw.woff2)format('woff2');unicode-range:U+1780-17FF,U+19E0-19FF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2twCIlsw.woff2)format('woff2');unicode-range:U+0E81-0EDF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2pwCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0B01-0B77,U+1CDA,U+1CF2,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2owCIlsw.woff2)format('woff2');unicode-range:U+0964-0965,U+0D81-0DF4,U+1CF2,U+200C-200D,U+25CC,U+111E1-111F4;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2qACIlsw.woff2)format('woff2');unicode-range:U+0964-0965,U+0B82-0BFA,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2ogCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0C00-0C7F,U+1CDA,U+1CF2,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2qgCIlsw.woff2)format('woff2');unicode-range:U+02D7,U+0303,U+0331,U+0E01-0E5B,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2sQCIlsw.woff2)format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2sACIlsw.woff2)format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vgCI.woff2)format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2rgCIlsw.woff2)format('woff2');unicode-range:U+0308,U+0530-058F,U+2010,U+2024,U+25CC,U+FB13-FB17;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2rACIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0980-09FE,U+1CD0,U+1CD2,U+1CD5-1CD6,U+1CD8,U+1CE1,U+1CEA,U+1CED,U+1CF2,U+1CF5-1CF7,U+200C-200D,U+20B9,U+25CC,U+A8F1;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2swCIlsw.woff2)format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2ugCIlsw.woff2)format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vwCIlsw.woff2)format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2rwCIlsw.woff2)format('woff2');unicode-range:U+030E,U+1200-1399,U+2D80-2DDE,U+AB01-AB2E,U+1E7E0-1E7E6,U+1E7E8-1E7EB,U+1E7ED-1E7EE,U+1E7F0-1E7FE;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2oQCIlsw.woff2)format('woff2');unicode-range:U+0589,U+10A0-10FF,U+1C90-1CBA,U+1CBD-1CBF,U+205A,U+2D00-2D2F,U+2E31;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vQCIlsw.woff2)format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2pQCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A80-0AFF,U+200C-200D,U+20B9,U+25CC,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2nQCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A01-0A76,U+200C-200D,U+20B9,U+25CC,U+262C,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vACIlsw.woff2)format('woff2');unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2tQCIlsw.woff2)format('woff2');unicode-range:U+1780-17FF,U+19E0-19FF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2twCIlsw.woff2)format('woff2');unicode-range:U+0E81-0EDF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2pwCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0B01-0B77,U+1CDA,U+1CF2,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2owCIlsw.woff2)format('woff2');unicode-range:U+0964-0965,U+0D81-0DF4,U+1CF2,U+200C-200D,U+25CC,U+111E1-111F4;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2qACIlsw.woff2)format('woff2');unicode-range:U+0964-0965,U+0B82-0BFA,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2ogCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0C00-0C7F,U+1CDA,U+1CF2,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2qgCIlsw.woff2)format('woff2');unicode-range:U+02D7,U+0303,U+0331,U+0E01-0E5B,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2sQCIlsw.woff2)format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2sACIlsw.woff2)format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vgCI.woff2)format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2rgCIlsw.woff2)format('woff2');unicode-range:U+0308,U+0530-058F,U+2010,U+2024,U+25CC,U+FB13-FB17;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2rACIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0980-09FE,U+1CD0,U+1CD2,U+1CD5-1CD6,U+1CD8,U+1CE1,U+1CEA,U+1CED,U+1CF2,U+1CF5-1CF7,U+200C-200D,U+20B9,U+25CC,U+A8F1;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2swCIlsw.woff2)format('woff2');unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2ugCIlsw.woff2)format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vwCIlsw.woff2)format('woff2');unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2rwCIlsw.woff2)format('woff2');unicode-range:U+030E,U+1200-1399,U+2D80-2DDE,U+AB01-AB2E,U+1E7E0-1E7E6,U+1E7E8-1E7EB,U+1E7ED-1E7EE,U+1E7F0-1E7FE;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2oQCIlsw.woff2)format('woff2');unicode-range:U+0589,U+10A0-10FF,U+1C90-1CBA,U+1CBD-1CBF,U+205A,U+2D00-2D2F,U+2E31;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vQCIlsw.woff2)format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2pQCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A80-0AFF,U+200C-200D,U+20B9,U+25CC,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2nQCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0A01-0A76,U+200C-200D,U+20B9,U+25CC,U+262C,U+A830-A839;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vACIlsw.woff2)format('woff2');unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2tQCIlsw.woff2)format('woff2');unicode-range:U+1780-17FF,U+19E0-19FF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2twCIlsw.woff2)format('woff2');unicode-range:U+0E81-0EDF,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2pwCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0B01-0B77,U+1CDA,U+1CF2,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2owCIlsw.woff2)format('woff2');unicode-range:U+0964-0965,U+0D81-0DF4,U+1CF2,U+200C-200D,U+25CC,U+111E1-111F4;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2qACIlsw.woff2)format('woff2');unicode-range:U+0964-0965,U+0B82-0BFA,U+200C-200D,U+20B9,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2ogCIlsw.woff2)format('woff2');unicode-range:U+0951-0952,U+0964-0965,U+0C00-0C7F,U+1CDA,U+1CF2,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2qgCIlsw.woff2)format('woff2');unicode-range:U+02D7,U+0303,U+0331,U+0E01-0E5B,U+200C-200D,U+25CC;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2sQCIlsw.woff2)format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2sACIlsw.woff2)format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;}@font-face{font-family:'Google Sans';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/googlesans/v58/4UaRrENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iq2vgCI.woff2)format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}@font-face{font-family:'Google Sans Mono';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/googlesansmono/v15/P5sZzYWFYtnZ_Cg-t0Uq_rfivrdYNYhsAg.woff2)format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}@font-face{font-family:'Google Sans Mono';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/googlesansmono/v15/P5sZzYWFYtnZ_Cg-t0Uq_rfivrdYNYhsAg.woff2)format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}@font-face{font-family:'Google Sans Code';font-style:normal;font-weight:400 700;src:url(https://fonts.gstatic.com/s/googlesanscode/v4/pxifyogzv91QhV44Z_GQBHsGf5PuWCxkr1ap.woff2)format('woff2');unicode-range:U+061F,U+0640,U+2015,U+201B,U+2020-2021,U+2030,U+204F,U+25CC,U+2E28-2E29,U+2E41,U+1E900-1E95F;}@font-face{font-family:'Google Sans Code';font-style:normal;font-weight:400 700;src:url(https://fonts.gstatic.com/s/googlesanscode/v4/pxifyogzv91QhV44Z_GQBHsGf5PuWGFkr1ap.woff2)format('woff2');unicode-range:U+02C7,U+02D8-02D9,U+02DB,U+0307,U+1400-167F,U+18B0-18F5,U+25CC,U+11AB0-11ABF;}@font-face{font-family:'Google Sans Code';font-style:normal;font-weight:400 700;src:url(https://fonts.gstatic.com/s/googlesanscode/v4/pxifyogzv91QhV44Z_GQBHsGf5PuWF1kr1ap.woff2)format('woff2');unicode-range:U+0300-0302,U+0304,U+030B-030C,U+0323-0324,U+0330-0331,U+13A0-13FF,U+AB70-ABBF;}@font-face{font-family:'Google Sans Code';font-style:normal;font-weight:400 700;src:url(https://fonts.gstatic.com/s/googlesanscode/v4/pxifyogzv91QhV44Z_GQBHsGf5PuWDJkr1ap.woff2)format('woff2');unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF;}@font-face{font-family:'Google Sans Code';font-style:normal;font-weight:400 700;src:url(https://fonts.gstatic.com/s/googlesanscode/v4/pxifyogzv91QhV44Z_GQBHsGf5PuWCJkr1ap.woff2)format('woff2');unicode-range:U+0300,U+0306-0308,U+0313,U+0483,U+20DB,U+25CC,U+10350-1037A;}@font-face{font-family:'Google Sans Code';font-style:normal;font-weight:400 700;src:url(https://fonts.gstatic.com/s/googlesanscode/v4/pxifyogzv91QhV44Z_GQBHsGf5PuWCBkr1ap.woff2)format('woff2');unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF;}@font-face{font-family:'Google Sans Code';font-style:normal;font-weight:400 700;src:url(https://fonts.gstatic.com/s/googlesanscode/v4/pxifyogzv91QhV44Z_GQBHsGf5PuWPRFimuQpw.woff2)format('woff2');unicode-range:U+2000-2001,U+2004-2008,U+200A,U+23B8-23BD,U+2500-259F;}@font-face{font-family:'Google Sans Code';font-style:normal;font-weight:400 700;src:url(https://fonts.gstatic.com/s/googlesanscode/v4/pxifyogzv91QhV44Z_GQBHsGf5PuWD1kr1ap.woff2)format('woff2');unicode-range:U+0303-0304,U+0307-0308,U+030A,U+0320,U+0323-0325,U+032D-032E,U+0330-0331,U+060C,U+061B-061C,U+061F,U+0621,U+0640,U+064B-0655,U+0660-066C,U+0670,U+0700-074F,U+0860-086A,U+1DF8,U+1DFA,U+200C-200F,U+25CC,U+2670-2671;}@font-face{font-family:'Google Sans Code';font-style:normal;font-weight:400 700;src:url(https://fonts.gstatic.com/s/googlesanscode/v4/pxifyogzv91QhV44Z_GQBHsGf5PuWEBkr1ap.woff2)format('woff2');unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF;}@font-face{font-family:'Google Sans Code';font-style:normal;font-weight:400 700;src:url(https://fonts.gstatic.com/s/googlesanscode/v4/pxifyogzv91QhV44Z_GQBHsGf5PuWE5krw.woff2)format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}</style><style nonce="">.gb_2d{font:13px/27px Roboto,Arial,sans-serif;z-index:986}.gb_Q{display:none}.gb_Fa,.gb_Jd{font-family:"Google Sans Text",Roboto,Helvetica,Arial,sans-serif;font-style:normal}a.gb_Ua{-webkit-border-radius:100px;border-radius:100px;background:#0b57d0;background:var(--gm3-sys-color-primary,#0b57d0);-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;color:var(--gm3-sys-color-on-primary,#fff);display:inline-block;font-size:14px;font-weight:500;min-height:40px;outline:none;padding:10px 24px;text-align:center;text-decoration:none;white-space:normal;line-height:18px;position:relative}a.gb_Va{-webkit-border-radius:100px;border-radius:100px;border:1px solid;border-color:#747775;border-color:var(--gm3-sys-color-outline,#747775);background:none;-webkit-box-sizing:border-box;box-sizing:border-box;color:#0b57d0;color:var(--gm3-sys-color-primary,#0b57d0);display:inline-block;font-size:14px;font-weight:500;min-height:40px;outline:none;padding:10px 24px;text-align:center;text-decoration:none;white-space:normal;line-height:18px;position:relative}.gb_0a.gb_H a.gb_Ua,.gb_1a.gb_H a.gb_Ua,.gb_2a.gb_H a.gb_Ua{background:#c2e7ff;background:var(--gm3-sys-color-secondary-fixed,#c2e7ff);color:#001d35;color:var(--gm3-sys-color-on-secondary-fixed,#001d35)}.gb_Fa.gb_H a.gb_Va{color:#a8c7fa;color:var(--gm3-sys-color-primary,#a8c7fa)}a.gb_qd{padding:10px 12px;margin:12px 10px 12px 16px;min-width:85px}@media (max-width:640px){a.gb_qd{min-width:75px}}.gb_Fa.gb_0a{color:#1f1f1f;color:var(--og-bar-color,var(--gm3-sys-color-on-surface,#1f1f1f))}.gb_Fa.gb_0a.gb_rd{background:#fff;background:var(--og-bar-background,var(--gm3-sys-color-background,#fff))}.gb_Fa.gb_0a .gb_9c.gb_ad,.gb_Fa.gb_0a a.gb_X,.gb_Fa.gb_0a span.gb_X{color:#1f1f1f;color:var(--og-link-color,var(--gm3-sys-color-on-surface,#1f1f1f))}.gb_Fa.gb_0a .gb_sd .gb_td,.gb_Fa.gb_0a .gb_2c .gb_td{color:#1f1f1f;color:var(--og-logo-color,var(--gm3-sys-color-on-surface,#1f1f1f))}.gb_Fa.gb_0a svg{color:#444746;color:var(--og-svg-color,var(--gm3-sys-color-on-surface-variant,#444746))}@media (forced-colors:active) and (prefers-color-scheme:dark){.gb_Fa svg,.gb_Fa.gb_0a svg,.gb_Fa.gb_H svg{color:white}}.gb_Fa.gb_H.gb_0a{color:#e3e3e3;color:var(--og-bar-color,var(--gm3-sys-color-on-surface,#e3e3e3))}.gb_Fa.gb_H.gb_0a.gb_rd{background:transparent}.gb_Fa.gb_H.gb_0a .gb_9c.gb_ad,.gb_Fa.gb_H.gb_0a a.gb_X,.gb_Fa.gb_H.gb_0a span.gb_X{color:#e3e3e3;color:var(--og-link-color,var(--gm3-sys-color-on-surface,#e3e3e3))}.gb_Fa.gb_H.gb_0a .gb_sd .gb_td,.gb_Fa.gb_H.gb_0a .gb_2c .gb_td{color:#e3e3e3;color:var(--og-logo-color,var(--gm3-sys-color-on-surface,#e3e3e3))}.gb_Fa.gb_H.gb_0a svg{color:#c4c7c5;color:var(--og-svg-color,var(--gm3-sys-color-on-surface-variant,#c4c7c5))}.gb_Fa.gb_H.gb_0a.gb_rd{background:#1f1f1f;background:var(--og-bar-background,var(--gm3-sys-color-background,#131314))}.gb_Fa.gb_1a{color:#1f1f1f;color:var(--og-bar-color,var(--gm3-sys-color-on-surface,#1f1f1f))}.gb_Fa.gb_1a.gb_rd{background:#e9eef6;background:var(--og-bar-background,var(--gm3-sys-color-surface-container-high,#e9eef6))}.gb_Fa.gb_1a .gb_9c.gb_ad,.gb_Fa.gb_1a a.gb_X,.gb_Fa.gb_1a span.gb_X{color:#1f1f1f;color:var(--og-link-color,var(--gm3-sys-color-on-surface,#1f1f1f))}.gb_Fa.gb_1a .gb_sd .gb_td,.gb_Fa.gb_1a .gb_2c .gb_td{color:#1f1f1f;color:var(--og-logo-color,var(--gm3-sys-color-on-surface,#1f1f1f))}.gb_Fa.gb_1a svg{color:#444746;color:var(--og-svg-color,var(--gm3-sys-color-on-surface-variant,#444746))}.gb_Fa.gb_H.gb_1a{color:#e3e3e3;color:var(--og-bar-color,var(--gm3-sys-color-on-surface,#e3e3e3))}.gb_Fa.gb_H.gb_1a.gb_rd{background:#282a2c;background:var(--og-bar-background,var(--gm3-sys-color-surface-container-high,#282a2c))}.gb_Fa.gb_H.gb_1a .gb_9c.gb_ad,.gb_Fa.gb_H.gb_1a a.gb_X,.gb_Fa.gb_H.gb_1a span.gb_X{color:#e3e3e3;color:var(--og-link-color,var(--gm3-sys-color-on-surface,#e3e3e3))}.gb_Fa.gb_H.gb_1a .gb_sd .gb_td,.gb_Fa.gb_H.gb_1a .gb_2c .gb_td{color:#e3e3e3;color:var(--og-logo-color,var(--gm3-sys-color-on-surface,#e3e3e3))}.gb_Fa.gb_H.gb_1a svg{color:#c4c7c5;color:var(--og-svg-color,var(--gm3-sys-color-on-surface-variant,#c4c7c5))}.gb_Fa.gb_2a{color:#1f1f1f;color:var(--og-bar-color,var(--gm3-sys-color-on-surface,#1f1f1f))}.gb_Fa.gb_2a.gb_rd{background:transparent}.gb_Fa.gb_2a .gb_9c.gb_ad,.gb_Fa.gb_2a a.gb_X,.gb_Fa.gb_2a span.gb_X{color:#1f1f1f;color:var(--og-link-color,var(--gm3-sys-color-on-surface,#1f1f1f))}.gb_Fa.gb_2a .gb_sd .gb_td,.gb_Fa.gb_2a .gb_2c .gb_td{color:#1f1f1f;color:var(--og-logo-color,var(--gm3-sys-color-on-surface,#1f1f1f))}.gb_Fa.gb_2a svg{color:#444746;color:var(--og-svg-color,var(--gm3-sys-color-on-surface-variant,#444746))}.gb_Fa.gb_2a.gb_H.gb_rd{background:transparent}.gb_Fa.gb_2a.gb_H .gb_9c.gb_ad,.gb_Fa.gb_2a.gb_H a.gb_X,.gb_Fa.gb_2a.gb_H span.gb_X,.gb_Fa.gb_2a.gb_H .gb_sd .gb_td,.gb_Fa.gb_2a.gb_H .gb_2c .gb_td,.gb_Fa.gb_2a.gb_H svg{color:white;color:var(--og-theme-color,white)}.gb_Fa a.gb_X,.gb_Fa span.gb_X{text-decoration:none}.gb_9c{font-family:Google Sans,Roboto,Helvetica,Arial,sans-serif;font-size:20px;font-weight:400;letter-spacing:.25px;line-height:48px;margin-bottom:2px;opacity:1;overflow:hidden;padding-right:16px;position:relative;text-overflow:ellipsis;vertical-align:middle;top:2px;white-space:nowrap;-webkit-flex:1 1 auto;-webkit-box-flex:1;flex:1 1 auto}.gb_bd{display:none}.gb_Fa.gb_cc .gb_9c{margin-bottom:0}.gb_sd.gb_ud .gb_9c{padding-right:4px}.gb_Fa.gb_cc .gb_vd{position:relative;top:-2px}.gb_Fa{min-width:160px;position:relative}.gb_Fa.gb_Sc{min-width:120px}.gb_Fa.gb_wd .gb_xd{display:none}.gb_Fa.gb_wd .gb_ld{height:56px}header.gb_Fa{display:block}.gb_Fa svg{fill:currentColor}.gb_Dd{position:fixed;top:0;width:100%}.gb_yd{-webkit-box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2)}.gb_Ed{height:64px}.gb_ld{-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:space-between;-webkit-justify-content:space-between;justify-content:space-between;min-width:-webkit-min-content;min-width:min-content}.gb_Fa:not(.gb_cc) .gb_ld{padding:8px}.gb_Fa:not(.gb_cc) .gb_ld a.gb_zd{margin:12px 10px 12px 8px}.gb_Fa.gb_Fd .gb_ld{-webkit-flex:1 0 auto;-webkit-box-flex:1;flex:1 0 auto}.gb_Fa .gb_ld.gb_md.gb_Hd{min-width:0}.gb_Fa.gb_cc .gb_ld{padding:4px;padding-right:8px;min-width:0}.gb_Fa.gb_cc .gb_ld a.gb_zd{margin:12px 10px 12px 8px}.gb_xd{height:48px;vertical-align:middle;white-space:nowrap;-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-user-select:none}.gb_Ad>.gb_xd{display:table-cell;width:100%}.gb_sd{padding-left:25px;box-sizing:border-box;-webkit-flex:1 0 auto;-webkit-box-flex:1;flex:1 0 auto}.gb_Fa.gb_cc .gb_sd{padding-left:14px}.gb_Bd{-webkit-flex:1 1 100%;-webkit-box-flex:1;flex:1 1 100%}.gb_Bd>:only-child{display:inline-block}.gb_Cd.gb_3c{padding-right:4px}.gb_Cd.gb_Id,.gb_Fa.gb_Fd .gb_Cd,.gb_Fa.gb_cc:not(.gb_Jd) .gb_Cd{padding-right:0}.gb_Fa.gb_cc .gb_Cd.gb_Id{padding-left:0}.gb_Fa.gb_cc .gb_Cd.gb_Id .gb_Wa{margin-right:10px}.gb_3c{display:inline}.gb_Fa.gb_Wc .gb_Cd.gb_Kd,.gb_Fa.gb_Jd .gb_Cd.gb_Kd{padding-right:2px}.gb_9c{display:inline-block}.gb_Cd{-webkit-box-sizing:border-box;box-sizing:border-box;height:48px;padding:0 4px;padding-right:5px;-webkit-flex:0 0 auto;-webkit-box-flex:0;flex:0 0 auto;-webkit-box-pack:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}.gb_Jd{height:48px}.gb_Fa.gb_Jd{min-width:auto}.gb_Jd .gb_Cd{float:left;padding-right:32px;padding-right:var(--og-bar-parts-side-padding,32px)}.gb_Jd .gb_Cd.gb_Ld{padding-right:0}.gb_Md{font-size:14px;max-width:200px;overflow:hidden;padding:0 12px;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:text}.gb_Pc a{color:inherit}.gb_ad{text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;opacity:1}.gb_Qd{position:relative}.gb_M{font-family:arial,sans-serif;line-height:normal;padding-left:15px}.gb_Z{display:inline-block;padding-right:15px}.gb_Z .gb_X{display:inline-block;line-height:24px;vertical-align:middle}.gb_Rd{text-align:right}.gb_K{display:none}@media screen and (max-width:319px){.gb_ld .gb_J{display:none;visibility:hidden}}.gb_J .gb_B,.gb_J .gb_B:hover,.gb_J .gb_B:focus{opacity:1}.gb_L{display:none}.gb_R{display:none!important}.gb_nd{visibility:hidden}@media screen and (max-width:319px){.gb_ld:not(.gb_md) .gb_J{display:none;visibility:hidden}}.gb_cd{display:inline-block;vertical-align:middle}.gb_Ne .gb_Q{bottom:-3px;left:-5px;right:-5px}.gb_D{position:relative}.gb_B{display:inline-block;outline:none;vertical-align:middle;-webkit-border-radius:50%;border-radius:50%;-webkit-box-sizing:border-box;box-sizing:border-box;height:40px;width:40px;cursor:pointer;text-decoration:none}#gb#gb a.gb_B{cursor:pointer;text-decoration:none}.gb_B,a.gb_B{color:#000}x:-o-prefocus{border-bottom-color:#ccc}.gb_la{background:#fff;border:1px solid #ccc;border-color:rgba(0,0,0,.2);color:#000;-webkit-box-shadow:0 2px 10px rgba(0,0,0,.2);box-shadow:0 2px 10px rgba(0,0,0,.2);display:none;outline:none;overflow:hidden;position:absolute;left:0;top:54px;-webkit-animation:gb__a .2s;-webkit-animation:gb__a .2s;animation:gb__a .2s;-webkit-border-radius:2px;border-radius:2px;-webkit-user-select:text}.gb_cd.gb_Tc .gb_la,.gb_Tc.gb_la{display:block}.gb_Oe{position:absolute;left:0;top:54px;z-index:-1}.gb_gd .gb_la{margin-top:-10px}.gb_cd:first-child{padding-right:4px}.gb_Fa.gb_Pe .gb_cd:first-child{padding-right:0}.gb_Qe{position:relative}.gb_2c .gb_Qe,.gb_Jd .gb_Qe{float:left}.gb_B{padding:8px;cursor:pointer}.gb_id button svg,.gb_B{-webkit-border-radius:50%;border-radius:50%}.gb_cd{padding:4px}.gb_Fa.gb_Pe .gb_cd{padding:4px 2px}.gb_Fa.gb_Pe .gb_z.gb_cd{padding-right:6px}.gb_la{z-index:991;line-height:normal}.gb_la.gb_kd{right:0;left:auto}@media (max-width:350px){.gb_la.gb_kd{right:0}}.gb_Re .gb_la{top:56px}.gb_P{-webkit-background-size:32px 32px;background-size:32px 32px;border:0;-webkit-border-radius:50%;border-radius:50%;display:block;margin:0px;position:relative;height:32px;width:32px;z-index:0}.gb_eb{background-color:#e8f0fe;border:1px solid rgba(32,33,36,.08);position:relative}.gb_eb.gb_P{height:30px;width:30px}.gb_eb.gb_P:hover,.gb_eb.gb_P:active{-webkit-box-shadow:none;box-shadow:none}.gb_fb{background:#fff;border:none;-webkit-border-radius:50%;border-radius:50%;bottom:2px;-webkit-box-shadow:0px 1px 2px 0px rgba(60,64,67,.30),0px 1px 3px 1px rgba(60,64,67,.15);box-shadow:0px 1px 2px 0px rgba(60,64,67,.30),0px 1px 3px 1px rgba(60,64,67,.15);height:14px;margin:2px;position:absolute;left:0;width:14px}.gb_wc{color:#1f71e7;font:400 22px/32px Google Sans,Roboto,Helvetica,Arial,sans-serif;text-align:center;text-transform:uppercase}@media (-webkit-min-device-pixel-ratio:1.25),(min-resolution:1.25dppx),(min-device-pixel-ratio:1.25){.gb_P::before,.gb_gb::before{display:inline-block;-webkit-transform:scale(0.5);-webkit-transform:scale(0.5);transform:scale(0.5);-webkit-transform-origin:right 0;-webkit-transform-origin:right 0;transform-origin:right 0}.gb_3 .gb_gb::before{-webkit-transform:scale(scale(0.416666667));-webkit-transform:scale(scale(0.416666667));transform:scale(scale(0.416666667))}}.gb_P:hover,.gb_P:focus{-webkit-box-shadow:0 1px 0 rgba(0,0,0,.15);box-shadow:0 1px 0 rgba(0,0,0,.15)}.gb_P:active{-webkit-box-shadow:inset 0 2px 0 rgba(0,0,0,.15);box-shadow:inset 0 2px 0 rgba(0,0,0,.15)}.gb_P:active::after{background:rgba(0,0,0,.1);-webkit-border-radius:50%;border-radius:50%;content:"";display:block;height:100%}.gb_hb{cursor:pointer;line-height:40px;min-width:30px;opacity:.75;overflow:hidden;vertical-align:middle;text-overflow:ellipsis}.gb_B.gb_hb{width:auto}.gb_hb:hover,.gb_hb:focus{opacity:.85}.gb_gd .gb_hb,.gb_gd .gb_Ud{line-height:26px}#gb#gb.gb_gd a.gb_hb,.gb_gd .gb_Ud{font-size:11px;height:auto}.gb_ib{border-top:4px solid #000;border-right:4px dashed transparent;border-left:4px dashed transparent;display:inline-block;margin-right:6px;opacity:.75;vertical-align:middle}.gb_Za:hover .gb_ib{opacity:.85}.gb_Wa>.gb_z{padding:3px 4px 3px 3px}.gb_Vd.gb_nd{color:#fff}.gb_1 .gb_hb,.gb_1 .gb_ib{opacity:1}#gb#gb.gb_1.gb_1 a.gb_hb,#gb#gb .gb_1.gb_1 a.gb_hb{color:#fff}.gb_1.gb_1 .gb_ib{border-top-color:#fff;opacity:1}.gb_ka .gb_P:hover,.gb_1 .gb_P:hover,.gb_ka .gb_P:focus,.gb_1 .gb_P:focus{-webkit-box-shadow:0 1px 0 rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.2);box-shadow:0 1px 0 rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.2)}.gb_Wd .gb_z,.gb_Xd .gb_z{position:absolute;left:1px}.gb_z.gb_0,.gb_jb.gb_0,.gb_Za.gb_0{-webkit-flex:0 1 auto;-webkit-box-flex:0;flex:0 1 auto}.gb_Zd.gb_0d .gb_hb{width:30px!important}.gb_1d{height:40px;position:absolute;left:-5px;top:-5px;width:40px}.gb_2d .gb_1d,.gb_3d .gb_1d{left:0;top:0}.gb_z .gb_B{padding:4px}.gb_S{display:none}.gb_Za:not(.gb_zd){position:relative}.gb_Za:not(.gb_zd)::after{content:"";border:1px solid #202124;opacity:.13;position:absolute;top:4px;right:4px;-webkit-border-radius:50%;border-radius:50%;width:30px;height:30px}.gb_Wa{-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;display:inline-block;height:48px;overflow:hidden;outline:none;padding:7px 16px 0 0;vertical-align:middle;width:142px;-webkit-border-radius:28px;border-radius:28px;background-color:transparent;border:1px solid;position:relative}.gb_Wa .gb_Za{width:32px;height:32px;padding:0}.gb_0a .gb_Wa,.gb_1a .gb_Wa{border-color:#747775;border-color:var(--gm3-sys-color-outline,#747775)}.gb_0a.gb_H .gb_Wa,.gb_1a.gb_H .gb_Wa{border-color:#8e918f;border-color:var(--gm3-sys-color-outline,#8e918f)}.gb_2a .gb_Wa{border-color:#747775;border-color:var(--gm3-sys-color-outline,#747775)}.gb_2a.gb_H .gb_Wa{border-color:#e3e3e3;border-color:var(--gm3-sys-color-on-surface,#e3e3e3)}.gb_3a{display:inherit}.gb_Wa .gb_3a{background:#fff;-webkit-border-radius:6px;border-radius:6px;display:inline-block;right:15px;position:initial;padding:2px;top:-1px;height:32px;-webkit-box-sizing:border-box;box-sizing:border-box;width:78px}.gb_4a{text-align:center}.gb_4a.gb_5a{background-color:#f1f3f4}.gb_4a .gb_Ic{vertical-align:middle;max-height:28px;max-width:74px}.gb_Fa .gb_Wa .gb_z.gb_cd{padding:0;margin-left:9px;float:left}.gb_Fa:not(.gb_cc) .gb_Wa{margin-right:10px;margin-left:4px}sentinel{}</style><script nonce="">;this.gbar_={CONFIG:[[[0,"www.gstatic.com","og.qtm.en_US.jqdIqvbJp8E.2019.O","hr","fa","658",0,[4,2,"","","","744546992","0"],null,"FLX2Z7-eEtGQi-gPjYbRQA",null,1,"og.qtm.DBx7P8GIpQE.R.W.O","AA2YrTvu-D12hsXQ9DlQYcUn7sGrAmUyZw","AA2YrTvAETFejAz0S0GxNoFB7gtTsU-nMg","",2,1,200,"HRV",null,null,"269","658",1,null,null,103135050,null,0],null,[1,0.1000000014901161,2,1],null,[1,0,0,null,"0","soheiladv@gmail.com","","AKeJmwsuYqAWLmGzpSOnPabxf7MvnIEXfLZWLDMQYhxf29wUr8543shc3Agx8YyK70b2BCTuojIPlxSN83xCvIOLrZbrm8OeRA",0,0,0,""],[0,0,"",1,0,0,0,0,0,0,null,0,0,null,0,0,null,null,0,0,0,"","","","","","",null,0,0,0,0,0,null,null,null,"rgba(32,33,36,1)","rgba(255,255,255,1)",0,0,1,null,null,null,1],["%1$s (پیش‌فرض)","حساب نمانام",1,"%1$s (واگذار شده)",1,null,83,"/app/184a9f472ac9ab94?authuser=$authuser",null,null,null,1,"https://accounts.google.com/ListAccounts?authuser=0\u0026listPages=1\u0026fwput=10\u0026rdr=2\u0026pid=658\u0026gpsia=1\u0026source=ogb\u0026atic=1\u0026mo=1\u0026mn=1\u0026hl=fa\u0026ts=641",0,"dashboard",null,null,null,null,"نمایه","",1,null,"از سیستم خارج شدید","https://accounts.google.com/AccountChooser?source=ogb\u0026continue=$continue\u0026Email=$email\u0026ec=GAhAkgU","https://accounts.google.com/RemoveLocalAccount?source=ogb","حذف","ورود به سیستم",0,1,1,0,1,1,0,null,null,null,"جلسه منقضی شد",null,null,null,"بازدیدکننده",null,"پیش‌فرض","واگذارشده","خروج از سیستم همه حساب‌ها",1,null,null,0,null,null,"myaccount.google.com","https",0,1,0],null,["1","gci_91f30755d6a6b787dcc2a4062e6e9824.js","googleapis.client:gapi.iframes","0","fa"],null,null,null,null,["m;/_/scs/abc-static/_/js/k=gapi.gapi.en.24R2mrw_td8.O/d=1/rs=AHpOoo9vR1rNwOjC3PXOxUlyKiCwNBv2Fg/m=__features__","https://apis.google.com","","","1","",null,1,"es_plusone_gc_20250304.0_p0","fa",null,0],[0.009999999776482582,"hr","658",[null,"","0",null,1,5184000,null,null,"",null,null,null,null,null,0,null,0,null,1,0,0,0,null,null,0,0,null,0,0,0,0,0],null,null,null,0],[1,null,null,40400,658,"HRV","fa","744546992.0",8,null,1,0,null,null,null,null,"102797341,102797343,102958781,102958783",null,null,null,"FLX2Z7-eEtGQi-gPjYbRQA",0,0,0,null,2,5,"eh",62,0,0,0,0,1,103135050,0,0],[[null,null,null,"https://www.gstatic.com/og/_/js/k=og.qtm.en_US.jqdIqvbJp8E.2019.O/rt=j/m=qabr,qgl,q_dnp,qcwid,qbd,qapid,qads,qrcd,q_dg/exm=qaaw,qadd,qaid,qein,qhaw,qhba,qhbr,qhch,qhga,qhid,qhin/d=1/ed=1/rs=AA2YrTvu-D12hsXQ9DlQYcUn7sGrAmUyZw"],[null,null,null,"https://www.gstatic.com/og/_/ss/k=og.qtm.DBx7P8GIpQE.R.W.O/m=qcwid,qba,d_b_gm3,d_wi_gm3,d_lo_gm3/excm=qaaw,qadd,qaid,qein,qhaw,qhba,qhbr,qhch,qhga,qhid,qhin/d=1/ed=1/ct=zgms/rs=AA2YrTvAETFejAz0S0GxNoFB7gtTsU-nMg"]],null,null,null,[[[null,null,[null,null,null,"https://ogs.google.com/u/0/widget/app?eom=1\u0026awwd=1\u0026gdafe=1"],0,470,370,57,4,1,0,1,63,64,8000,"https://www.google.hr/intl/fa/about/products",67,1,69,null,1,70,"در بارگیری مجموعه برنامه‌ها خطایی رخ داد. لطفاً چند دقیقه دیگر دوباره امتحان کنید یا به صفحه %1$sمحصولات Google%2$s بروید.",3,0,0,74,4000,null,null,null,null,null,null,null,"/widget/app",null,null,null,null,null,null,null,0,null,null,null,null,null,null,null,null,null,null,0,null,144,null,null,3,0,0,0,0],[null,null,[null,null,null,"https://ogs.google.com/u/0/widget/account?eom=1\u0026yac=1\u0026bac=1\u0026amb=1\u0026gdafe=1"],0,414,436,57,4,1,0,1,65,66,8000,"https://accounts.google.com/SignOutOptions?hl=fa\u0026continue=https://gemini.google.com/app/184a9f472ac9ab94\u0026ec=GBRAkgU",68,2,null,null,1,113,"مشکلی پیش آمد.%1$s برای امتحان مجدد، صفحه را بازآوری کنید یا %2$sحساب دیگری را انتخاب کنید%3$s.",3,null,null,75,0,null,null,null,null,null,null,null,"/widget/account",["https","myaccount.google.com",0,32,83,0],0,0,1,["هشدار امنیتی جدی","هشدار مهم درباره حساب","هشدار مصرف فضای ذخیره‌سازی",1,1],0,1,null,1,1,1,1,null,null,0,0,0,null,0,0],[null,null,[null,null,null,"https://ogs.google.com/u/0/widget/callout/sid?eom=1\u0026dc=1"],null,280,420,70,25,0,null,1,null,null,8000,null,71,4,null,null,null,null,null,null,null,null,76,null,null,null,107,108,109,"",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0]],null,null,"269","658",1,0,null,"fa",0,["/app/184a9f472ac9ab94?authuser=$authuser","https://accounts.google.com/AddSession?continue=https://gemini.google.com/app/184a9f472ac9ab94\u0026ec=GAlAkgU","https://accounts.google.com/Logout?ec=GAdAkgU","https://accounts.google.com/ListAccounts?authuser=0\u0026listPages=1\u0026fwput=10\u0026rdr=2\u0026pid=658\u0026gpsia=1\u0026source=ogb\u0026atic=1\u0026mo=1\u0026mn=1\u0026hl=fa\u0026ts=641",0,0,"",0,0,null,0,0,"https://accounts.google.com/ServiceLogin?passive=1209600\u0026continue=https://gemini.google.com/app/184a9f472ac9ab94\u0026followup=https://gemini.google.com/app/184a9f472ac9ab94\u0026ec=GAZAkgU",1,1,0,0,null,0],0,0,0,[null,"",null,null,null,1,null,0,0,"","","","https://ogads-pa.clients6.google.com",0,0,0,"","",0,0,null,86400,null,1,1,null,0,null,1,0,"8559284470"],0,null,null,null,1,0],null,[["mousedown","touchstart","touchmove","wheel","keydown"],300000],[[null,null,null,"https://accounts.google.com/RotateCookiesPage"],3,null,null,null,0,1]]],};this.gbar_=this.gbar_||{};(function(_){var window=this;
try{
_._F_toggles_initialize=function(a){(typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:this)._F_toggles=a||[]};(0,_._F_toggles_initialize)([]);
/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var ja,pa,qa,ua,wa,xa,Ha,Ia,cb,hb,db,ib,wb,xb,yb,zb;_.aa=function(a,b){if(Error.captureStackTrace)Error.captureStackTrace(this,_.aa);else{const c=Error().stack;c&&(this.stack=c)}a&&(this.message=String(a));b!==void 0&&(this.cause=b)};_.ba=function(a){a.Gj=!0;return a};_.ia=function(a){var b=a;if(ca(b)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(b))throw Error(String(b));}else if(da(b)&&!Number.isSafeInteger(b))throw Error(String(b));return fa?BigInt(a):a=ha(a)?a?"1":"0":ca(a)?a.trim()||"0":String(a)};
ja=function(a,b){if(a.length>b.length)return!1;if(a.length<b.length||a===b)return!0;for(let c=0;c<a.length;c++){const d=a[c],e=b[c];if(d>e)return!1;if(d<e)return!0}};_.ka=function(a){_.t.setTimeout(()=>{throw a;},0)};_.ma=function(){return _.la().toLowerCase().indexOf("webkit")!=-1};_.la=function(){var a=_.t.navigator;return a&&(a=a.userAgent)?a:""};pa=function(a){if(!na||!oa)return!1;for(let b=0;b<oa.brands.length;b++){const {brand:c}=oa.brands[b];if(c&&c.indexOf(a)!=-1)return!0}return!1};
_.u=function(a){return _.la().indexOf(a)!=-1};qa=function(){return na?!!oa&&oa.brands.length>0:!1};_.ra=function(){return qa()?!1:_.u("Opera")};_.sa=function(){return qa()?!1:_.u("Trident")||_.u("MSIE")};_.ta=function(){return _.u("Firefox")||_.u("FxiOS")};_.va=function(){return _.u("Safari")&&!(ua()||(qa()?0:_.u("Coast"))||_.ra()||(qa()?0:_.u("Edge"))||(qa()?pa("Microsoft Edge"):_.u("Edg/"))||(qa()?pa("Opera"):_.u("OPR"))||_.ta()||_.u("Silk")||_.u("Android"))};
ua=function(){return qa()?pa("Chromium"):(_.u("Chrome")||_.u("CriOS"))&&!(qa()?0:_.u("Edge"))||_.u("Silk")};wa=function(){return na?!!oa&&!!oa.platform:!1};xa=function(){return _.u("iPhone")&&!_.u("iPod")&&!_.u("iPad")};_.ya=function(){return xa()||_.u("iPad")||_.u("iPod")};_.za=function(){return wa()?oa.platform==="macOS":_.u("Macintosh")};_.Ba=function(a,b){return _.Aa(a,b)>=0};_.Ca=function(a,b=!1){return b&&Symbol.for&&a?Symbol.for(a):a!=null?Symbol(a):Symbol()};_.Da=function(a){a[_.v]&=-3};
_.Fa=function(a,b){return b===void 0?a.j!==Ea&&!!(2&(a.ha[_.v]|0)):!!(2&b)&&a.j!==Ea};_.Ga=function(a){return a!==null&&typeof a==="object"&&!Array.isArray(a)&&a.constructor===Object};Ha=function(a){return a};Ia=function(a,b){a.__closure__error__context__984382||(a.__closure__error__context__984382={});a.__closure__error__context__984382.severity=b};_.Ja=function(a){a=Error(a);Ia(a,"warning");return a};
_.La=function(a,b){if(a!=null){var c;var d=(c=Ka)!=null?c:Ka={};c=d[a]||0;c>=b||(d[a]=c+1,a=Error(),Ia(a,"incident"),_.ka(a))}};_.Na=function(a){if(typeof a!=="boolean")throw Error("s`"+_.Ma(a)+"`"+a);return a};_.Pa=function(a){if(!(0,_.Oa)(a))throw _.Ja("enum");return a|0};_.Qa=function(a){if(typeof a!=="number")throw _.Ja("int32");if(!(0,_.Oa)(a))throw _.Ja("int32");return a|0};_.Ra=function(a){if(a!=null&&typeof a!=="string")throw Error();return a};
_.Sa=function(a){return a==null||typeof a==="string"?a:void 0};_.Va=function(a,b,c){if(a!=null&&typeof a==="object"&&a[_.Ta]===_.Ua)return a;if(Array.isArray(a)){var d=a[_.v]|0,e=d;e===0&&(e|=c&32);e|=c&2;e!==d&&(a[_.v]=e);return new b(a)}};_.Ya=function(a){const b=_.Wa(_.Xa);return b?a[b]:void 0};
_.ab=function(a,b,c,d,e){const f=d?!!(b&32):void 0;d=[];var g=a.length;let h,k,l,m=!1;if(b&64){if(b&256?(g--,h=a[g],k=g):(k=4294967295,h=void 0),!(e||b&512)){m=!0;var p;l=((p=Za)!=null?p:Ha)(h?k- -1:b>>16&1023||536870912,-1,a,h);k=l+-1}}else k=4294967295,b&1||(h=g&&a[g-1],_.Ga(h)?(g--,k=g,l=0):h=void 0);p=void 0;for(let q=0;q<g;q++){let x=a[q];if(x!=null&&(x=c(x,f))!=null)if(q>=k){var r=void 0;((r=p)!=null?r:p={})[q- -1]=x}else d[q]=x}if(h)for(let q in h)if(r=h[q],r!=null&&(r=c(r,f))!=null)if(g=+q,
g<l)d[g+-1]=r;else{let x;((x=p)!=null?x:p={})[q]=r}p&&(m?d.push(p):d[k]=p);e&&(d[_.v]=b&67043905|(p!=null?290:34),_.Wa(_.Xa)&&(a=_.Ya(a))&&"function"==typeof _.$a&&a instanceof _.$a&&(d[_.Xa]=a.j()));return d};
cb=function(a){switch(typeof a){case "number":return Number.isFinite(a)?a:""+a;case "bigint":return(0,_.bb)(a)?Number(a):""+a;case "boolean":return a?1:0;case "object":if(Array.isArray(a)){const b=a[_.v]|0;return a.length===0&&b&1?void 0:_.ab(a,b,cb,!1,!1)}if(a[_.Ta]===_.Ua)return db(a);if("function"==typeof _.eb&&a instanceof _.eb)return a.j();return}return a};hb=function(a,b){if(b){Za=b==null||b===Ha||b[fb]!==gb?Ha:b;try{return db(a)}finally{Za=void 0}}return db(a)};
db=function(a){a=a.ha;return _.ab(a,a[_.v]|0,cb,void 0,!1)};
_.jb=function(a,b,c,d){if(a==null){var e=96;c?(a=[c],e|=512):a=[];b&&(e=e&-67043329|(b&1023)<<16)}else{if(!Array.isArray(a))throw Error("v");e=a[_.v]|0;8192&e||!(64&e)||2&e||ib();if(e&1024)throw Error("x");if(e&64)return d!==3||e&16384||(a[_.v]=e|16384),a;d===1||d===2||(e|=64);if(c&&(e|=512,c!==a[0]))throw Error("y");a:{c=a;var f=c.length;if(f){var g=f-1;const k=c[g];if(_.Ga(k)){e|=256;b=e&512?0:-1;g-=b;if(g>=1024)throw Error("A");for(var h in k)if(f=+h,f<g)c[f+b]=k[h],delete k[h];else break;e=e&
-67043329|(g&1023)<<16;break a}}if(b){h=Math.max(b,f-(e&512?0:-1));if(h>1024)throw Error("B");e=e&-67043329|(h&1023)<<16}}}d===3&&(e|=16384);a[_.v]=e;return a};ib=function(){_.La(kb,5)};
_.lb=function(a,b){if(typeof a!=="object")return a;if(Array.isArray(a)){const d=a[_.v]|0;if(a.length===0&&d&1)return;if(d&2)return a;var c;if(c=b)c=d===0||!!(d&32)&&!(d&64||!(d&16));return c?(a[_.v]|=34,d&4&&Object.freeze(a),a):_.ab(a,d,_.lb,b!==void 0,!0)}if(a[_.Ta]===_.Ua)return b=a.ha,c=b[_.v]|0,_.Fa(a,c)?a:_.ab(b,c,_.lb,!0,!0);if("function"==typeof _.eb&&a instanceof _.eb)return a};
_.mb=function(a){const b=a.ha,c=b[_.v]|0;if(!_.Fa(a,c))return a;a=new a.constructor(_.ab(b,c,_.lb,!0,!0));_.Da(a.ha);return a};_.nb=function(a){if(a.j!==Ea)return!1;let b=a.ha;b=_.ab(b,b[_.v]|0,_.lb,!0,!0);_.Da(b);a.ha=b;a.j=void 0;return!0};_.ob=function(a){if(!_.nb(a)&&_.Fa(a,a.ha[_.v]|0))throw Error();};
_.pb=function(a,b,c,d,e){const f=c+(e?0:-1);var g=a.length-1;let h;if(f>=g&&((h=b)!=null?h:b=a[_.v]|0)&256)return a[g][c]=d,b;if(f<=g)return a[f]=d,b;d!==void 0&&(g=b>>16&1023||536870912,c>=g?d!=null&&(a[g+(e?0:-1)]={[c]:d},b|=256,a[_.v]=b):a[f]=d);return b};_.rb=function(a,b,c,d,e){const f=_.qb(a,b,d,e);c=_.Va(f,c,b);c!==f&&c!=null&&_.pb(a,b,d,c,e);return c};_.sb=function(){const a=class{constructor(){throw Error();}};Object.setPrototypeOf(a,a.prototype);return a};
_.tb=function(a,b){return a!=null?!!a:!!b};_.w=function(a,b){b==void 0&&(b="");return a!=null?a:b};_.ub=function(a,b,c){for(const d in a)b.call(c,a[d],d,a)};_.vb=function(a){for(const b in a)return!1;return!0};wb=Object.defineProperty;xb=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("a");};yb=xb(this);
zb=function(a,b){if(b)a:{var c=yb;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&b!=null&&wb(c,a,{configurable:!0,writable:!0,value:b})}};zb("globalThis",function(a){return a||yb});zb("Symbol.dispose",function(a){return a?a:Symbol("b")});
zb("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(c){return Promise.resolve(b()).then(function(){return c})},function(c){return Promise.resolve(b()).then(function(){throw c;})})}});zb("Array.prototype.flat",function(a){return a?a:function(b){b=b===void 0?1:b;var c=[];Array.prototype.forEach.call(this,function(d){Array.isArray(d)&&b>0?(d=Array.prototype.flat.call(d,b-1),c.push.apply(c,d)):c.push(d)});return c}});var Bb,Fb;_.Ab=_.Ab||{};_.t=this||self;Bb=_.t._F_toggles||[];_.Cb=function(a,b){a=a.split(".");b=b||_.t;for(var c=0;c<a.length;c++)if(b=b[a[c]],b==null)return null;return b};_.Ma=function(a){var b=typeof a;return b!="object"?b:a?Array.isArray(a)?"array":b:"null"};_.Db=function(a){var b=typeof a;return b=="object"&&a!=null||b=="function"};_.Eb="closure_uid_"+(Math.random()*1E9>>>0);Fb=function(a,b,c){return a.call.apply(a.bind,arguments)};_.y=function(a,b,c){_.y=Fb;return _.y.apply(null,arguments)};
_.Gb=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}};_.z=function(a,b){a=a.split(".");for(var c=_.t,d;a.length&&(d=a.shift());)a.length||b===void 0?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};_.Wa=function(a){return a};
_.A=function(a,b){function c(){}c.prototype=b.prototype;a.X=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.yj=function(d,e,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[e].apply(d,g)}};_.A(_.aa,Error);_.aa.prototype.name="CustomError";var da=_.ba(a=>typeof a==="number"),ca=_.ba(a=>typeof a==="string"),ha=_.ba(a=>typeof a==="boolean");var fa=typeof _.t.BigInt==="function"&&typeof _.t.BigInt(0)==="bigint";var Jb,Hb,Kb,Ib;_.bb=_.ba(a=>fa?a>=Hb&&a<=Ib:a[0]==="-"?ja(a,Jb):ja(a,Kb));Jb=Number.MIN_SAFE_INTEGER.toString();Hb=fa?BigInt(Number.MIN_SAFE_INTEGER):void 0;Kb=Number.MAX_SAFE_INTEGER.toString();Ib=fa?BigInt(Number.MAX_SAFE_INTEGER):void 0;_.Lb=typeof TextDecoder!=="undefined";_.Mb=typeof TextEncoder!=="undefined";var Nb=!!(Bb[0]&2048);var Ob;if(Bb[0]&1024)Ob=Nb;else{var Pb=_.Cb("WIZ_global_data.oxN3nb"),Qb=Pb&&Pb[610401301];Ob=Qb!=null?Qb:!1}var na=Ob;var oa,Rb=_.t.navigator;oa=Rb?Rb.userAgentData||null:null;_.Aa=function(a,b){return Array.prototype.indexOf.call(a,b,void 0)};_.Sb=function(a,b,c){Array.prototype.forEach.call(a,b,c)};_.Tb=function(a,b){return Array.prototype.some.call(a,b,void 0)};_.Ub=function(a){_.Ub[" "](a);return a};_.Ub[" "]=function(){};var ic;_.Vb=_.ra();_.Wb=_.sa();_.Zb=_.u("Edge");_.$b=_.u("Gecko")&&!(_.ma()&&!_.u("Edge"))&&!(_.u("Trident")||_.u("MSIE"))&&!_.u("Edge");_.ac=_.ma()&&!_.u("Edge");_.bc=_.za();_.cc=wa()?oa.platform==="Windows":_.u("Windows");_.dc=wa()?oa.platform==="Android":_.u("Android");_.ec=xa();_.fc=_.u("iPad");_.gc=_.u("iPod");_.hc=_.ya();
a:{let a="";const b=function(){const c=_.la();if(_.$b)return/rv:([^\);]+)(\)|;)/.exec(c);if(_.Zb)return/Edge\/([\d\.]+)/.exec(c);if(_.Wb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(c);if(_.ac)return/WebKit\/(\S+)/.exec(c);if(_.Vb)return/(?:Version)[ \/]?(\S+)/.exec(c)}();b&&(a=b?b[1]:"");if(_.Wb){var jc;const c=_.t.document;jc=c?c.documentMode:void 0;if(jc!=null&&jc>parseFloat(a)){ic=String(jc);break a}}ic=a}_.kc=ic;_.lc=_.ta();_.mc=xa()||_.u("iPod");_.nc=_.u("iPad");_.oc=_.u("Android")&&!(ua()||_.ta()||_.ra()||_.u("Silk"));_.pc=ua();_.qc=_.va()&&!_.ya();var kb,fb;_.Xa=_.Ca();_.rc=_.Ca();kb=_.Ca();_.Ta=_.Ca("m_m",!0);fb=_.Ca();var tc;_.v=_.Ca("jas",!0);tc=[];tc[_.v]=55;_.sc=Object.freeze(tc);var Ea;_.Ua={};Ea={};_.uc=Object.freeze({});var gb={};var Ka=void 0;_.vc=typeof BigInt==="function"?BigInt.asIntN:void 0;_.wc=Number.isSafeInteger;_.Oa=Number.isFinite;_.xc=Math.trunc;var Za;_.yc=_.ia(0);_.zc=function(a,b,c){return _.qb(a.ha,void 0,b,c)};_.qb=function(a,b,c,d,e){if(c===-1)return null;d=c+(d?0:-1);const f=a.length-1;let g;if(d>=f&&(b!=null?b:a[_.v]|0)&256)b=a[f][c],g=!0;else if(d<=f)b=a[d];else return;if(e&&b!=null){e=e(b);if(e==null)return e;if(e!==b)return g?a[f][c]=e:a[d]=e,e}return b};_.Ac=function(a,b,c,d){_.ob(a);const e=a.ha;_.pb(e,e[_.v]|0,b,c,d);return a};
_.B=function(a,b,c,d){let e=a.ha,f=e[_.v]|0;b=_.rb(e,f,b,c,d);if(b==null)return b;f=e[_.v]|0;if(!_.Fa(a,f)){const g=_.mb(b);g!==b&&(_.nb(a)&&(e=a.ha,f=e[_.v]|0),b=g,_.pb(e,f,c,b,d))}return b};_.C=function(a,b,c){c==null&&(c=void 0);_.Ac(a,b,c);return a};_.D=function(a,b,c){a=_.zc(a,b,c);return a==null||typeof a==="boolean"?a:typeof a==="number"?!!a:void 0};_.E=function(a,b,c){return _.Sa(_.zc(a,b,c))};_.F=function(a,b,c=!1,d){let e;return(e=_.D(a,b,d))!=null?e:c};
_.G=function(a,b,c="",d){let e;return(e=_.E(a,b,d))!=null?e:c};_.H=function(a,b,c,d){return _.Ac(a,b,c==null?c:_.Na(c),d)};_.K=function(a,b,c){return _.Ac(a,b,c==null?c:_.Qa(c))};_.L=function(a,b,c,d){return _.Ac(a,b,_.Ra(c),d)};_.M=function(a,b,c,d){return _.Ac(a,b,c==null?c:_.Pa(c),d)};_.N=class{constructor(a,b,c){this.ha=_.jb(a,b,c,3)}toJSON(){return hb(this)}ya(a){return JSON.stringify(hb(this,a))}qc(){return _.Fa(this)}};_.N.prototype[_.Ta]=_.Ua;_.N.prototype.toString=function(){return this.ha.toString()};_.Bc=_.sb();_.Cc=_.sb();_.Dc=_.sb();_.Ec=Symbol();var Fc=class extends _.N{constructor(a){super(a)}};_.Gc=class extends _.N{constructor(a){super(a)}D(a){return _.K(this,3,a)}};var Hc=class extends _.N{constructor(a){super(a)}Ic(a){return _.L(this,24,a)}};_.Ic=class extends _.N{constructor(a){super(a)}};_.O=function(){this.qa=this.qa;this.Y=this.Y};_.O.prototype.qa=!1;_.O.prototype.isDisposed=function(){return this.qa};_.O.prototype.dispose=function(){this.qa||(this.qa=!0,this.P())};_.O.prototype[Symbol.dispose]=function(){this.dispose()};_.O.prototype.P=function(){if(this.Y)for(;this.Y.length;)this.Y.shift()()};var Jc=class extends _.O{constructor(){var a=window;super();this.o=a;this.i=[];this.j={}}resolve(a){let b=this.o;a=a.split(".");const c=a.length;for(let d=0;d<c;++d)if(b[a[d]])b=b[a[d]];else return null;return b instanceof Function?b:null}qb(){const a=this.i.length,b=this.i,c=[];for(let d=0;d<a;++d){const e=b[d].i(),f=this.resolve(e);if(f&&f!=this.j[e])try{b[d].qb(f)}catch(g){}else c.push(b[d])}this.i=c.concat(b.slice(a))}};var Lc=class extends _.O{constructor(){var a=_.Kc;super();this.o=a;this.A=this.i=null;this.v=0;this.B={};this.j=!1;a=window.navigator.userAgent;a.indexOf("MSIE")>=0&&a.indexOf("Trident")>=0&&(a=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a))&&a[1]&&parseFloat(a[1])<9&&(this.j=!0)}C(a,b){this.i=b;this.A=a;b.preventDefault?b.preventDefault():b.returnValue=!1}};_.Mc=class extends _.N{constructor(a){super(a)}};var Nc=class extends _.N{constructor(a){super(a)}};var Qc;_.Oc=function(a,b,c=98,d=new _.Gc){if(a.i){const e=new Fc;_.L(e,1,b.message);_.L(e,2,b.stack);_.K(e,3,b.lineNumber);_.M(e,5,1);_.C(d,40,e);a.i.log(c,d)}};Qc=class{constructor(){var a=Pc;this.i=null;_.F(a,4,!0)}log(a,b,c=new _.Gc){_.Oc(this,a,98,c)}};var Rc,Sc;Rc=function(a){if(a.o.length>0){var b=a.i!==void 0,c=a.j!==void 0;if(b||c){b=b?a.v:a.A;c=a.o;a.o=[];try{_.Sb(c,b,a)}catch(d){console.error(d)}}}};_.Tc=class{constructor(a){this.i=a;this.j=void 0;this.o=[]}then(a,b,c){this.o.push(new Sc(a,b,c));Rc(this)}resolve(a){if(this.i!==void 0||this.j!==void 0)throw Error("F");this.i=a;Rc(this)}reject(a){if(this.i!==void 0||this.j!==void 0)throw Error("F");this.j=a;Rc(this)}v(a){a.j&&a.j.call(a.i,this.i)}A(a){a.o&&a.o.call(a.i,this.j)}};
Sc=class{constructor(a,b,c){this.j=a;this.o=b;this.i=c}};_.Uc=a=>{var b="lc";if(a.lc&&a.hasOwnProperty(b))return a.lc;b=new a;return a.lc=b};_.Vc=class{constructor(){this.v=new _.Tc;this.i=new _.Tc;this.D=new _.Tc;this.B=new _.Tc;this.C=new _.Tc;this.A=new _.Tc;this.o=new _.Tc;this.j=new _.Tc;this.F=new _.Tc}Y(){return this.v}M(){return this.i}N(){return this.D}L(){return this.B}qa(){return this.C}K(){return this.A}J(){return this.o}G(){return this.j}static i(){return _.Uc(_.Vc)}};var Zc;_.Xc=function(){return _.B(_.Wc,Hc,1)};_.Yc=function(){return _.B(_.Wc,_.Ic,5)};Zc=class extends _.N{constructor(a){super(a)}};var $c;window.gbar_&&window.gbar_.CONFIG?$c=window.gbar_.CONFIG[0]||{}:$c=[];_.Wc=new Zc($c);var Pc=_.B(_.Wc,Nc,3)||new Nc;_.Xc()||new Hc;_.Kc=new Qc;_.z("gbar_._DumpException",function(a){_.Kc?_.Kc.log(a):console.error(a)});_.ad=new Lc;var cd;_.dd=function(a,b){var c=_.bd.i();if(a in c.i){if(c.i[a]!=b)throw new cd;}else{c.i[a]=b;const h=c.j[a];if(h)for(let k=0,l=h.length;k<l;k++){b=h[k];var d=c.i;delete b.i[a];if(_.vb(b.i)){for(var e=b.j.length,f=Array(e),g=0;g<e;g++)f[g]=d[b.j[g]];b.o.apply(b.v,f)}}delete c.j[a]}};_.bd=class{constructor(){this.i={};this.j={}}static i(){return _.Uc(_.bd)}};_.ed=class extends _.aa{constructor(){super()}};cd=class extends _.ed{};_.z("gbar.A",_.Tc);_.Tc.prototype.aa=_.Tc.prototype.then;_.z("gbar.B",_.Vc);_.Vc.prototype.ba=_.Vc.prototype.M;_.Vc.prototype.bb=_.Vc.prototype.N;_.Vc.prototype.bd=_.Vc.prototype.qa;_.Vc.prototype.bf=_.Vc.prototype.Y;_.Vc.prototype.bg=_.Vc.prototype.L;_.Vc.prototype.bh=_.Vc.prototype.K;_.Vc.prototype.bj=_.Vc.prototype.J;_.Vc.prototype.bk=_.Vc.prototype.G;_.z("gbar.a",_.Vc.i());window.gbar&&window.gbar.ap&&window.gbar.ap(window.gbar.a);var fd=new Jc;_.dd("api",fd);
var gd=_.Yc()||new _.Ic,hd=window,id=_.w(_.E(gd,8));hd.__PVT=id;_.dd("eq",_.ad);
}catch(e){_._DumpException(e)}
try{
_.jd=class extends _.N{constructor(a){super(a)}};
}catch(e){_._DumpException(e)}
try{
var kd=class extends _.N{constructor(a){super(a)}};var ld=class extends _.O{constructor(){super();this.j=[];this.i=[]}o(a,b){this.j.push({features:a,options:b!=null?b:null})}init(a,b,c){window.gapi={};const d=window.___jsl={};d.h=_.w(_.E(a,1));_.D(a,12)!=null&&(d.dpo=_.tb(_.F(a,12)));d.ms=_.w(_.E(a,2));d.m=_.w(_.E(a,3));d.l=[];_.G(b,1)&&(a=_.E(b,3))&&this.i.push(a);_.G(c,1)&&(c=_.E(c,2))&&this.i.push(c);_.z("gapi.load",(0,_.y)(this.o,this));return this}};var md=_.B(_.Wc,_.Mc,14);if(md){var nd=_.B(_.Wc,_.jd,9)||new _.jd,od=new kd,pd=new ld;pd.init(md,nd,od);_.dd("gs",pd)};
}catch(e){_._DumpException(e)}
})(this.gbar_);
// Google Inc.
</script><!-- Google Tag Manager --><script nonce="">(window.dataLayer=window.dataLayer||[]).push({"gtm.start": new Date().getTime(), "event": "gtm.js"});</script><script async="" src="./انواع بودجه بندی_files/gtm.js.download" nonce=""></script><!-- End Google Tag Manager --><link rel="preload" href="https://www.gstatic.com/_/mss/boq-bard-web/_/js/k=boq-bard-web.BardChatUi.fa.fAYxMeA4feg.es5.O/ck=boq-bard-web.BardChatUi.gq01Q5VIzW0.R.B1.O/am=jyEg4ghu9-JG_3mQwwAQABgE/d=1/exm=_b/excm=_b/ed=1/br=0/wt=2/ujg=1/rs=AL3bBk0jaVvVZfGyryZUK0WFHrQ_B9ec7Q/m=LQaXg?wli=BardChatUi.0u4DNdi4RN8.loadWasmSipCoca.O%3A%3B" as="script" nonce=""><style nonce="">@font-face{font-family:'Google Symbols';font-style:normal;font-weight:500;font-display:block;src:url(//fonts.gstatic.com/icon/font?kit=HhyqU5Ak9u-oMExPeInvcuEmPosC9zS3FYkFU68cPrjdKM1XMoDZlWmzc_IiWvF1R4oJxQmdBnvFCeyl7kiAfkv1csvxA8rW_1MhlXpI31LcGi7kxmZcHmXsw6epF32i6dTNem503fS-r2lKyOZIyZgzbHR5Yb7o_PZWrmDs8cDtilJVvTaYupHkCP8tTaUxnvoT7TVsdydm8o9WYEymhwzzjBSdTXKm25m4FspoQF-V8WAohCfype55eJ2V9Sf8l6Hy3ylrlxmv2wOK8D29Oe-Hc-v6a811PHDDfGmYqucjwqZDSSs7Cq6HrKJLak8794hx23PfFRqnQklVP-o6PhUU8yi_OWcuH3iX29hKGUFmIpMQngN9cyTm5U94wgPdBfCgbnTXoUdn__f8-TmsdIvN5CP-Dew_ZLyJyeD16E7SvHmkbIH67GnZRPf7znI3WDfFFU2nfeJXCe5mr6EpnEZ7St5YgkbDD2NAWTQ-vwgtzeBsy96UKAu7bxtx9Ms&skey=f8ec4d50247dc1c1&v=v315)format('woff2');}.google-symbols{font-family:'Google Symbols';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased;}</style><title>Gemini</title><meta property="og:title" content="‏Gemini"><meta name="twitter:title" content="‏Gemini"><meta property="og:image" itemprop="image" content="https://www.gstatic.com/lamda/images/gemini_thumbnail_c362e5eadc46ca9f617e2.png"><meta name="twitter:image" content="https://www.gstatic.com/lamda/images/gemini_thumbnail_c362e5eadc46ca9f617e2.png"><meta name="description" content="‫Bard اکنون Gemini نامیده می‌شود. در نوشتن، برنامه‌ریزی، یادگیری و بسیاری موارد دیگر از هوش مصنوعی Google کمک بگیرید."><meta property="og:description" content="‫Bard اکنون Gemini نامیده می‌شود. در نوشتن، برنامه‌ریزی، یادگیری و بسیاری موارد دیگر از هوش مصنوعی Google کمک بگیرید."><meta property="og:url" content="https://gemini.google.com"><link rel="canonical" href="https://gemini.google.com/?hl=fa"><script type="application/ld+json" nonce="">{"@context" : "https://schema.org", "@type" : "WebSite", "name" : "Gemini", "url" : "https://gemini.google.com"}</script><script nonce="">var AF_initDataKeys = []; var AF_dataServiceRequests = {}; var AF_initDataChunkQueue = []; var AF_initDataCallback; var AF_initDataInitializeCallback; if (AF_initDataInitializeCallback) {AF_initDataInitializeCallback(AF_initDataKeys, AF_initDataChunkQueue, AF_dataServiceRequests);}if (!AF_initDataCallback) {AF_initDataCallback = function(chunk) {AF_initDataChunkQueue.push(chunk);};}</script><script async="" type="text/javascript" charset="UTF-8" src="./انواع بودجه بندی_files/rs=AA2YrTvu-D12hsXQ9DlQYcUn7sGrAmUyZw" nonce=""></script><link type="text/css" href="./انواع بودجه بندی_files/rs=AA2YrTvAETFejAz0S0GxNoFB7gtTsU-nMg" rel="stylesheet" nonce=""><style nonce="" type="text/css" data-late-css="">.mdc-circular-progress__determinate-circle,.mdc-circular-progress__indeterminate-circle-graphic{stroke:#6200ee;stroke:var(--mdc-theme-primary,#6200ee)}@media (-ms-high-contrast:active),screen and (forced-colors:active){.mdc-circular-progress__determinate-circle,.mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-track{stroke:transparent}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(1turn)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(3turn)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;overflow:hidden;transition:opacity .25s 0ms cubic-bezier(.4,0,.6,1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:transparent}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset .5s 0ms cubic-bezier(0,0,.2,1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1.5682352941176s linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--closed{opacity:0}.picker-api-container,.picker-iframe-container{height:100%;width:100%;position:relative}.picker-close-button{position:absolute;z-index:100;top:12px;left:14px;width:36px;height:36px;border-radius:18px;border-width:0;background-color:rgba(0,0,0,0)}.picker-close-button:hover{background-color:rgba(60,64,67,.04)}.picker-close-button:active{background-color:rgba(60,64,67,.12)}.picker-close-button-svg{fill:#616161}.content-library .picker-close-button-svg{color:var(--dt-on-neutral-container,rgb(60,64,67))}.content-library .picker-loading-container{position:absolute;height:100%;width:100%;background-color:var(--dt-surface-container,#fff);align-items:center;justify-content:space-evenly;display:none}.content-library.loading .picker-loading-container{display:flex;background-color:#f0f4f9}.content-library.loading .picker-iframe-container,.content-library.loaded .picker-loading-container,.content-library.loading-timed-out .picker-loading-container{display:none}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress__wrapper{position:relative}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress{display:inline-flex;position:relative;line-height:0;overflow:hidden}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress__container{position:absolute;width:100%;height:100%;transform:rotate(-90deg)}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress__circle-graphic{height:100%;width:100%;fill:transparent}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress__active-indicator{stroke:var(--gm3-circular-progress-active-indicator-color,var(--gm3-sys-color-primary,#0b57d0));stroke-width:var(--gm3-circular-progress-active-indicator-thickness,4px);stroke-linecap:round}@media (forced-colors:active){.javascriptMaterialdesignGm3WizCircularProgress-circular-progress__active-indicator{stroke:CanvasText}}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress__track{stroke:var(--gm3-circular-progress-track-color,var(--gm3-sys-color-secondary-container,#c2e7ff));stroke-width:var(--gm3-circular-progress-active-indicator-thickness,4px);stroke-linecap:round}@media (forced-colors:active){.javascriptMaterialdesignGm3WizCircularProgress-circular-progress__track{stroke:Canvas;stroke-width:calc(var(--gm3-circular-progress-active-indicator-thickness, 4px) - 2px);filter:drop-shadow(-1px 0 0 CanvasText) drop-shadow(1px 0 0 CanvasText) drop-shadow(0 -1px 0 CanvasText) drop-shadow(0 1px 0 CanvasText)}}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--unopened .javascriptMaterialdesignGm3WizCircularProgress-circular-progress__active-indicator,.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--complete .javascriptMaterialdesignGm3WizCircularProgress-circular-progress__track,.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--almost-complete .javascriptMaterialdesignGm3WizCircularProgress-circular-progress__track,.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--closed .javascriptMaterialdesignGm3WizCircularProgress-circular-progress__active-indicator,.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--closed .javascriptMaterialdesignGm3WizCircularProgress-circular-progress__track{stroke-width:0}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--indeterminate{animation:gm3-cpi-rotate 6s linear infinite}@keyframes gm3-cpi-rotate{from{transform:rotate(-90deg)}to{transform:rotate(990deg)}}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--indeterminate .javascriptMaterialdesignGm3WizCircularProgress-circular-progress__container{animation:gm3-cpi-container-rotate 6s ease infinite}@keyframes gm3-cpi-container-rotate{0%{transform:rotate(0deg)}8.3333333333%{transform:rotate(90deg)}25%{transform:rotate(90deg)}33.3333333333%{transform:rotate(180deg)}50%{transform:rotate(180deg)}58.3333333333%{transform:rotate(270deg)}75%{transform:rotate(270deg)}83.3333333333%{transform:rotate(1turn)}to{transform:rotate(-1turn)}}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress{height:calc(var(--gm3-circular-progress-size, 40px));width:calc(var(--gm3-circular-progress-size, 40px))}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress__active-indicator{transition:stroke-dasharray .5s 0ms cubic-bezier(0,0,.2,1),stroke-width .25s 0ms cubic-bezier(.4,0,.6,1);cx:calc(var(--gm3-circular-progress-size, 40px)/2);cy:calc(var(--gm3-circular-progress-size, 40px)/2);r:calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2);stroke-dasharray:calc(var(--progress-value, 0)*(6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px)) - var(--gm3-circular-progress-active-indicator-thickness, 4px)) calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))*6.2831852/2 - var(--progress-value, 0)*(6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px)) + var(--gm3-circular-progress-active-indicator-thickness, 4px))}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress__track{transition:stroke-dasharray .5s 0ms cubic-bezier(0,0,.2,1),stroke-dashoffset .5s 0ms cubic-bezier(0,0,.2,1),stroke-width .25s 0ms cubic-bezier(.4,0,.6,1);cx:calc(var(--gm3-circular-progress-size, 40px)/2);cy:calc(var(--gm3-circular-progress-size, 40px)/2);r:calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2);stroke-dasharray:min((1 - var(--progress-value,0)) * (6.2831852 * (var(--gm3-circular-progress-size,40px) - var(--gm3-circular-progress-active-indicator-thickness,4px))/2 - var(--gm3-circular-progress-active-indicator-track-space,4px)) - var(--gm3-circular-progress-active-indicator-track-space,4px) - var(--gm3-circular-progress-active-indicator-thickness,4px),6.2831852 * (var(--gm3-circular-progress-size,40px) - var(--gm3-circular-progress-active-indicator-thickness,4px))/2 - var(--gm3-circular-progress-active-indicator-track-space,4px) - var(--gm3-circular-progress-active-indicator-track-space,4px) - 2 * var(--gm3-circular-progress-active-indicator-thickness,4px)) calc(6.2831852 * (var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px)) / 2 - min((1 - var(--progress-value, 0)) * (6.2831852 * (var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px)) / 2 - var(--gm3-circular-progress-active-indicator-track-space, 4px)) - var(--gm3-circular-progress-active-indicator-track-space, 4px) - var(--gm3-circular-progress-active-indicator-thickness, 4px), 6.2831852 * (var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px)) / 2 - var(--gm3-circular-progress-active-indicator-track-space, 4px) - var(--gm3-circular-progress-active-indicator-track-space, 4px) - 2 * var(--gm3-circular-progress-active-indicator-thickness, 4px)));stroke-dashoffset:calc(min((1 - var(--progress-value, 0)) * (6.2831852 * (var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px)) / 2 - var(--gm3-circular-progress-active-indicator-track-space, 4px)) - var(--gm3-circular-progress-active-indicator-track-space, 4px) - var(--gm3-circular-progress-active-indicator-thickness, 4px), 6.2831852 * (var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px)) / 2 - var(--gm3-circular-progress-active-indicator-track-space, 4px) - var(--gm3-circular-progress-active-indicator-track-space, 4px) - 2 * var(--gm3-circular-progress-active-indicator-thickness, 4px)) + var(--gm3-circular-progress-active-indicator-track-space, 4px) + var(--gm3-circular-progress-active-indicator-thickness, 4px))}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--complete .javascriptMaterialdesignGm3WizCircularProgress-circular-progress__active-indicator{stroke-dasharray:calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))*6.2831852/2)}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--unopened .javascriptMaterialdesignGm3WizCircularProgress-circular-progress__track{stroke-dasharray:calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))*6.2831852/2) 0}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--indeterminate .javascriptMaterialdesignGm3WizCircularProgress-circular-progress__active-indicator{animation:gm3-cpi-active-grow 6s ease infinite}@keyframes gm3-cpi-active-grow{from{stroke-dasharray:calc((6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.16 - var(--gm3-circular-progress-active-indicator-thickness, 4px)),calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))*6.2831852/2 - (6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.16 + var(--gm3-circular-progress-active-indicator-thickness, 4px))}50%{stroke-dasharray:calc((6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.87 - var(--gm3-circular-progress-active-indicator-thickness, 4px)),calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))*6.2831852/2 - (6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.87 + var(--gm3-circular-progress-active-indicator-thickness, 4px))}to{stroke-dasharray:calc((6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.16 - var(--gm3-circular-progress-active-indicator-thickness, 4px)),calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))*6.2831852/2 - (6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.16 + var(--gm3-circular-progress-active-indicator-thickness, 4px))}}.javascriptMaterialdesignGm3WizCircularProgress-circular-progress--indeterminate .javascriptMaterialdesignGm3WizCircularProgress-circular-progress__track{animation:gm3-cpi-track-grow 6s ease infinite}@keyframes gm3-cpi-track-grow{from{stroke-dasharray:calc((6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.84 - var(--gm3-circular-progress-active-indicator-track-space, 4px) - var(--gm3-circular-progress-active-indicator-thickness, 4px)),calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))*6.2831852/2 - (6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.84 + var(--gm3-circular-progress-active-indicator-track-space, 4px) + var(--gm3-circular-progress-active-indicator-thickness, 4px));stroke-dashoffset:calc((6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.84 - var(--gm3-circular-progress-active-indicator-track-space, 4px) - var(--gm3-circular-progress-active-indicator-thickness, 4px) + var(--gm3-circular-progress-active-indicator-track-space, 4px) + var(--gm3-circular-progress-active-indicator-thickness, 4px))}50%{stroke-dasharray:calc((6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.13 - var(--gm3-circular-progress-active-indicator-track-space, 4px) - var(--gm3-circular-progress-active-indicator-thickness, 4px)),calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))*6.2831852/2 - (6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.13 + var(--gm3-circular-progress-active-indicator-track-space, 4px) + var(--gm3-circular-progress-active-indicator-thickness, 4px));stroke-dashoffset:calc((6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.13 - var(--gm3-circular-progress-active-indicator-track-space, 4px) - var(--gm3-circular-progress-active-indicator-thickness, 4px) + var(--gm3-circular-progress-active-indicator-track-space, 4px) + var(--gm3-circular-progress-active-indicator-thickness, 4px))}to{stroke-dasharray:calc((6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.84 - var(--gm3-circular-progress-active-indicator-track-space, 4px) - var(--gm3-circular-progress-active-indicator-thickness, 4px)),calc((var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))*6.2831852/2 - (6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.84 + var(--gm3-circular-progress-active-indicator-track-space, 4px) + var(--gm3-circular-progress-active-indicator-thickness, 4px));stroke-dashoffset:calc((6.2831852*(var(--gm3-circular-progress-size, 40px) - var(--gm3-circular-progress-active-indicator-thickness, 4px))/2 - var(--gm3-circular-progress-active-indicator-track-space, 4px))*.84 - var(--gm3-circular-progress-active-indicator-track-space, 4px) - var(--gm3-circular-progress-active-indicator-thickness, 4px) + var(--gm3-circular-progress-active-indicator-track-space, 4px) + var(--gm3-circular-progress-active-indicator-thickness, 4px))}}.GmCircularProgress{position:relative}.GmCircularProgress .mdc-circular-progress__determinate-circle,.GmCircularProgress .mdc-circular-progress__indeterminate-circle-graphic{stroke:#4285f4}@media screen and (forced-colors:active),(-ms-high-contrast:active){.GmCircularProgress .mdc-circular-progress__determinate-circle,.GmCircularProgress .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.GmCircularProgress .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:#4285f4}@media screen and (forced-colors:active),(-ms-high-contrast:active){.GmCircularProgress .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.GmCircularProgress .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:#ea4335}@media screen and (forced-colors:active),(-ms-high-contrast:active){.GmCircularProgress .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.GmCircularProgress .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:#fbbc04}@media screen and (forced-colors:active),(-ms-high-contrast:active){.GmCircularProgress .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.GmCircularProgress .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:#34a853}@media screen and (forced-colors:active),(-ms-high-contrast:active){.GmCircularProgress .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.GmCircularProgress .mdc-circular-progress__accessible-label{height:100%;width:100%;position:absolute;opacity:0;overflow:hidden;z-index:-1}.materialdesignWizIconSvgsSvgIcon{fill:currentColor;flex-shrink:0}[dir=rtl] .materialdesignWizIconSvgsRtlIcon{transform:scaleX(-1)}.boqHighlightVe [jslog]{box-shadow:0 0 0 5px #7fffd4}sentinel{}</style><script async="" src="./انواع بودجه بندی_files/lazy.min.js.download" nonce=""></script><style type="text/css"></style><style>.announcement-banner-container[_ngcontent-ng-c3730527948]{opacity:1;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}  crust-task{z-index:1002}  .picker-api-container{z-index:1000;position:absolute}.side-nav-menu-button[_ngcontent-ng-c3730527948]{position:fixed;top:0;z-index:3;min-height:48px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--bard-color-onegooglebar-product-controls);margin-top:12px;-webkit-margin-start:16px;-moz-margin-start:16px;margin-inline-start:16px;pointer-events:none}.side-nav-menu-button[_ngcontent-ng-c3730527948] > *[_ngcontent-ng-c3730527948]{pointer-events:auto}@media only screen and (max-width:768px){.side-nav-menu-button[_ngcontent-ng-c3730527948]{-webkit-margin-start:2px;-moz-margin-start:2px;margin-inline-start:2px}.side-nav-menu-button[_ngcontent-ng-c3730527948]   .mat-mdc-icon-button[_ngcontent-ng-c3730527948]{--mat-icon-button-state-layer-color:transparent}}@media screen and (min-width:960px){.side-nav-menu-button[_ngcontent-ng-c3730527948]   bard-mode-switcher[_ngcontent-ng-c3730527948]{-webkit-margin-start:24px;-moz-margin-start:24px;margin-inline-start:24px}.side-nav-menu-button[_ngcontent-ng-c3730527948]   bard-mode-switcher.no-menu-button[_ngcontent-ng-c3730527948]{-webkit-margin-start:2px;-moz-margin-start:2px;margin-inline-start:2px}}[_nghost-ng-c3730527948]{--bard-sidenav-open-closed-width-diff:248px;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;overflow-y:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}[dir=rtl]   [_nghost-ng-c3730527948]{--bard-sidenav-open-closed-width-diff:-248px}[_nghost-ng-c3730527948]     announcement-banner.googler-optin-banner{height:56px}[_nghost-ng-c3730527948]     button.googler-optin-button{background-color:var(--gem-sys-color--primary);color:var(--gem-sys-color--on-primary);border-radius:var(--gem-sys-shape--corner-full);padding:var(--gem-sys-spacing--s) var(--gem-sys-spacing--xxl);height:40px;-webkit-margin-start:var(--gem-sys-spacing--xxl);-moz-margin-start:var(--gem-sys-spacing--xxl);margin-inline-start:var(--gem-sys-spacing--xxl)}.content[_ngcontent-ng-c3730527948]{display:contents;height:100%}.chat-app[_ngcontent-ng-c3730527948], .main-content[_ngcontent-ng-c3730527948]{height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.content-container[_ngcontent-ng-c3730527948]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;overflow-y:auto;position:relative}.sticky-live-prompt-list[_ngcontent-ng-c3730527948]{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background-color:var(--gem-sys-color--surface)}</style><style>xap-count-badge[_ngcontent-ng-c2217566490]{border-radius:2px;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;padding:0 4px;white-space:nowrap;background-color:#c5221f;border-radius:8px;color:#fff;font:500 12px/16px Google Sans;min-width:16px}xap-count-badge.xap-count-badge-dot[_ngcontent-ng-c2217566490]{min-height:8px;min-width:8px}.xap-count-badge-container[_ngcontent-ng-c2217566490]{display:inline-block;position:relative}.xap-count-badge-container[_ngcontent-ng-c2217566490]   xap-count-badge[_ngcontent-ng-c2217566490]{left:100%;position:absolute;top:0;-webkit-transform:translate(-6px,-50%);transform:translate(-6px,-50%)}[_nghost-ng-c2217566490]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;--bard-ogb-margin-end:12px;position:fixed;top:12px;z-index:2}[dir=ltr][_nghost-ng-c2217566490], [dir=ltr]   [_nghost-ng-c2217566490]{right:calc(var(--offset) + var(--bard-ogb-margin-end))}[dir=rtl][_nghost-ng-c2217566490], [dir=rtl]   [_nghost-ng-c2217566490]{left:calc(var(--offset) + var(--bard-ogb-margin-end))}.top-bar-actions[_ngcontent-ng-c2217566490]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.top-bar-button[_ngcontent-ng-c2217566490]{color:var(--bard-color-onegooglebar-product-controls)}.top-bar-button.enterprise.isAdvanced[_ngcontent-ng-c2217566490]{font-size:16px;font-weight:500;line-height:20px}.help-settings-updates-container[_ngcontent-ng-c2217566490]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px}.icon-buttons-container[_ngcontent-ng-c2217566490]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:48px}.buttons-container[_ngcontent-ng-c2217566490]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;padding-top:6px}.buttons-container.adv-upsell[_ngcontent-ng-c2217566490]{-webkit-padding-end:12px;-moz-padding-end:12px;padding-inline-end:12px}.circular-icon[_ngcontent-ng-c2217566490]   .circular-background[_ngcontent-ng-c2217566490]{position:absolute;width:32px;height:32px;-webkit-margin-before:-4px;margin-block-start:-4px;-webkit-margin-start:-4px;-moz-margin-start:-4px;margin-inline-start:-4px;border-radius:50%;background-color:var(--gem-sys-color--surface-container-high)}.circular-icon[_ngcontent-ng-c2217566490]   .icon[_ngcontent-ng-c2217566490]{position:relative}.studio-sidebar-launcher[_ngcontent-ng-c2217566490]{margin-top:4px}.clicked[_ngcontent-ng-c2217566490]{background-color:rgba(var(--gem-sys-color--primary--rgb),.1)}</style><style>xap-count-badge[_ngcontent-ng-c2765397678]{border-radius:2px;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;padding:0 4px;white-space:nowrap;background-color:#c5221f;border-radius:8px;color:#fff;font:500 12px/16px Google Sans;min-width:16px}xap-count-badge.xap-count-badge-dot[_ngcontent-ng-c2765397678]{min-height:8px;min-width:8px}.xap-count-badge-container[_ngcontent-ng-c2765397678]{display:inline-block;position:relative}.xap-count-badge-container[_ngcontent-ng-c2765397678]   xap-count-badge[_ngcontent-ng-c2765397678]{left:100%;position:absolute;top:0;-webkit-transform:translate(-6px,-50%);transform:translate(-6px,-50%)}.mat-sidenav-container.mat-sidenav-container.mat-sidenav-container[_ngcontent-ng-c2765397678]{height:100%;background-color:var(--gem-sys-color--surface)}.mat-sidenav-container.mat-sidenav-container.mat-sidenav-container[_ngcontent-ng-c2765397678]   .mat-sidenav[_ngcontent-ng-c2765397678]{position:fixed;top:0;background-color:var(--gem-sys-color--surface-container);width:85vw}.mat-sidenav-container.mat-sidenav-container.mat-sidenav-container[_ngcontent-ng-c2765397678]   .mat-sidenav[_ngcontent-ng-c2765397678]     .mat-focus-indicator:before{border-radius:30px;margin:0}.mat-sidenav-container.mat-sidenav-container.mat-sidenav-container[_ngcontent-ng-c2765397678]   .mat-drawer-side[_ngcontent-ng-c2765397678]{border:0}.mat-drawer-container[_ngcontent-ng-c2765397678]{--mat-sidenav-scrim-color:var(--bard-color-sidenav-scrim)}.mat-drawer.mat-sidenav[_ngcontent-ng-c2765397678]{background-color:var(--bard-color-sidenav-background)}.mat-sidenav-content[_ngcontent-ng-c2765397678]   .mat-drawer-content[_ngcontent-ng-c2765397678]{background-color:var(--gem-sys-color--surface-container);overflow-x:hidden}[_nghost-ng-c2765397678]   .mobile-controls[_ngcontent-ng-c2765397678]   button[_ngcontent-ng-c2765397678]{color:var(--bard-color-sidenav-mobile-controls)}bard-sidenav[_ngcontent-ng-c2765397678]{color:var(--gem-sys-color--on-surface);background-color:var(--gem-sys-color--surface-container);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}bard-sidenav-content[_ngcontent-ng-c2765397678]{color:var(--gem-sys-color--on-surface);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:hidden}bard-sidenav-content[_ngcontent-ng-c2765397678]   bard-mode-switcher[_ngcontent-ng-c2765397678]{margin-top:12px;padding:6px 0;-webkit-margin-start:16px;-moz-margin-start:16px;margin-inline-start:16px;margin-bottom:10px}bard-sidenav-content[_ngcontent-ng-c2765397678]   bard-mode-switcher.single-mode-list[_ngcontent-ng-c2765397678]{padding:0}bard-sidenav-content[_ngcontent-ng-c2765397678]   .desktop-ogb-buffer[_ngcontent-ng-c2765397678]{margin-top:12px;padding:6px 0;height:36px;margin-bottom:10px}bard-sidenav-content[_ngcontent-ng-c2765397678]   .content-wrapper[_ngcontent-ng-c2765397678]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;overflow:auto}chat-notifications[_ngcontent-ng-c2765397678]{display:none}.ia-redesign[_nghost-ng-c2765397678]   .mat-sidenav-container[_ngcontent-ng-c2765397678]   .mat-sidenav[_ngcontent-ng-c2765397678]{background-color:var(--gem-sys-color--surface)}</style><style>.load-turn-error[_ngcontent-ng-c2723134209]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--label-m-alt-font-size);font-weight:var(--gem-sys-typography-type-scale--label-m-alt-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-m-alt-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-m-alt-line-height);text-align:center;margin-top:16px}</style><style>[_nghost-ng-c3522183994]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:100%}</style><style>[_nghost-ng-c24741362]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;height:100%}bard-sidenav.overlay-main-content ~ [_nghost-ng-c24741362]{position:absolute;width:auto;inset-inline:72px 0;z-index:1}</style><script src="./انواع بودجه بندی_files/js(1)" nonce=""></script><style>[_nghost-ng-c4196107817]{height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background-color:var(--gem-sys-color--surface);overflow-y:auto}.immersives-mode[_nghost-ng-c4196107817]:not(.mobile-device){min-width:890px;overflow:auto hidden;grid-template-areas:"chat immersive";grid-template-columns:minmax(360px,1fr) minmax(0,2fr);-moz-box-sizing:border-box;box-sizing:border-box;display:grid;gap:var(--gem-sys-spacing--xxl);background-color:var(--gem-sys-color--surface);overflow-y:hidden;max-width:1800px;margin:0 max(var(--gem-sys-spacing--xxl),50% - 1800px/2);padding:var(--gem-sys-spacing--l) 0 0 0}.immersives-mode[_nghost-ng-c4196107817]:not(.mobile-device)   .chat-container[_ngcontent-ng-c4196107817]{grid-area:chat}.immersives-mode[_nghost-ng-c4196107817]:not(.mobile-device)   immersive-panel-v2[_ngcontent-ng-c4196107817]{grid-area:immersive}.immersives-mode[_nghost-ng-c4196107817]:not(.mobile-device)   .chat-history[_ngcontent-ng-c4196107817]{padding-inline:0}.immersives-mode[_nghost-ng-c4196107817]:not(.mobile-device)   input-container[_ngcontent-ng-c4196107817]{padding-inline:0}@media only screen and (max-width:1112px){.immersives-mode[_nghost-ng-c4196107817]:not(.mobile-device){grid-template:"immersive" 1fr/minmax(0,1fr);-moz-box-sizing:border-box;box-sizing:border-box;display:grid;gap:var(--gem-sys-spacing--xxl);background-color:var(--gem-sys-color--surface);overflow-y:hidden;max-width:1800px;margin:0 max(var(--gem-sys-spacing--xxl),50% - 1800px/2);padding:var(--gem-sys-spacing--l) 0 0 0}.immersives-mode[_nghost-ng-c4196107817]:not(.mobile-device)   .chat-container[_ngcontent-ng-c4196107817]{display:none}.immersives-mode[_nghost-ng-c4196107817]:not(.mobile-device)   .chat-container[_ngcontent-ng-c4196107817]{grid-area:chat}.immersives-mode[_nghost-ng-c4196107817]:not(.mobile-device)   immersive-panel-v2[_ngcontent-ng-c4196107817]{grid-area:immersive}}.immersives-mode.mobile-device[_nghost-ng-c4196107817]{grid-template:"immersive" 1fr/minmax(0,1fr);-moz-box-sizing:border-box;box-sizing:border-box;display:grid;gap:var(--gem-sys-spacing--xxl);background-color:var(--gem-sys-color--surface);overflow-y:hidden;max-width:1800px;margin:0 max(var(--gem-sys-spacing--xxl),50% - 1800px/2);padding:var(--gem-sys-spacing--l) 0 0 0}.immersives-mode.mobile-device[_nghost-ng-c4196107817]   .chat-container[_ngcontent-ng-c4196107817]{display:none}.immersives-mode.mobile-device[_nghost-ng-c4196107817]   .chat-container[_ngcontent-ng-c4196107817]{grid-area:chat}.immersives-mode.mobile-device[_nghost-ng-c4196107817]   immersive-panel-v2[_ngcontent-ng-c4196107817]{grid-area:immersive}.chat-container[_ngcontent-ng-c4196107817]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:hidden;-webkit-transition:margin .5s ease;transition:margin .5s ease;max-width:unset;width:100%;z-index:1}.content-placeholder[_ngcontent-ng-c4196107817]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:100%}</style><style>.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
</style><style>@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
</style><style>.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
</style><style>.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
</style><style>mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
</style><style>.bard-mode-menu-btn-for-nested-menu[_ngcontent-ng-c2700894532]{--mat-text-button-container-height:53px;border-radius:var(--gem-sys-spacing--s)}.bard-logo-container[_ngcontent-ng-c2700894532]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--gem-sys-spacing--xs) var(--gem-sys-spacing--s);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--gem-sys-spacing--xs)}.bard-logo-container.with-attribution[_ngcontent-ng-c2700894532]{padding:0 var(--gem-sys-spacing--s)}.bard-logo-container.logo-only[_ngcontent-ng-c2700894532]{padding:6px var(--gem-sys-spacing--s)}.pill-ui-logo-container[_ngcontent-ng-c2700894532]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--gem-sys-spacing--xs) var(--gem-sys-spacing--s);-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:var(--gem-sys-spacing--xs)}.pill-ui-logo-container.with-attribution[_ngcontent-ng-c2700894532]{padding:0 var(--gem-sys-spacing--s)}.pill-ui-logo-container[_ngcontent-ng-c2700894532]   .logo-pill-btn[_ngcontent-ng-c2700894532]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.pill-ui-logo-container[_ngcontent-ng-c2700894532]   .logo-pill-btn[_ngcontent-ng-c2700894532]{--mat-text-button-container-height:24px;--mat-text-button-touch-target-display:none}.pill-ui-logo-container[_ngcontent-ng-c2700894532]   .logo-pill-btn[_ngcontent-ng-c2700894532]{--mat-filled-button-touch-target-display:none;--mat-filled-button-container-height:24px}.pill-ui-logo-container[_ngcontent-ng-c2700894532]   .logo-pill-btn[_ngcontent-ng-c2700894532]{--mat-protected-button-container-height:24px;--mat-protected-button-touch-target-display:none}.pill-ui-logo-container[_ngcontent-ng-c2700894532]   .logo-pill-btn[_ngcontent-ng-c2700894532]{--mat-outlined-button-container-height:24px;--mat-outlined-button-touch-target-display:none}.pill-ui-logo-container[_ngcontent-ng-c2700894532]   .logo-pill-btn[_ngcontent-ng-c2700894532]{--mat-tonal-button-touch-target-display:none;--mat-tonal-button-container-height:24px}.pill-ui-logo-container[_ngcontent-ng-c2700894532]   .logo-pill-btn.mat-mdc-raised-button[_ngcontent-ng-c2700894532]{padding:0 var(--gem-sys-spacing--xs) 0 var(--gem-sys-spacing--m)}.pill-ui-logo-container[_ngcontent-ng-c2700894532]   .logo-pill-label-container[_ngcontent-ng-c2700894532]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow-block:hidden}.current-mode-title[_ngcontent-ng-c2700894532]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:start;-moz-box-align:start;-ms-flex-align:start;align-items:start;width:100%;text-align:start;padding:0 var(--gem-sys-spacing--s);color:var(--gem-sys-color--on-surface-variant);min-height:1.25em}.bottom-sheet-header[_ngcontent-ng-c2700894532]{padding:var(--gem-sys-spacing--m) var(--gem-sys-spacing--l)}.menu-option-container[_ngcontent-ng-c2700894532]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.menu-option-container[_ngcontent-ng-c2700894532]   .upsell-button[_ngcontent-ng-c2700894532]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-margin-end:var(--gem-sys-spacing--l);-moz-margin-end:var(--gem-sys-spacing--l);margin-inline-end:var(--gem-sys-spacing--l)}.title-and-check[_ngcontent-ng-c2700894532]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--gem-sys-spacing--m);-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.title-and-description[_ngcontent-ng-c2700894532]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center}.title-with-indent[_ngcontent-ng-c2700894532]{-webkit-padding-start:32px;-moz-padding-start:32px;padding-inline-start:32px}.nested-mode-title-bar[_ngcontent-ng-c2700894532]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--gem-sys-spacing--m);padding:var(--gem-sys-spacing--s) var(--gem-sys-spacing--m)}.new-model-badge[_ngcontent-ng-c2700894532]{background-color:var(--gem-sys-color--primary);border-radius:var(--gem-sys-shape--corner-full);color:var(--gem-sys-color--on-primary);gap:var(--gem-sys-spacing--xs);padding:var(--gem-sys-spacing--xs) var(--gem-sys-spacing--s)}.sign-in-container[_ngcontent-ng-c2700894532]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin:var(--gem-sys-spacing--s) var(--gem-sys-spacing--l);-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:var(--gem-sys-spacing--l);border-radius:var(--gem-sys-spacing--l);background-color:var(--gem-sys-color--surface-container-highest);gap:var(--gem-sys-spacing--xs)}@media only screen and (min-width:960px){.sign-in-container[_ngcontent-ng-c2700894532]{margin:var(--gem-sys-spacing--s) var(--gem-sys-spacing--l) var(--gem-sys-spacing--s)}}.sign-in-container[_ngcontent-ng-c2700894532]   .sign-in-text[_ngcontent-ng-c2700894532]{max-width:243px}@media only screen and (min-width:960px){.sign-in-container[_ngcontent-ng-c2700894532]   .sign-in-text[_ngcontent-ng-c2700894532]{max-width:151px}}.sign-in-container[_ngcontent-ng-c2700894532]   .sign-in-button-container[_ngcontent-ng-c2700894532]{white-space:nowrap;width:110px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}</style><style>mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
</style><style>.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mat-text-button-container-height, 40px);font-family:var(--mat-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-text-button-label-text-transform);font-weight:var(--mat-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-filled-button-container-height, 40px);font-family:var(--mat-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-filled-button-label-text-transform);font-weight:var(--mat-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-protected-button-container-height, 40px);font-family:var(--mat-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-protected-button-label-text-transform);font-weight:var(--mat-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mat-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mat-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mat-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-outlined-button-container-height, 40px);font-family:var(--mat-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-outlined-button-label-text-transform);font-weight:var(--mat-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mat-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-tonal-button-container-height, 40px);font-family:var(--mat-tonal-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-tonal-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-tonal-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-tonal-button-label-text-transform);font-weight:var(--mat-tonal-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-tonal-button-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-tonal-button-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-tonal-button-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-tonal-button-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-tonal-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-tonal-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-tonal-button-icon-spacing, 8px);margin-left:var(--mat-tonal-button-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-tonal-button-icon-offset, -8px);margin-left:var(--mat-tonal-button-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-tonal-button-icon-offset, -8px);margin-left:var(--mat-tonal-button-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-tonal-button-icon-spacing, 8px);margin-left:var(--mat-tonal-button-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-tonal-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-tonal-button-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-tonal-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-tonal-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-tonal-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-tonal-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-tonal-button-touch-target-display, block)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
</style><style>.logo[_ngcontent-ng-c3114342097]{cursor:pointer;font-size:1.375rem;font-weight:400;line-height:1.75rem;font-family:Google Sans,Helvetica Neue,sans-serif;letter-spacing:normal;font-size:1.25rem;-webkit-margin-end:4px;-moz-margin-end:4px;margin-inline-end:4px}.logo[_ngcontent-ng-c3114342097]   .mode-text-advanced[_ngcontent-ng-c3114342097]{-webkit-margin-start:2px;-moz-margin-start:2px;margin-inline-start:2px}.bard-text[_ngcontent-ng-c3114342097]{color:var(--gem-sys-color--on-surface)}@media screen and (max-width:600px){.bard-text.allow-truncation[_ngcontent-ng-c3114342097]{display:none}}.mode-text[_ngcontent-ng-c3114342097]{color:var(--bard-color-chrome-experiment-badge);font-family:Google Sans Mono;font-size:12px;font-weight:500;padding:2px 6px;border:1px solid var(--bard-color-chrome-experiment-badge);border-radius:6px;vertical-align:bottom}.mode-text-advanced[_ngcontent-ng-c3114342097]{font-weight:400;letter-spacing:-.01875rem;color:transparent;-webkit-background-clip:text;background-clip:text;background-image:-webkit-linear-gradient(17.17deg,var(--bard-color-brand-text-gradient-stop-1) 11.63%,var(--bard-color-brand-text-gradient-stop-2) 40.43%,var(--bard-color-brand-text-gradient-stop-3) 68.07%);background-image:linear-gradient(72.83deg,var(--bard-color-brand-text-gradient-stop-1) 11.63%,var(--bard-color-brand-text-gradient-stop-2) 40.43%,var(--bard-color-brand-text-gradient-stop-3) 68.07%)}</style><style>.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
</style><style>[_nghost-ng-c3177278963]{position:relative;max-width:940px;width:100%;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;z-index:2;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-moz-box-sizing:border-box;box-sizing:border-box;padding-inline:16px;background:-webkit-linear-gradient(top,rgba(var(--gem-sys-color--surface--rgb),0) 50px,rgba(var(--gem-sys-color--surface--rgb),100) 50px);background:linear-gradient(180deg,rgba(var(--gem-sys-color--surface--rgb),0) 50px,rgba(var(--gem-sys-color--surface--rgb),100) 50px)}.input-gradient[_nghost-ng-c3177278963]:before{content:"";position:absolute;top:-50px;bottom:0;inset-inline-start:0;width:100%;height:100px;pointer-events:none;z-index:-1;background:-webkit-gradient(linear,left top,left bottom,from(rgba(var(--gem-sys-color--surface--rgb),0)),color-stop(60%,rgba(var(--gem-sys-color--surface--rgb),100)));background:-webkit-linear-gradient(top,rgba(var(--gem-sys-color--surface--rgb),0),rgba(var(--gem-sys-color--surface--rgb),100) 60%);background:linear-gradient(180deg,rgba(var(--gem-sys-color--surface--rgb),0),rgba(var(--gem-sys-color--surface--rgb),100) 60%)}.capabilities-disclaimer[_ngcontent-ng-c3177278963]{color:var(--gem-sys-color--on-surface-variant);text-align:center}.capabilities-disclaimer[_ngcontent-ng-c3177278963]   p[_ngcontent-ng-c3177278963]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--label-m-alt-font-size);font-weight:var(--gem-sys-typography-type-scale--label-m-alt-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-m-alt-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-m-alt-line-height)}@media screen and (min-width:960px){.capabilities-disclaimer[_ngcontent-ng-c3177278963]   p[_ngcontent-ng-c3177278963]{margin-block:var(--gem-sys-spacing--l)}}.input-area-container[_ngcontent-ng-c3177278963]{text-align:center;max-width:830px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;width:100%;position:relative}sign-in-nudge[_ngcontent-ng-c3177278963]{position:absolute;top:0;left:0;right:0;margin:auto;-webkit-transform:translateY(calc(-100% - var(--gem-sys-spacing--l)));transform:translateY(calc(-100% - var(--gem-sys-spacing--l)));width:100%;min-height:72px;max-width:760px}@media only screen and (max-width:768px){sign-in-nudge[_ngcontent-ng-c3177278963]{width:calc(100% - var(--gem-sys-spacing--l)*2)}}file-drop-indicator[_ngcontent-ng-c3177278963]{bottom:0;position:absolute;z-index:1}input-area-v2.file-drop-indicator-height[_ngcontent-ng-c3177278963]{overflow:hidden;height:200px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-content:flex-end;-ms-flex-line-pack:end;align-content:flex-end}.footer-privacy-notice-link[_ngcontent-ng-c3177278963]{color:var(--gem-sys-color--on-surface-variant);white-space:nowrap}condensed-tos-disclaimer[_ngcontent-ng-c3177278963]{max-width:830px;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;width:100%}.ui-improvements-phase-1[_nghost-ng-c3177278963]   .input-area-container[_ngcontent-ng-c3177278963], .ui-improvements-phase-1[_nghost-ng-c3177278963]   condensed-tos-disclaimer[_ngcontent-ng-c3177278963]{max-width:760px}</style><style>.capabilities-disclaimer[_ngcontent-ng-c2230343899]{color:var(--gem-sys-color--on-surface-variant);text-align:center}.footer-privacy-notice-link[_ngcontent-ng-c2230343899]{color:var(--gem-sys-color--on-surface-variant);white-space:nowrap}.desktop-spacing[_ngcontent-ng-c2230343899]{margin-block:var(--gem-sys-spacing--l)}</style><style>[_nghost-ng-c3598689639]{display:contents}.restart-chat-button-scroll-placeholder[_ngcontent-ng-c3598689639]{margin-top:0}.restart-chat-button-scroll-placeholder.visible[_ngcontent-ng-c3598689639]{margin-top:69px}.restart-chat-button-container[_ngcontent-ng-c3598689639]   .restart-chat-button[_ngcontent-ng-c3598689639]{background-color:var(--gem-sys-color--primary);border-radius:100px;height:56px;padding:10px 44px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);position:absolute;bottom:7px}.upgrade-to-continue[_ngcontent-ng-c3598689639]{background-color:var(--gem-sys-color--surface-container);border-radius:8px;padding:30px 80px;margin-bottom:50px;text-align:center}@media only screen and (max-width:768px){.upgrade-to-continue[_ngcontent-ng-c3598689639]{padding:30px 49px}}.upgrade-to-continue[_ngcontent-ng-c3598689639]   a[_ngcontent-ng-c3598689639]{color:var(--gem-sys-color--primary);display:block;margin-top:20px}.upgrade-to-continue[_ngcontent-ng-c3598689639]   button[_ngcontent-ng-c3598689639]{border-radius:20px;margin-top:20px;padding:20px}.chat-history[_ngcontent-ng-c3598689639]{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:16px;padding-bottom:20px}@media only screen and (min-width:768px){.chat-history[_ngcontent-ng-c3598689639]{-webkit-padding-start:28px;-moz-padding-start:28px;padding-inline-start:28px}}.centered-content[_ngcontent-ng-c3598689639]{-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.centered-content[_ngcontent-ng-c3598689639]   .zero-state-container[_ngcontent-ng-c3598689639]{height:100%;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.conversation-container[_ngcontent-ng-c3598689639]{max-width:724px;width:100%;margin:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;scroll-margin-top:16px}.conversation-container.tts-removed[_ngcontent-ng-c3598689639]{max-width:760px}.conversation-container[_ngcontent-ng-c3598689639]   user-query[_ngcontent-ng-c3598689639]{max-width:760px;width:100%}.conversation-container[_ngcontent-ng-c3598689639]   dual-model-response[_ngcontent-ng-c3598689639]{width:100%}.conversation-container[_ngcontent-ng-c3598689639]   model-response[_ngcontent-ng-c3598689639]{width:100%}.conversation-container.side-by-side[_ngcontent-ng-c3598689639]{max-width:1172px}.conversation-container[_ngcontent-ng-c3598689639]   disclaimer[_ngcontent-ng-c3598689639]{margin-bottom:40px}@media screen and (min-width:960px){.conversation-container[_ngcontent-ng-c3598689639]   disclaimer.with-chat-padding[_ngcontent-ng-c3598689639]{margin-inline:44px}}.conversation-container[_ngcontent-ng-c3598689639]   disclaimer[_ngcontent-ng-c3598689639]   a[_ngcontent-ng-c3598689639]{color:inherit}.zero-state-container[_ngcontent-ng-c3598689639]{max-width:830px;width:100%;margin:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.zero-state-container[_ngcontent-ng-c3598689639]   response-container[_ngcontent-ng-c3598689639]{margin-top:16px}.zero-state-container.bot-info-card-container[_ngcontent-ng-c3598689639]{-webkit-box-flex:1;-webkit-flex:1 0 auto;-moz-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}zs-advanced-upsell[_ngcontent-ng-c3598689639]{position:absolute;top:0;right:0;z-index:2}audio-overview-discovery-dialog[_ngcontent-ng-c3598689639]{position:absolute;top:0;right:0;z-index:2}.chat-history-scroll-container[_ngcontent-ng-c3598689639]{height:100%;width:100%;position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.human-review-disclosure-container[_ngcontent-ng-c3598689639]{position:absolute;bottom:0;max-width:940px;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;margin-bottom:16px;-moz-box-sizing:border-box;box-sizing:border-box;padding-left:20px;padding-right:20px;margin-top:32px}.human-review-disclosure-container[_ngcontent-ng-c3598689639]   quota-exceeded-message[_ngcontent-ng-c3598689639]{margin-bottom:0}.hidden-content-image-cache[_ngcontent-ng-c3598689639]{display:none}deep-research-chat-disclaimer[_ngcontent-ng-c3598689639], experimental-mode-disclaimer[_ngcontent-ng-c3598689639], human-review-disclosure[_ngcontent-ng-c3598689639]{max-width:830px;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;width:100%}quota-exceeded-message.extra-margin[_ngcontent-ng-c3598689639], quota-limit-warning.extra-margin[_ngcontent-ng-c3598689639]{margin-top:20px}@media screen and (min-width:960px){quota-exceeded-message.extra-margin[_ngcontent-ng-c3598689639]     .quota-limit-warning, quota-limit-warning.extra-margin[_ngcontent-ng-c3598689639]     .quota-limit-warning{-webkit-margin-start:0;-moz-margin-start:0;margin-inline-start:0}}@media screen and (min-width:960px){quota-exceeded-message.with-chat-padding[_ngcontent-ng-c3598689639], quota-limit-warning.with-chat-padding[_ngcontent-ng-c3598689639]{-webkit-margin-start:50px;-moz-margin-start:50px;margin-inline-start:50px}}.ui-improvements-phase-1[_nghost-ng-c3598689639]   .zero-state-container[_ngcontent-ng-c3598689639], .ui-improvements-phase-1[_nghost-ng-c3598689639]   deep-research-chat-disclaimer[_ngcontent-ng-c3598689639], .ui-improvements-phase-1[_nghost-ng-c3598689639]   experimental-mode-disclaimer[_ngcontent-ng-c3598689639], .ui-improvements-phase-1[_nghost-ng-c3598689639]   human-review-disclosure[_ngcontent-ng-c3598689639]{max-width:696px}freemium-file-upload-near-quota-disclaimer[_ngcontent-ng-c3598689639], freemium-file-upload-quota-exceeded-disclaimer[_ngcontent-ng-c3598689639], thinking-limit-disclaimer[_ngcontent-ng-c3598689639]{display:block;margin-bottom:40px}@media screen and (min-width:960px){freemium-file-upload-near-quota-disclaimer[_ngcontent-ng-c3598689639], freemium-file-upload-quota-exceeded-disclaimer[_ngcontent-ng-c3598689639], thinking-limit-disclaimer[_ngcontent-ng-c3598689639]{margin-inline:44px}}freemium-file-upload-near-quota-disclaimer[_ngcontent-ng-c3598689639]:empty, freemium-file-upload-quota-exceeded-disclaimer[_ngcontent-ng-c3598689639]:empty, thinking-limit-disclaimer[_ngcontent-ng-c3598689639]:empty{padding-bottom:0;margin-inline:0;margin:0}get-app-desktop-dialog[_ngcontent-ng-c3598689639]{width:462px;height:104px;margin-right:20px;-webkit-align-self:end;-ms-flex-item-align:end;align-self:end}</style><style>[_nghost-ng-c3596924178]{overflow:hidden scroll;overflow-anchor:unset}[_nghost-ng-c3596924178]     .fade-out{-webkit-animation:_ngcontent-ng-c3596924178_fade-out .2s linear;animation:_ngcontent-ng-c3596924178_fade-out .2s linear;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes _ngcontent-ng-c3596924178_fade-out{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-ng-c3596924178_fade-out{0%{opacity:1}to{opacity:0}}</style><style>.user-icon[_ngcontent-ng-c2552956441]{border-radius:50%}</style><style>[_nghost-ng-c1792219187]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;min-width:0;background-color:var(--gem-sys-color--surface-container);border-radius:32px;box-shadow:inset 0 0 0 1px transparent;width:100%}.input-area[_ngcontent-ng-c1792219187]{--input-area-content-size:48px;width:100%;padding:0 0 0;display:block;-webkit-box-align:end;-webkit-align-items:flex-end;-moz-box-align:end;-ms-flex-align:end;align-items:flex-end;position:relative}.input-area[_ngcontent-ng-c1792219187]   .fullscreen-button-container[_ngcontent-ng-c1792219187]   .fullscreen-button[_ngcontent-ng-c1792219187], .input-area[_ngcontent-ng-c1792219187]   .speech-dictation-mic-button[_ngcontent-ng-c1792219187]     .speech_dictation_mic_button{--mat-icon-button-icon-color:var(--gem-sys-color--on-surface-variant);--mat-icon-button-state-layer-color:var(--bard-color-input-area-buttons-hover-background);--mat-icon-button-ripple-color:var(--gem-sys-color--primary-container)}.input-area[_ngcontent-ng-c1792219187]   .fullscreen-button-container[_ngcontent-ng-c1792219187]   .fullscreen-button[_ngcontent-ng-c1792219187]     span, .input-area[_ngcontent-ng-c1792219187]   .speech-dictation-mic-button[_ngcontent-ng-c1792219187]     .speech_dictation_mic_button   span{z-index:-1}.input-area[_ngcontent-ng-c1792219187]   .upload-button[_ngcontent-ng-c1792219187]{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}@media only screen and (max-width:768px){.input-area[_ngcontent-ng-c1792219187]   .mic-button-container[_ngcontent-ng-c1792219187]{opacity:1;visibility:visible;-webkit-transition:opacity .1s .1s;transition:opacity .1s .1s;pointer-events:auto}.input-area[_ngcontent-ng-c1792219187]   .mic-button-container.hidden[_ngcontent-ng-c1792219187]{opacity:0;visibility:hidden;pointer-events:none;display:none;-webkit-transition:opacity .1s 0ms,visibility 0ms linear 0ms;transition:opacity .1s 0ms,visibility 0ms linear 0ms}}.input-area[_ngcontent-ng-c1792219187]   .disabled[_ngcontent-ng-c1792219187]{border-color:rgba(var(--gem-sys-color--on-surface--rgb),.38);color:rgba(var(--gem-sys-color--on-surface--rgb),.38);cursor:default;pointer-events:none}.input-area[_ngcontent-ng-c1792219187]   .disabled[_ngcontent-ng-c1792219187]    .ql-blank:before{color:rgba(var(--gem-sys-color--on-surface--rgb),.38)}.input-area[_ngcontent-ng-c1792219187]   .input-buttons-wrapper-top[_ngcontent-ng-c1792219187]{position:absolute;top:10px;right:20px}[dir=rtl][_nghost-ng-c1792219187]   .input-area[_ngcontent-ng-c1792219187]   .input-buttons-wrapper-top[_ngcontent-ng-c1792219187], [dir=rtl]   [_nghost-ng-c1792219187]   .input-area[_ngcontent-ng-c1792219187]   .input-buttons-wrapper-top[_ngcontent-ng-c1792219187]{right:unset;left:8px}.input-area[_ngcontent-ng-c1792219187]   .fullscreen-button-container[_ngcontent-ng-c1792219187]{opacity:0;margin-top:0;margin-inline:0;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-transition:opacity .1s linear 0ms,-webkit-transform 0ms linear 0ms;transition:opacity .1s linear 0ms,-webkit-transform 0ms linear 0ms;transition:transform 0ms linear 0ms,opacity .1s linear 0ms;transition:transform 0ms linear 0ms,opacity .1s linear 0ms,-webkit-transform 0ms linear 0ms}.input-area[_ngcontent-ng-c1792219187]   .fullscreen-button-container.visible[_ngcontent-ng-c1792219187]{opacity:1;-webkit-transform:scale(1);transform:scale(1);-webkit-transition:opacity .2s linear .1s,-webkit-transform .3s cubic-bezier(.2,0,0,1) .1s;transition:opacity .2s linear .1s,-webkit-transform .3s cubic-bezier(.2,0,0,1) .1s;transition:transform .3s cubic-bezier(.2,0,0,1) .1s,opacity .2s linear .1s;transition:transform .3s cubic-bezier(.2,0,0,1) .1s,opacity .2s linear .1s,-webkit-transform .3s cubic-bezier(.2,0,0,1) .1s}.input-area[_ngcontent-ng-c1792219187]   .showing-prompt-from-history[_ngcontent-ng-c1792219187]    .ql-blank{overflow:hidden}.input-area[_ngcontent-ng-c1792219187]   .showing-prompt-from-history[_ngcontent-ng-c1792219187]    .ql-blank:after{border-radius:3px;background-color:var(--gem-sys-color--primary-fixed-dim);color:var(--gem-sys-color--on-primary-fixed);content:"tab";display:block;font-family:monospace;font-size:12px;height:18px;line-height:18px;margin-top:-20px;padding:0 3px;position:absolute;right:0;visibility:visible;pointer-events:none}.input-area[_ngcontent-ng-c1792219187]   .uploader-file-preview-container[_ngcontent-ng-c1792219187]{-webkit-margin-start:18px;-moz-margin-start:18px;margin-inline-start:18px;max-height:140px}.input-area[_ngcontent-ng-c1792219187]   .leading-actions-wrapper[_ngcontent-ng-c1792219187], .input-area[_ngcontent-ng-c1792219187]   .trailing-actions-wrapper[_ngcontent-ng-c1792219187]{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;min-height:var(--input-area-content-size)}.input-area[_ngcontent-ng-c1792219187]   .trailing-actions-wrapper[_ngcontent-ng-c1792219187]{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-bottom:4px}.input-area[_ngcontent-ng-c1792219187]   .trailing-actions-wrapper[_ngcontent-ng-c1792219187]   .input-buttons-wrapper-bottom[_ngcontent-ng-c1792219187]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}@media only screen and (min-width:768px){.input-area[_ngcontent-ng-c1792219187]   .trailing-actions-wrapper[_ngcontent-ng-c1792219187]   .input-buttons-wrapper-bottom[_ngcontent-ng-c1792219187]{-webkit-margin-start:8px;-moz-margin-start:8px;margin-inline-start:8px}}.input-area[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]{opacity:0;margin-top:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-margin-end:-40px;-moz-margin-end:-40px;margin-inline-end:-40px;-webkit-transition:opacity .1s linear 0ms,margin-inline .3s cubic-bezier(.2,0,0,1) 0ms,-webkit-transform 0ms linear 0ms;transition:opacity .1s linear 0ms,margin-inline .3s cubic-bezier(.2,0,0,1) 0ms,-webkit-transform 0ms linear 0ms;transition:transform 0ms linear 0ms,opacity .1s linear 0ms,margin-inline .3s cubic-bezier(.2,0,0,1) 0ms;transition:transform 0ms linear 0ms,opacity .1s linear 0ms,margin-inline .3s cubic-bezier(.2,0,0,1) 0ms,-webkit-transform 0ms linear 0ms}@media only screen and (max-width:768px){.input-area[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]{opacity:0;-webkit-transform:scale(1);transform:scale(1);-webkit-transition:opacity .1s 0ms;transition:opacity .1s 0ms}}.input-area[_ngcontent-ng-c1792219187]   .send-button-container.inner[_ngcontent-ng-c1792219187]{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:50% 50%;transform-origin:50% 50%}.input-area[_ngcontent-ng-c1792219187]   .send-button-container.inner.visible[_ngcontent-ng-c1792219187]{margin-inline:0;opacity:1;-webkit-transform:scale(1);transform:scale(1);-webkit-transition:opacity .2s linear .1s,-webkit-transform .3s cubic-bezier(.2,0,0,1) .1s,-webkit-margin-end .3s cubic-bezier(.2,0,0,1) 0ms;transition:opacity .2s linear .1s,-webkit-transform .3s cubic-bezier(.2,0,0,1) .1s,-webkit-margin-end .3s cubic-bezier(.2,0,0,1) 0ms;transition:transform .3s cubic-bezier(.2,0,0,1) .1s,opacity .2s linear .1s,margin-inline-end .3s cubic-bezier(.2,0,0,1) 0ms;transition:transform .3s cubic-bezier(.2,0,0,1) .1s,opacity .2s linear .1s,margin-inline-end .3s cubic-bezier(.2,0,0,1) 0ms,-webkit-transform .3s cubic-bezier(.2,0,0,1) .1s,-webkit-margin-end .3s cubic-bezier(.2,0,0,1) 0ms,-moz-margin-end .3s cubic-bezier(.2,0,0,1) 0ms}.input-area[_ngcontent-ng-c1792219187]   .send-button-container.inner.visible.is-mobile-device[_ngcontent-ng-c1792219187]{opacity:1;-webkit-transition:opacity .1s .1s;transition:opacity .1s .1s}[dir=rtl][_nghost-ng-c1792219187]   .input-area[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   .send-button[_ngcontent-ng-c1792219187], [dir=rtl]   [_nghost-ng-c1792219187]   .input-area[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   .send-button[_ngcontent-ng-c1792219187]{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.input-area[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   .send-button[_ngcontent-ng-c1792219187]   .hidden[_ngcontent-ng-c1792219187]{display:none}.input-area[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   .send-button[aria-disabled=true][_ngcontent-ng-c1792219187]{cursor:default;pointer-events:none;color:rgba(var(--gem-sys-color--on-surface--rgb),.38)}.input-area[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   .send-button[aria-disabled=true][_ngcontent-ng-c1792219187]     span{opacity:0}.input-area[_ngcontent-ng-c1792219187]   .blue-circle[_ngcontent-ng-c1792219187], .input-area[_ngcontent-ng-c1792219187]   .disabled[_ngcontent-ng-c1792219187]   .blue-circle[_ngcontent-ng-c1792219187]{width:var(--input-area-content-size);height:var(--input-area-content-size);border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:-12px;-webkit-margin-start:-12px;-moz-margin-start:-12px;margin-inline-start:-12px}.input-area[_ngcontent-ng-c1792219187]   .blue-circle[_ngcontent-ng-c1792219187]{background-color:var(--gem-sys-color--primary-container)}.input-area[_ngcontent-ng-c1792219187]   .stop-icon[_ngcontent-ng-c1792219187]{color:var(--gem-sys-color--primary);background-color:rgba(var(--gem-sys-color--primary--rgb),.08)}.input-area[_ngcontent-ng-c1792219187]   .disabled[_ngcontent-ng-c1792219187]   .blue-circle[_ngcontent-ng-c1792219187]{background-color:rgba(var(--gem-sys-color--on-surface--rgb),.38)}.input-area[_ngcontent-ng-c1792219187]   mat-form-field[_ngcontent-ng-c1792219187]    {-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;background-color:var(--gem-sys-color--surface);--mdc-shape-small:28px}.input-area[_ngcontent-ng-c1792219187]   mat-form-field[_ngcontent-ng-c1792219187]     .mat-mdc-form-field-subscript-wrapper{display:none}.input-area[_ngcontent-ng-c1792219187]   mat-form-field[_ngcontent-ng-c1792219187]     .mat-mdc-text-field-wrapper{--mat-form-field-filled-container-shape:var(--mdc-shape-small);--mat-form-field-outlined-container-shape:var(--mdc-shape-small);-webkit-padding-start:20px;-moz-padding-start:20px;padding-inline-start:20px}.text-input-field[_ngcontent-ng-c1792219187]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding-block:4px;padding-inline:8px 12px}.text-input-field.fullscreen[_ngcontent-ng-c1792219187], .text-input-field.with-file-preview[_ngcontent-ng-c1792219187]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column nowrap}.text-input-field.height-expanded-past-single-line[_ngcontent-ng-c1792219187], .text-input-field.with-file-preview[_ngcontent-ng-c1792219187]{border-radius:16px}.text-input-field_textarea-wrapper[_ngcontent-ng-c1792219187]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-margin-start:18px;-moz-margin-start:18px;margin-inline-start:18px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding-block:16px;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;max-width:100%;overflow:hidden}.text-input-field_textarea-wrapper[_ngcontent-ng-c1792219187]   .text-input-field-main-area[_ngcontent-ng-c1792219187]{width:100%}.text-input-field_textarea-wrapper.pre-fullscreen[_ngcontent-ng-c1792219187]{height:192px;-webkit-transition:height .4s cubic-bezier(.2,0,0,1);transition:height .4s cubic-bezier(.2,0,0,1)}.text-input-field_textarea-wrapper.fullscreen[_ngcontent-ng-c1792219187]{height:calc(var(--chat-container-height) - 16px - var(--uploader-height));-webkit-transition:height .4s cubic-bezier(.2,0,0,1);transition:height .4s cubic-bezier(.2,0,0,1)}.input-area[_ngcontent-ng-c1792219187]   .text-input-field_textarea[_ngcontent-ng-c1792219187]{width:100%;height:auto;top:0}.text-input-field_textarea-inner[_ngcontent-ng-c1792219187]{position:relative}.send-button-icon[_ngcontent-ng-c1792219187]{color:var(--gem-sys-color--on-surface)}[_nghost-ng-c1792219187]{background-color:var(--gem-sys-color--surface);border:1px solid var(--gem-sys-color--outline-variant);-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:border-radius .1s cubic-bezier(.2,0,0,1),height .15s cubic-bezier(.2,0,0,1);transition:border-radius .1s cubic-bezier(.2,0,0,1),height .15s cubic-bezier(.2,0,0,1)}[_nghost-ng-c1792219187]:has(.height-expanded-past-single-line), [_nghost-ng-c1792219187]:has(.with-file-preview), [_nghost-ng-c1792219187]:has(.with-toolbox-drawer){border-radius:24px}[_nghost-ng-c1792219187]   .input-area[_ngcontent-ng-c1792219187]{--input-area-content-size:42px}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]{display:grid;grid-template:"file-preview     file-preview  file-preview" 1fr "leading-actions  text-input    trailing-actions" auto/auto 1fr auto;-webkit-column-gap:var(--gem-sys-spacing--s);-moz-column-gap:var(--gem-sys-spacing--s);column-gap:var(--gem-sys-spacing--s);padding:var(--gem-sys-spacing--s)}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]:has(.uploader-file-preview-container){row-gap:var(--gem-sys-spacing--s)}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .leading-actions-wrapper[_ngcontent-ng-c1792219187]{grid-area:leading-actions}[_nghost-ng-c1792219187]   .text-input-field_textarea-wrapper[_ngcontent-ng-c1792219187]{grid-area:text-input;-webkit-margin-start:0;-moz-margin-start:0;margin-inline-start:0;padding-block:calc((var(--input-area-content-size) - 24px)/2)}[_nghost-ng-c1792219187]   .text-input-field_textarea-wrapper.pre-fullscreen[_ngcontent-ng-c1792219187]{height:unset}[_nghost-ng-c1792219187]   .text-input-field_textarea-inner[_ngcontent-ng-c1792219187]{-webkit-transition:height .25s;transition:height .25s}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .uploader-file-preview-container[_ngcontent-ng-c1792219187]{grid-area:file-preview;margin-inline:0 calc(42px + var(--gem-sys-spacing--s));max-height:168px}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .trailing-actions-wrapper[_ngcontent-ng-c1792219187]{grid-area:trailing-actions;-webkit-margin-after:0;margin-block-end:0}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .trailing-actions-wrapper[_ngcontent-ng-c1792219187]   .input-buttons-wrapper-bottom[_ngcontent-ng-c1792219187]{-webkit-margin-start:0;-moz-margin-start:0;margin-inline-start:0;position:relative;-webkit-transition:gap .25s cubic-bezier(.2,0,0,1);transition:gap .25s cubic-bezier(.2,0,0,1)}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .trailing-actions-wrapper[_ngcontent-ng-c1792219187]   .input-buttons-wrapper-bottom[_ngcontent-ng-c1792219187]:has(.mic-button-container:not(.hidden)):has(.send-button-container.inner.visible){gap:var(--gem-sys-spacing--s)}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .input-buttons-wrapper-top[_ngcontent-ng-c1792219187]{top:var(--gem-sys-spacing--s);right:var(--gem-sys-spacing--s)}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   button[mat-icon-button].send-button.submit[_ngcontent-ng-c1792219187]{background-color:var(--gem-sys-color--surface-container);--mat-icon-button-icon-color:var(--gem-sys-color--on-surface);--mat-icon-button-state-layer-size:42px;--mat-icon-button-state-layer-color:var(--gem-sys-color--on-surface-variant);--mat-icon-button-hover-state-layer-opacity:0.08;--mat-icon-button-pressed-state-layer-opacity:0.08}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   button[mat-icon-button].send-button.submit.waiting[_ngcontent-ng-c1792219187]{background-color:initial}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   button[mat-icon-button].send-button.submit.waiting[_ngcontent-ng-c1792219187]   .send-button-icon[_ngcontent-ng-c1792219187]{color:rgba(var(--gm3-sys-color-on-surface-rgb),.38)}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   button[mat-icon-button].send-button.stop[_ngcontent-ng-c1792219187]{--mat-icon-button-state-layer-size:42px;--mat-icon-button-state-layer-color:var(--gem-sys-color--primary-container);--mat-icon-button-hover-state-layer-opacity:0.08;--mat-icon-button-pressed-state-layer-opacity:0.08;--mat-icon-button-ripple-color:var(--gem-sys-color--primary-container)}:where(.with-toolbox-drawer)   [_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   button[mat-icon-button].send-button.stop[_ngcontent-ng-c1792219187], :where(.with-toolbox-drawer)   [_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .send-button-container[_ngcontent-ng-c1792219187]   button[mat-icon-button].send-button.submit[_ngcontent-ng-c1792219187]{--mat-icon-button-state-layer-size:40px}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .mic-button-container[_ngcontent-ng-c1792219187]{visibility:visible;opacity:1;pointer-events:auto;-webkit-transition:opacity .15s linear .1s,display;transition:opacity .15s linear .1s,display;transition-behavior:allow-discrete}@starting-style{[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .mic-button-container[_ngcontent-ng-c1792219187]{opacity:0}}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .mic-button-container.hidden[_ngcontent-ng-c1792219187]{opacity:0;display:none;pointer-events:none;position:absolute;right:0;-webkit-transition-duration:.1s;transition-duration:.1s;-webkit-transition-delay:0ms;transition-delay:0ms}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .send-button-container.inner[_ngcontent-ng-c1792219187]{-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0;-webkit-transform:scale(1);transform:scale(1);opacity:1;pointer-events:auto;-webkit-transition:opacity .15s linear .1s,display;transition:opacity .15s linear .1s,display;transition-behavior:allow-discrete}@starting-style{[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .send-button-container.inner[_ngcontent-ng-c1792219187]{opacity:0}}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .send-button-container.inner[_ngcontent-ng-c1792219187]:not(.visible){opacity:0;display:none;pointer-events:none;position:absolute;right:0;-webkit-transition-duration:.1s;transition-duration:.1s;-webkit-transition-delay:0ms;transition-delay:0ms}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .blue-circle[_ngcontent-ng-c1792219187], [_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]   .disabled[_ngcontent-ng-c1792219187]   .blue-circle[_ngcontent-ng-c1792219187]{margin:0;position:absolute;inset:0}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]:where(.with-toolbox-drawer){display:grid;grid-template:"file-preview     file-preview       file-preview" auto "text-input       text-input         text-input" auto "leading-actions  leading-actions    trailing-actions" 1fr/1fr 1fr auto}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]:where(.with-toolbox-drawer)   .leading-actions-wrapper[_ngcontent-ng-c1792219187]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--gem-sys-spacing--s)}[_nghost-ng-c1792219187]   .text-input-field[_ngcontent-ng-c1792219187]:where(.with-toolbox-drawer)   .text-input-field_textarea-wrapper[_ngcontent-ng-c1792219187]{padding-inline:var(--gem-sys-spacing--m);margin-bottom:var(--gem-sys-spacing--s)}[_nghost-ng-c1792219187]   input-power-up[_ngcontent-ng-c1792219187]{--power-up-button-container-color:transparent;--power-up-button-disabled-container-color:var(--gem-sys-color--surface-container-low)}</style><style>a[mat-button][_ngcontent-ng-c1668555136], button[mat-button][_ngcontent-ng-c1668555136], button[mat-flat-button][_ngcontent-ng-c1668555136], button[mat-icon-button][_ngcontent-ng-c1668555136], button[mat-raised-button][_ngcontent-ng-c1668555136], button[mat-stroked-button][_ngcontent-ng-c1668555136]{border-radius:100px;height:40px}a[mat-button][_ngcontent-ng-c1668555136], button[mat-button][_ngcontent-ng-c1668555136]{padding:10px 12px;color:var(--gem-sys-color--primary)}a[mat-button][_ngcontent-ng-c1668555136]:hover, button[mat-button][_ngcontent-ng-c1668555136]:hover{color:var(--gem-sys-color--primary);background:rgba(var(--gem-sys-color--primary--rgb),.08)}button[mat-flat-button][_ngcontent-ng-c1668555136]{padding:10px 24px;color:var(--gem-sys-color--on-primary);background:var(--gem-sys-color--primary)}button[mat-flat-button][_ngcontent-ng-c1668555136]:hover{padding:10px 24px;background:var(--gem-sys-color--primary)}button[mat-stroked-button][_ngcontent-ng-c1668555136]{padding:10px 24px;color:var(--gem-sys-color--primary);border:1px solid var(--gem-sys-color--outline)}button[mat-stroked-button][_ngcontent-ng-c1668555136]:hover{color:var(--gem-sys-color--primary);background:rgba(var(--gem-sys-color--primary--rgb),.08);border:1px solid var(--gem-sys-color--outline)}button[mat-stroked-button][_ngcontent-ng-c1668555136]:focus{color:var(--gem-sys-color--primary);background:rgba(var(--gem-sys-color--primary--rgb),.12);border-color:var(--gem-sys-color--outline)}button[_ngcontent-ng-c1668555136]:disabled{color:rgba(var(--gem-sys-color--on-surface--rgb),.38)}button[mat-flat-button][_ngcontent-ng-c1668555136]:disabled{background:rgba(var(--gem-sys-color--on-surface--rgb),.12)}button[mat-stroked-button][_ngcontent-ng-c1668555136]:disabled{border:1px solid rgba(var(--gem-sys-color--on-surface--rgb),.12)}.container[_ngcontent-ng-c1668555136]{width:696px;margin:auto}.context-action-button[_ngcontent-ng-c1668555136]{color:var(--gem-sys-color--on-surface)}.container.visible[_ngcontent-ng-c1668555136]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;gap:var(--gem-sys-spacing--l)}.container.hidden[_ngcontent-ng-c1668555136]{display:none}button.context-action-button[_ngcontent-ng-c1668555136]{z-index:3;border:1px solid var(--bard-color-share-title-card-border);font-weight:400;color:var(--gem-sys-color--on-surface);border-radius:var(--gem-sys-shape--corner-large);margin:var(--gem-sys-spacing--m)}</style><style>[_nghost-ng-c2120377214]{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%}.overlay-container[_ngcontent-ng-c2120377214]{-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;background-color:rgba(var(--gem-sys-color--surface-container-low--rgb),.6);-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);border:1px dashed rgba(var(--gem-sys-color--text-basic-stop-high--rgb),.8);border-radius:24px;-moz-box-sizing:border-box;box-sizing:border-box;color:var(--gem-sys-color--text-basic-stop-high);display:block;text-align:center;width:100%}.overlay-container[data-filedrop-id=chat-window-input-container][_ngcontent-ng-c2120377214]{height:200px;max-width:760px}.overlay-container[data-filedrop-id=gem-preview-chat][_ngcontent-ng-c2120377214], .overlay-container[data-filedrop-id=gem-preview-knowledge][_ngcontent-ng-c2120377214], .overlay-container[data-filedrop-id=studio-sidebar][_ngcontent-ng-c2120377214]{height:100%;position:relative;width:100%;border-radius:var(--gem-sys-spacing--s)}.overlay-container.isDraggedOver[_ngcontent-ng-c2120377214]{background-color:rgba(var(--gem-sys-color--primary-container--rgb),.6);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}</style><style>@charset "UTF-8"; {
  





}  .ql-container{-moz-box-sizing:border-box;box-sizing:border-box;font-family:Helvetica,Arial,sans-serif;font-size:13px;height:100%;margin:0;position:relative}  .ql-container.ql-disabled .ql-tooltip{visibility:hidden}  .ql-container.ql-disabled .ql-editor ul[data-checked]>li:before{pointer-events:none}  .ql-clipboard{left:-100000px;height:1px;overflow-y:hidden;position:absolute;top:50%}  .ql-clipboard p{margin:0;padding:0}  .ql-editor{-moz-box-sizing:border-box;box-sizing:border-box;line-height:1.42;height:100%;outline:none;overflow-y:auto;padding:12px 15px;tab-size:4;-moz-tab-size:4;text-align:left;white-space:pre-wrap;word-wrap:break-word}  .ql-editor>*{cursor:text}  .ql-editor blockquote,   .ql-editor h1,   .ql-editor h2,   .ql-editor h3,   .ql-editor h4,   .ql-editor h5,   .ql-editor h6,   .ql-editor ol,   .ql-editor p,   .ql-editor pre,   .ql-editor ul{margin:0;padding:0;counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}  .ql-editor ol,   .ql-editor ul{padding-left:1.5em}  .ql-editor ol>li,   .ql-editor ul>li{list-style-type:none}  .ql-editor ul>li:before{content:"•"}  .ql-editor ul[data-checked=false],   .ql-editor ul[data-checked=true]{pointer-events:none}  .ql-editor ul[data-checked=false]>li *,   .ql-editor ul[data-checked=true]>li *{pointer-events:all}  .ql-editor ul[data-checked=false]>li:before,   .ql-editor ul[data-checked=true]>li:before{color:#777;cursor:pointer;pointer-events:all}  .ql-editor ul[data-checked=true]>li:before{content:"☑"}  .ql-editor ul[data-checked=false]>li:before{content:"☐"}  .ql-editor li:before{display:inline-block;white-space:nowrap;width:1.2em}  .ql-editor li:not(.ql-direction-rtl):before{margin-left:-1.5em;margin-right:.3em;text-align:right}  .ql-editor li.ql-direction-rtl:before{margin-left:.3em;margin-right:-1.5em}  .ql-editor ol li:not(.ql-direction-rtl),   .ql-editor ul li:not(.ql-direction-rtl){padding-left:1.5em}  .ql-editor ol li.ql-direction-rtl,   .ql-editor ul li.ql-direction-rtl{padding-right:1.5em}  .ql-editor ol li{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;counter-increment:list-0}  .ql-editor ol li:before{content:counter(list-0,decimal) ". "}  .ql-editor ol li.ql-indent-1{counter-increment:list-1}  .ql-editor ol li.ql-indent-1:before{content:counter(list-1,lower-alpha) ". "}  .ql-editor ol li.ql-indent-1{counter-reset:list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}  .ql-editor ol li.ql-indent-2{counter-increment:list-2}  .ql-editor ol li.ql-indent-2:before{content:counter(list-2,lower-roman) ". "}  .ql-editor ol li.ql-indent-2{counter-reset:list-3 list-4 list-5 list-6 list-7 list-8 list-9}  .ql-editor ol li.ql-indent-3{counter-increment:list-3}  .ql-editor ol li.ql-indent-3:before{content:counter(list-3,decimal) ". "}  .ql-editor ol li.ql-indent-3{counter-reset:list-4 list-5 list-6 list-7 list-8 list-9}  .ql-editor ol li.ql-indent-4{counter-increment:list-4}  .ql-editor ol li.ql-indent-4:before{content:counter(list-4,lower-alpha) ". "}  .ql-editor ol li.ql-indent-4{counter-reset:list-5 list-6 list-7 list-8 list-9}  .ql-editor ol li.ql-indent-5{counter-increment:list-5}  .ql-editor ol li.ql-indent-5:before{content:counter(list-5,lower-roman) ". "}  .ql-editor ol li.ql-indent-5{counter-reset:list-6 list-7 list-8 list-9}  .ql-editor ol li.ql-indent-6{counter-increment:list-6}  .ql-editor ol li.ql-indent-6:before{content:counter(list-6,decimal) ". "}  .ql-editor ol li.ql-indent-6{counter-reset:list-7 list-8 list-9}  .ql-editor ol li.ql-indent-7{counter-increment:list-7}  .ql-editor ol li.ql-indent-7:before{content:counter(list-7,lower-alpha) ". "}  .ql-editor ol li.ql-indent-7{counter-reset:list-8 list-9}  .ql-editor ol li.ql-indent-8{counter-increment:list-8}  .ql-editor ol li.ql-indent-8:before{content:counter(list-8,lower-roman) ". "}  .ql-editor ol li.ql-indent-8{counter-reset:list-9}  .ql-editor ol li.ql-indent-9{counter-increment:list-9}  .ql-editor ol li.ql-indent-9:before{content:counter(list-9,decimal) ". "}  .ql-editor .ql-indent-1:not(.ql-direction-rtl){padding-left:3em}  .ql-editor li.ql-indent-1:not(.ql-direction-rtl){padding-left:4.5em}  .ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:3em}  .ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:4.5em}  .ql-editor .ql-indent-2:not(.ql-direction-rtl){padding-left:6em}  .ql-editor li.ql-indent-2:not(.ql-direction-rtl){padding-left:7.5em}  .ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:6em}  .ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:7.5em}  .ql-editor .ql-indent-3:not(.ql-direction-rtl){padding-left:9em}  .ql-editor li.ql-indent-3:not(.ql-direction-rtl){padding-left:10.5em}  .ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:9em}  .ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:10.5em}  .ql-editor .ql-indent-4:not(.ql-direction-rtl){padding-left:12em}  .ql-editor li.ql-indent-4:not(.ql-direction-rtl){padding-left:13.5em}  .ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:12em}  .ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:13.5em}  .ql-editor .ql-indent-5:not(.ql-direction-rtl){padding-left:15em}  .ql-editor li.ql-indent-5:not(.ql-direction-rtl){padding-left:16.5em}  .ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:15em}  .ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:16.5em}  .ql-editor .ql-indent-6:not(.ql-direction-rtl){padding-left:18em}  .ql-editor li.ql-indent-6:not(.ql-direction-rtl){padding-left:19.5em}  .ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:18em}  .ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:19.5em}  .ql-editor .ql-indent-7:not(.ql-direction-rtl){padding-left:21em}  .ql-editor li.ql-indent-7:not(.ql-direction-rtl){padding-left:22.5em}  .ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:21em}  .ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:22.5em}  .ql-editor .ql-indent-8:not(.ql-direction-rtl){padding-left:24em}  .ql-editor li.ql-indent-8:not(.ql-direction-rtl){padding-left:25.5em}  .ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:24em}  .ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:25.5em}  .ql-editor .ql-indent-9:not(.ql-direction-rtl){padding-left:27em}  .ql-editor li.ql-indent-9:not(.ql-direction-rtl){padding-left:28.5em}  .ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:27em}  .ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:28.5em}  .ql-editor .ql-video{display:block;max-width:100%}  .ql-editor .ql-video.ql-align-center{margin:0 auto}  .ql-editor .ql-video.ql-align-right{margin:0 0 0 auto}  .ql-editor .ql-bg-black{background-color:#000}  .ql-editor .ql-bg-red{background-color:#e60000}  .ql-editor .ql-bg-orange{background-color:#f90}  .ql-editor .ql-bg-yellow{background-color:#ff0}  .ql-editor .ql-bg-green{background-color:#008a00}  .ql-editor .ql-bg-blue{background-color:#06c}  .ql-editor .ql-bg-purple{background-color:#93f}  .ql-editor .ql-color-white{color:#fff}  .ql-editor .ql-color-red{color:#e60000}  .ql-editor .ql-color-orange{color:#f90}  .ql-editor .ql-color-yellow{color:#ff0}  .ql-editor .ql-color-green{color:#008a00}  .ql-editor .ql-color-blue{color:#06c}  .ql-editor .ql-color-purple{color:#93f}  .ql-editor .ql-font-serif{font-family:Georgia,Times New Roman,serif}  .ql-editor .ql-font-monospace{font-family:Monaco,Courier New,monospace}  .ql-editor .ql-size-small{font-size:.75em}  .ql-editor .ql-size-large{font-size:1.5em}  .ql-editor .ql-size-huge{font-size:2.5em}  .ql-editor .ql-direction-rtl{direction:rtl;text-align:inherit}  .ql-editor .ql-align-center{text-align:center}  .ql-editor .ql-align-justify{text-align:justify}  .ql-editor .ql-align-right{text-align:right}  .ql-editor.ql-blank:before{color:rgba(0,0,0,.6);content:attr(data-placeholder);font-style:italic;left:15px;pointer-events:none;position:absolute;right:15px}  .ql-bubble .ql-toolbar:after,   .ql-bubble.ql-toolbar:after{clear:both;content:"";display:table}  .ql-bubble .ql-toolbar button,   .ql-bubble.ql-toolbar button{background:none;border:none;cursor:pointer;display:inline-block;float:left;height:24px;padding:3px 5px;width:28px}  .ql-bubble .ql-toolbar button svg,   .ql-bubble.ql-toolbar button svg{float:left;height:100%}  .ql-bubble .ql-toolbar button:active:hover,   .ql-bubble.ql-toolbar button:active:hover{outline:none}  .ql-bubble .ql-toolbar input.ql-image[type=file],   .ql-bubble.ql-toolbar input.ql-image[type=file]{display:none}  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected,   .ql-bubble .ql-toolbar .ql-picker-item:hover,   .ql-bubble .ql-toolbar .ql-picker-label.ql-active,   .ql-bubble .ql-toolbar .ql-picker-label:hover,   .ql-bubble .ql-toolbar button.ql-active,   .ql-bubble .ql-toolbar button:focus,   .ql-bubble .ql-toolbar button:hover,   .ql-bubble.ql-toolbar .ql-picker-item.ql-selected,   .ql-bubble.ql-toolbar .ql-picker-item:hover,   .ql-bubble.ql-toolbar .ql-picker-label.ql-active,   .ql-bubble.ql-toolbar .ql-picker-label:hover,   .ql-bubble.ql-toolbar button.ql-active,   .ql-bubble.ql-toolbar button:focus,   .ql-bubble.ql-toolbar button:hover{color:#fff}  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-fill,   .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,   .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-fill,   .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,   .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-fill,   .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,   .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-fill,   .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,   .ql-bubble .ql-toolbar button.ql-active .ql-fill,   .ql-bubble .ql-toolbar button.ql-active .ql-stroke.ql-fill,   .ql-bubble .ql-toolbar button:focus .ql-fill,   .ql-bubble .ql-toolbar button:focus .ql-stroke.ql-fill,   .ql-bubble .ql-toolbar button:hover .ql-fill,   .ql-bubble .ql-toolbar button:hover .ql-stroke.ql-fill,   .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-fill,   .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,   .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-fill,   .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,   .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-fill,   .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,   .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-fill,   .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,   .ql-bubble.ql-toolbar button.ql-active .ql-fill,   .ql-bubble.ql-toolbar button.ql-active .ql-stroke.ql-fill,   .ql-bubble.ql-toolbar button:focus .ql-fill,   .ql-bubble.ql-toolbar button:focus .ql-stroke.ql-fill,   .ql-bubble.ql-toolbar button:hover .ql-fill,   .ql-bubble.ql-toolbar button:hover .ql-stroke.ql-fill{fill:#fff}  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,   .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,   .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke,   .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,   .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke,   .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,   .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke,   .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,   .ql-bubble .ql-toolbar button.ql-active .ql-stroke,   .ql-bubble .ql-toolbar button.ql-active .ql-stroke-miter,   .ql-bubble .ql-toolbar button:focus .ql-stroke,   .ql-bubble .ql-toolbar button:focus .ql-stroke-miter,   .ql-bubble .ql-toolbar button:hover .ql-stroke,   .ql-bubble .ql-toolbar button:hover .ql-stroke-miter,   .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,   .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,   .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke,   .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,   .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke,   .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,   .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke,   .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,   .ql-bubble.ql-toolbar button.ql-active .ql-stroke,   .ql-bubble.ql-toolbar button.ql-active .ql-stroke-miter,   .ql-bubble.ql-toolbar button:focus .ql-stroke,   .ql-bubble.ql-toolbar button:focus .ql-stroke-miter,   .ql-bubble.ql-toolbar button:hover .ql-stroke,   .ql-bubble.ql-toolbar button:hover .ql-stroke-miter{stroke:#fff}@media (pointer:coarse){  .ql-bubble .ql-toolbar button:hover:not(.ql-active),   .ql-bubble.ql-toolbar button:hover:not(.ql-active){color:#ccc}  .ql-bubble .ql-toolbar button:hover:not(.ql-active) .ql-fill,   .ql-bubble .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,   .ql-bubble.ql-toolbar button:hover:not(.ql-active) .ql-fill,   .ql-bubble.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill{fill:#ccc}  .ql-bubble .ql-toolbar button:hover:not(.ql-active) .ql-stroke,   .ql-bubble .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,   .ql-bubble.ql-toolbar button:hover:not(.ql-active) .ql-stroke,   .ql-bubble.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter{stroke:#ccc}}  .ql-bubble{-moz-box-sizing:border-box;box-sizing:border-box}  .ql-bubble *{-moz-box-sizing:border-box;box-sizing:border-box}  .ql-bubble .ql-hidden{display:none}  .ql-bubble .ql-out-bottom,   .ql-bubble .ql-out-top{visibility:hidden}  .ql-bubble .ql-tooltip{position:absolute;-webkit-transform:translateY(10px);transform:translateY(10px)}  .ql-bubble .ql-tooltip a{cursor:pointer;text-decoration:none}  .ql-bubble .ql-tooltip.ql-flip{-webkit-transform:translateY(-10px);transform:translateY(-10px)}  .ql-bubble .ql-formats{display:inline-block;vertical-align:middle}  .ql-bubble .ql-formats:after{clear:both;content:"";display:table}  .ql-bubble .ql-stroke{fill:none;stroke:#ccc;stroke-linecap:round;stroke-linejoin:round;stroke-width:2}  .ql-bubble .ql-stroke-miter{fill:none;stroke:#ccc;stroke-miterlimit:10;stroke-width:2}  .ql-bubble .ql-fill,   .ql-bubble .ql-stroke.ql-fill{fill:#ccc}  .ql-bubble .ql-empty{fill:none}  .ql-bubble .ql-even{fill-rule:evenodd}  .ql-bubble .ql-stroke.ql-thin,   .ql-bubble .ql-thin{stroke-width:1}  .ql-bubble .ql-transparent{opacity:.4}  .ql-bubble .ql-direction svg:last-child{display:none}  .ql-bubble .ql-direction.ql-active svg:last-child{display:inline}  .ql-bubble .ql-direction.ql-active svg:first-child{display:none}  .ql-bubble .ql-editor h1{font-size:2em}  .ql-bubble .ql-editor h2{font-size:1.5em}  .ql-bubble .ql-editor h3{font-size:1.17em}  .ql-bubble .ql-editor h4{font-size:1em}  .ql-bubble .ql-editor h5{font-size:.83em}  .ql-bubble .ql-editor h6{font-size:.67em}  .ql-bubble .ql-editor a{text-decoration:underline}  .ql-bubble .ql-editor blockquote{border-left:4px solid #ccc;margin-bottom:5px;margin-top:5px;padding-left:16px}  .ql-bubble .ql-editor code,   .ql-bubble .ql-editor pre{background-color:#f0f0f0;border-radius:3px}  .ql-bubble .ql-editor pre{white-space:pre-wrap;margin-bottom:5px;margin-top:5px;padding:5px 10px}  .ql-bubble .ql-editor code{font-size:85%;padding:2px 4px}  .ql-bubble .ql-editor pre.ql-syntax{background-color:#23241f;color:#f8f8f2;overflow:visible}  .ql-bubble .ql-editor img{max-width:100%}  .ql-bubble .ql-picker{color:#ccc;display:inline-block;float:left;font-size:14px;font-weight:500;height:24px;position:relative;vertical-align:middle}  .ql-bubble .ql-picker-label{cursor:pointer;display:inline-block;height:100%;padding-left:8px;padding-right:2px;position:relative;width:100%}  .ql-bubble .ql-picker-label:before{display:inline-block;line-height:22px}  .ql-bubble .ql-picker-options{background-color:#444;display:none;min-width:100%;padding:4px 8px;position:absolute;white-space:nowrap}  .ql-bubble .ql-picker-options .ql-picker-item{cursor:pointer;display:block;padding-bottom:5px;padding-top:5px}  .ql-bubble .ql-picker.ql-expanded .ql-picker-label{color:#777;z-index:2}  .ql-bubble .ql-picker.ql-expanded .ql-picker-label .ql-fill{fill:#777}  .ql-bubble .ql-picker.ql-expanded .ql-picker-label .ql-stroke{stroke:#777}  .ql-bubble .ql-picker.ql-expanded .ql-picker-options{display:block;margin-top:-1px;top:100%;z-index:1}  .ql-bubble .ql-color-picker,   .ql-bubble .ql-icon-picker{width:28px}  .ql-bubble .ql-color-picker .ql-picker-label,   .ql-bubble .ql-icon-picker .ql-picker-label{padding:2px 4px}  .ql-bubble .ql-color-picker .ql-picker-label svg,   .ql-bubble .ql-icon-picker .ql-picker-label svg{right:4px}  .ql-bubble .ql-icon-picker .ql-picker-options{padding:4px 0}  .ql-bubble .ql-icon-picker .ql-picker-item{height:24px;width:24px;padding:2px 4px}  .ql-bubble .ql-color-picker .ql-picker-options{padding:3px 5px;width:152px}  .ql-bubble .ql-color-picker .ql-picker-item{border:1px solid transparent;float:left;height:16px;margin:2px;padding:0;width:16px}  .ql-bubble .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg{position:absolute;margin-top:-9px;right:0;top:50%;width:18px}  .ql-bubble .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=""]):before,   .ql-bubble .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=""]):before,   .ql-bubble .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=""]):before,   .ql-bubble .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=""]):before,   .ql-bubble .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=""]):before,   .ql-bubble .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=""]):before{content:attr(data-label)}  .ql-bubble .ql-picker.ql-header{width:98px}  .ql-bubble .ql-picker.ql-header .ql-picker-item:before,   .ql-bubble .ql-picker.ql-header .ql-picker-label:before{content:"Normal"}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="1"]:before,   .ql-bubble .ql-picker.ql-header .ql-picker-label[data-value="1"]:before{content:"Heading 1"}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="2"]:before,   .ql-bubble .ql-picker.ql-header .ql-picker-label[data-value="2"]:before{content:"Heading 2"}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="3"]:before,   .ql-bubble .ql-picker.ql-header .ql-picker-label[data-value="3"]:before{content:"Heading 3"}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="4"]:before,   .ql-bubble .ql-picker.ql-header .ql-picker-label[data-value="4"]:before{content:"Heading 4"}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="5"]:before,   .ql-bubble .ql-picker.ql-header .ql-picker-label[data-value="5"]:before{content:"Heading 5"}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="6"]:before,   .ql-bubble .ql-picker.ql-header .ql-picker-label[data-value="6"]:before{content:"Heading 6"}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="1"]:before{font-size:2em}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="2"]:before{font-size:1.5em}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="3"]:before{font-size:1.17em}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="4"]:before{font-size:1em}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="5"]:before{font-size:.83em}  .ql-bubble .ql-picker.ql-header .ql-picker-item[data-value="6"]:before{font-size:.67em}  .ql-bubble .ql-picker.ql-font{width:108px}  .ql-bubble .ql-picker.ql-font .ql-picker-item:before,   .ql-bubble .ql-picker.ql-font .ql-picker-label:before{content:"Sans Serif"}  .ql-bubble .ql-picker.ql-font .ql-picker-item[data-value=serif]:before,   .ql-bubble .ql-picker.ql-font .ql-picker-label[data-value=serif]:before{content:"Serif"}  .ql-bubble .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before,   .ql-bubble .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before{content:"Monospace"}  .ql-bubble .ql-picker.ql-font .ql-picker-item[data-value=serif]:before{font-family:Georgia,Times New Roman,serif}  .ql-bubble .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{font-family:Monaco,Courier New,monospace}  .ql-bubble .ql-picker.ql-size{width:98px}  .ql-bubble .ql-picker.ql-size .ql-picker-item:before,   .ql-bubble .ql-picker.ql-size .ql-picker-label:before{content:"Normal"}  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=small]:before,   .ql-bubble .ql-picker.ql-size .ql-picker-label[data-value=small]:before{content:"Small"}  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=large]:before,   .ql-bubble .ql-picker.ql-size .ql-picker-label[data-value=large]:before{content:"Large"}  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=huge]:before,   .ql-bubble .ql-picker.ql-size .ql-picker-label[data-value=huge]:before{content:"Huge"}  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=small]:before{font-size:10px}  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=large]:before{font-size:18px}  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value=huge]:before{font-size:32px}  .ql-bubble .ql-color-picker.ql-background .ql-picker-item{background-color:#fff}  .ql-bubble .ql-color-picker.ql-color .ql-picker-item{background-color:#000}  .ql-bubble .ql-toolbar .ql-formats{margin:8px 12px 8px 0}  .ql-bubble .ql-toolbar .ql-formats:first-child{margin-left:12px}  .ql-bubble .ql-color-picker svg{margin:1px}  .ql-bubble .ql-color-picker .ql-picker-item.ql-selected,   .ql-bubble .ql-color-picker .ql-picker-item:hover{border-color:#fff}  .ql-bubble .ql-tooltip{background-color:#444;border-radius:25px;color:#fff}  .ql-bubble .ql-tooltip-arrow{border-left:6px solid transparent;border-right:6px solid transparent;content:" ";display:block;left:50%;margin-left:-6px;position:absolute}  .ql-bubble .ql-tooltip:not(.ql-flip) .ql-tooltip-arrow{border-bottom:6px solid #444;top:-6px}  .ql-bubble .ql-tooltip.ql-flip .ql-tooltip-arrow{border-top:6px solid #444;bottom:-6px}  .ql-bubble .ql-tooltip.ql-editing .ql-tooltip-editor{display:block}  .ql-bubble .ql-tooltip.ql-editing .ql-formats{visibility:hidden}  .ql-bubble .ql-tooltip-editor{display:none}  .ql-bubble .ql-tooltip-editor input[type=text]{background:transparent;border:none;color:#fff;font-size:13px;height:100%;outline:none;padding:10px 20px;position:absolute;width:100%}  .ql-bubble .ql-tooltip-editor a{top:10px;position:absolute;right:20px}  .ql-bubble .ql-tooltip-editor a:before{color:#ccc;content:"×";font-size:16px;font-weight:700}  .ql-container.ql-bubble:not(.ql-disabled) a{position:relative;white-space:nowrap}  .ql-container.ql-bubble:not(.ql-disabled) a:before{background-color:#444;border-radius:15px;top:-5px;font-size:12px;color:#fff;content:attr(href);font-weight:400;overflow:hidden;padding:5px 15px;text-decoration:none;z-index:1}  .ql-container.ql-bubble:not(.ql-disabled) a:after{border-top:6px solid #444;border-left:6px solid transparent;border-right:6px solid transparent;top:0;content:" ";height:0;width:0}  .ql-container.ql-bubble:not(.ql-disabled) a:after,   .ql-container.ql-bubble:not(.ql-disabled) a:before{left:0;margin-left:50%;position:absolute;-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%);-webkit-transition:visibility 0s ease .2s;transition:visibility 0s ease .2s;visibility:hidden}  .ql-container.ql-bubble:not(.ql-disabled) a:hover:after,   .ql-container.ql-bubble:not(.ql-disabled) a:hover:before{visibility:visible}[_nghost-ng-c1986170171]{--textarea-max-rows:0}.ql-container[_nghost-ng-c1986170171]{display:block;position:relative;font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--body-l-font-size);font-weight:var(--gem-sys-typography-type-scale--body-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-l-line-height)}</style><style>.extension-icon[_ngcontent-ng-c3114308451]{width:26px;height:26px;-webkit-margin-end:8px;-moz-margin-end:8px;margin-inline-end:8px}.at-mentions-menu_item[_ngcontent-ng-c3114308451]{-webkit-padding-end:24px;-moz-padding-end:24px;padding-inline-end:24px}.menu-item-content[_ngcontent-ng-c3114308451]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.tool-attribution[_ngcontent-ng-c3114308451]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.menu-item-label[_ngcontent-ng-c3114308451]{color:var(--gem-sys-color--on-surface);padding-block:8px 4px;padding-inline:16px 0;font-size:12px;line-height:1.25;font-weight:500}</style><style>.uploader-signed-out-tooltip[_ngcontent-ng-c3450268936]{-webkit-transform:translateY(calc(-100% - var(--gem-sys-spacing--l)));transform:translateY(calc(-100% - var(--gem-sys-spacing--l)));position:absolute;top:0;inset-inline-start:0;width:312px;border-radius:var(--gem-sys-shape--corner-large);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background-color:var(--gem-sys-color--primary-container);z-index:1;box-shadow:0 4px 4px 0 rgba(0,0,0,.251);padding:var(--gem-sys-spacing--m) var(--gem-sys-spacing--l)}.uploader-signed-out-tooltip[_ngcontent-ng-c3450268936]:before{content:"";position:absolute;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid transparent;border-radius:inherit;pointer-events:none}@media (forced-colors:active){.uploader-signed-out-tooltip[_ngcontent-ng-c3450268936]:before{border-color:CanvasText}}.uploader-signed-out-tooltip[_ngcontent-ng-c3450268936]   .tooltip-text[_ngcontent-ng-c3450268936]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch}</style><style>:where(input-area-v2:not(.ui-improvements-phase-1)[_nghost-ng-c477869883])   .upload-card-button.close[_ngcontent-ng-c477869883]     .mat-ripple, :where(input-area-v2:not(.ui-improvements-phase-1)   [_nghost-ng-c477869883])   .upload-card-button.close[_ngcontent-ng-c477869883]     .mat-ripple{color:var(--gem-sys-color--on-primary-container);background-color:var(--gem-sys-color--primary-container)}mat-action-list[_ngcontent-ng-c477869883]{--mat-list-list-item-disabled-state-layer-color:transparent}mat-card[_ngcontent-ng-c477869883]{background-color:var(--gem-sys-color--surface-container);border-radius:var(--gem-sys-shape--corner-large);min-width:216px}.content[_ngcontent-ng-c477869883]{height:40px}.content.flex[_ngcontent-ng-c477869883]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.content.flex[_ngcontent-ng-c477869883]   .item[_ngcontent-ng-c477869883]{min-width:0;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.mat-mdc-list-base[_ngcontent-ng-c477869883]   button.mat-mdc-list-item[_ngcontent-ng-c477869883]{-webkit-padding-end:15px;-moz-padding-end:15px;padding-inline-end:15px}button.mat-mdc-list-item[_ngcontent-ng-c477869883]:hover   mat-icon[_ngcontent-ng-c477869883]{color:var(--gem-sys-color--on-surface-variant)}button.mat-mdc-list-item[_ngcontent-ng-c477869883]:disabled   mat-icon.menu-icon[_ngcontent-ng-c477869883]{color:var(--gem-sys-color--on-surface-variant)}button.mat-mdc-list-item[_ngcontent-ng-c477869883]:disabled   mat-icon.menu-icon[_ngcontent-ng-c477869883]:hover{color:var(--gem-sys-color--on-surface-variant)}button.mat-mdc-list-item[_ngcontent-ng-c477869883]:disabled   .info[_ngcontent-ng-c477869883]{color:var(--gem-sys-color--on-surface)}.info[_ngcontent-ng-c477869883]{-webkit-margin-start:12px;-moz-margin-start:12px;margin-inline-start:12px;-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0}mat-icon.menu-icon[_ngcontent-ng-c477869883]{--icon-size:var(--gem-sys-spacing--xl);font-size:var(--icon-size);height:var(--icon-size);width:var(--icon-size);color:var(--gem-sys-color--on-surface-variant)}mat-icon.menu-icon[_ngcontent-ng-c477869883]:hover{color:var(--gem-sys-color--on-surface-variant)}.menu-text[_ngcontent-ng-c477869883]{color:var(--gem-sys-color--on-surface);font-size:14px;display:inline;font-weight:400}.sub-text[_ngcontent-ng-c477869883]{color:var(--gem-sys-color--on-surface-variant);font-size:12px;height:16px;font-weight:400}.hidden-file-input[_ngcontent-ng-c477869883]{display:none}.hidden-local-file-upload-button[_ngcontent-ng-c477869883], .hidden-local-upload-button[_ngcontent-ng-c477869883]{position:absolute;opacity:0;width:0;padding:0;margin:0;border:none}:where(.ui-improvements-phase-1[_nghost-ng-c477869883])   .file-uploader[_ngcontent-ng-c477869883]   button[mat-icon-button].upload-card-button[_ngcontent-ng-c477869883], :where(.ui-improvements-phase-1   [_nghost-ng-c477869883])   .file-uploader[_ngcontent-ng-c477869883]   button[mat-icon-button].upload-card-button[_ngcontent-ng-c477869883], :where(.ui-improvements-phase-1[_nghost-ng-c477869883])   .image-uploader[_ngcontent-ng-c477869883]   button[mat-icon-button].upload-card-button[_ngcontent-ng-c477869883], :where(.ui-improvements-phase-1   [_nghost-ng-c477869883])   .image-uploader[_ngcontent-ng-c477869883]   button[mat-icon-button].upload-card-button[_ngcontent-ng-c477869883]{--mat-icon-button-icon-color:var(--gem-sys-color--on-surface-variant);--mat-icon-button-state-layer-size:42px;--mat-icon-button-state-layer-color:var(--gem-sys-color--on-surface-variant);--mat-icon-button-hover-state-layer-opacity:0.08;--mat-icon-button-pressed-state-layer-opacity:0.08}:where(.ui-improvements-phase-1[_nghost-ng-c477869883])   .file-uploader[_ngcontent-ng-c477869883]   button[mat-icon-button].upload-card-button.close[_ngcontent-ng-c477869883], :where(.ui-improvements-phase-1   [_nghost-ng-c477869883])   .file-uploader[_ngcontent-ng-c477869883]   button[mat-icon-button].upload-card-button.close[_ngcontent-ng-c477869883], :where(.ui-improvements-phase-1[_nghost-ng-c477869883])   .image-uploader[_ngcontent-ng-c477869883]   button[mat-icon-button].upload-card-button.close[_ngcontent-ng-c477869883], :where(.ui-improvements-phase-1   [_nghost-ng-c477869883])   .image-uploader[_ngcontent-ng-c477869883]   button[mat-icon-button].upload-card-button.close[_ngcontent-ng-c477869883]{background-color:rgba(var(--gem-sys-color--on-surface-variant--rgb),.08);--mat-icon-button-hover-state-layer-opacity:0;--mat-icon-button-pressed-state-layer-opacity:0}mat-action-list.ui-improvements-phase-1[_ngcontent-ng-c477869883]{padding:0}mat-action-list.ui-improvements-phase-1[_ngcontent-ng-c477869883]   button.mat-mdc-list-item.mat-mdc-list-item[_ngcontent-ng-c477869883]{--mat-list-list-item-one-line-container-height:48px;padding:0 var(--gem-sys-spacing--l);gap:var(--gem-sys-spacing--m)}mat-action-list.ui-improvements-phase-1[_ngcontent-ng-c477869883]   button.mat-mdc-list-item.mat-mdc-list-item[_ngcontent-ng-c477869883]   mat-icon.menu-icon[_ngcontent-ng-c477869883]{--icon-size:var(--gem-sys-spacing--xxl);--mat-list-list-item-leading-icon-start-space:0;--mat-list-list-item-leading-icon-end-space:0;color:var(--gem-sys-color--on-surface);font-size:var(--gem-sys-spacing--xl);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}mat-action-list.ui-improvements-phase-1[_ngcontent-ng-c477869883]   button.mat-mdc-list-item.mat-mdc-list-item[_ngcontent-ng-c477869883]   mat-icon.menu-icon[_ngcontent-ng-c477869883]:hover{color:var(--gem-sys-color--on-surface)}mat-action-list.ui-improvements-phase-1[_ngcontent-ng-c477869883]   button.mat-mdc-list-item.mat-mdc-list-item[_ngcontent-ng-c477869883]   .menu-text[_ngcontent-ng-c477869883]{color:var(--gem-sys-color--on-surface);font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--label-l-font-size);font-weight:var(--gem-sys-typography-type-scale--label-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-l-line-height);height:var(--gem-sys-spacing--xl)}mat-action-list.ui-improvements-phase-1[_ngcontent-ng-c477869883]   button.mat-mdc-list-item.mat-mdc-list-item[_ngcontent-ng-c477869883]   .info[_ngcontent-ng-c477869883]   mat-icon[_ngcontent-ng-c477869883]{vertical-align:top}mat-card.upload-file-card-container[_ngcontent-ng-c477869883]   mat-action-list.ui-improvements-phase-1[_ngcontent-ng-c477869883]{padding:var(--gem-sys-spacing--s) 0}mat-card.upload-file-card-container[_ngcontent-ng-c477869883]   mat-action-list.ui-improvements-phase-1[_ngcontent-ng-c477869883]   button.mat-mdc-list-item.mat-mdc-list-item[_ngcontent-ng-c477869883]{--mat-list-list-item-one-line-container-height:40px}input-area-v2.with-toolbox-drawer[_nghost-ng-c477869883]   button[mat-icon-button].upload-card-button[_ngcontent-ng-c477869883], input-area-v2.with-toolbox-drawer   [_nghost-ng-c477869883]   button[mat-icon-button].upload-card-button[_ngcontent-ng-c477869883]{--mat-icon-button-icon-color:var(--gem-sys-color--on-surface-variant);--mat-icon-button-state-layer-size:40px;--mat-icon-button-state-layer-color:var(--gem-sys-color--on-surface-variant)}.upload-button-with-text[_ngcontent-ng-c477869883]{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:100%}button[mat-flat-button].upload-card-button[_ngcontent-ng-c477869883]:enabled{color:var(--gem-sys-color--on-primary-container);background:var(--gem-sys-color--surface-container-highest)}</style><style>.speech_dictation_mic_button[_ngcontent-ng-c1968946499]   .blue-circle[_ngcontent-ng-c1968946499], .speech_dictation_mic_button[_ngcontent-ng-c1968946499]   .gray-circle[_ngcontent-ng-c1968946499]{width:48px;height:48px;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:-12px;-webkit-margin-start:-12px;-moz-margin-start:-12px;margin-inline-start:-12px}.speech_dictation_mic_button[_ngcontent-ng-c1968946499]   .gray-circle[_ngcontent-ng-c1968946499]{background-color:rgba(var(--gem-sys-color--on-surface-variant--rgb),.12)}.speech_dictation_mic_button[_ngcontent-ng-c1968946499]   .blue-circle[_ngcontent-ng-c1968946499]{background-color:rgba(var(--gem-sys-color--primary--rgb),.08);color:var(--gem-sys-color--primary)}.speech_dictation_mic_button[_ngcontent-ng-c1968946499]   .blue-circle[_ngcontent-ng-c1968946499]:before{content:"";position:absolute;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid transparent;border-radius:inherit;pointer-events:none}@media (forced-colors:active){.speech_dictation_mic_button[_ngcontent-ng-c1968946499]   .blue-circle[_ngcontent-ng-c1968946499]:before{border-color:CanvasText}}.speech_dictation_mic_button[_ngcontent-ng-c1968946499]   .pulse[_ngcontent-ng-c1968946499]{width:48px;height:48px;border-radius:50%;position:absolute;background:-webkit-radial-gradient(center,circle,transparent 50%,rgba(var(--gem-sys-color--primary--rgb),.25) 50%);background:radial-gradient(circle at center,transparent 50%,rgba(var(--gem-sys-color--primary--rgb),.25) 50%);z-index:-1}@media (forced-colors:active){.speech_dictation_mic_button[_ngcontent-ng-c1968946499]   .pulse[_ngcontent-ng-c1968946499]   mat-icon[_ngcontent-ng-c1968946499]{overflow:inherit}}@media (forced-colors:active){.speech_dictation_mic_button[_ngcontent-ng-c1968946499]   .pulse[_ngcontent-ng-c1968946499]{border:3px solid #000}}.mic-on[_ngcontent-ng-c1968946499]{color:var(--gem-sys-color--primary)}input-area-v2.ui-improvements-phase-1[_nghost-ng-c1968946499]   button[mat-icon-button].speech_dictation_mic_button[_ngcontent-ng-c1968946499], input-area-v2.ui-improvements-phase-1   [_nghost-ng-c1968946499]   button[mat-icon-button].speech_dictation_mic_button[_ngcontent-ng-c1968946499]{--mat-icon-button-state-layer-size:42px;--mat-icon-button-state-layer-color:var(--gem-sys-color--surface-container);--mat-icon-button-hover-state-layer-opacity:1}input-area-v2.with-toolbox-drawer[_nghost-ng-c1968946499]   button[mat-icon-button].speech_dictation_mic_button[_ngcontent-ng-c1968946499], input-area-v2.with-toolbox-drawer   [_nghost-ng-c1968946499]   button[mat-icon-button].speech_dictation_mic_button[_ngcontent-ng-c1968946499]{--mat-icon-button-state-layer-size:40px;--mat-icon-button-state-layer-color:var(--gem-sys-color--surface-container);--mat-icon-button-hover-state-layer-opacity:1}</style><style>[_nghost-ng-c535547666]{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;--bard-sidenav-open-width:320px;--bard-sidenav-closed-width:72px;height:100%;position:relative}.overlay-main-content[_nghost-ng-c535547666]{z-index:2}[_nghost-ng-c535547666]:not(.disable-onload-animations){opacity:0;-webkit-transform:translateX(-100%);transform:translateX(-100%);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-name:_ngcontent-ng-c535547666_on-load-slide-in,_ngcontent-ng-c535547666_on-load-fade-in;animation-name:_ngcontent-ng-c535547666_on-load-slide-in,_ngcontent-ng-c535547666_on-load-fade-in;-webkit-animation-delay:0ms,.1s;animation-delay:0ms,.1s;-webkit-animation-duration:.3s,.2s;animation-duration:.3s,.2s;-webkit-animation-timing-function:cubic-bezier(.2,0,0,1),linear;animation-timing-function:cubic-bezier(.2,0,0,1),linear}@-webkit-keyframes _ngcontent-ng-c535547666_on-load-slide-in{0%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes _ngcontent-ng-c535547666_on-load-slide-in{0%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{-webkit-transform:translateX(0);transform:translateX(0)}}@-webkit-keyframes _ngcontent-ng-c535547666_on-load-fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-ng-c535547666_on-load-fade-in{0%{opacity:0}to{opacity:1}}</style><style>xap-count-badge[_ngcontent-ng-c1612480786]{border-radius:2px;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;padding:0 4px;white-space:nowrap;background-color:#c5221f;border-radius:8px;color:#fff;font:500 12px/16px Google Sans;min-width:16px}xap-count-badge.xap-count-badge-dot[_ngcontent-ng-c1612480786]{min-height:8px;min-width:8px}.xap-count-badge-container[_ngcontent-ng-c1612480786]{display:inline-block;position:relative}.xap-count-badge-container[_ngcontent-ng-c1612480786]   xap-count-badge[_ngcontent-ng-c1612480786]{left:100%;position:absolute;top:0;-webkit-transform:translate(-6px,-50%);transform:translate(-6px,-50%)}xap-count-badge.xap-count-badge-dot[_ngcontent-ng-c1612480786]{background-color:var(--gem-sys-color--primary)}[_nghost-ng-c1612480786]{height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}[_nghost-ng-c1612480786]   .side-nav-button-container[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;row-gap:16px;padding-bottom:16px}[_nghost-ng-c1612480786]   .side-nav-button-container[_ngcontent-ng-c1612480786]   .new-conversation-container[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}[_nghost-ng-c1612480786]   .flex-nav-list[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%;width:258px;padding:0}[_nghost-ng-c1612480786]   .flex-nav-list[_ngcontent-ng-c1612480786]:before{margin-top:8px;content:""}[_nghost-ng-c1612480786]   .flex-nav-list[_ngcontent-ng-c1612480786]:after{margin-bottom:8px;content:""}[_nghost-ng-c1612480786]   .flex-nav-list.standalone-faq-button[_ngcontent-ng-c1612480786]{height:calc(100% - 56px)}[_nghost-ng-c1612480786]   .flex-nav-list[_ngcontent-ng-c1612480786]   .mat-mdc-list-item[_ngcontent-ng-c1612480786]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding-inline:6px 24px}[_nghost-ng-c1612480786]   .flex-nav-list[_ngcontent-ng-c1612480786]   .mat-mdc-list-item[_ngcontent-ng-c1612480786]   .mat-mdc-list-item-title[_ngcontent-ng-c1612480786]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal}bot-list.mobile[_ngcontent-ng-c1612480786]{padding-inline:var(--gem-sys-spacing--xs)}[_nghost-ng-c1612480786]   .mobile-controls[_ngcontent-ng-c1612480786]   button[_ngcontent-ng-c1612480786]{color:var(--bard-color-sidenav-mobile-controls)}mat-action-list[_ngcontent-ng-c1612480786]{position:relative}.chat-history[_ngcontent-ng-c1612480786]   .bard-activity-disabled-message[_ngcontent-ng-c1612480786]{width:304px;padding-inline:24px 0;overflow:hidden}.sidenav-with-history-container[_ngcontent-ng-c1612480786]{--position-duration:300ms;--position-curve:cubic-bezier(0.2,0,0,1);--position-delay:100ms;--opacity-duration:100ms;--opacity-curve:cubic-bezier(0,0,0,0);--opacity-delay:0ms;--chat-opacity-duration:100ms;--chat-opacity-delay:0ms;--chat-visibility-duration:calc(var(--chat-opacity-duration) + var(--chat-opacity-delay));--location-visibility-duration:max(calc(var(--position-duration) + var(--position-delay)),calc(var(--opacity-duration) + var(--opacity-delay)));display:grid;grid-template-rows:1fr -webkit-min-content;grid-template-rows:1fr min-content;grid-template-columns:minmax(0,1fr);width:100%;height:100%;-moz-box-sizing:border-box;box-sizing:border-box;overflow:hidden}.sidenav-with-history-container[_ngcontent-ng-c1612480786]:not(.disable-onload-animations)   .chat-history-list[_ngcontent-ng-c1612480786], .sidenav-with-history-container[_ngcontent-ng-c1612480786]:not(.disable-onload-animations)   .new-conversation-container[_ngcontent-ng-c1612480786], .sidenav-with-history-container[_ngcontent-ng-c1612480786]:not(.disable-onload-animations)   bot-list[_ngcontent-ng-c1612480786], .sidenav-with-history-container[_ngcontent-ng-c1612480786]:not(.disable-onload-animations)   mat-action-list[_ngcontent-ng-c1612480786]{opacity:0;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-name:_ngcontent-ng-c1612480786_on-load-fade-in-sidenav-elem;animation-name:_ngcontent-ng-c1612480786_on-load-fade-in-sidenav-elem;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-delay:0ms;animation-delay:0ms}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   .chat-history-list[_ngcontent-ng-c1612480786]{-webkit-animation-delay:.3s;animation-delay:.3s}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   bot-list[_ngcontent-ng-c1612480786]{-webkit-animation-delay:.6s;animation-delay:.6s}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   mat-action-list[_ngcontent-ng-c1612480786]{-webkit-animation-delay:.9s;animation-delay:.9s}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   location-footer[_ngcontent-ng-c1612480786]{padding-inline:22px 20px;margin-block:10px;max-height:70px;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;min-width:320px}.sidenav-with-history-container.expanded[_ngcontent-ng-c1612480786]{--position-duration:400ms;--position-delay:0ms;--opacity-duration:200ms;--opacity-delay:200ms;--chat-opacity-duration:500ms;--chat-opacity-delay:200ms;--chat-visibility-duration:0ms;--location-visibility-duration:0ms}.sidenav-with-history-container.expanded[_ngcontent-ng-c1612480786]   .chat-history-list[_ngcontent-ng-c1612480786], .sidenav-with-history-container.expanded[_ngcontent-ng-c1612480786]   .new-conversation-container[_ngcontent-ng-c1612480786], .sidenav-with-history-container.expanded[_ngcontent-ng-c1612480786]   bot-list[_ngcontent-ng-c1612480786], .sidenav-with-history-container.expanded[_ngcontent-ng-c1612480786]   mat-action-list[_ngcontent-ng-c1612480786]{-webkit-animation-delay:0ms;animation-delay:0ms}.sidenav-with-history-container.expanded[_ngcontent-ng-c1612480786]   .chat-history[_ngcontent-ng-c1612480786]{opacity:1;visibility:visible}.sidenav-with-history-container.expanded[_ngcontent-ng-c1612480786]   location-footer[_ngcontent-ng-c1612480786]{opacity:1;visibility:visible}.sidenav-with-history-container.expanded[_ngcontent-ng-c1612480786]   upsell-button[_ngcontent-ng-c1612480786]{max-height:50px;padding-top:10px;opacity:1;visibility:visible}.sidenav-with-history-container.expanded[_ngcontent-ng-c1612480786]   referral-button[_ngcontent-ng-c1612480786]{max-height:52px;opacity:1;padding-block:8px;visibility:visible}.sidenav-with-history-container.collapsed[_ngcontent-ng-c1612480786]   .chat-history[_ngcontent-ng-c1612480786]{pointer-events:none}.sidenav-with-history-container.collapsed[_ngcontent-ng-c1612480786]   referral-button[_ngcontent-ng-c1612480786]{opacity:0;visibility:hidden}.sidenav-with-history-container.collapsed[_ngcontent-ng-c1612480786]   location-footer[_ngcontent-ng-c1612480786]{opacity:0;visibility:hidden}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   .overflow-container[_ngcontent-ng-c1612480786]{overflow:hidden;display:grid;grid-template-rows:-webkit-min-content 1fr;grid-template-rows:min-content 1fr;grid-template-columns:minmax(0,1fr)}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   .overflow-container[_ngcontent-ng-c1612480786]:not(.mobile){padding-top:104px}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   .overflow-container.no-new-chat[_ngcontent-ng-c1612480786]{grid-template-rows:1fr -webkit-min-content -webkit-min-content;grid-template-rows:1fr min-content min-content}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   .overflow-container.mobile[_ngcontent-ng-c1612480786]{margin-top:56px;grid-template-rows:-webkit-min-content 1fr -webkit-min-content;grid-template-rows:min-content 1fr min-content}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   .overflow-container[_ngcontent-ng-c1612480786]   .side-nav-button-container[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;row-gap:16px;padding-bottom:16px;-webkit-padding-start:var(--gem-sys-spacing--s);-moz-padding-start:var(--gem-sys-spacing--s);padding-inline-start:var(--gem-sys-spacing--s)}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   .overflow-container[_ngcontent-ng-c1612480786]   .side-nav-button-container[_ngcontent-ng-c1612480786]   .new-conversation-container[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   .overflow-container[_ngcontent-ng-c1612480786]   .side-nav-button-container[_ngcontent-ng-c1612480786]{-webkit-padding-start:8px;-moz-padding-start:8px;padding-inline-start:8px}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   .chat-history[_ngcontent-ng-c1612480786]{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;opacity:0;-webkit-transition:opacity var(--chat-opacity-duration) var(--opacity-curve) var(--chat-opacity-delay),visibility var(--chat-visibility-duration);transition:opacity var(--chat-opacity-duration) var(--opacity-curve) var(--chat-opacity-delay),visibility var(--chat-visibility-duration);overflow:hidden auto}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   upsell-button[_ngcontent-ng-c1612480786]{max-height:0;padding:0 0 0 10px;opacity:0;visibility:hidden;-webkit-transition:max-height var(--position-duration) var(--position-curve) var(--position-delay),padding var(--position-duration) var(--position-curve) var(--position-delay),opacity var(--opacity-duration) var(--opacity-curve) var(--opacity-delay);transition:max-height var(--position-duration) var(--position-curve) var(--position-delay),padding var(--position-duration) var(--position-curve) var(--position-delay),opacity var(--opacity-duration) var(--opacity-curve) var(--opacity-delay)}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   referral-button[_ngcontent-ng-c1612480786]{-webkit-transition:max-height var(--position-duration) var(--position-curve) var(--position-delay),padding-block var(--position-duration) var(--position-curve) var(--position-delay),opacity var(--opacity-duration) var(--opacity-curve) var(--opacity-delay);transition:max-height var(--position-duration) var(--position-curve) var(--position-delay),padding-block var(--position-duration) var(--position-curve) var(--position-delay),opacity var(--opacity-duration) var(--opacity-curve) var(--opacity-delay)}.sidenav-with-history-container[_ngcontent-ng-c1612480786]   location-footer[_ngcontent-ng-c1612480786]{-webkit-transition-property:max-height,margin,opacity,visibility;transition-property:max-height,margin,opacity,visibility;-webkit-transition-duration:var(--position-duration),var(--position-duration),var(--opacity-duration),var(--location-visibility-duration);transition-duration:var(--position-duration),var(--position-duration),var(--opacity-duration),var(--location-visibility-duration);-webkit-transition-timing-function:var(--position-curve),var(--position-curve),var(--opacity-curve),initial;transition-timing-function:var(--position-curve),var(--position-curve),var(--opacity-curve),initial;-webkit-transition-delay:0s,var(--position-delay),var(--opacity-delay),0s;transition-delay:0s,var(--position-delay),var(--opacity-delay),0s}.sidenav-with-history-container.mobile[_ngcontent-ng-c1612480786]{padding-bottom:10px}.sidenav-with-history-container.mobile[_ngcontent-ng-c1612480786]   conversations-list[_ngcontent-ng-c1612480786]{padding-inline:4px}.sidenav-with-history-container.mobile.expanded[_ngcontent-ng-c1612480786]   location-footer[_ngcontent-ng-c1612480786]{-webkit-transition:none;transition:none;-webkit-padding-start:14px;-moz-padding-start:14px;padding-inline-start:14px}.sidenav-with-history-container.mobile[_ngcontent-ng-c1612480786]   .chat-history[_ngcontent-ng-c1612480786]{-webkit-transition:none;transition:none}.sidenav-with-history-container.mobile[_ngcontent-ng-c1612480786]   location-footer[_ngcontent-ng-c1612480786]{-webkit-padding-start:14px;-moz-padding-start:14px;padding-inline-start:14px;-webkit-transition-duration:0s,0s,0s,var(--side-nav-transition-duration,.5s);transition-duration:0s,0s,0s,var(--side-nav-transition-duration,.5s);-webkit-transition-delay:var(--side-nav-transition-duration,.5s),var(--side-nav-transition-duration,.5s),var(--side-nav-transition-duration,.5s),0s;transition-delay:var(--side-nav-transition-duration,.5s),var(--side-nav-transition-duration,.5s),var(--side-nav-transition-duration,.5s),0s}.mobile-controls[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-align-self:end;-ms-flex-item-align:end;align-self:end;padding-inline:10px 12px}.mobile-controls[_ngcontent-ng-c1612480786] > *[_ngcontent-ng-c1612480786]{-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;min-height:48px}.mobile-controls[_ngcontent-ng-c1612480786]   .sidebard-mobile-menu-item[_ngcontent-ng-c1612480786]{padding:0 18px 0 6px;text-align:start;display:grid;grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr}.mobile-controls[_ngcontent-ng-c1612480786]   .label-and-badge-container[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.mobile-controls[_ngcontent-ng-c1612480786]   .label-and-badge-container[_ngcontent-ng-c1612480786] > span[_ngcontent-ng-c1612480786]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;text-align:start}.mobile-controls[_ngcontent-ng-c1612480786]   .label-and-badge-container[_ngcontent-ng-c1612480786] > xap-count-badge[_ngcontent-ng-c1612480786]{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.mobile-controls[_ngcontent-ng-c1612480786]   .xap-count-badge-dot[_ngcontent-ng-c1612480786]{-webkit-margin-start:6px;-moz-margin-start:6px;margin-inline-start:6px}.mobile-controls[_ngcontent-ng-c1612480786]   mat-icon[_ngcontent-ng-c1612480786]{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-margin-end:12px;-moz-margin-end:12px;margin-inline-end:12px}.desktop-controls[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-align-self:end;-ms-flex-item-align:end;align-self:end}.desktop-controls[_ngcontent-ng-c1612480786] > *[_ngcontent-ng-c1612480786]{height:36px}.desktop-controls[_ngcontent-ng-c1612480786]   .referral-button[_ngcontent-ng-c1612480786]{-moz-box-sizing:border-box;box-sizing:border-box;height:unset}.menu-entry-with-badge[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:16px}.link-button[_ngcontent-ng-c1612480786]{background:none;border:none;margin:0;padding:0;text-decoration:underline;cursor:pointer;color:var(--gem-sys-color--primary);text-decoration:none}.bottom-sheet-menu-entry-with-trailing-icon[_ngcontent-ng-c1612480786]{-webkit-padding-end:16px;-moz-padding-end:16px;padding-inline-end:16px}.menu-item-title-with-trailing-component[_ngcontent-ng-c1612480786]{width:208px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.menu-item-title-with-trailing-component[_ngcontent-ng-c1612480786] > span[_ngcontent-ng-c1612480786]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.bard-activity-disabled-message[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:14px;-moz-box-sizing:border-box;box-sizing:border-box;padding-block:8px 16px;padding-inline:14px 16px;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-flex:1;-webkit-flex:1 0 0;-moz-box-flex:1;-ms-flex:1 0 0px;flex:1 0 0}.bard-activity-disabled-message.mobile[_ngcontent-ng-c1612480786]{padding-inline:26px 16px}.bard-activity-disabled-message[_ngcontent-ng-c1612480786] > mat-icon[_ngcontent-ng-c1612480786]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.bard-activity-disabled-message[_ngcontent-ng-c1612480786]   a[_ngcontent-ng-c1612480786]{color:var(--gem-sys-color--primary);text-decoration:none}.loading-history-spinner-container[_ngcontent-ng-c1612480786]{display:none;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:5px;opacity:0;visibility:hidden;-webkit-transition:opacity .1s ease-in-out;transition:opacity .1s ease-in-out;--mat-progress-spinner-active-indicator-color:var(--gem-sys-color--on-surface)}.loading-history-spinner-container.is-loading[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;opacity:1;visibility:visible}.standalone-faq-button[_ngcontent-ng-c1612480786]{margin-top:56px}.extension-menu-button-disabled[_ngcontent-ng-c1612480786]{opacity:.5;cursor:default}  .cdk-overlay-pane:has(.desktop-settings-menu.collapsed){-webkit-margin-start:68px;-moz-margin-start:68px;margin-inline-start:68px}  .cdk-overlay-pane:has(.desktop-settings-menu.expanded){-webkit-margin-start:133px;-moz-margin-start:133px;margin-inline-start:133px}@-webkit-keyframes _ngcontent-ng-c1612480786_on-load-fade-in-sidenav-elem{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-ng-c1612480786_on-load-fade-in-sidenav-elem{0%{opacity:0}to{opacity:1}}.ia-redesign[_nghost-ng-c1612480786]   .sidenav-with-history-container.bot-list-loaded.expanded[_ngcontent-ng-c1612480786]   .explore-gems-container[_ngcontent-ng-c1612480786], .ia-redesign[_nghost-ng-c1612480786]   .sidenav-with-history-container.bot-list-loaded.expanded[_ngcontent-ng-c1612480786]   .gems-list-container[_ngcontent-ng-c1612480786]{opacity:1;visibility:visible}.ia-redesign[_nghost-ng-c1612480786]   .sidenav-with-history-container.collapsed[_ngcontent-ng-c1612480786]   .explore-gems-container[_ngcontent-ng-c1612480786], .ia-redesign[_nghost-ng-c1612480786]   .sidenav-with-history-container.collapsed[_ngcontent-ng-c1612480786]   .gems-list-container[_ngcontent-ng-c1612480786]{pointer-events:none}.ia-redesign[_nghost-ng-c1612480786]   .mobile[_ngcontent-ng-c1612480786]   .top-action-list[_ngcontent-ng-c1612480786]{-webkit-margin-before:var(--gem-sys-spacing--s);margin-block-start:var(--gem-sys-spacing--s)}.ia-redesign[_nghost-ng-c1612480786]   .overflow-container[_ngcontent-ng-c1612480786], .ia-redesign[_nghost-ng-c1612480786]   .overflow-container.mobile[_ngcontent-ng-c1612480786]{grid-template-rows:auto 1fr -webkit-min-content;grid-template-rows:auto 1fr min-content}.ia-redesign[_nghost-ng-c1612480786]   .overflow-container[_ngcontent-ng-c1612480786]   .mobile[_ngcontent-ng-c1612480786]{-webkit-margin-before:60px;margin-block-start:60px}.ia-redesign[_nghost-ng-c1612480786]   .overflow-container[_ngcontent-ng-c1612480786]:not(.mobile){padding-top:84px}.ia-redesign[_nghost-ng-c1612480786]   .top-action-list[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:0;margin:0}.ia-redesign[_nghost-ng-c1612480786]   side-nav-action-button[_ngcontent-ng-c1612480786]{height:40px}.ia-redesign[_nghost-ng-c1612480786]   .explore-gems-container[_ngcontent-ng-c1612480786], .ia-redesign[_nghost-ng-c1612480786]   .gems-list-container[_ngcontent-ng-c1612480786]{opacity:0;-webkit-transition:opacity var(--chat-opacity-duration) var(--opacity-curve) var(--chat-opacity-delay),visibility var(--chat-visibility-duration);transition:opacity var(--chat-opacity-duration) var(--opacity-curve) var(--chat-opacity-delay),visibility var(--chat-visibility-duration);overflow:hidden auto}.ia-redesign[_nghost-ng-c1612480786]   .explore-gems-container[_ngcontent-ng-c1612480786]   .top-action-list[_ngcontent-ng-c1612480786]{-webkit-margin-before:0;margin-block-start:0}.ia-redesign[_nghost-ng-c1612480786]   .chat-history[_ngcontent-ng-c1612480786]{overflow:unset}.ia-redesign[_nghost-ng-c1612480786]   conversations-list[_ngcontent-ng-c1612480786]{-webkit-margin-before:var(--gem-sys-spacing--l);margin-block-start:var(--gem-sys-spacing--l)}.ia-redesign[_nghost-ng-c1612480786]   .desktop-controls[_ngcontent-ng-c1612480786]{margin:var(--gem-sys-spacing--l) 0 0}.ia-redesign[_nghost-ng-c1612480786]   .desktop-controls[_ngcontent-ng-c1612480786]:last-child{-webkit-margin-after:var(--gem-sys-spacing--xl);margin-block-end:var(--gem-sys-spacing--xl)}.ia-redesign[_nghost-ng-c1612480786]   .mobile-controls[_ngcontent-ng-c1612480786]{-webkit-margin-start:var(--gem-sys-spacing--xs);-moz-margin-start:var(--gem-sys-spacing--xs);margin-inline-start:var(--gem-sys-spacing--xs)}.ia-redesign[_nghost-ng-c1612480786]   .mobile-controls[_ngcontent-ng-c1612480786]:last-child{-webkit-margin-after:var(--gem-sys-spacing--m);margin-block-end:var(--gem-sys-spacing--m)}.location-menu-item-container[_ngcontent-ng-c1612480786]{padding-block:12px 8px;cursor:auto}.location-menu-item-container[_ngcontent-ng-c1612480786]:active, .location-menu-item-container[_ngcontent-ng-c1612480786]:hover{background-color:transparent}.location-menu-item-container[_ngcontent-ng-c1612480786]   location-footer[_ngcontent-ng-c1612480786], .location-menu-item-container-mobile[_ngcontent-ng-c1612480786]   location-footer[_ngcontent-ng-c1612480786]{display:block}.mobile-settings-and-help-menu[_ngcontent-ng-c1612480786]{padding:0 var(--gem-sys-spacing--l)}.mobile-settings-and-help-menu[_ngcontent-ng-c1612480786]   .mat-mdc-list-item[_ngcontent-ng-c1612480786]:not(.location-menu-item-container-mobile){--mat-list-list-item-container-color:var(--gem-sys-color--surface-container-lowest);border-radius:var(--gem-sys-shape--corner-extra-small);-webkit-margin-after:2px;margin-block-end:2px}.mobile-settings-and-help-menu[_ngcontent-ng-c1612480786]   .mat-mdc-list-item[_ngcontent-ng-c1612480786]:not(.location-menu-item-container-mobile):not(.mat-mdc-list-item+.mat-mdc-list-item){border-top-left-radius:var(--gem-sys-shape--corner-medium);border-top-right-radius:var(--gem-sys-shape--corner-medium)}.mobile-settings-and-help-menu[_ngcontent-ng-c1612480786]   .mat-mdc-list-item[_ngcontent-ng-c1612480786]:not(.location-menu-item-container-mobile):not(:has(+.mat-mdc-list-item)){border-bottom-left-radius:var(--gem-sys-shape--corner-medium);border-bottom-right-radius:var(--gem-sys-shape--corner-medium);-webkit-margin-after:0;margin-block-end:0}.mobile-settings-and-help-menu[_ngcontent-ng-c1612480786]   .mat-mdc-list-item[_ngcontent-ng-c1612480786]:not(.location-menu-item-container-mobile)   .mat-mdc-list-item-meta[_ngcontent-ng-c1612480786]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.mobile-settings-and-help-menu[_ngcontent-ng-c1612480786]   mat-divider[_ngcontent-ng-c1612480786]{height:var(--gem-sys-spacing--l);border:none;background-color:transparent}
/*# sourceMappingURL=side_navigation_content.css.map */</style><style>.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
</style><style>.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mat-slide-toggle-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mat-slide-toggle-track-height, 32px);border-radius:var(--mat-slide-toggle-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mat-slide-toggle-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-slide-toggle-track-outline-width, 2px);border-color:var(--mat-slide-toggle-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-slide-toggle-selected-track-outline-width, 2px);border-color:var(--mat-slide-toggle-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-slide-toggle-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-slide-toggle-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mat-slide-toggle-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-slide-toggle-hidden-track-opacity, 0);transition:var(--mat-slide-toggle-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-slide-toggle-visible-track-opacity, 1);transition:var(--mat-slide-toggle-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mat-slide-toggle-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mat-slide-toggle-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mat-slide-toggle-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mat-slide-toggle-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mat-slide-toggle-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-slide-toggle-visible-track-opacity, 1);transition:var(--mat-slide-toggle-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-slide-toggle-hidden-track-opacity, 0);transition:var(--mat-slide-toggle-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mat-slide-toggle-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mat-slide-toggle-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mat-slide-toggle-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mat-slide-toggle-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mat-slide-toggle-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mat-slide-toggle-handle-width);height:var(--mat-slide-toggle-handle-height);border-radius:var(--mat-slide-toggle-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-slide-toggle-unselected-handle-size, 16px);height:var(--mat-slide-toggle-unselected-handle-size, 16px);margin:var(--mat-slide-toggle-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-slide-toggle-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-slide-toggle-selected-handle-size, 24px);height:var(--mat-slide-toggle-selected-handle-size, 24px);margin:var(--mat-slide-toggle-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-slide-toggle-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-slide-toggle-with-icon-handle-size, 24px);height:var(--mat-slide-toggle-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-slide-toggle-pressed-handle-size, 28px);height:var(--mat-slide-toggle-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-slide-toggle-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-slide-toggle-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-slide-toggle-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-slide-toggle-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mat-slide-toggle-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mat-slide-toggle-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mat-slide-toggle-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mat-slide-toggle-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mat-slide-toggle-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mat-slide-toggle-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mat-slide-toggle-state-layer-size, 40px);height:var(--mat-slide-toggle-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mat-slide-toggle-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mat-slide-toggle-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mat-slide-toggle-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-slide-toggle-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mat-slide-toggle-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mat-slide-toggle-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mat-slide-toggle-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mat-slide-toggle-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1;transform:translateZ(0)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mat-slide-toggle-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mat-slide-toggle-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mat-slide-toggle-unselected-icon-size, 16px);height:var(--mat-slide-toggle-unselected-icon-size, 16px);fill:var(--mat-slide-toggle-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mat-slide-toggle-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mat-slide-toggle-selected-icon-size, 16px);height:var(--mat-slide-toggle-selected-icon-size, 16px);fill:var(--mat-slide-toggle-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mat-slide-toggle-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-slide-toggle-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-slide-toggle-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-slide-toggle-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-slide-toggle-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-slide-toggle-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-slide-toggle-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mat-slide-toggle-disabled-label-text-color)}
</style><style>.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}
</style><style>[_nghost-ng-c1450258299]{height:38px}.footer-text-style[_ngcontent-ng-c1450258299], [_nghost-ng-c1450258299]:not(.ia-redesign)   .location-buttons-dot[_ngcontent-ng-c1450258299], [_nghost-ng-c1450258299]:not(.ia-redesign)   .location-footer-atl-text[_ngcontent-ng-c1450258299], [_nghost-ng-c1450258299]:not(.ia-redesign)   .location-footer-name[_ngcontent-ng-c1450258299], [_nghost-ng-c1450258299]:not(.ia-redesign)   .update-location-text[_ngcontent-ng-c1450258299]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:.6875rem;line-height:1rem;font-weight:500;letter-spacing:.00625rem}.footer-container[_ngcontent-ng-c1450258299]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:-8px}.location-icon[_ngcontent-ng-c1450258299]{width:.5625rem;height:.5625rem;padding:.4375rem .5rem;font-size:.5625rem;color:var(--gem-sys-color--outline)}.location-icon.precise[_ngcontent-ng-c1450258299]{color:var(--bard-color-code-quotes-and-meta)}.location-footer-textual[_ngcontent-ng-c1450258299]{display:inline-block}.location-footer-name[_ngcontent-ng-c1450258299]{padding-top:16px}.location-clickable[_ngcontent-ng-c1450258299]:active, .location-clickable[_ngcontent-ng-c1450258299]:hover{cursor:pointer}.location-footer-atl-text[_ngcontent-ng-c1450258299], .update-location-text[_ngcontent-ng-c1450258299]{-webkit-padding-start:0;-moz-padding-start:0;padding-inline-start:0;-webkit-padding-end:0;-moz-padding-end:0;padding-inline-end:0;border:none;background:none;color:var(--gem-sys-color--primary);position:relative}.location-buttons-dot[_ngcontent-ng-c1450258299]{color:var(--gem-sys-color--outline)}[_nghost-ng-c1450258299]:not(.ia-redesign)   .location-buttons-dot[_ngcontent-ng-c1450258299]{font-size:.75rem}.last-line-target[_ngcontent-ng-c1450258299]{height:24px;width:100%;position:absolute;top:1.0625rem;z-index:2}.new-line-target[_ngcontent-ng-c1450258299]{width:100%;height:24px;display:inline-block}.ia-redesign[_nghost-ng-c1450258299]{height:calc(var(--gem-sys-spacing--l)*2)}.ia-redesign[_nghost-ng-c1450258299]   .footer-container[_ngcontent-ng-c1450258299]{gap:var(--gem-sys-spacing--xs)}.ia-redesign[_nghost-ng-c1450258299]   .location-icon[_ngcontent-ng-c1450258299]{margin:0;padding:0;width:var(--gem-sys-spacing--l);height:var(--gem-sys-spacing--l);line-height:var(--gem-sys-spacing--l);font-size:var(--gem-sys-spacing--s);text-align:center}.ia-redesign[_nghost-ng-c1450258299]   .location-footer-textual[_ngcontent-ng-c1450258299]{display:grid;grid-template:"name name name" auto "source dot update" auto/auto auto 1fr;-webkit-column-gap:2px;-moz-column-gap:2px;column-gap:2px}.ia-redesign[_nghost-ng-c1450258299]   .name-and-source[_ngcontent-ng-c1450258299]{grid-area:name}.ia-redesign[_nghost-ng-c1450258299]   .location-footer-name[_ngcontent-ng-c1450258299]{padding:0}.ia-redesign[_nghost-ng-c1450258299]   .location-buttons-dot[_ngcontent-ng-c1450258299]{min-width:6px;text-align:center}.ia-redesign[_nghost-ng-c1450258299]   .location-buttons-dot[_ngcontent-ng-c1450258299], .ia-redesign[_nghost-ng-c1450258299]   .location-footer-name[_ngcontent-ng-c1450258299]{color:var(--gem-sys-color--on-surface-variant)}.ia-redesign[_nghost-ng-c1450258299]   .new-line-target[_ngcontent-ng-c1450258299]{display:inline}</style><style>.expandable-button[_ngcontent-ng-c1907482273]{--mat-text-button-label-text-color:var(--bard-color-on-new-conversation-button);--mat-text-button-with-icon-horizontal-padding:8px;min-width:unset;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;border-radius:20px;background-color:var(--bard-color-new-conversation-button);-webkit-margin-start:8px;-moz-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;-moz-margin-end:8px;margin-inline-end:8px;display:inline-grid;grid-template-rows:1fr;grid-template-columns:-webkit-min-content 0fr;grid-template-columns:min-content 0fr;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;-webkit-transition:grid-template-columns .15s ease,border-radius .15s ease;transition:grid-template-columns .15s ease,border-radius .15s ease;transition:grid-template-columns .15s ease,border-radius .15s ease,-ms-grid-columns .15s ease}.expandable-button[_ngcontent-ng-c1907482273]   .button-icon[_ngcontent-ng-c1907482273]{height:24px;width:24px;font-size:24px;margin:0}.expandable-button[_ngcontent-ng-c1907482273]     .mdc-button__label{white-space:nowrap;overflow:hidden}.expandable-button[_ngcontent-ng-c1907482273]   .button-content[_ngcontent-ng-c1907482273]{margin:8px 8px 8px 16px;opacity:0;display:block;text-align:left;font-weight:500;-webkit-transition:opacity .15s linear;transition:opacity .15s linear;text-overflow:ellipsis;overflow:hidden}.expandable-button.expanded[_ngcontent-ng-c1907482273]{position:relative;grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr}.expandable-button.expanded.hasBotsCreation[_ngcontent-ng-c1907482273]{border-radius:8px;border-top-right-radius:0;border-bottom-right-radius:0}.expandable-button.expanded[_ngcontent-ng-c1907482273]   .button-content[_ngcontent-ng-c1907482273]{opacity:1;-webkit-transition:opacity .15s linear .1s;transition:opacity .15s linear .1s}.expandable-button[_ngcontent-ng-c1907482273]:disabled{background-color:rgba(var(--gem-sys-color--surface-dim--rgb),.38);color:rgba(var(--gem-sys-color--on-surface--rgb),.38)}</style><style>.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
</style><style>a[mat-button][_ngcontent-ng-c1348129424], button[mat-button][_ngcontent-ng-c1348129424], button[mat-flat-button][_ngcontent-ng-c1348129424], button[mat-icon-button][_ngcontent-ng-c1348129424], button[mat-raised-button][_ngcontent-ng-c1348129424], button[mat-stroked-button][_ngcontent-ng-c1348129424]{border-radius:100px;height:40px}a[mat-button][_ngcontent-ng-c1348129424], button[mat-button][_ngcontent-ng-c1348129424]{padding:10px 12px;color:var(--gem-sys-color--primary)}a[mat-button][_ngcontent-ng-c1348129424]:hover, button[mat-button][_ngcontent-ng-c1348129424]:hover{color:var(--gem-sys-color--primary);background:rgba(var(--gem-sys-color--primary--rgb),.08)}button[mat-flat-button][_ngcontent-ng-c1348129424]{padding:10px 24px;color:var(--gem-sys-color--on-primary);background:var(--gem-sys-color--primary)}button[mat-flat-button][_ngcontent-ng-c1348129424]:hover{padding:10px 24px;background:var(--gem-sys-color--primary)}button[mat-stroked-button][_ngcontent-ng-c1348129424]{padding:10px 24px;color:var(--gem-sys-color--primary);border:1px solid var(--gem-sys-color--outline)}button[mat-stroked-button][_ngcontent-ng-c1348129424]:hover{color:var(--gem-sys-color--primary);background:rgba(var(--gem-sys-color--primary--rgb),.08);border:1px solid var(--gem-sys-color--outline)}button[mat-stroked-button][_ngcontent-ng-c1348129424]:focus{color:var(--gem-sys-color--primary);background:rgba(var(--gem-sys-color--primary--rgb),.12);border-color:var(--gem-sys-color--outline)}button[_ngcontent-ng-c1348129424]:disabled{color:rgba(var(--gem-sys-color--on-surface--rgb),.38)}button[mat-flat-button][_ngcontent-ng-c1348129424]:disabled{background:rgba(var(--gem-sys-color--on-surface--rgb),.12)}button[mat-stroked-button][_ngcontent-ng-c1348129424]:disabled{border:1px solid rgba(var(--gem-sys-color--on-surface--rgb),.12)}[_nghost-ng-c1348129424]{display:block;padding-block:0 8px;padding-inline:16px 12px;margin-top:26px}[_nghost-ng-c1348129424]:where(.sidenav-style-updates){margin-top:var(--gem-sys-spacing--l)}[_nghost-ng-c1348129424]   bot-list-item.mobile[_ngcontent-ng-c1348129424]{width:100%}.bots-list-container[_ngcontent-ng-c1348129424]   .show-more-button.mobile[_ngcontent-ng-c1348129424]{-webkit-padding-end:0;-moz-padding-end:0;padding-inline-end:0;padding-left:var(--gem-sys-spacing--s)}.show-more-button[_ngcontent-ng-c1348129424]   mat-icon[_ngcontent-ng-c1348129424]{margin:0;padding:4px}.title-container[_ngcontent-ng-c1348129424]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-bottom:2px}.title-container[_ngcontent-ng-c1348129424]   .expand-button[_ngcontent-ng-c1348129424]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.title-container[_ngcontent-ng-c1348129424]   .expand-button[_ngcontent-ng-c1348129424]   mat-icon[_ngcontent-ng-c1348129424]{height:20px;width:20px;font-size:20px;margin:0;padding:2px}.title[_ngcontent-ng-c1348129424]{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin:0;padding-block:6px;padding-inline:12px 12px}.bots-list-container[_ngcontent-ng-c1348129424]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.bots-list-container[_ngcontent-ng-c1348129424]   .action-button[_ngcontent-ng-c1348129424]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:11px;padding-block:6px;padding-inline:15px 0;padding-left:7px;border-radius:30px;cursor:pointer;border:none;background-color:inherit;height:48px;color:var(--gem-sys-color--on-surface-variant);-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-mat-focus-indicator-border-radius:30px}@media only screen and (min-width:600px){.bots-list-container[_ngcontent-ng-c1348129424]   .action-button[_ngcontent-ng-c1348129424]{height:36px}}.bots-list-container[_ngcontent-ng-c1348129424]   .action-button-icon[_ngcontent-ng-c1348129424]{height:28px;width:28px;font-size:24px;line-height:28px;text-align:center;margin:0}.bots-list-container[_ngcontent-ng-c1348129424]   .item[_ngcontent-ng-c1348129424]{-moz-box-sizing:border-box;box-sizing:border-box;outline-offset:-1px}.bots-list-container[_ngcontent-ng-c1348129424]   .item[_ngcontent-ng-c1348129424]   .icon-container[_ngcontent-ng-c1348129424]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:var(--bard-color-icon-container-background);border-radius:8px;height:24px;width:24px;font-weight:500;line-height:24px}.bots-list-container[_ngcontent-ng-c1348129424]   .item[_ngcontent-ng-c1348129424]   mat-icon[_ngcontent-ng-c1348129424]{height:16px;width:16px;font-size:16px;margin:0;padding:4px}.bots-list-container[_ngcontent-ng-c1348129424]   .item[_ngcontent-ng-c1348129424]   img[_ngcontent-ng-c1348129424]{height:16px;width:16px}.bots-list-container[_ngcontent-ng-c1348129424]   .item.selected[_ngcontent-ng-c1348129424]{background-color:var(--gem-sys-color--primary-container);color:var(--gem-sys-color--on-primary-container)}.bots-list-container[_ngcontent-ng-c1348129424]   .item[_ngcontent-ng-c1348129424]:hover:not(.selected):not(.pending){background-color:var(--gem-sys-color--surface-container-high)}.bots-list-container[_ngcontent-ng-c1348129424]   .item[_ngcontent-ng-c1348129424] > *[_ngcontent-ng-c1348129424]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.bots-list-container[_ngcontent-ng-c1348129424]   .item[_ngcontent-ng-c1348129424]   .title[_ngcontent-ng-c1348129424]{margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;text-align:start}.bots-list-container[_ngcontent-ng-c1348129424]   .item[_ngcontent-ng-c1348129424]   .title.shortened[_ngcontent-ng-c1348129424]{-webkit-padding-end:32px;-moz-padding-end:32px;padding-inline-end:32px}.bots-list-container[_ngcontent-ng-c1348129424]   .expanded-show-more-button[_ngcontent-ng-c1348129424]{background-color:var(--gem-sys-color--surface-container-highest)}.ia-redesign[_nghost-ng-c1348129424]{-webkit-margin-before:0;margin-block-start:0;-webkit-padding-after:0;padding-block-end:0}.ia-redesign[_nghost-ng-c1348129424]:has(.title){-webkit-margin-before:var(--gem-sys-spacing--l);margin-block-start:var(--gem-sys-spacing--l)}.ia-redesign[_nghost-ng-c1348129424]   .title-container[_ngcontent-ng-c1348129424]{-webkit-margin-after:0;margin-block-end:0}.ia-redesign[_nghost-ng-c1348129424]   .title[_ngcontent-ng-c1348129424]{padding:var(--gem-sys-spacing--s);line-height:var(--gem-sys-spacing--xxl);color:var(--gem-sys-color--on-surface-low)}</style><style>xap-count-badge[_ngcontent-ng-c1363543379]{border-radius:2px;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;padding:0 4px;white-space:nowrap;background-color:#c5221f;border-radius:8px;color:#fff;font:500 12px/16px Google Sans;min-width:16px}xap-count-badge.xap-count-badge-dot[_ngcontent-ng-c1363543379]{min-height:8px;min-width:8px}.xap-count-badge-container[_ngcontent-ng-c1363543379]{display:inline-block;position:relative}.xap-count-badge-container[_ngcontent-ng-c1363543379]   xap-count-badge[_ngcontent-ng-c1363543379]{left:100%;position:absolute;top:0;-webkit-transform:translate(-6px,-50%);transform:translate(-6px,-50%)}[_nghost-ng-c1363543379] > .side-nav-action-button[_ngcontent-ng-c1363543379]:is(.side-nav-action-button.explicit-gmat-override){height:100%}[_nghost-ng-c1363543379] > .side-nav-action-button[_ngcontent-ng-c1363543379]:is(.side-nav-action-button.explicit-gmat-override)   .xap-count-badge-dot[_ngcontent-ng-c1363543379]{margin-inline:24px 14px}[_nghost-ng-c1363543379] > .side-nav-action-button[_ngcontent-ng-c1363543379]:is(.side-nav-action-button.explicit-gmat-override)   .icon-container[_ngcontent-ng-c1363543379]{-webkit-margin-start:14px;-moz-margin-start:14px;margin-inline-start:14px;width:20px;height:20px;line-height:1}[_nghost-ng-c1363543379] > .side-nav-action-collapsed-button[_ngcontent-ng-c1363543379]:is(.side-nav-action-collapsed-button.explicit-gmat-override){--mat-icon-button-state-layer-size:36px;padding:6.4px 8px 2px;margin:0 18px}[_nghost-ng-c1363543379] > .side-nav-action-button[_ngcontent-ng-c1363543379]{margin:0 12px;width:calc(100% - 24px);border-radius:30px;--mat-focus-indicator-border-radius:30px}[_nghost-ng-c1363543379] > .side-nav-action-button.explicit-gmat-override[_ngcontent-ng-c1363543379]{padding-right:0}.is-active[_nghost-ng-c1363543379]   .side-nav-action-button[_ngcontent-ng-c1363543379], .is-active[_nghost-ng-c1363543379]   .side-nav-action-collapsed-button[_ngcontent-ng-c1363543379]{--mat-list-list-item-hover-state-layer-opacity:0;--mat-list-list-item-label-text-color:var(--gem-sys-color--on-primary-container);--mat-list-list-item-hover-label-text-color:var(--gem-sys-color--on-primary-container);--mat-list-list-item-leading-icon-color:var(--gem-sys-color--on-primary-container);--mat-list-list-item-hover-leading-icon-color:var(--gem-sys-color--on-primary-container);--mat-list-list-item-container-color:var(--gem-sys-color--primary-container)}[_nghost-ng-c1363543379]   .xap-count-badge-dot[_ngcontent-ng-c1363543379]{background-color:var(--gem-sys-color--primary)}.side-nav-action-button[_ngcontent-ng-c1363543379]{--mat-list-list-item-label-text-color:var(--gem-sys-color--on-surface-variant);--mat-list-list-item-leading-icon-color:var(--gem-sys-color--on-surface-variant);--mat-list-list-item-hover-state-layer-color:var(--gem-sys-color--on-surface-variant);--mat-list-list-item-hover-state-layer-opacity:0.08;--mat-list-list-item-hover-label-text-color:var(--gem-sys-color--on-surface-variant);--mat-list-list-item-hover-leading-icon-color:var(--gem-sys-color--on-surface-variant);--mat-list-list-item-focus-state-layer-color:var(--gem-sys-color--on-surface-variant);--mat-list-list-item-focus-state-layer-opacity:0.1;--mat-list-list-item-focus-label-text-color:var(--gem-sys-color--on-surface-variant)}.side-nav-action-collapsed-button[_ngcontent-ng-c1363543379]{color:var(--gem-sys-color--on-surface-variant)}.side-nav-action-collapsed-button[_ngcontent-ng-c1363543379]   mat-icon[_ngcontent-ng-c1363543379]{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.side-nav-action-collapsed-button[_ngcontent-ng-c1363543379]   xap-count-badge[_ngcontent-ng-c1363543379]{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.ia-redesign[_nghost-ng-c1363543379] > .side-nav-action-collapsed-button[_ngcontent-ng-c1363543379]:is(.side-nav-action-collapsed-button.explicit-gmat-override){--mat-icon-button-state-layer-size:40px;margin-inline:16px}.ia-redesign[_nghost-ng-c1363543379] > .side-nav-action-collapsed-button[disabled][_ngcontent-ng-c1363543379]{color:var(--mat-icon-button-disabled-icon-color)}.ia-redesign[_nghost-ng-c1363543379] > .side-nav-action-button[_ngcontent-ng-c1363543379], .ia-redesign[_nghost-ng-c1363543379] > .side-nav-action-collapsed-button[_ngcontent-ng-c1363543379]{--mat-list-list-item-disabled-state-layer-color:transparent;--mat-list-list-item-disabled-state-layer-opacity:0.38;--mat-list-list-item-disabled-label-text-opacity:0.38;--mat-list-list-item-disabled-leading-icon-opacity:0.38;--mat-list-list-item-disabled-trailing-icon-opacity:0.38}.ia-redesign.mobile[_nghost-ng-c1363543379] > .side-nav-action-button[_ngcontent-ng-c1363543379]{margin-inline:4px}</style><style>.upsell-label[_ngcontent-ng-c260037640]{display:inline-block;white-space:nowrap}</style><style>xap-count-badge[_ngcontent-ng-c2137975441]{border-radius:2px;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;padding:0 4px;white-space:nowrap;background-color:#c5221f;border-radius:8px;color:#fff;font:500 12px/16px Google Sans;min-width:16px}xap-count-badge.xap-count-badge-dot[_ngcontent-ng-c2137975441]{min-height:8px;min-width:8px}.xap-count-badge-container[_ngcontent-ng-c2137975441]{display:inline-block;position:relative}.xap-count-badge-container[_ngcontent-ng-c2137975441]   xap-count-badge[_ngcontent-ng-c2137975441]{left:100%;position:absolute;top:0;-webkit-transform:translate(-6px,-50%);transform:translate(-6px,-50%)}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]:hover:not(.selected):not(.pending){background-color:rgba(var(--gem-sys-color--on-surface-variant--rgb),.08)}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]:focus-within:not(.selected):not(.pending), .conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]:focus:not(.selected):not(.pending){background-color:rgba(var(--gem-sys-color--on-surface-variant--rgb),.1)}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]:active:not(.selected):not(.pending){background-color:rgba(var(--gem-sys-color--on-surface-variant--rgb),.1)}.conversations-container[_ngcontent-ng-c2137975441]   .conversation.selected[_ngcontent-ng-c2137975441]{background-color:var(--gem-sys-color--primary-container);color:var(--gem-sys-color--on-primary-container)}[_nghost-ng-c2137975441]{display:grid;grid-template-rows:auto 1fr;grid-template-columns:minmax(0,1fr);padding-inline:12px 12px;padding-bottom:8px}@media only screen and (min-width:960px){[_nghost-ng-c2137975441]:where(.sidenav-style-updates){margin-top:var(--gem-sys-spacing--l)}}.title[_ngcontent-ng-c2137975441]{-webkit-padding-start:12px;-moz-padding-start:12px;padding-inline-start:12px;-webkit-margin-before:8px;margin-block-start:8px}.title.mobile[_ngcontent-ng-c2137975441]{-webkit-padding-start:12px;-moz-padding-start:12px;padding-inline-start:12px}.conversations-container[_ngcontent-ng-c2137975441]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441], .conversations-container[_ngcontent-ng-c2137975441]   .show-more-button[_ngcontent-ng-c2137975441]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:12px;padding-block:6px;padding-inline:12px;border-radius:30px;cursor:pointer;border:none;background-color:inherit;height:48px}@media only screen and (min-width:960px){.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441], .conversations-container[_ngcontent-ng-c2137975441]   .show-more-button[_ngcontent-ng-c2137975441]{height:36px;padding-inline:11px 6px}}.conversations-container[_ngcontent-ng-c2137975441]   .conversation.pending[_ngcontent-ng-c2137975441], .conversations-container[_ngcontent-ng-c2137975441]   .show-more-button.pending[_ngcontent-ng-c2137975441]{cursor:unset;padding-block:8px;-webkit-padding-start:6px;-moz-padding-start:6px;padding-inline-start:6px}.conversations-container[_ngcontent-ng-c2137975441]   .conversation.pending[_ngcontent-ng-c2137975441]   .pending-conversation-animation[_ngcontent-ng-c2137975441], .conversations-container[_ngcontent-ng-c2137975441]   .show-more-button.pending[_ngcontent-ng-c2137975441]   .pending-conversation-animation[_ngcontent-ng-c2137975441]{height:100%;width:100%;border-radius:30px;background:var(--bard-color-processing-animation-color-1);background-size:100% 100%;width:0;opacity:0;-webkit-animation-name:_ngcontent-ng-c2137975441_loopColors,_ngcontent-ng-c2137975441_animationIn;animation-name:_ngcontent-ng-c2137975441_loopColors,_ngcontent-ng-c2137975441_animationIn;-webkit-animation-duration:2s,.25s;animation-duration:2s,.25s;-webkit-animation-fill-mode:forwards,forwards;animation-fill-mode:forwards,forwards;-webkit-animation-timing-function:linear,linear;animation-timing-function:linear,linear;-webkit-animation-iteration-count:infinite,1;animation-iteration-count:infinite,1}@-webkit-keyframes _ngcontent-ng-c2137975441_loopColors{0%{background:var(--bard-color-processing-animation-color-1)}50%{background:var(--bard-color-processing-animation-color-2)}}@keyframes _ngcontent-ng-c2137975441_loopColors{0%{background:var(--bard-color-processing-animation-color-1)}50%{background:var(--bard-color-processing-animation-color-2)}}@-webkit-keyframes _ngcontent-ng-c2137975441_animationIn{0%{width:0;opacity:0}to{width:100%;opacity:1}}@keyframes _ngcontent-ng-c2137975441_animationIn{0%{width:0;opacity:0}to{width:100%;opacity:1}}.conversations-container.mobile[_ngcontent-ng-c2137975441]   .conversation-items-container[_ngcontent-ng-c2137975441]{width:100%}.conversations-container.mobile[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]{-webkit-padding-start:14px;-moz-padding-start:14px;padding-inline-start:14px;padding-right:14px}.conversations-container[_ngcontent-ng-c2137975441]   .show-more-button[_ngcontent-ng-c2137975441]     .mat-focus-indicator:before{border-radius:30px;margin:0}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]{-moz-box-sizing:border-box;box-sizing:border-box;outline-offset:-1px;color:var(--gem-sys-color--on-surface-variant)}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441] > *[_ngcontent-ng-c2137975441]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]   .conversation-icon[_ngcontent-ng-c2137975441], .conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]   .options-icon[_ngcontent-ng-c2137975441]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:24px;width:24px;line-height:24px}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]   .conversation-icon.with-emoji[_ngcontent-ng-c2137975441], .conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]   .options-icon.with-emoji[_ngcontent-ng-c2137975441]{background:var(--gem-sys-color--surface-container);border-radius:8px}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]   .conversation-icon.with-emoji[_ngcontent-ng-c2137975441]   img[_ngcontent-ng-c2137975441], .conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]   .options-icon.with-emoji[_ngcontent-ng-c2137975441]   img[_ngcontent-ng-c2137975441]{height:20px;width:20px}@media only screen and (min-width:960px){.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]   .conversation-icon.with-emoji[_ngcontent-ng-c2137975441]   img[_ngcontent-ng-c2137975441], .conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]   .options-icon.with-emoji[_ngcontent-ng-c2137975441]   img[_ngcontent-ng-c2137975441]{height:16px;width:16px}}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]   .conversation-title[_ngcontent-ng-c2137975441]{position:relative;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;-webkit-box-flex:1;-webkit-flex:1 1 0;-moz-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;text-align:start}.conversations-container[_ngcontent-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]   .conversation-title.shortened[_ngcontent-ng-c2137975441]{-webkit-padding-end:32px;-moz-padding-end:32px;padding-inline-end:32px}.conversations-container[_ngcontent-ng-c2137975441]   .conversation-title-cover[_ngcontent-ng-c2137975441]{display:none;position:absolute;z-index:0;pointer-events:none}.conversations-container[_ngcontent-ng-c2137975441]   .show-more-button[_ngcontent-ng-c2137975441]{-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;color:var(--gem-sys-color--on-surface-variant)}.conversations-container[_ngcontent-ng-c2137975441]   .show-more-button[_ngcontent-ng-c2137975441]   mat-icon[_ngcontent-ng-c2137975441]{margin:0;height:24px;width:24px;line-height:24px}.conversation-actions-container[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]{background-color:inherit;color:var(--gem-sys-color--on-surface)}.conversation-actions-container[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]:focus, .conversation-actions-container[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]:hover, .conversation-items-container[_ngcontent-ng-c2137975441]   .menu-opened.conversation-actions-menu-button[_ngcontent-ng-c2137975441]{background-color:var(--bard-color-onhover-conversation-metadata-button-v2);color:var(--gem-sys-color--on-surface)}.conversation-items-container[_ngcontent-ng-c2137975441]   .selected[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]{background-color:var(--gem-sys-color--primary-container);color:var(--gem-sys-color--on-primary-container)}.conversation-items-container[_ngcontent-ng-c2137975441]   .selected[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]:focus, .conversation-items-container[_ngcontent-ng-c2137975441]   .selected[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]:hover, .conversation-items-container[_ngcontent-ng-c2137975441]   .selected[_ngcontent-ng-c2137975441]   .menu-opened.conversation-actions-menu-button[_ngcontent-ng-c2137975441]{background-color:var(--gem-sys-color--on-secondary);color:var(--gem-sys-color--on-primary-container)}.xap-count-badge-dot[_ngcontent-ng-c2137975441]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:var(--gem-sys-color--primary)}.conversation-actions-container[_ngcontent-ng-c2137975441]{position:absolute;inset-inline-end:0;height:100%;top:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:4px;gap:4px;-moz-box-sizing:border-box;box-sizing:border-box}.conversation-actions-container[_ngcontent-ng-c2137975441]{--mat-icon-button-touch-target-display:none}.conversation-actions-container[_ngcontent-ng-c2137975441]   .mat-mdc-icon-button.mat-mdc-button-base[_ngcontent-ng-c2137975441]{--mdc-icon-button-state-layer-size:36px;--mat-icon-button-state-layer-size:36px;width:var(--mat-icon-button-state-layer-size);height:var(--mat-icon-button-state-layer-size);padding:6px}.conversation-actions-container[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]{visibility:hidden;height:28px;width:28px;border:none;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.conversation-actions-container[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]   .mat-mdc-menu-trigger[_ngcontent-ng-c2137975441]{position:absolute;top:-4px;right:-20px}[dir=rtl][_nghost-ng-c2137975441]   .conversation-actions-container[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]   .mat-mdc-menu-trigger[_ngcontent-ng-c2137975441], [dir=rtl]   [_nghost-ng-c2137975441]   .conversation-actions-container[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]   .mat-mdc-menu-trigger[_ngcontent-ng-c2137975441]{right:auto;left:-20px}.conversation-actions-container[_ngcontent-ng-c2137975441]   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]   mat-icon[_ngcontent-ng-c2137975441]{-webkit-margin-start:-2px;-moz-margin-start:-2px;margin-inline-start:-2px}.conversation-items-container[_ngcontent-ng-c2137975441]{position:relative}.conversation-items-container[_ngcontent-ng-c2137975441]   .conversation-pin-icon[_ngcontent-ng-c2137975441]{visibility:visible;color:var(--gem-sys-color--on-surface-variant)}.conversation-items-container[_ngcontent-ng-c2137975441]:focus-within   .conversation-actions-menu-button[_ngcontent-ng-c2137975441], .conversation-items-container[_ngcontent-ng-c2137975441]:hover   .conversation-actions-menu-button[_ngcontent-ng-c2137975441]{visibility:visible}.conversation-items-container[_ngcontent-ng-c2137975441]:focus-within   .conversation-unread-status[_ngcontent-ng-c2137975441], .conversation-items-container[_ngcontent-ng-c2137975441]:hover   .conversation-unread-status[_ngcontent-ng-c2137975441]{visibility:hidden}.conversation-items-container[_ngcontent-ng-c2137975441]:focus-within   .conversation-pin-icon[_ngcontent-ng-c2137975441], .conversation-items-container[_ngcontent-ng-c2137975441]:hover   .conversation-pin-icon[_ngcontent-ng-c2137975441]{visibility:hidden}.conversation-items-container[_ngcontent-ng-c2137975441]   .menu-opened.conversation-actions-menu-button[_ngcontent-ng-c2137975441]{visibility:visible}  [dir=rtl] .mat-mdc-menu-panel.conversation-actions-menu button mat-icon{margin-left:10px;margin-right:0}  .mat-mdc-menu-panel.conversation-actions-menu{min-width:150px;border-radius:8px}  .mat-mdc-menu-panel.conversation-actions-menu button{height:32px;min-height:unset}  .mat-mdc-menu-panel.conversation-actions-menu button mat-icon{margin-right:10px}  .mat-mdc-menu-panel.conversation-actions-menu mat-divider{margin:8px 0}.bot-logo-container[_ngcontent-ng-c2137975441]{position:absolute;top:50%;left:50%;width:24px;height:24px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.share-divider[_ngcontent-ng-c2137975441]{--mat-divider-color:var(--gem-sys-color--outline-variant)}.ia-redesign[_nghost-ng-c2137975441]   .conversations-container[_ngcontent-ng-c2137975441]   .show-more-button[_ngcontent-ng-c2137975441]{gap:0;padding-block:var(--gem-sys-spacing--s);height:40px}.ia-redesign[_nghost-ng-c2137975441]   .title[_ngcontent-ng-c2137975441]{padding:var(--gem-sys-spacing--s) var(--gem-sys-spacing--s) var(--gem-sys-spacing--s) var(--gem-sys-spacing--m);margin:0;line-height:var(--gem-sys-spacing--xxl);color:var(--gem-sys-color--on-surface-low)}.ia-redesign[_nghost-ng-c2137975441]   .conversation[_ngcontent-ng-c2137975441]{padding-block:var(--gem-sys-spacing--s);height:40px}</style><style>.bot-item[_ngcontent-ng-c939809657]   .bot-new-conversation-button[_ngcontent-ng-c939809657]{color:var(--gem-sys-color--on-surface-variant)}.bot-item[_ngcontent-ng-c939809657]:hover   .bot-new-conversation-button[_ngcontent-ng-c939809657]{background-color:rgba(var(--gem-sys-color--on-surface-variant--rgb),.08)}.bot-item[_ngcontent-ng-c939809657]:focus-within   .bot-new-conversation-button[_ngcontent-ng-c939809657]{background-color:rgba(var(--gem-sys-color--on-surface-variant--rgb),.1)}.bot-item[_ngcontent-ng-c939809657]:active   .bot-new-conversation-button[_ngcontent-ng-c939809657]{background-color:rgba(var(--gem-sys-color--on-surface-variant--rgb),.1)}.bot-list-item--selected.bot-list-item--expanded[_nghost-ng-c939809657]   .bot-item[_ngcontent-ng-c939809657]   .bot-new-conversation-button[_ngcontent-ng-c939809657]{background-color:var(--gem-sys-color--primary-container);color:var(--gem-sys-color--on-primary-container)}[_nghost-ng-c939809657]   .bot-item[_ngcontent-ng-c939809657]   .bot-actions-menu-button[_ngcontent-ng-c939809657]{--mat-icon-button-state-layer-size:28px;padding:2px}.bot-list-item--selected.bot-list-item--expanded[_nghost-ng-c939809657]   .bot-item[_ngcontent-ng-c939809657]   .bot-new-conversation-button[_ngcontent-ng-c939809657]{-webkit-transition:background-color .1s;transition:background-color .1s}.bot-item[_ngcontent-ng-c939809657]{overflow:hidden;position:relative}.bot-item[_ngcontent-ng-c939809657]:focus-within   .bot-actions-menu-button[_ngcontent-ng-c939809657], .bot-item[_ngcontent-ng-c939809657]:hover   .bot-actions-menu-button[_ngcontent-ng-c939809657]{opacity:1}.bot-item[_ngcontent-ng-c939809657]:focus-within   .bot-item-pin[_ngcontent-ng-c939809657], .bot-item[_ngcontent-ng-c939809657]:hover   .bot-item-pin[_ngcontent-ng-c939809657]{visibility:hidden}bot-logo[_ngcontent-ng-c939809657]{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.bot-new-conversation-button[_ngcontent-ng-c939809657]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:12px;background:none;border:none;padding-block:6px;padding-inline:8px 10px;border-radius:18px;height:36px;width:100%;cursor:pointer;outline-offset:-1px}.bot-name[_ngcontent-ng-c939809657]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;text-align:start;-webkit-box-flex:0;-webkit-flex:0 1 100%;-moz-box-flex:0;-ms-flex:0 1 100%;flex:0 1 100%;-webkit-margin-end:24px;-moz-margin-end:24px;margin-inline-end:24px}.is-mobile[_ngcontent-ng-c939809657]   .bot-name[_ngcontent-ng-c939809657]{-webkit-margin-end:48px;-moz-margin-end:48px;margin-inline-end:48px}.is-pinned[_ngcontent-ng-c939809657]   .bot-name[_ngcontent-ng-c939809657]{-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0}.bot-item-pin[_ngcontent-ng-c939809657]{color:var(--gem-sys-color--on-surface-variant);-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.bot-actions-menu-button[_ngcontent-ng-c939809657]{opacity:0;position:absolute;z-index:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);inset-inline-end:4px}.bot-actions-menu-button[_ngcontent-ng-c939809657]:hover{background-color:var(--gem-sys-color--surface-container-high)}.bot-actions-menu-button.menu-open[_ngcontent-ng-c939809657]{opacity:1;background-color:var(--gem-sys-color--surface-container-high)}.bot-actions-menu-button[_ngcontent-ng-c939809657]   .mat-mdc-menu-trigger[_ngcontent-ng-c939809657]{position:absolute;top:-4px;inset-inline-end:-20px}.is-mobile[_ngcontent-ng-c939809657]   .bot-new-conversation-button[_ngcontent-ng-c939809657]{height:48px;border-radius:28px;padding-inline:12px 14px}[_nghost-ng-c939809657]   .is-mobile.bot-item[_ngcontent-ng-c939809657]   .bot-actions-menu-button[_ngcontent-ng-c939809657]{--mat-icon-button-state-layer-size:48px;padding:12px}.ia-redesign[_nghost-ng-c939809657]   .bot-new-conversation-button[_ngcontent-ng-c939809657], .ia-redesign   [_nghost-ng-c939809657]   .bot-new-conversation-button[_ngcontent-ng-c939809657]{padding-block:var(--gem-sys-spacing--s);height:40px}</style><style>[_nghost-ng-c3054142777]{position:relative;display:block;height:var(--bot-logo-size,32px);width:var(--bot-logo-size,32px);overflow:hidden}.bot-logo-deleted[_ngcontent-ng-c3054142777], .bot-logo-icon-container[_ngcontent-ng-c3054142777], .bot-logo-text[_ngcontent-ng-c3054142777]{-moz-box-sizing:border-box;box-sizing:border-box;border-radius:50%;width:var(--bot-logo-size,32px);height:var(--bot-logo-size,32px);overflow:hidden}.bot-logo-square[_nghost-ng-c3054142777]   .bot-logo-deleted[_ngcontent-ng-c3054142777], .bot-logo-square[_nghost-ng-c3054142777]   .bot-logo-icon-container[_ngcontent-ng-c3054142777], .bot-logo-square[_nghost-ng-c3054142777]   .bot-logo-text[_ngcontent-ng-c3054142777]{border-radius:calc(var(--bot-logo-size, 32px)/3)}.bot-logo-deleted[_ngcontent-ng-c3054142777], .bot-logo-text[_ngcontent-ng-c3054142777]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;line-height:var(--bot-logo-size,32px);font-size:var(--bot-logo-icon-size,32px);border:min(2px,max(1px,var(--bot-logo-size,32px)/16)) solid transparent;background-color:var(--bot-logo-bg,var(--bard-color-bot-logo-bg-default));border-color:var(--bot-logo-border,var(--bard-color-bot-logo-border-default));color:var(--bot-logo-text,var(--bard-color-bot-logo-text-default))}.bot-logo-text[_ngcontent-ng-c3054142777]{font-family:Google Sans,Helvetica Neue,sans-serif;font-weight:500;text-transform:uppercase}.bot-logo-text.sidenav-style-updates[_ngcontent-ng-c3054142777]{border:none}.bot-logo-text[_ngcontent-ng-c3054142777]   mat-icon[_ngcontent-ng-c3054142777]:has(svg){margin-top:calc(var(--bot-logo-icon-size)*-1/2);overflow:unset}.bot-logo-icon[_ngcontent-ng-c3054142777]{width:var(--bot-logo-size,32px);max-height:var(--bot-logo-size,32px)}.bot-logo-icon-container[_ngcontent-ng-c3054142777]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.bot-logo-icon-container[_ngcontent-ng-c3054142777]:after{content:"";position:absolute;inset:0;box-shadow:inset 0 0 1px 1px var(--gem-sys-color--surface-container);border-radius:50%;mix-blend-mode:darken}.bot-logo-square[_nghost-ng-c3054142777]   .bot-logo-icon-container[_ngcontent-ng-c3054142777]:after{border-radius:calc(var(--bot-logo-size, 32px)/3)}.is-dark-mode[_nghost-ng-c3054142777]   .bot-logo-icon-container[_ngcontent-ng-c3054142777]:after{mix-blend-mode:lighten}mat-icon[_ngcontent-ng-c3054142777]{width:var(--bot-logo-icon-size,24px);height:var(--bot-logo-icon-size,24px);font-size:var(--bot-logo-icon-size,24px)}</style><style>.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed;z-index:1000}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%;z-index:1000}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px;z-index:1000}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
</style><script src="./انواع بودجه بندی_files/main.js.download"></script><style nonce="" type="text/css" data-late-css="">@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_AMS-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-Bold.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-Italic.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Math-Italic.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Script-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size1-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size2-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size3-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size4-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(https://www.gstatic.com/external_hosted/katex/dist/fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0;text-rendering:auto}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.16.10"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathboldfrak,.katex .textboldfrak{font-family:KaTeX_Fraktur;font-weight:700}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-left:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:right}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{left:0}.katex .clap>.inner,.katex .rlap>.inner{right:0}.katex .clap>.inner>span{margin-right:-50%;margin-left:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-right:.27777778em;margin-left:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:right}.katex .mtable .col-align-r>.vlist-t{text-align:left}.katex .svg-align{text-align:right}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{right:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;left:0;width:50.2%}.katex .brace-left{right:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{right:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;left:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .27778em 0 .55556em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-right:-.2em;margin-left:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-left:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-left:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;left:calc(50% + .3em);text-align:right}.katex .cd-label-right{display:inline-block;right:calc(50% + .3em);position:absolute;text-align:left}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;left:0}.katex-display.leqno>.katex>.katex-html>.tag{right:0;left:auto}.katex-display.fleqn>.katex{padding-right:2em;text-align:right}body{counter-reset:katexEqnNo mmlEqnNo}sentinel{}</style><style>[_nghost-ng-c2617843004]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:16px 0;-webkit-padding-start:0;-moz-padding-start:0;padding-inline-start:0}.user-profile-picture-container[_ngcontent-ng-c2617843004]{display:block}.user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004]{margin-top:0}[dir=ltr][_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004], [dir=ltr]   [_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004]{float:right}[dir=rtl][_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004], [dir=rtl]   [_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004]{float:left}.user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004]   .expand-button[_ngcontent-ng-c2617843004]{-webkit-margin-end:8px;-moz-margin-end:8px;margin-inline-end:8px}.user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004]   .collapse-button[_ngcontent-ng-c2617843004]{-webkit-transform:rotate(180deg);transform:rotate(180deg);-webkit-margin-end:8px;-moz-margin-end:8px;margin-inline-end:8px}.user-query-container.edit-mode[_ngcontent-ng-c2617843004]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.async-user-icon[_ngcontent-ng-c2617843004]{height:28px;width:28px;font-size:28px}.async-timestamp[_ngcontent-ng-c2617843004]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--label-m-alt-font-size);font-weight:var(--gem-sys-typography-type-scale--label-m-alt-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-m-alt-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-m-alt-line-height);color:var(--gem-sys-color--on-surface-variant)}@media screen and (min-width:960px){chat-window:not(.side-by-side-immersive)[_nghost-ng-c2617843004], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c2617843004], share-viewer[_nghost-ng-c2617843004], share-viewer   [_nghost-ng-c2617843004]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:8px 0}chat-window:not(.side-by-side-immersive)[_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004], share-viewer[_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004], share-viewer   [_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004]{-webkit-margin-end:20px;-moz-margin-end:20px;margin-inline-end:20px}chat-window:not(.side-by-side-immersive)[_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004], share-viewer[_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004], share-viewer   [_nghost-ng-c2617843004]   .user-profile-picture-container[_ngcontent-ng-c2617843004]   .edit-button-at-profile-line[_ngcontent-ng-c2617843004]{display:none}chat-window:not(.side-by-side-immersive)[_nghost-ng-c2617843004]   user-profile-picture[_ngcontent-ng-c2617843004], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c2617843004]   user-profile-picture[_ngcontent-ng-c2617843004], share-viewer[_nghost-ng-c2617843004]   user-profile-picture[_ngcontent-ng-c2617843004], share-viewer   [_nghost-ng-c2617843004]   user-profile-picture[_ngcontent-ng-c2617843004]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:40px}chat-window:not(.side-by-side-immersive)[_nghost-ng-c2617843004]   .user-query-container[_ngcontent-ng-c2617843004], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c2617843004]   .user-query-container[_ngcontent-ng-c2617843004], share-viewer[_nghost-ng-c2617843004]   .user-query-container[_ngcontent-ng-c2617843004], share-viewer   [_nghost-ng-c2617843004]   .user-query-container[_ngcontent-ng-c2617843004]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:100%}}.right-align-content[_ngcontent-ng-c2617843004] > user-query-content[_ngcontent-ng-c2617843004]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-flow:row;flex-flow:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding:0;width:100%}</style><style>.model-response-text[_ngcontent-ng-c546605890]{color:var(--gem-sys-color--on-surface);display:block;overflow-x:visible;width:100%}@media only screen and (max-width:768px){.model-response-text[_ngcontent-ng-c546605890]{-webkit-margin-end:2px;-moz-margin-end:2px;margin-inline-end:2px}}.model-response-text.with-bottom-margin[_ngcontent-ng-c546605890]{margin-bottom:16px}.factuality-container[_ngcontent-ng-c546605890]{background:var(--gem-sys-color--surface);border-radius:0 0 16px 16px}factuality-status.with-bottom-margin[_ngcontent-ng-c546605890]{margin-bottom:8px}.factuality-title[_ngcontent-ng-c546605890]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin:8px 16px}.factuality-content[_ngcontent-ng-c546605890]{padding:16px 16px 24px}.response-footer[_ngcontent-ng-c546605890]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.response-footer[_ngcontent-ng-c546605890]{-webkit-transition:max-height .6s ease-in,opacity .2s ease-in;transition:max-height .6s ease-in,opacity .2s ease-in}.response-footer.animated[_ngcontent-ng-c546605890]{max-height:0;opacity:0;overflow-y:hidden}.response-footer.animated.complete[_ngcontent-ng-c546605890]{max-height:1000px;opacity:1}.extension-processing-state[_ngcontent-ng-c546605890]:not(.extension-processing-state_mobile){margin:calc(var(--gem-sys-spacing--s)*-1) 0 var(--gem-sys-spacing--m)}.extension-processing-state_mobile[_ngcontent-ng-c546605890]{margin-top:calc(var(--gem-sys-spacing--xs)*-1)}@media screen and (max-width:768px){.response-content[_ngcontent-ng-c546605890]{margin-inline:-20px;padding-inline:20px}}.embedded-content[_ngcontent-ng-c546605890]{min-width:320px}.implicit-code[_ngcontent-ng-c546605890]     .code-block{-webkit-margin-end:24px;-moz-margin-end:24px;margin-inline-end:24px}.fact-check-completed-banner[_ngcontent-ng-c546605890]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:16px;-webkit-margin-after:16px;margin-block-end:16px;border-radius:12px;color:var(--gem-sys-color--on-surface-variant);background-color:var(--gem-sys-color--surface-container-low);font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--body-l-font-size);font-weight:var(--gem-sys-typography-type-scale--body-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-l-line-height)}.home-and-work[_ngcontent-ng-c546605890]{margin-top:16px}.second-signal[_ngcontent-ng-c546605890]{margin-top:0}.stopped-draft-message[_ngcontent-ng-c546605890]{color:rgba(var(--gem-sys-color--on-surface-variant--rgb),.75);font-style:italic}.browse-url-disclaimer[_ngcontent-ng-c546605890]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--body-m-font-size);font-weight:var(--gem-sys-typography-type-scale--body-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-m-line-height);padding:16px;border-radius:12px;background-color:var(--bard-color-surface-5-opacity-14);color:var(--gem-sys-color--on-surface-variant)}@media only screen and (min-width:768px){.browse-url-disclaimer[_ngcontent-ng-c546605890]{-webkit-margin-end:24px;-moz-margin-end:24px;margin-inline-end:24px}}@media only screen and (min-width:768px){.async-widget[_ngcontent-ng-c546605890]{margin-inline:50px 24px}}@media screen and (min-width:960px){chat-window:not(.side-by-side-immersive)[_nghost-ng-c546605890]   .feedback-form-turn-index[_ngcontent-ng-c546605890], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c546605890]   .feedback-form-turn-index[_ngcontent-ng-c546605890]{padding-bottom:40px;margin-top:-20px}}chat-window:not(.side-by-side-immersive)[_nghost-ng-c546605890]   .feedback-form-turn-index[_ngcontent-ng-c546605890]:empty, chat-window:not(.side-by-side-immersive)   [_nghost-ng-c546605890]   .feedback-form-turn-index[_ngcontent-ng-c546605890]:empty{padding-bottom:0;margin-top:0}debug-info[_ngcontent-ng-c546605890]{margin-bottom:8px}freemium-rag-disclaimer[_ngcontent-ng-c546605890]{display:block;margin-bottom:40px}@media screen and (min-width:960px){freemium-rag-disclaimer[_ngcontent-ng-c546605890]{margin-inline:44px}}freemium-rag-disclaimer[_ngcontent-ng-c546605890]:empty{padding-bottom:0;margin-inline:0;margin:0}.experimental-mode-disclaimer-container[_ngcontent-ng-c546605890]{margin-bottom:var(--gem-sys-spacing--m)}.contextual-discovery-response-promotion[_ngcontent-ng-c546605890]{display:block;margin-block:var(--gem-sys-spacing--m)}</style><style>@charset "UTF-8";.bard-avatar[_ngcontent-ng-c108414610]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;min-height:32px;width:32px;position:relative;-webkit-margin-start:var(--bard-avatar-margin-inline-start,0);-moz-margin-start:var(--bard-avatar-margin-inline-start,0);margin-inline-start:var(--bard-avatar-margin-inline-start,0)}.bard-avatar[_ngcontent-ng-c108414610]   .avatar-container[_ngcontent-ng-c108414610]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-transform:scale(var(--bard-avatar-scale,1));transform:scale(var(--bard-avatar-scale,1))}.bard-avatar.avatar_primary[_ngcontent-ng-c108414610]   img[_ngcontent-ng-c108414610]{height:28px;width:28px}.bard-avatar.avatar_primary_animation[_ngcontent-ng-c108414610]{height:30px;width:30px}.bard-avatar.avatar_primary_animation.is-gpi-avatar[_ngcontent-ng-c108414610]{height:32px;width:32px}.avatar[_ngcontent-ng-c108414610]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.avatar_label[_ngcontent-ng-c108414610]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--label-m-alt-font-size);font-weight:var(--gem-sys-typography-type-scale--label-m-alt-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-m-alt-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-m-alt-line-height);text-align:center;font-size:9.5px;line-height:11px;color:var(--gem-sys-color--outline)}.avatar_primary[_ngcontent-ng-c108414610]   img[_ngcontent-ng-c108414610], .avatar_primary_alt_model[_ngcontent-ng-c108414610], .avatar_primary_model[_ngcontent-ng-c108414610]{height:32px;width:32px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;pointer-events:none}.avatar_primary[_ngcontent-ng-c108414610]   img.is-gpi-avatar[_ngcontent-ng-c108414610], .avatar_primary_alt_model.is-gpi-avatar[_ngcontent-ng-c108414610], .avatar_primary_model.is-gpi-avatar[_ngcontent-ng-c108414610]{-webkit-box-align:unset;-webkit-align-items:unset;-moz-box-align:unset;-ms-flex-align:unset;align-items:unset}.avatar_primary_model.hidden[_ngcontent-ng-c108414610]{-webkit-animation:_ngcontent-ng-c108414610_fadein .5s;animation:_ngcontent-ng-c108414610_fadein .5s;animation-direction:reverse;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.avatar_primary_alt_model[_ngcontent-ng-c108414610]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;opacity:0}.avatar_primary_alt_model[_ngcontent-ng-c108414610]   img[_ngcontent-ng-c108414610]{scale:.75;-webkit-animation:_ngcontent-ng-c108414610_shake .4s;animation:_ngcontent-ng-c108414610_shake .4s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.avatar_primary_alt_model.visible[_ngcontent-ng-c108414610]{-webkit-animation:_ngcontent-ng-c108414610_fadein .5s;animation:_ngcontent-ng-c108414610_fadein .5s;-webkit-animation-direction:normal;animation-direction:normal;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.avatar_primary_animation[_ngcontent-ng-c108414610]{width:32px;height:32px}.avatar_secondary-wrapper[_ngcontent-ng-c108414610]{position:relative;width:32px}.avatar_secondary-wrapper.is-gpi-avatar[_ngcontent-ng-c108414610]{height:32px;position:absolute}.avatar_secondary[_ngcontent-ng-c108414610]{position:absolute;top:0;inset-inline-start:0;border-radius:50%;-webkit-margin-start:-4px;-moz-margin-start:-4px;margin-inline-start:-4px;background-color:var(--gem-sys-color--surface)}.avatar_secondary.is-gpi-avatar[_ngcontent-ng-c108414610]{-webkit-margin-start:auto;-moz-margin-start:auto;margin-inline-start:auto}.avatar_secondary[_ngcontent-ng-c108414610]   img[_ngcontent-ng-c108414610]{height:24px;width:24px}.avatar_secondary[_ngcontent-ng-c108414610]   mat-icon[_ngcontent-ng-c108414610]{color:var(--gem-sys-color--on-surface)}.avatar_spinner_animation[_ngcontent-ng-c108414610]{position:absolute;top:0;width:32px;height:32px;pointer-events:none;opacity:1;visibility:visible;-webkit-transition:opacity .1s .1s;transition:opacity .1s .1s;-webkit-transform:scale(var(--bard-avatar-scale,1));transform:scale(var(--bard-avatar-scale,1))}.avatar_stroke[_ngcontent-ng-c108414610]{fill:none;-webkit-animation-duration:1.25s;animation-duration:1.25s;-webkit-animation-timing-function:cubic-bezier(.4,0,.2,1);animation-timing-function:cubic-bezier(.4,0,.2,1);-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;stroke-dashoffset:107;stroke-dasharray:107;stroke-width:2}.avatar_bottom-circle[_ngcontent-ng-c108414610], .avatar_top-circle[_ngcontent-ng-c108414610]{width:36px;height:36px}.avatar_top-circle[_ngcontent-ng-c108414610]{position:absolute;top:-2px;inset-inline-start:-2px}.avatar_top-circle[_ngcontent-ng-c108414610]   linearGradient[_ngcontent-ng-c108414610]{-webkit-transform:rotate(20deg);transform:rotate(20deg)}.avatar_bottom-circle[_ngcontent-ng-c108414610]{position:absolute;top:-2px;inset-inline-start:26px}.avatar_bottom-circle[_ngcontent-ng-c108414610]   linearGradient[_ngcontent-ng-c108414610]{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.avatar_top-stroke[_ngcontent-ng-c108414610]{stroke:url(#gradient-top);-webkit-animation-name:_ngcontent-ng-c108414610_circleTopStrokeAnimation;animation-name:_ngcontent-ng-c108414610_circleTopStrokeAnimation}.avatar_bottom-stroke[_ngcontent-ng-c108414610]{stroke:url(#gradient-bottom);-webkit-animation-name:_ngcontent-ng-c108414610_circleBottomStrokeAnimation;animation-name:_ngcontent-ng-c108414610_circleBottomStrokeAnimation;-webkit-animation-delay:.5s;animation-delay:.5s}.avatar_circle_color-1[_ngcontent-ng-c108414610]{stop-color:var(--bard-color-bard-avatar-v2-basic-circle-stop-1)}.avatar_circle_color-2[_ngcontent-ng-c108414610]{stop-color:var(--bard-color-bard-avatar-v2-basic-circle-stop-2)}.avatar_circle_color-3[_ngcontent-ng-c108414610]{stop-color:var(--bard-color-bard-avatar-v2-basic-circle-stop-3)}.avatar_circle_color-4[_ngcontent-ng-c108414610]{stop-color:var(--bard-color-bard-avatar-v2-basic-circle-stop-1)}.advanced[_ngcontent-ng-c108414610]   .avatar_circle_color-1[_ngcontent-ng-c108414610]{stop-color:var(--bard-color-bard-avatar-v2-advanced-circle-stop-1)}.advanced[_ngcontent-ng-c108414610]   .avatar_circle_color-2[_ngcontent-ng-c108414610]{stop-color:var(--bard-color-bard-avatar-v2-advanced-circle-stop-2)}.advanced[_ngcontent-ng-c108414610]   .avatar_circle_color-3[_ngcontent-ng-c108414610]{stop-color:var(--bard-color-bard-avatar-v2-advanced-circle-stop-3)}.advanced[_ngcontent-ng-c108414610]   .avatar_circle_color-4[_ngcontent-ng-c108414610]{stop-color:var(--bard-color-bard-avatar-v2-advanced-circle-stop-1)}@-webkit-keyframes _ngcontent-ng-c108414610_circleTopStrokeAnimation{0%,40%{stroke-dashoffset:107;-webkit-transform:rotate(30deg);transform:rotate(30deg)}70%{stroke-dashoffset:34;-webkit-transform:rotate(82deg);transform:rotate(82deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(328deg);transform:rotate(328deg)}}@keyframes _ngcontent-ng-c108414610_circleTopStrokeAnimation{0%,40%{stroke-dashoffset:107;-webkit-transform:rotate(30deg);transform:rotate(30deg)}70%{stroke-dashoffset:34;-webkit-transform:rotate(82deg);transform:rotate(82deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(328deg);transform:rotate(328deg)}}@-webkit-keyframes _ngcontent-ng-c108414610_circleBottomStrokeAnimation{0%,25%{stroke-dashoffset:107;-webkit-transform:rotate(216deg);transform:rotate(216deg);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}55%{stroke-dashoffset:192;-webkit-transform:rotate(216deg);transform:rotate(216deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(-214deg);transform:rotate(-214deg)}}@keyframes _ngcontent-ng-c108414610_circleBottomStrokeAnimation{0%,25%{stroke-dashoffset:107;-webkit-transform:rotate(216deg);transform:rotate(216deg);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}55%{stroke-dashoffset:192;-webkit-transform:rotate(216deg);transform:rotate(216deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(-214deg);transform:rotate(-214deg)}}@-webkit-keyframes _ngcontent-ng-c108414610_shake{0%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}20%{-webkit-transform:translate(-1.5px,-1.5px);transform:translate(-1.5px,-1.5px)}40%{-webkit-transform:translate(3px,1.5px);transform:translate(3px,1.5px)}60%{-webkit-transform:translate(-1.5px,1.5px);transform:translate(-1.5px,1.5px)}80%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}to{-webkit-transform:translate(1.5px,-1.5px);transform:translate(1.5px,-1.5px)}}@keyframes _ngcontent-ng-c108414610_shake{0%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}20%{-webkit-transform:translate(-1.5px,-1.5px);transform:translate(-1.5px,-1.5px)}40%{-webkit-transform:translate(3px,1.5px);transform:translate(3px,1.5px)}60%{-webkit-transform:translate(-1.5px,1.5px);transform:translate(-1.5px,1.5px)}80%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}to{-webkit-transform:translate(1.5px,-1.5px);transform:translate(1.5px,-1.5px)}}@-webkit-keyframes _ngcontent-ng-c108414610_fadein{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-ng-c108414610_fadein{0%{opacity:0}to{opacity:1}}.response-container[_ngcontent-ng-c108414610]{background-color:var(--gem-sys-color--surface);border-radius:16px;padding:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:relative;padding-bottom:40px;min-height:100%}.reduced-bottom-padding[_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]{padding-bottom:20px}.response-container.no-background[_ngcontent-ng-c108414610]{background-color:inherit}.response-container[_ngcontent-ng-c108414610]   .more-button[_ngcontent-ng-c108414610]{color:var(--gem-sys-color--on-surface-variant);min-height:40px;min-width:40px;padding:0;border-radius:var(--gem-sys-shape--corner-full);float:right}.response-container[_ngcontent-ng-c108414610]   .more-button[_ngcontent-ng-c108414610]   mat-icon[_ngcontent-ng-c108414610]{margin:0}.response-container[_ngcontent-ng-c108414610]   .response-container-header[_ngcontent-ng-c108414610]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.response-container[_ngcontent-ng-c108414610]   .response-container-header-controls[_ngcontent-ng-c108414610]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;min-width:100%}.response-container[_ngcontent-ng-c108414610]   .response-container-header-avatar[_ngcontent-ng-c108414610]{-webkit-align-self:start;-ms-flex-item-align:start;align-self:start;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;margin-bottom:var(--header-avatar-margin-bottom,8px)}.response-container[_ngcontent-ng-c108414610]   .menu-button-wrapper[_ngcontent-ng-c108414610]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start}.response-container[_ngcontent-ng-c108414610]   .response-container-footer[_ngcontent-ng-c108414610]{-webkit-margin-start:-12px;-moz-margin-start:-12px;margin-inline-start:-12px;--response-container-footer-padding:60px;--response-container-footer-padding-v2:0}.response-container.response-container-side-panel[_ngcontent-ng-c108414610]{padding:16px}.response-container.response-container-side-panel[_ngcontent-ng-c108414610]   .response-container-footer[_ngcontent-ng-c108414610]{-webkit-margin-start:-16px;-moz-margin-start:-16px;margin-inline-start:-16px;--response-container-footer-padding:16px}.response-container   immersive-panel[_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610], immersive-panel   [_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]{padding-bottom:0}.response-container[_ngcontent-ng-c108414610]   .single-draft-response-container[_ngcontent-ng-c108414610]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--title-s-font-size);font-weight:var(--gem-sys-typography-type-scale--title-s-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-s-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-s-line-height);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;min-height:32px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-padding-end:8px;-moz-padding-end:8px;padding-inline-end:8px}.response-container[_ngcontent-ng-c108414610]   .single-draft-response-container[_ngcontent-ng-c108414610]   .action-button[_ngcontent-ng-c108414610]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;color:var(--gem-sys-color--on-surface)}.response-container[_ngcontent-ng-c108414610]   .single-draft-response-container[_ngcontent-ng-c108414610]   .action-button[_ngcontent-ng-c108414610]   .mat-icon[_ngcontent-ng-c108414610]{color:var(--gem-sys-color--primary);width:20px;height:20px;font-size:20px;margin:5px 0 0 5px}.response-container[_ngcontent-ng-c108414610]   .tts[_ngcontent-ng-c108414610]{-webkit-padding-end:40px;-moz-padding-end:40px;padding-inline-end:40px;-webkit-margin-end:-12px;-moz-margin-end:-12px;margin-inline-end:-12px}.response-container[_ngcontent-ng-c108414610]   .generate-drafts-container[_ngcontent-ng-c108414610]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--title-s-font-size);font-weight:var(--gem-sys-typography-type-scale--title-s-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-s-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-s-line-height);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;height:48px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-padding-end:8px;-moz-padding-end:8px;padding-inline-end:8px;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.response-container[_ngcontent-ng-c108414610]   .generate-drafts-container[_ngcontent-ng-c108414610]   .generate-drafts-button[_ngcontent-ng-c108414610]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;color:var(--gem-sys-color--on-surface)}.response-container[_ngcontent-ng-c108414610]   .generate-drafts-container[_ngcontent-ng-c108414610]   .generate-drafts-button[_ngcontent-ng-c108414610]   .mat-icon[_ngcontent-ng-c108414610]{color:var(--gem-sys-color--primary);width:28px;height:28px;font-size:28px;margin:5px 0 0 5px}.response-container[_ngcontent-ng-c108414610]   .generate-drafts-container[_ngcontent-ng-c108414610]   .generate-drafts-button[_ngcontent-ng-c108414610]   .drafts-loading-spinner[_ngcontent-ng-c108414610]{-webkit-margin-start:11px;-moz-margin-start:11px;margin-inline-start:11px;-webkit-margin-end:6px;-moz-margin-end:6px;margin-inline-end:6px}.response-container-with-gpi[_ngcontent-ng-c108414610]{min-height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.response-container-with-gpi[_ngcontent-ng-c108414610]   .bot-name[_ngcontent-ng-c108414610]{width:100%}.response-container-header-status[_ngcontent-ng-c108414610]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:var(--gem-sys-spacing--xs);-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;min-width:0;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.response-container-small-bottom[_ngcontent-ng-c108414610]{border-radius:16px 16px 4px 4px;margin-bottom:-4px}.response-container-content[_ngcontent-ng-c108414610]{padding-top:var(--gem-sys-spacing--xs);-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;height:auto;min-width:0;min-height:100%}.response-container-content[_ngcontent-ng-c108414610]     .tunable-selection-style{background-color:var(--gem-sys-color--primary-container);padding:2px 0}@media (prefers-contrast:more){.response-container-content[_ngcontent-ng-c108414610]     .tunable-selection-style{-webkit-text-decoration:dotted underline var(--gem-sys-color--on-surface) 1.5px;-moz-text-decoration:dotted underline var(--gem-sys-color--on-surface) 1.5px;text-decoration:dotted underline var(--gem-sys-color--on-surface) 1.5px;text-underline-offset:3px}}.skeleton-loader-container[_ngcontent-ng-c108414610]{display:block}.skeleton-loader-container.in-progress[_ngcontent-ng-c108414610]{margin-top:6px}recitations-gutter[_ngcontent-ng-c108414610]{height:100%;overflow:hidden}.presented-response-container[_ngcontent-ng-c108414610]{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;min-height:100%}.presented-response-container[_ngcontent-ng-c108414610]   .avatar-gutter[_ngcontent-ng-c108414610]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.presented-response-container[_ngcontent-ng-c108414610]   .tunable-selection-menu[_ngcontent-ng-c108414610]{position:absolute;z-index:2}.avatar[_ngcontent-ng-c108414610]{width:32px;height:32px;-webkit-margin-end:24px;-moz-margin-end:24px;margin-inline-end:24px;border-radius:50%;-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.avatar-component[_ngcontent-ng-c108414610]{-webkit-margin-end:var(--avatar-component-margin-inline-end,12px);-moz-margin-end:var(--avatar-component-margin-inline-end,12px);margin-inline-end:var(--avatar-component-margin-inline-end,12px);-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.mat-expansion-panel[_ngcontent-ng-c108414610]{background-color:var(--gem-sys-color--surface)}.bot-name[_ngcontent-ng-c108414610]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;gap:4px;line-height:32px;-webkit-transition:-webkit-margin-start .25s;transition:-webkit-margin-start .25s;transition:margin-inline-start .25s;transition:margin-inline-start .25s,-webkit-margin-start .25s,-moz-margin-start .25s}.response-container-header-controls[_ngcontent-ng-c108414610]   .bot-name[_ngcontent-ng-c108414610]{-webkit-margin-after:13px;margin-block-end:13px}.response-container-content[_ngcontent-ng-c108414610]   .bot-name[_ngcontent-ng-c108414610]{margin-block:calc(var(--gem-sys-spacing--xs)*-1) var(--gem-sys-spacing--l)}.is-mobile[_ngcontent-ng-c108414610]   .response-container-content[_ngcontent-ng-c108414610]   .bot-name[_ngcontent-ng-c108414610]{margin-top:0}.bot-name.bot-name-while-loading[_ngcontent-ng-c108414610]{-webkit-margin-start:32px;-moz-margin-start:32px;margin-inline-start:32px}.bot-name-text[_ngcontent-ng-c108414610]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bot-name-ugc-label[_ngcontent-ng-c108414610]{white-space:nowrap;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:var(--gem-sys-color--outline);overflow:hidden;text-overflow:ellipsis}.bot-name-ugc-label[_ngcontent-ng-c108414610]:before{content:"•";display:inline-block;-webkit-margin-end:4px;-moz-margin-end:4px;margin-inline-end:4px}[_nghost-ng-c108414610]   .model-response-previews.model-response-previews[_ngcontent-ng-c108414610]{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.model-response-previews[_ngcontent-ng-c108414610]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-margin-start:48px;-moz-margin-start:48px;margin-inline-start:48px}.model-response-previews.mat-expansion-panel[_ngcontent-ng-c108414610]{background-color:var(--gem-sys-color--surface)}.model-response-previews[_ngcontent-ng-c108414610]   mat-expansion-panel-header[_ngcontent-ng-c108414610]{-webkit-box-pack:end;-webkit-justify-content:end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:end;height:48px}.model-response-previews[_ngcontent-ng-c108414610]   mat-expansion-panel-header.mat-expanded[_ngcontent-ng-c108414610]{height:48px}.model-response-previews[_ngcontent-ng-c108414610]   mat-expansion-panel-header[_ngcontent-ng-c108414610]   mat-panel-title[_ngcontent-ng-c108414610]{color:var(--gem-sys-color--on-surface);-webkit-box-pack:end;-webkit-justify-content:end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:end}.model-response-previews[_ngcontent-ng-c108414610]     .mat-expansion-indicator:after{color:var(--gem-sys-color--primary);padding:4px;margin-top:-6px}.model-response-previews[_ngcontent-ng-c108414610]     .mat-expansion-panel-body{margin:0 -6px;padding:0 0 16px}.model-response-previews.mat-expansion-panel[_ngcontent-ng-c108414610]   .mat-panel-title-wrapper[_ngcontent-ng-c108414610]{position:relative}.model-response-previews.mat-expansion-panel[_ngcontent-ng-c108414610]   .mat-expansion-panel-header.cdk-keyboard-focused[_ngcontent-ng-c108414610]:not([aria-disabled=true]), .model-response-previews.mat-expansion-panel[_ngcontent-ng-c108414610]   .mat-expansion-panel-header.cdk-program-focused[_ngcontent-ng-c108414610]:not([aria-disabled=true]), .model-response-previews.mat-expansion-panel[_ngcontent-ng-c108414610]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-ng-c108414610]:hover:not([aria-disabled=true]){background:none}.model-response-previews.mat-expansion-panel[_ngcontent-ng-c108414610]   .mat-expansion-panel-header.cdk-keyboard-focused[_ngcontent-ng-c108414610]:not([aria-disabled=true])   .mat-panel-title-hover[_ngcontent-ng-c108414610], .model-response-previews.mat-expansion-panel[_ngcontent-ng-c108414610]   .mat-expansion-panel-header.cdk-program-focused[_ngcontent-ng-c108414610]:not([aria-disabled=true])   .mat-panel-title-hover[_ngcontent-ng-c108414610], .model-response-previews.mat-expansion-panel[_ngcontent-ng-c108414610]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-ng-c108414610]:hover:not([aria-disabled=true])   .mat-panel-title-hover[_ngcontent-ng-c108414610]{position:absolute;height:36px;inset-inline-start:-12px;inset-inline-end:-36px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);background-color:rgba(var(--bard-color-inverse-primary-background-rgb),.05);border-radius:4px}.model-response-previews.mat-expansion-panel[_ngcontent-ng-c108414610]     .mat-content{overflow:inherit}[_nghost-ng-c108414610]     .interactive-span-selected-v2{background-color:var(--bard-color-recitation-background)}[_nghost-ng-c108414610]     .contradictory, [_nghost-ng-c108414610]     .entailed{cursor:pointer;border-radius:4px;box-decoration-break:clone;-webkit-box-decoration-break:clone}[_nghost-ng-c108414610]     .entailed{background-color:var(--bard-color-fact-check-tooltip-entailed-highlight);text-decoration:underline;-webkit-text-decoration-color:transparent;-moz-text-decoration-color:transparent;text-decoration-color:transparent}[_nghost-ng-c108414610]     .entailed.interactive-span-hovered, [_nghost-ng-c108414610]     .entailed.interactive-span-selected-v2, [_nghost-ng-c108414610]     .entailed:hover{background-color:var(--bard-color-fact-check-tooltip-entailed-selected);text-decoration:underline;-webkit-text-decoration-color:transparent;-moz-text-decoration-color:transparent;text-decoration-color:transparent}[_nghost-ng-c108414610]     .entailed.interactive-span-hovered.not-hoverable, [_nghost-ng-c108414610]     .entailed.not-hoverable:hover{background-color:var(--bard-color-fact-check-tooltip-entailed-highlight);text-decoration:none}[_nghost-ng-c108414610]     .contradictory{background-color:var(--bard-color-fact-check-tooltip-contradictory-highlight);text-decoration:underline;-webkit-text-decoration-color:transparent;-moz-text-decoration-color:transparent;text-decoration-color:transparent}[_nghost-ng-c108414610]     .contradictory.interactive-span-hovered, [_nghost-ng-c108414610]     .contradictory.interactive-span-selected-v2, [_nghost-ng-c108414610]     .contradictory:hover{background-color:var(--bard-color-fact-check-tooltip-contradictory-selected);text-decoration:underline;-webkit-text-decoration-color:transparent;-moz-text-decoration-color:transparent;text-decoration-color:transparent}[_nghost-ng-c108414610]     .contradictory.interactive-span-hovered.not-hoverable, [_nghost-ng-c108414610]     .contradictory.not-hoverable:hover{background-color:var(--bard-color-fact-check-tooltip-contradictory-highlight);text-decoration:none}[_nghost-ng-c108414610]     .tts-spoken-token, [_nghost-ng-c108414610]     .tts-spoken-token .tts-spoken-sentence{background-color:var(--bard-color-tts-token-highlight)}[_nghost-ng-c108414610]     .tts-spoken-sentence{background-color:var(--bard-color-tts-sentence-highlight)}@media screen and (min-width:960px){chat-window:not(.side-by-side-immersive)[_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610], share-viewer[_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610], share-viewer   [_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]{padding-top:0;padding-bottom:40px;padding-inline:0 44px}.reduced-bottom-padding[_nghost-ng-c108414610]   chat-window:not(.side-by-side-immersive)[_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610], .reduced-bottom-padding[_nghost-ng-c108414610]   share-viewer[_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610], share-viewer   [_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]{padding-bottom:20px}chat-window:not(.side-by-side-immersive)[_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]   .response-container-footer[_ngcontent-ng-c108414610], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]   .response-container-footer[_ngcontent-ng-c108414610], share-viewer[_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]   .response-container-footer[_ngcontent-ng-c108414610], share-viewer   [_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]   .response-container-footer[_ngcontent-ng-c108414610]{--response-container-footer-padding-v2:50px}chat-window:not(.side-by-side-immersive)[_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]   .tts[_ngcontent-ng-c108414610], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]   .tts[_ngcontent-ng-c108414610], share-viewer[_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]   .tts[_ngcontent-ng-c108414610], share-viewer   [_nghost-ng-c108414610]   .response-container[_ngcontent-ng-c108414610]   .tts[_ngcontent-ng-c108414610]{-webkit-padding-end:8px;-moz-padding-end:8px;padding-inline-end:8px;-webkit-margin-end:-22px;-moz-margin-end:-22px;margin-inline-end:-22px}chat-window:not(.side-by-side-immersive)[_nghost-ng-c108414610]   .response-container.tts-removed[_ngcontent-ng-c108414610], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c108414610]   .response-container.tts-removed[_ngcontent-ng-c108414610], share-viewer[_nghost-ng-c108414610]   .response-container.tts-removed[_ngcontent-ng-c108414610], share-viewer   [_nghost-ng-c108414610]   .response-container.tts-removed[_ngcontent-ng-c108414610]{-webkit-padding-end:0;-moz-padding-end:0;padding-inline-end:0}chat-window:not(.side-by-side-immersive)[_nghost-ng-c108414610]   .avatar-component[_ngcontent-ng-c108414610], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c108414610]   .avatar-component[_ngcontent-ng-c108414610], share-viewer[_nghost-ng-c108414610]   .avatar-component[_ngcontent-ng-c108414610], share-viewer   [_nghost-ng-c108414610]   .avatar-component[_ngcontent-ng-c108414610]{-webkit-margin-end:20px;-moz-margin-end:20px;margin-inline-end:20px}}</style><style>a[_ngcontent-ng-c1279331124]{color:inherit}</style><style>.model-thoughts[_ngcontent-ng-c4115365821]{-webkit-margin-start:calc(var(--gem-sys-spacing--l)*-1);-moz-margin-start:calc(var(--gem-sys-spacing--l)*-1);margin-inline-start:calc(var(--gem-sys-spacing--l)*-1);margin-top:calc(var(--gem-sys-spacing--s)*-1);-webkit-margin-after:var(--gem-sys-spacing--xxl);margin-block-end:var(--gem-sys-spacing--xxl)}.model-thoughts[_ngcontent-ng-c4115365821]   .thoughts-header-button-content[_ngcontent-ng-c4115365821]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.model-thoughts[_ngcontent-ng-c4115365821]   .thoughts-header-button-content[_ngcontent-ng-c4115365821]   .thoughts-header-button-label[_ngcontent-ng-c4115365821]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--gem-sys-color--on-surface)}.model-thoughts[_ngcontent-ng-c4115365821]   .thoughts-header-button-content[_ngcontent-ng-c4115365821]   .thoughts-header-button-icons[_ngcontent-ng-c4115365821]{padding:6px 0 6px 6px}.model-thoughts[_ngcontent-ng-c4115365821]   .thoughts-content[_ngcontent-ng-c4115365821]{font-style:italic;-webkit-margin-start:var(--gem-sys-spacing--l);-moz-margin-start:var(--gem-sys-spacing--l);margin-inline-start:var(--gem-sys-spacing--l)}.model-thoughts[_ngcontent-ng-c4115365821]   .thoughts-content[_ngcontent-ng-c4115365821]   .thought-tool-header-container[_ngcontent-ng-c4115365821]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-padding-after:var(--gem-sys-spacing--l);padding-block-end:var(--gem-sys-spacing--l)}.model-thoughts[_ngcontent-ng-c4115365821]   .thoughts-content[_ngcontent-ng-c4115365821]   .thought-tool-header-container[_ngcontent-ng-c4115365821]   .tool-icon-container[_ngcontent-ng-c4115365821]{height:1.25rem;width:1.25rem}.model-thoughts[_ngcontent-ng-c4115365821]   .thoughts-content[_ngcontent-ng-c4115365821]   .thought-tool-header-container[_ngcontent-ng-c4115365821]   img.tool-icon[_ngcontent-ng-c4115365821]{width:100%;height:100%;-webkit-margin-start:-50%;-moz-margin-start:-50%;margin-inline-start:-50%}.model-thoughts[_ngcontent-ng-c4115365821]   .thoughts-content[_ngcontent-ng-c4115365821]   .thought-tool-header-container[_ngcontent-ng-c4115365821]   .tool-thoughts-header[_ngcontent-ng-c4115365821]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--body-m-font-size);font-weight:var(--gem-sys-typography-type-scale--body-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-m-line-height);line-height:1.25rem;font-weight:700;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.model-thoughts[_ngcontent-ng-c4115365821]   .thoughts-content[_ngcontent-ng-c4115365821]   .message-container[_ngcontent-ng-c4115365821]{-webkit-border-start:1px solid var(--gem-sys-color--outline-variant);-moz-border-start:1px solid var(--gem-sys-color--outline-variant);border-inline-start:1px solid var(--gem-sys-color--outline-variant);-webkit-padding-start:var(--gem-sys-spacing--xxl);-moz-padding-start:var(--gem-sys-spacing--xxl);padding-inline-start:var(--gem-sys-spacing--xxl)}
/*# sourceMappingURL=model_thoughts.css.map */</style><style>.content-container[_ngcontent-ng-c2546766667]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;gap:var(--gem-sys-spacing--l);border-radius:var(--gem-sys-shape--corner-large);color:var(--gem-sys-color--on-surface);margin-top:var(--gem-sys-spacing--l);padding:var(--gem-sys-spacing--l) var(--gem-sys-spacing--l) 0}.content-container.status-unknown[_ngcontent-ng-c2546766667]{padding-bottom:var(--gem-sys-spacing--s);background-color:var(--gem-sys-color--primary-container)}.content-container.status-known[_ngcontent-ng-c2546766667]{padding-bottom:var(--gem-sys-spacing--l);background-color:var(--gem-sys-color--surface-container)}.content-container[_ngcontent-ng-c2546766667]   mat-icon[_ngcontent-ng-c2546766667]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.banner-text-container[_ngcontent-ng-c2546766667]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:var(--gem-sys-spacing--s)}.button-container[_ngcontent-ng-c2546766667]{-webkit-margin-start:-12px;-moz-margin-start:-12px;margin-inline-start:-12px}.button[_ngcontent-ng-c2546766667]{min-width:0;color:var(--gem-sys-color--primary)}.link[_ngcontent-ng-c2546766667]{color:var(--gem-sys-color--primary)}</style><style>html[_ngcontent-ng-c934245196]{--mat-icon-button-touch-target-display:none}.mat-mdc-icon-button.mat-mdc-button-base[_ngcontent-ng-c934245196]{--mdc-icon-button-state-layer-size:40px;--mat-icon-button-state-layer-size:40px;width:var(--mat-icon-button-state-layer-size);height:var(--mat-icon-button-state-layer-size);padding:8px}.response-tts-container[_ngcontent-ng-c934245196]{position:absolute;top:4px;inset-inline-end:0}.response-tts-container.hidden-tts[_ngcontent-ng-c934245196]{opacity:0;-webkit-transition:opacity .2s linear;transition:opacity .2s linear;pointer-events:none}.response-tts-container.hidden-tts.active[_ngcontent-ng-c934245196]{opacity:1;pointer-events:auto}.response-tts-container[_ngcontent-ng-c934245196]   .tts-button[_ngcontent-ng-c934245196]{-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0}@media only screen and (min-width:960px){.response-tts-container[_ngcontent-ng-c934245196]   .tts-button[_ngcontent-ng-c934245196]{-webkit-margin-end:-10px;-moz-margin-end:-10px;margin-inline-end:-10px}}.playback-speed-menu-trigger[_ngcontent-ng-c934245196]{position:absolute;top:52px;inset-inline-end:46px}.playback-speed-menu-trigger.multi[_ngcontent-ng-c934245196]{top:46px}.playback-speed-menu-item.selected[_ngcontent-ng-c934245196]{font-weight:700}  .mat-mdc-menu-panel.playback-speed-menu button{height:32px;min-height:unset}.tts-button-container.active[_ngcontent-ng-c934245196]{position:-webkit-sticky;position:sticky;top:69px;z-index:1}.tts-button-container.active[_ngcontent-ng-c934245196]   .tts-button[_ngcontent-ng-c934245196]{background-color:var(--gem-sys-color--primary-container);box-shadow:0 4px 8px 3px rgba(0,0,0,.3)}</style><style>.bard-avatar[_ngcontent-ng-c2434151383]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;min-height:32px;width:32px;position:relative;-webkit-margin-start:var(--bard-avatar-margin-inline-start,0);-moz-margin-start:var(--bard-avatar-margin-inline-start,0);margin-inline-start:var(--bard-avatar-margin-inline-start,0)}.bard-avatar[_ngcontent-ng-c2434151383]   .avatar-container[_ngcontent-ng-c2434151383]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-transform:scale(var(--bard-avatar-scale,1));transform:scale(var(--bard-avatar-scale,1))}.bard-avatar.avatar_primary[_ngcontent-ng-c2434151383]   img[_ngcontent-ng-c2434151383]{height:28px;width:28px}.bard-avatar.avatar_primary_animation[_ngcontent-ng-c2434151383]{height:30px;width:30px}.bard-avatar.avatar_primary_animation.is-gpi-avatar[_ngcontent-ng-c2434151383]{height:32px;width:32px}.avatar[_ngcontent-ng-c2434151383]{height:32px;width:32px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.avatar_label[_ngcontent-ng-c2434151383]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--label-m-alt-font-size);font-weight:var(--gem-sys-typography-type-scale--label-m-alt-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-m-alt-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-m-alt-line-height);text-align:center;font-size:9.5px;line-height:11px;color:var(--gem-sys-color--outline)}.avatar_primary[_ngcontent-ng-c2434151383]   img[_ngcontent-ng-c2434151383], .avatar_primary_alt_model[_ngcontent-ng-c2434151383], .avatar_primary_model[_ngcontent-ng-c2434151383]{height:32px;width:32px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;pointer-events:none}.avatar_primary[_ngcontent-ng-c2434151383]   img.is-gpi-avatar[_ngcontent-ng-c2434151383], .avatar_primary_alt_model.is-gpi-avatar[_ngcontent-ng-c2434151383], .avatar_primary_model.is-gpi-avatar[_ngcontent-ng-c2434151383]{-webkit-box-align:unset;-webkit-align-items:unset;-moz-box-align:unset;-ms-flex-align:unset;align-items:unset}.avatar_primary_model.hidden[_ngcontent-ng-c2434151383]{-webkit-animation:_ngcontent-ng-c2434151383_fadein .5s;animation:_ngcontent-ng-c2434151383_fadein .5s;animation-direction:reverse;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.avatar_primary_alt_model[_ngcontent-ng-c2434151383]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;opacity:0}.avatar_primary_alt_model[_ngcontent-ng-c2434151383]   img[_ngcontent-ng-c2434151383]{scale:.75;-webkit-animation:_ngcontent-ng-c2434151383_shake .4s;animation:_ngcontent-ng-c2434151383_shake .4s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.avatar_primary_alt_model.visible[_ngcontent-ng-c2434151383]{-webkit-animation:_ngcontent-ng-c2434151383_fadein .5s;animation:_ngcontent-ng-c2434151383_fadein .5s;-webkit-animation-direction:normal;animation-direction:normal;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.avatar_primary_animation[_ngcontent-ng-c2434151383]{width:32px;height:32px}.avatar_secondary-wrapper[_ngcontent-ng-c2434151383]{position:relative;width:32px}.avatar_secondary-wrapper.is-gpi-avatar[_ngcontent-ng-c2434151383]{height:32px;position:absolute}.avatar_secondary[_ngcontent-ng-c2434151383]{position:absolute;top:0;inset-inline-start:0;border-radius:50%;-webkit-margin-start:-4px;-moz-margin-start:-4px;margin-inline-start:-4px;background-color:var(--gem-sys-color--surface)}.avatar_secondary.is-gpi-avatar[_ngcontent-ng-c2434151383]{-webkit-margin-start:auto;-moz-margin-start:auto;margin-inline-start:auto}.avatar_secondary[_ngcontent-ng-c2434151383]   img[_ngcontent-ng-c2434151383]{height:24px;width:24px}.avatar_secondary[_ngcontent-ng-c2434151383]   mat-icon[_ngcontent-ng-c2434151383]{color:var(--gem-sys-color--on-surface)}.avatar_spinner_animation[_ngcontent-ng-c2434151383]{position:absolute;top:0;width:32px;height:32px;pointer-events:none;opacity:1;visibility:visible;-webkit-transition:opacity .1s .1s;transition:opacity .1s .1s;-webkit-transform:scale(var(--bard-avatar-scale,1));transform:scale(var(--bard-avatar-scale,1))}.avatar_stroke[_ngcontent-ng-c2434151383]{fill:none;-webkit-animation-duration:1.25s;animation-duration:1.25s;-webkit-animation-timing-function:cubic-bezier(.4,0,.2,1);animation-timing-function:cubic-bezier(.4,0,.2,1);-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;stroke-dashoffset:107;stroke-dasharray:107;stroke-width:2}.avatar_bottom-circle[_ngcontent-ng-c2434151383], .avatar_top-circle[_ngcontent-ng-c2434151383]{width:36px;height:36px}.avatar_top-circle[_ngcontent-ng-c2434151383]{position:absolute;top:-2px;inset-inline-start:-2px}.avatar_top-circle[_ngcontent-ng-c2434151383]   linearGradient[_ngcontent-ng-c2434151383]{-webkit-transform:rotate(20deg);transform:rotate(20deg)}.avatar_bottom-circle[_ngcontent-ng-c2434151383]{position:absolute;top:-2px;inset-inline-start:26px}.avatar_bottom-circle[_ngcontent-ng-c2434151383]   linearGradient[_ngcontent-ng-c2434151383]{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.avatar_top-stroke[_ngcontent-ng-c2434151383]{stroke:url(#gradient-top);-webkit-animation-name:_ngcontent-ng-c2434151383_circleTopStrokeAnimation;animation-name:_ngcontent-ng-c2434151383_circleTopStrokeAnimation}.avatar_bottom-stroke[_ngcontent-ng-c2434151383]{stroke:url(#gradient-bottom);-webkit-animation-name:_ngcontent-ng-c2434151383_circleBottomStrokeAnimation;animation-name:_ngcontent-ng-c2434151383_circleBottomStrokeAnimation;-webkit-animation-delay:.5s;animation-delay:.5s}.avatar_circle_color-1[_ngcontent-ng-c2434151383]{stop-color:var(--bard-color-bard-avatar-v2-basic-circle-stop-1)}.avatar_circle_color-2[_ngcontent-ng-c2434151383]{stop-color:var(--bard-color-bard-avatar-v2-basic-circle-stop-2)}.avatar_circle_color-3[_ngcontent-ng-c2434151383]{stop-color:var(--bard-color-bard-avatar-v2-basic-circle-stop-3)}.avatar_circle_color-4[_ngcontent-ng-c2434151383]{stop-color:var(--bard-color-bard-avatar-v2-basic-circle-stop-1)}.advanced[_ngcontent-ng-c2434151383]   .avatar_circle_color-1[_ngcontent-ng-c2434151383]{stop-color:var(--bard-color-bard-avatar-v2-advanced-circle-stop-1)}.advanced[_ngcontent-ng-c2434151383]   .avatar_circle_color-2[_ngcontent-ng-c2434151383]{stop-color:var(--bard-color-bard-avatar-v2-advanced-circle-stop-2)}.advanced[_ngcontent-ng-c2434151383]   .avatar_circle_color-3[_ngcontent-ng-c2434151383]{stop-color:var(--bard-color-bard-avatar-v2-advanced-circle-stop-3)}.advanced[_ngcontent-ng-c2434151383]   .avatar_circle_color-4[_ngcontent-ng-c2434151383]{stop-color:var(--bard-color-bard-avatar-v2-advanced-circle-stop-1)}@-webkit-keyframes _ngcontent-ng-c2434151383_circleTopStrokeAnimation{0%,40%{stroke-dashoffset:107;-webkit-transform:rotate(30deg);transform:rotate(30deg)}70%{stroke-dashoffset:34;-webkit-transform:rotate(82deg);transform:rotate(82deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(328deg);transform:rotate(328deg)}}@keyframes _ngcontent-ng-c2434151383_circleTopStrokeAnimation{0%,40%{stroke-dashoffset:107;-webkit-transform:rotate(30deg);transform:rotate(30deg)}70%{stroke-dashoffset:34;-webkit-transform:rotate(82deg);transform:rotate(82deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(328deg);transform:rotate(328deg)}}@-webkit-keyframes _ngcontent-ng-c2434151383_circleBottomStrokeAnimation{0%,25%{stroke-dashoffset:107;-webkit-transform:rotate(216deg);transform:rotate(216deg);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}55%{stroke-dashoffset:192;-webkit-transform:rotate(216deg);transform:rotate(216deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(-214deg);transform:rotate(-214deg)}}@keyframes _ngcontent-ng-c2434151383_circleBottomStrokeAnimation{0%,25%{stroke-dashoffset:107;-webkit-transform:rotate(216deg);transform:rotate(216deg);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}55%{stroke-dashoffset:192;-webkit-transform:rotate(216deg);transform:rotate(216deg)}to{stroke-dashoffset:107;-webkit-transform:rotate(-214deg);transform:rotate(-214deg)}}@-webkit-keyframes _ngcontent-ng-c2434151383_shake{0%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}20%{-webkit-transform:translate(-1.5px,-1.5px);transform:translate(-1.5px,-1.5px)}40%{-webkit-transform:translate(3px,1.5px);transform:translate(3px,1.5px)}60%{-webkit-transform:translate(-1.5px,1.5px);transform:translate(-1.5px,1.5px)}80%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}to{-webkit-transform:translate(1.5px,-1.5px);transform:translate(1.5px,-1.5px)}}@keyframes _ngcontent-ng-c2434151383_shake{0%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}20%{-webkit-transform:translate(-1.5px,-1.5px);transform:translate(-1.5px,-1.5px)}40%{-webkit-transform:translate(3px,1.5px);transform:translate(3px,1.5px)}60%{-webkit-transform:translate(-1.5px,1.5px);transform:translate(-1.5px,1.5px)}80%{-webkit-transform:translate(1.5px,1.5px);transform:translate(1.5px,1.5px)}to{-webkit-transform:translate(1.5px,-1.5px);transform:translate(1.5px,-1.5px)}}@-webkit-keyframes _ngcontent-ng-c2434151383_fadein{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-ng-c2434151383_fadein{0%{opacity:0}to{opacity:1}}</style><style>[_nghost-ng-c4161157681]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:var(--gem-sys-spacing--l) 0;-webkit-padding-start:0;-moz-padding-start:0;padding-inline-start:0}.user-query-container[_ngcontent-ng-c4161157681]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--gem-sys-spacing--s);margin-top:6px;min-width:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.user-query-container[_ngcontent-ng-c4161157681]   .edit-button[_ngcontent-ng-c4161157681]{background:var(--gem-sys-color--surface-container-high)}.user-query-container[_ngcontent-ng-c4161157681]   .edit-button[_ngcontent-ng-c4161157681]:not(:focus-visible){opacity:0;-webkit-transition:opacity .25s ease;transition:opacity .25s ease}[_nghost-ng-c4161157681]:hover   .user-query-container[_ngcontent-ng-c4161157681]   .edit-button[_ngcontent-ng-c4161157681]{opacity:1;-webkit-transition:opacity 0s;transition:opacity 0s}.user-query-container[_ngcontent-ng-c4161157681]   .edit-button-icon[_ngcontent-ng-c4161157681]{color:var(--gem-sys-color--on-surface-variant)}.user-query-container.edit-mode[_ngcontent-ng-c4161157681]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:unset;background:unset}.button-gutter[_ngcontent-ng-c4161157681]{display:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:var(--gem-sys-spacing--s);margin-top:0}.button-gutter[_ngcontent-ng-c4161157681]   .collapse-button[_ngcontent-ng-c4161157681]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.query-content[_ngcontent-ng-c4161157681]{color:var(--gem-sys-color--on-surface);word-break:break-word;min-width:0;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.query-content.edit-mode[_ngcontent-ng-c4161157681]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.context-url-icon[_ngcontent-ng-c4161157681]{vertical-align:middle;-webkit-margin-end:5px;-moz-margin-end:5px;margin-inline-end:5px;margin-bottom:3px}.query-text[_ngcontent-ng-c4161157681]{margin-block:0;padding-top:6px}.query-text.collapsed[_ngcontent-ng-c4161157681]{text-overflow:ellipsis;overflow:hidden;line-clamp:4;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:4}.query-text-line[_ngcontent-ng-c4161157681]{margin:0}.query-file-preview[_ngcontent-ng-c4161157681]{display:contents;-webkit-margin-end:5px;-moz-margin-end:5px;margin-inline-end:5px}.edit-form[_ngcontent-ng-c4161157681]{width:100%}.edit-button-area[_ngcontent-ng-c4161157681]{-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;margin:6px 0}.cancel-button[_ngcontent-ng-c4161157681]{margin-inline:4px}.update-button[_ngcontent-ng-c4161157681]{margin-inline:4px auto}.async-user-icon[_ngcontent-ng-c4161157681]{height:28px;width:28px;font-size:28px}.async-timestamp[_ngcontent-ng-c4161157681]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--label-m-alt-font-size);font-weight:var(--gem-sys-typography-type-scale--label-m-alt-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-m-alt-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-m-alt-line-height);color:var(--gem-sys-color--on-surface-variant)}@media screen and (min-width:960px){chat-window:not(.side-by-side-immersive)[_nghost-ng-c4161157681], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c4161157681], share-viewer[_nghost-ng-c4161157681], share-viewer   [_nghost-ng-c4161157681]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:0}chat-window:not(.side-by-side-immersive)[_nghost-ng-c4161157681]   .user-query-container[_ngcontent-ng-c4161157681], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c4161157681]   .user-query-container[_ngcontent-ng-c4161157681], share-viewer[_nghost-ng-c4161157681]   .user-query-container[_ngcontent-ng-c4161157681], share-viewer   [_nghost-ng-c4161157681]   .user-query-container[_ngcontent-ng-c4161157681]{margin-top:0}chat-window:not(.side-by-side-immersive)[_nghost-ng-c4161157681]   .user-query-container[_ngcontent-ng-c4161157681]   .button-gutter[_ngcontent-ng-c4161157681], chat-window:not(.side-by-side-immersive)   [_nghost-ng-c4161157681]   .user-query-container[_ngcontent-ng-c4161157681]   .button-gutter[_ngcontent-ng-c4161157681], share-viewer[_nghost-ng-c4161157681]   .user-query-container[_ngcontent-ng-c4161157681]   .button-gutter[_ngcontent-ng-c4161157681], share-viewer   [_nghost-ng-c4161157681]   .user-query-container[_ngcontent-ng-c4161157681]   .button-gutter[_ngcontent-ng-c4161157681]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}}.user-query-bubble-container[_ngcontent-ng-c4161157681]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;gap:0;margin:var(--gem-sys-spacing--m) 0 0 0;padding-bottom:0}@media screen and (min-width:960px){.user-query-bubble-container[_ngcontent-ng-c4161157681]{padding-bottom:var(--gem-sys-spacing--xxl)}}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .collapse-button[_ngcontent-ng-c4161157681]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .collapse-button[_ngcontent-ng-c4161157681], .user-query-bubble-container[_ngcontent-ng-c4161157681]   .expand-button[_ngcontent-ng-c4161157681]{--mat-filled-button-container-height:40px;padding:var(--gem-sys-spacing--xs) 0 0 0}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .edit-button[_ngcontent-ng-c4161157681]{background:unset;opacity:0;padding:0}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .query-text[_ngcontent-ng-c4161157681]{line-height:28px;padding-top:0}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .query-text.collapsed[_ngcontent-ng-c4161157681]{text-overflow:ellipsis;overflow:hidden;line-clamp:3;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .query-text[_ngcontent-ng-c4161157681]   .query-text-line[_ngcontent-ng-c4161157681]{margin:0}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .query-content[_ngcontent-ng-c4161157681]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding-left:52px}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .query-content.verticle-align-for-single-line-text[_ngcontent-ng-c4161157681]{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .query-content[_ngcontent-ng-c4161157681]:not(.edit-mode){margin-bottom:var(--gem-sys-spacing--s)}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .query-content.edit-mode[_ngcontent-ng-c4161157681]{background:unset;border-radius:24px;padding-top:0;--mat-form-field-outlined-container-shape:24px;--mat-form-field-subscript-text-line-height:0;--mat-form-field-container-height:auto}@media screen and (min-width:1280px){.user-query-bubble-container[_ngcontent-ng-c4161157681]   .query-content[_ngcontent-ng-c4161157681]{-webkit-margin-start:52px;-moz-margin-start:52px;margin-inline-start:52px;padding:0}}.user-query-bubble-container   .query-content   [_nghost-ng-c4161157681]:active   .edit-button[_ngcontent-ng-c4161157681]{opacity:1;-webkit-transition:opacity .25s ease;transition:opacity .25s ease}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .edit-container[_ngcontent-ng-c4161157681]{width:100%}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .edit-button-area[_ngcontent-ng-c4161157681]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--gem-sys-spacing--l);justify-self:flex-end;margin:0}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .edit-button-area[_ngcontent-ng-c4161157681]   button[_ngcontent-ng-c4161157681]{height:40px;padding:0 var(--gem-sys-spacing--xxl);margin:0}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .edit-button[_ngcontent-ng-c4161157681]{margin-right:var(--gem-sys-spacing--xs)}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .query-file-carousel[_ngcontent-ng-c4161157681]{margin:0 0 var(--gem-sys-spacing--s) 0}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .query-file-carousel.desktop[_ngcontent-ng-c4161157681]{width:100%}.user-query-bubble-container[_ngcontent-ng-c4161157681]   .file-preview-container[_ngcontent-ng-c4161157681]{margin:0 0 0 52px}.horizontal-container[_ngcontent-ng-c4161157681]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row}[dir=rtl][_nghost-ng-c4161157681]   .horizontal-container[_ngcontent-ng-c4161157681], [dir=rtl]   [_nghost-ng-c4161157681]   .horizontal-container[_ngcontent-ng-c4161157681]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-moz-box-orient:horizontal;-moz-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;gap:var(--gem-sys-spacing--xs)}.user-query-bubble-with-background[_ngcontent-ng-c4161157681]{padding:var(--gem-sys-spacing--m) var(--gem-sys-spacing--l)}.user-query-bubble-with-background[_ngcontent-ng-c4161157681]:not(.edit-mode){background:var(--gem-sys-color--surface-container-high);border-radius:24px var(--gem-sys-shape--corner-extra-small) 24px 24px;max-width:calc(476px - var(--gem-sys-spacing--m)*2)}[dir=rtl][_nghost-ng-c4161157681]   .user-query-bubble-with-background[_ngcontent-ng-c4161157681]:not(.edit-mode), [dir=rtl]   [_nghost-ng-c4161157681]   .user-query-bubble-with-background[_ngcontent-ng-c4161157681]:not(.edit-mode){border-radius:var(--gem-sys-shape--corner-extra-small) 24px 24px 24px}</style><style>.toolbox-drawer-button[_ngcontent-ng-c2364026885]{--mat-icon-button-icon-color:var(--gem-sys-color--on-surface-variant);--mat-icon-button-state-layer-size:40px;--mat-icon-button-state-layer-color:var(--gem-sys-color--on-surface-variant);--mat-icon-button-hover-state-layer-opacity:0.08;--mat-icon-button-pressed-state-layer-opacity:0.08}.toolbox-drawer-button.has-selected-item[_ngcontent-ng-c2364026885]{background-color:var(--gem-sys-color--surface-container-low);--mat-icon-button-icon-color:var(--gem-sys-color--soft-glow-blue-1)}.toolbox-drawer-container[_ngcontent-ng-c2364026885]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:var(--gem-sys-spacing--s)}.toolbox-drawer-card[_ngcontent-ng-c2364026885]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;background-color:var(--gem-sys-color--surface-container);border-radius:var(--gem-sys-shape--corner-large);min-width:236px}</style><style>[_nghost-ng-c4259962243]{display:block;--button-ripple-color:rgba(var(--gem-sys-color--on-surface-variant--rgb),0.08)}[hidden][_nghost-ng-c4259962243]{display:none}.toolbox-drawer-item-list-button[_ngcontent-ng-c4259962243]{width:100%}.toolbox-drawer-item-button[_ngcontent-ng-c4259962243]{-moz-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:40px;border:none;color:var(--gem-sys-color--on-surface-low);background-color:transparent;gap:var(--gem-sys-spacing--xs);font-weight:500;padding-inline:var(--gem-sys-spacing--s) var(--gem-sys-spacing--m);border-radius:var(--gem-sys-shape--corner-extra-large);cursor:pointer}.toolbox-drawer-item-button[_ngcontent-ng-c4259962243]:after{content:"";position:absolute;inset:calc(var(--gem-sys-spacing--xs)*-1) 0;border-radius:var(--gem-sys-shape--corner-large);background-color:transparent}.toolbox-drawer-item-button[_ngcontent-ng-c4259962243]:hover:not(.is-mobile){background-color:rgba(var(--gem-sys-color--on-surface-variant--rgb),.08)}.toolbox-drawer-item-button[_ngcontent-ng-c4259962243]:focus-visible{outline:var(--gem-sys-color--soft-glow-blue-1) solid 1px;outline-offset:0}.toolbox-drawer-item-button.disabled[_ngcontent-ng-c4259962243]{pointer-events:none}.toolbox-drawer-item-button.disabled[_ngcontent-ng-c4259962243]:not(.is-selected){color:rgba(var(--gem-sys-color--on-surface-low--rgb),.5)}.toolbox-drawer-item-button.is-mobile[_ngcontent-ng-c4259962243]{padding-inline:var(--gem-sys-spacing--m)}.is-selected[_ngcontent-ng-c4259962243]:not([mat-list-item]), .is-selected[_ngcontent-ng-c4259962243]:not([mat-list-item]):hover{background-color:var(--gem-sys-color--surface-container-low);color:var(--gem-sys-color--soft-glow-blue-1)}.menu-icon[_ngcontent-ng-c4259962243]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.selected-icon[_ngcontent-ng-c4259962243]{color:var(--gem-sys-color--soft-glow-blue-1);-webkit-margin-start:auto;-moz-margin-start:auto;margin-inline-start:auto}.feature-content[_ngcontent-ng-c4259962243]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:var(--gem-sys-spacing--l);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.toolbox-drawer-button-label[_ngcontent-ng-c4259962243]{text-align:start}</style><script src="./انواع بودجه بندی_files/highlight.pack.js.download" nonce=""></script><style>.markdown-main-panel[_ngcontent-ng-c1892759787]{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--body-l-font-size);font-weight:var(--gem-sys-typography-type-scale--body-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-l-line-height)}.markdown[_ngcontent-ng-c1892759787]{color:var(--gem-sys-color--on-surface);font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--body-l-font-size);font-weight:var(--gem-sys-typography-type-scale--body-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-l-line-height);-webkit-margin-end:24px;-moz-margin-end:24px;margin-inline-end:24px}@media only screen and (max-width:768px){.markdown[_ngcontent-ng-c1892759787]{-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0}}@media screen and (min-width:768px){.markdown[_ngcontent-ng-c1892759787]{line-height:1.75rem;-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0}}.markdown.stronger[_ngcontent-ng-c1892759787]     strong{font-weight:700}.markdown[_ngcontent-ng-c1892759787]    >:first-child{margin-top:0}.markdown[_ngcontent-ng-c1892759787]    >:first-child .code-block{margin-top:0}.markdown[_ngcontent-ng-c1892759787]     .horizontal-scroll-wrapper{overflow-x:scroll}@media screen and (max-width:768px){.markdown[_ngcontent-ng-c1892759787]     .horizontal-scroll-wrapper{margin-inline:-20px;padding-inline:20px}}.markdown[_ngcontent-ng-c1892759787]     .table-block-component{overflow:scroll hidden}.markdown[_ngcontent-ng-c1892759787]     p{margin:0 0 var(--gem-sys-spacing--l);white-space:pre-wrap;word-break:break-word}.markdown[_ngcontent-ng-c1892759787]     p:has(+ol), .markdown[_ngcontent-ng-c1892759787]     p:has(+ul){margin-bottom:var(--gem-sys-spacing--s)}.markdown[_ngcontent-ng-c1892759787]     strong{font-weight:500}.markdown[_ngcontent-ng-c1892759787]     h1, .markdown[_ngcontent-ng-c1892759787]     h2, .markdown[_ngcontent-ng-c1892759787]     h3, .markdown[_ngcontent-ng-c1892759787]     h4, .markdown[_ngcontent-ng-c1892759787]     h5, .markdown[_ngcontent-ng-c1892759787]     h6{margin:1.75rem 0 var(--gem-sys-spacing--s)}.markdown[_ngcontent-ng-c1892759787]     h1{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:22px;font-weight:700;line-height:28px}.markdown[_ngcontent-ng-c1892759787]     h2{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:20px;font-weight:700;line-height:28px}.markdown[_ngcontent-ng-c1892759787]     h3, .markdown[_ngcontent-ng-c1892759787]     h4, .markdown[_ngcontent-ng-c1892759787]     h5, .markdown[_ngcontent-ng-c1892759787]     h6{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:16px;font-weight:700;line-height:24px}.markdown[_ngcontent-ng-c1892759787]     ol{-webkit-padding-start:1.75rem;-moz-padding-start:1.75rem;padding-inline-start:1.75rem}.markdown[_ngcontent-ng-c1892759787]     ul{list-style-type:disc;-webkit-padding-start:1.6875rem;-moz-padding-start:1.6875rem;padding-inline-start:1.6875rem}.markdown[_ngcontent-ng-c1892759787]     ol, .markdown[_ngcontent-ng-c1892759787]     ul{margin:var(--gem-sys-spacing--s) 0}.markdown[_ngcontent-ng-c1892759787]     ol li, .markdown[_ngcontent-ng-c1892759787]     ol li>p, .markdown[_ngcontent-ng-c1892759787]     ul li, .markdown[_ngcontent-ng-c1892759787]     ul li>p{margin:var(--gem-sys-spacing--s) 0;-webkit-padding-start:var(--gem-sys-spacing--xs);-moz-padding-start:var(--gem-sys-spacing--xs);padding-inline-start:var(--gem-sys-spacing--xs)}.markdown[_ngcontent-ng-c1892759787]    >ol, .markdown[_ngcontent-ng-c1892759787]    >ul{margin-bottom:var(--gem-sys-spacing--l)}.markdown[_ngcontent-ng-c1892759787]     a{color:var(--gem-sys-color--primary)}.markdown[_ngcontent-ng-c1892759787]     table{background-color:var(--gem-sys-color--surface-container);border-radius:4px;border-spacing:0;border-collapse:separate;width:100%;overflow:hidden}.markdown[_ngcontent-ng-c1892759787]     table th{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--title-m-font-size);font-weight:var(--gem-sys-typography-type-scale--title-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-m-line-height);padding:16px;text-align:left}.markdown[_ngcontent-ng-c1892759787]     table td{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--body-m-font-size);font-weight:var(--gem-sys-typography-type-scale--body-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-m-line-height);border-top:1px solid var(--gem-sys-color--surface-container-high);padding:8px 16px}.markdown[_ngcontent-ng-c1892759787]     table:where(.table-formatting) th{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--label-l-font-size);font-weight:var(--gem-sys-typography-type-scale--label-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-l-line-height);background-color:var(--gem-sys-color--surface-container-high);padding:8px 12px;vertical-align:top}.markdown[_ngcontent-ng-c1892759787]     table:where(.table-formatting) td{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--body-m-font-size);font-weight:var(--gem-sys-typography-type-scale--body-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-m-line-height);background-color:var(--gem-sys-color--surface-container-low);padding:8px 12px;vertical-align:top}.markdown[_ngcontent-ng-c1892759787]     code{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--body-m-font-size);font-weight:var(--gem-sys-typography-type-scale--body-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-m-line-height);font-family:Google Sans Mono,monospace;color:var(--gem-sys-color--on-surface-variant);background-color:var(--gem-sys-color--surface-container-high);border-radius:6px;padding:1px 6px}.markdown[_ngcontent-ng-c1892759787]     .attachment-container.generated-images, .markdown[_ngcontent-ng-c1892759787]     .attachment-container.search-images{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column nowrap;gap:8px;margin:16px 0}@media screen and (min-width:600px){.markdown[_ngcontent-ng-c1892759787]     .attachment-container.generated-images, .markdown[_ngcontent-ng-c1892759787]     .attachment-container.search-images{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row wrap;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap}}.markdown[_ngcontent-ng-c1892759787]     table .attachment-container.generated-images, .markdown[_ngcontent-ng-c1892759787]     table .attachment-container.search-images{display:block}.markdown[_ngcontent-ng-c1892759787]     .attachment-container.audio-player{margin:16px 0}.markdown[_ngcontent-ng-c1892759787]     .attachment-container.conversation-attribution-block{display:inline}.markdown[_ngcontent-ng-c1892759787]     li .text-block-with-attachment{vertical-align:top}.markdown[_ngcontent-ng-c1892759787]     .text-block-with-attachment{display:grid}.markdown[_ngcontent-ng-c1892759787]     .text-block-with-attachment .attachment-container{-webkit-box-ordinal-group:2;-webkit-order:1;-moz-box-ordinal-group:2;-ms-flex-order:1;order:1}@media only screen and (min-width:768px){.markdown[_ngcontent-ng-c1892759787]     .text-block-with-attachment{display:inline-block;width:100%}.markdown[_ngcontent-ng-c1892759787]     .text-block-with-attachment .attachment-container{float:right;width:-webkit-min-content;width:-moz-min-content;width:min-content}[dir=rtl][_nghost-ng-c1892759787]   .markdown[_ngcontent-ng-c1892759787]     .text-block-with-attachment .attachment-container, [dir=rtl]   [_nghost-ng-c1892759787]   .markdown[_ngcontent-ng-c1892759787]     .text-block-with-attachment .attachment-container{float:left}}.markdown.tutor-markdown-rendering[_ngcontent-ng-c1892759787]     blockquote{-webkit-border-start:1px solid var(--gem-sys-color--outline-variant);-moz-border-start:1px solid var(--gem-sys-color--outline-variant);border-inline-start:1px solid var(--gem-sys-color--outline-variant);-webkit-padding-start:12px;-moz-padding-start:12px;padding-inline-start:12px;-webkit-margin-start:20px;-moz-margin-start:20px;margin-inline-start:20px;-webkit-margin-after:20px;margin-block-end:20px}.markdown.tutor-markdown-rendering[_ngcontent-ng-c1892759787]     learning-highlight p:last-child{margin-bottom:0}.markdown.animate[_ngcontent-ng-c1892759787]     .animating{-webkit-animation-duration:var(--animation-duration);animation-duration:var(--animation-duration);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-name:_ngcontent-ng-c1892759787_fade-in-text;animation-name:_ngcontent-ng-c1892759787_fade-in-text;-webkit-animation-timing-function:var(--fade-animation-function);animation-timing-function:var(--fade-animation-function)}.markdown.animate[_ngcontent-ng-c1892759787]     .pending{display:none}.markdown.animate[_ngcontent-ng-c1892759787]     .pendingol, .markdown.animate[_ngcontent-ng-c1892759787]     .pendingp, .markdown.animate[_ngcontent-ng-c1892759787]     .pendingspan, .markdown.animate[_ngcontent-ng-c1892759787]     .pendingul{opacity:0}@-webkit-keyframes _ngcontent-ng-c1892759787_fade-in-text{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-ng-c1892759787_fade-in-text{0%{opacity:0}to{opacity:1}}[_nghost-ng-c1892759787]     .tts-spoken-token, [_nghost-ng-c1892759787]     .tts-spoken-token .tts-spoken-sentence{background-color:var(--bard-color-tts-token-highlight)}[_nghost-ng-c1892759787]     .tts-spoken-sentence{background-color:var(--bard-color-tts-sentence-highlight)}.has-border[_ngcontent-ng-c1892759787]{border:1px solid var(--gem-sys-color--surface-variant);border-radius:var(--gem-sys-shape--corner-large);padding:var(--gem-sys-spacing--xl)}</style><style>.message-actions-hover-boundary   .hide-action-bar[_nghost-ng-c2047645396]{display:block;-webkit-transition:opacity .3s linear;transition:opacity .3s linear;opacity:0}.message-actions-hover-boundary.hovered   .hide-action-bar[_nghost-ng-c2047645396], .message-actions-hover-boundary:focus-within   .hide-action-bar[_nghost-ng-c2047645396], .message-actions-hover-boundary:hover   .hide-action-bar[_nghost-ng-c2047645396]{opacity:1}.message-actions-hover-boundary   .hide-action-bar.has-open-menu[_nghost-ng-c2047645396]{opacity:1}@media screen and (max-width:768px){.hide-action-bar[_nghost-ng-c2047645396]{opacity:1}}.actions-container-v2[_ngcontent-ng-c2047645396]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-bottom:8px;margin-top:0;padding-left:7px}.actions-container-v2.is-mobile[_ngcontent-ng-c2047645396]{padding-left:5px}.actions-container-v2[_ngcontent-ng-c2047645396]   .spacer[_ngcontent-ng-c2047645396]{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.actions-container-v2[_ngcontent-ng-c2047645396]   mat-paginator[_ngcontent-ng-c2047645396]{margin-top:-4px}.actions-container-v2[_ngcontent-ng-c2047645396]   mat-paginator[_ngcontent-ng-c2047645396]     .mat-mdc-paginator-range-label{font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--label-l-font-size);font-weight:var(--gem-sys-typography-type-scale--label-l-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--label-l-font-tracking);line-height:var(--gem-sys-typography-type-scale--label-l-line-height)}.actions-container-v2[_ngcontent-ng-c2047645396]   mat-paginator[_ngcontent-ng-c2047645396]     .mat-mdc-paginator-container{padding:0}.actions-container-v2[_ngcontent-ng-c2047645396]   mat-paginator[_ngcontent-ng-c2047645396]     .mat-mdc-paginator-range-label{margin:0 9px;text-wrap:nowrap}@media only screen and (max-width:768px){.actions-container-v2[_ngcontent-ng-c2047645396]   mat-paginator[_ngcontent-ng-c2047645396]{margin-top:0}}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;gap:0}@media only screen and (max-width:768px){.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]{gap:0}}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .icon-button[_ngcontent-ng-c2047645396]{--mat-text-button-label-text-color:var(--gem-sys-color--on-surface-variant);min-height:32px;min-width:32px;--mat-text-button-icon-offset:0;--mat-text-button-container-height:32px}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]:before{content:"";-webkit-padding-end:var(--response-container-footer-padding-v2);-moz-padding-end:var(--response-container-footer-padding-v2);padding-inline-end:var(--response-container-footer-padding-v2);height:100%;background-color:transparent;display:block;position:-webkit-sticky;position:sticky}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .animation-container[_ngcontent-ng-c2047645396]{width:21px;height:21px}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .animation-container.regenerate-animation[_ngcontent-ng-c2047645396]{width:23px;height:23px}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .animation-container[_ngcontent-ng-c2047645396]     svg path{fill:var(--gem-sys-color--primary);stroke:var(--gem-sys-color--primary)}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .icon-button[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .icon-button.mat-mdc-button[_ngcontent-ng-c2047645396] > .mat-icon[_ngcontent-ng-c2047645396]{padding:0;margin:0}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .icon-button.selected[_ngcontent-ng-c2047645396]   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .icon-button[_ngcontent-ng-c2047645396]:active   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .icon-button[_ngcontent-ng-c2047645396]:focus   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .icon-button[_ngcontent-ng-c2047645396]:focus-within   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c2047645396]:before{opacity:.08}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .icon-button.selected[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .icon-button[_ngcontent-ng-c2047645396]:active{--mat-text-button-label-text-color:var(--gem-sys-color--primary);--mat-text-button-state-layer-color:var(--gem-sys-color--primary);font-variation-settings:"FILL" 1}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:var(--gem-sys-spacing--xs);position:relative;font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--body-m-font-size);font-weight:var(--gem-sys-typography-type-scale--body-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--body-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--body-m-line-height)}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]{position:absolute;-webkit-transform:translateY(calc(-100% - 8px));transform:translateY(calc(-100% - 8px));width:250px;border-radius:16px;background-color:var(--gem-sys-color--primary-container);z-index:1;box-shadow:0 4px 4px 0 var(--bard-color-tooltip-box-shadow);padding:0 16px 8px 8px}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]:before{content:"";position:absolute;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid transparent;border-radius:inherit;pointer-events:none}@media (forced-colors:active){.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]:before{border-color:CanvasText}}@media only screen and (max-width:840px){.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]{display:none}}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]   .tooltip-title[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]   .tooltip-title[_ngcontent-ng-c2047645396]{margin:13px 0 4px 8px;font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--title-m-font-size);font-weight:var(--gem-sys-typography-type-scale--title-m-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-m-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-m-line-height)}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]   .tooltip-content[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]   .tooltip-content[_ngcontent-ng-c2047645396]{margin-bottom:16px;margin-left:8px}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]   .tooltip-button[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-export[_ngcontent-ng-c2047645396]   .tooltip-button[_ngcontent-ng-c2047645396]{-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]:not(.mobile), .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]:not(.mobile){-webkit-transform:translateY(calc(-100% - 7px));transform:translateY(calc(-100% - 7px))}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]:not(.mobile), .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]:not(.mobile){-webkit-transform:translateY(calc(-100% - 7px));transform:translateY(calc(-100% - 7px))}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]:not(.mobile), .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]:not(.mobile){inset-inline-start:calc(100% + 8px)}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]{-webkit-transform:translateY(calc(-100% - 8px));transform:translateY(calc(-100% - 8px));position:absolute;width:313px;border-radius:16px;background-color:var(--gem-sys-color--primary-container);z-index:1;box-shadow:0 4px 4px 0 rgba(0,0,0,.251);padding:0 16px 8px 8px}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]:before{content:"";position:absolute;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid transparent;border-radius:inherit;pointer-events:none}@media (forced-colors:active){.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]:before, .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]:before{border-color:CanvasText}}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-title[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]   .tooltip-title[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-title[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-title[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]   .tooltip-title[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-title[_ngcontent-ng-c2047645396]{margin:13px 0 4px 8px}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-content[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]   .tooltip-content[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-content[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-content[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]   .tooltip-content[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-content[_ngcontent-ng-c2047645396]{margin-bottom:16px;margin-left:8px}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-button[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]   .tooltip-button[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-button[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-button[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]   .tooltip-button[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .tooltip-more[_ngcontent-ng-c2047645396]   .tooltip-button[_ngcontent-ng-c2047645396]{-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}@media only screen and (max-width:768px){.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .colab-tooltip-more[_ngcontent-ng-c2047645396]{width:230px}}@media only screen and (max-width:768px){.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .menu-button-wrapper[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396], .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   .tooltip-anchor-point[_ngcontent-ng-c2047645396]   .legal-concern-tooltip[_ngcontent-ng-c2047645396]{width:230px}}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   button[_ngcontent-ng-c2047645396]   mat-icon[_ngcontent-ng-c2047645396]{vertical-align:middle}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   button[_ngcontent-ng-c2047645396]   mat-icon.refresh-icon[_ngcontent-ng-c2047645396]{font-size:1.3125rem;height:auto;width:auto}.actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]   fact-check-button[_ngcontent-ng-c2047645396]   .icon-button[_ngcontent-ng-c2047645396]{min-height:calc(var(--gem-sys-spacing--l)*2);min-width:calc(var(--gem-sys-spacing--l)*2);width:auto;border-radius:var(--gem-sys-shape--corner-full);height:auto;text-align:center}.fact-check-nudge-container[_ngcontent-ng-c2047645396]{position:absolute;bottom:0;-webkit-margin-start:-69px;-moz-margin-start:-69px;margin-inline-start:-69px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:transparent;box-shadow:none;-webkit-transform:translate(34%,-82%);transform:translate(34%,-82%)}@media only screen and (max-width:768px){.fact-check-nudge-container[_ngcontent-ng-c2047645396]{bottom:60px}}.fact-check-nudge[_ngcontent-ng-c2047645396]{min-height:var(--gem-sys-spacing--xxl);padding:var(--gem-sys-spacing--xs) var(--gem-sys-spacing--s);border-radius:var(--gem-sys-shape--corner-extra-small);display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px;z-index:1;color:var(--gem-sys-color--inverse-on-surface);background-color:var(--gem-sys-color--primary)}.fact-check-nudge[_ngcontent-ng-c2047645396]:before{content:"";position:absolute;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid transparent;border-radius:inherit;pointer-events:none}@media (forced-colors:active){.fact-check-nudge[_ngcontent-ng-c2047645396]:before{border-color:CanvasText}}.fact-check-nudge-triangle[_ngcontent-ng-c2047645396]{width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-top:5.25px solid var(--gem-sys-color--primary)}.action-button[_ngcontent-ng-c2047645396]{gap:16px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.more-menu-button-container[_ngcontent-ng-c2047645396]{position:relative}.co-creation-header[_ngcontent-ng-c2047645396]{margin:12px;font-family:Google Sans,Helvetica Neue,sans-serif;font-size:var(--gem-sys-typography-type-scale--title-s-font-size);font-weight:var(--gem-sys-typography-type-scale--title-s-font-weight);letter-spacing:var(--gem-sys-typography-type-scale--title-s-font-tracking);line-height:var(--gem-sys-typography-type-scale--title-s-line-height);color:var(--gem-sys-color--on-surface-variant)}a[mat-menu-item][_ngcontent-ng-c2047645396], button[mat-menu-item][_ngcontent-ng-c2047645396]{min-height:40px;padding:8px 16px;color:var(--gem-sys-color--on-surface)}a[mat-menu-item][_ngcontent-ng-c2047645396]   mat-icon[_ngcontent-ng-c2047645396], button[mat-menu-item][_ngcontent-ng-c2047645396]   mat-icon[_ngcontent-ng-c2047645396]{font-size:1.25rem;height:auto;color:var(--gem-sys-color--on-surface)}mat-divider[_ngcontent-ng-c2047645396]{border-top-color:var(--gem-sys-color--outline-variant)}.immersives-open[_nghost-ng-c2047645396]   .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]:before, .immersives-open   [_nghost-ng-c2047645396]   .actions-container-v2[_ngcontent-ng-c2047645396]   .buttons-container-v2[_ngcontent-ng-c2047645396]:before{content:none}</style><style>.icon-button[_ngcontent-ng-c4235705938]{min-height:40px;min-width:40px;border-radius:50%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:var(--gem-sys-color--on-surface-variant);padding-inline:0}@media only screen and (max-width:768px){.icon-button[_ngcontent-ng-c4235705938]{min-height:48px;min-width:48px}}.icon-button[_ngcontent-ng-c4235705938]   mat-spinner[_ngcontent-ng-c4235705938]{stroke:var(--gem-sys-color--primary)}.icon-button[_ngcontent-ng-c4235705938]   mat-icon[_ngcontent-ng-c4235705938]{-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0}.icon-button[_ngcontent-ng-c4235705938]   .icon-only-button-icon[_ngcontent-ng-c4235705938]{margin:0;height:20px;width:20px;font-size:20px}@media only screen and (max-width:768px){.icon-button[_ngcontent-ng-c4235705938]   .icon-only-button-icon[_ngcontent-ng-c4235705938]{height:24px;width:24px;font-size:24px}}.icon-button.selected[_ngcontent-ng-c4235705938]{background:var(--gem-sys-color--primary-container);color:var(--gem-sys-color--primary);font-variation-settings:"FILL" 1}@media (forced-colors:active){.icon-button.selected[_ngcontent-ng-c4235705938]   mat-icon[_ngcontent-ng-c4235705938]{overflow:inherit}}@media (forced-colors:active){.icon-button.selected[_ngcontent-ng-c4235705938]{border:3px solid #000}}.button-pressed[_ngcontent-ng-c4235705938]{background:var(--gem-sys-color--primary-container);color:var(--gem-sys-color--primary)}.bottom-sheet-button-icon[_ngcontent-ng-c4235705938]{color:var(--gem-sys-color--on-surface)}button[_ngcontent-ng-c4235705938]{--animation-size:var(--gem-sys-spacing--xxl);height:56px;width:56px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}button[_ngcontent-ng-c4235705938]:before{content:"";height:100%;background-color:transparent;display:block}button[_ngcontent-ng-c4235705938]   mat-icon[_ngcontent-ng-c4235705938]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}button[_ngcontent-ng-c4235705938]   .thumb-animation[_ngcontent-ng-c4235705938]{width:var(--animation-size);height:var(--animation-size)}.selected[_ngcontent-ng-c4235705938]{color:var(--gem-sys-color--primary);font-variation-settings:"FILL" 1}[_nghost-ng-c4235705938]   .icon-button[_ngcontent-ng-c4235705938]{--mat-text-button-label-text-color:var(--gem-sys-color--on-surface-variant);min-height:32px;min-width:32px;--mat-text-button-icon-offset:0;--mat-text-button-container-height:32px}[_nghost-ng-c4235705938]   .icon-button[_ngcontent-ng-c4235705938], [_nghost-ng-c4235705938]   .icon-button.mat-mdc-button[_ngcontent-ng-c4235705938] > .mat-icon[_ngcontent-ng-c4235705938]{padding:0;margin:0}[_nghost-ng-c4235705938]   .icon-button.selected[_ngcontent-ng-c4235705938]   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c4235705938]:before, [_nghost-ng-c4235705938]   .icon-button[_ngcontent-ng-c4235705938]:active   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c4235705938]:before, [_nghost-ng-c4235705938]   .icon-button[_ngcontent-ng-c4235705938]:focus   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c4235705938]:before, [_nghost-ng-c4235705938]   .icon-button[_ngcontent-ng-c4235705938]:focus-within   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c4235705938]:before{opacity:.08}[_nghost-ng-c4235705938]   .icon-button.selected[_ngcontent-ng-c4235705938], [_nghost-ng-c4235705938]   .icon-button[_ngcontent-ng-c4235705938]:active{--mat-text-button-label-text-color:var(--gem-sys-color--primary);--mat-text-button-state-layer-color:var(--gem-sys-color--primary);font-variation-settings:"FILL" 1}[_nghost-ng-c4235705938]   .icon-button[_ngcontent-ng-c4235705938]{--animation-size:21px;height:32px;width:32px;color:var(--mat-text-button-label-text-color);background-color:transparent}</style><style>.icon-button[_ngcontent-ng-c2537264493]{min-height:40px;min-width:40px;border-radius:50%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:var(--gem-sys-color--on-surface-variant);padding-inline:0}@media only screen and (max-width:768px){.icon-button[_ngcontent-ng-c2537264493]{min-height:48px;min-width:48px}}.icon-button[_ngcontent-ng-c2537264493]   mat-spinner[_ngcontent-ng-c2537264493]{stroke:var(--gem-sys-color--primary)}.icon-button[_ngcontent-ng-c2537264493]   mat-icon[_ngcontent-ng-c2537264493]{-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0}.icon-button[_ngcontent-ng-c2537264493]   .icon-only-button-icon[_ngcontent-ng-c2537264493]{margin:0;height:20px;width:20px;font-size:20px}@media only screen and (max-width:768px){.icon-button[_ngcontent-ng-c2537264493]   .icon-only-button-icon[_ngcontent-ng-c2537264493]{height:24px;width:24px;font-size:24px}}.icon-button.selected[_ngcontent-ng-c2537264493]{background:var(--gem-sys-color--primary-container);color:var(--gem-sys-color--primary);font-variation-settings:"FILL" 1}@media (forced-colors:active){.icon-button.selected[_ngcontent-ng-c2537264493]   mat-icon[_ngcontent-ng-c2537264493]{overflow:inherit}}@media (forced-colors:active){.icon-button.selected[_ngcontent-ng-c2537264493]{border:3px solid #000}}.button-pressed[_ngcontent-ng-c2537264493]{background:var(--gem-sys-color--primary-container);color:var(--gem-sys-color--primary)}.bottom-sheet-button-icon[_ngcontent-ng-c2537264493]{color:var(--gem-sys-color--on-surface)}button[_ngcontent-ng-c2537264493]{--animation-size:var(--gem-sys-spacing--xxl);height:56px;width:56px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}button[_ngcontent-ng-c2537264493]:before{content:"";height:100%;background-color:transparent;display:block}button[_ngcontent-ng-c2537264493]   mat-icon[_ngcontent-ng-c2537264493]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}button[_ngcontent-ng-c2537264493]   .thumb-animation[_ngcontent-ng-c2537264493]{width:var(--animation-size);height:var(--animation-size)}.selected[_ngcontent-ng-c2537264493]{color:var(--gem-sys-color--primary);font-variation-settings:"FILL" 1}[_nghost-ng-c2537264493]   .icon-button[_ngcontent-ng-c2537264493]{--mat-text-button-label-text-color:var(--gem-sys-color--on-surface-variant);min-height:32px;min-width:32px;--mat-text-button-icon-offset:0;--mat-text-button-container-height:32px}[_nghost-ng-c2537264493]   .icon-button[_ngcontent-ng-c2537264493], [_nghost-ng-c2537264493]   .icon-button.mat-mdc-button[_ngcontent-ng-c2537264493] > .mat-icon[_ngcontent-ng-c2537264493]{padding:0;margin:0}[_nghost-ng-c2537264493]   .icon-button.selected[_ngcontent-ng-c2537264493]   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c2537264493]:before, [_nghost-ng-c2537264493]   .icon-button[_ngcontent-ng-c2537264493]:active   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c2537264493]:before, [_nghost-ng-c2537264493]   .icon-button[_ngcontent-ng-c2537264493]:focus   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c2537264493]:before, [_nghost-ng-c2537264493]   .icon-button[_ngcontent-ng-c2537264493]:focus-within   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c2537264493]:before{opacity:.08}[_nghost-ng-c2537264493]   .icon-button.selected[_ngcontent-ng-c2537264493], [_nghost-ng-c2537264493]   .icon-button[_ngcontent-ng-c2537264493]:active{--mat-text-button-label-text-color:var(--gem-sys-color--primary);--mat-text-button-state-layer-color:var(--gem-sys-color--primary);font-variation-settings:"FILL" 1}[_nghost-ng-c2537264493]   .icon-button[_ngcontent-ng-c2537264493]{--animation-size:21px;height:32px;width:32px;color:var(--mat-text-button-label-text-color);background-color:transparent}</style><style>[_nghost-ng-c3529685258]{color:var(--gem-sys-color--on-surface)}.code-block-entry[_ngcontent-ng-c3529685258]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:16px;color:var(--gem-sys-color--on-surface)}.code-block-entry[_ngcontent-ng-c3529685258]   .toggle[_ngcontent-ng-c3529685258]{-webkit-margin-start:-8px;-moz-margin-start:-8px;margin-inline-start:-8px}.code-block[_ngcontent-ng-c3529685258]{border-radius:12px;position:relative;margin:16px 0;overflow:hidden}.code-block[_ngcontent-ng-c3529685258]   .code-block-internal-container[_ngcontent-ng-c3529685258]{background-color:var(--gem-sys-color--surface-container);border-radius:0 0 4px 4px}.code-block[_ngcontent-ng-c3529685258]   pre[_ngcontent-ng-c3529685258]{margin:0}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]{font:400 .875rem/1.125rem Google Sans Mono,monospace;color:var(--gem-sys-color--on-surface-variant);background-color:transparent;display:block;overflow-x:auto;padding:16px 16px 22px;direction:ltr}.code-block[_ngcontent-ng-c3529685258]   code.formatted[_ngcontent-ng-c3529685258]{font:400 .875rem/1.3125rem Google Sans Code,monospace;padding:16px}.code-block[_ngcontent-ng-c3529685258]   code.hide[_ngcontent-ng-c3529685258]{display:none}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-comment{color:var(--bard-color-code-comment)}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-tag{color:var(--gem-sys-color--on-surface-variant)}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-operator, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-punctuation, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-subst{color:var(--gem-sys-color--on-surface)}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-operator{opacity:.7}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-bullet, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-deletion, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-name, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-selector-tag, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-template-variable, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-variable{color:var(--bard-color-code-variables)}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-attr, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-link, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-literal, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-number, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-symbol{color:var(--bard-color-code-literal)}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-class, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-title{color:var(--bard-color-code-class)}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-strong{font-weight:700}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-addition, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-code, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-string{color:var(--bard-color-code-string)}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-built_in, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-doctag, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-quote, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-regexp{color:var(--bard-color-code-quotes-and-meta)}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-keyword, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-selector-attr, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-selector-class, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-selector-id, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-selector-pseudo, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-template-tag, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-type{color:var(--bard-color-code-keyword)}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-emphasis{font-style:italic}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-meta, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-meta-keyword, .code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-meta-string{color:var(--bard-color-code-quotes-and-meta)}.code-block[_ngcontent-ng-c3529685258]   code[_ngcontent-ng-c3529685258]     .hljs-meta-keyword{font-weight:700}.code-block[_ngcontent-ng-c3529685258]   .code-result-divider[_ngcontent-ng-c3529685258]{margin-inline:16px}.code-block[_ngcontent-ng-c3529685258]   .code-editor-container[_ngcontent-ng-c3529685258]{background-color:transparent;position:relative;padding:16px 4px 4px 16px}.code-block[_ngcontent-ng-c3529685258]   .code-editor-container.hide[_ngcontent-ng-c3529685258]{display:none}.code-block[_ngcontent-ng-c3529685258]   .code-output-container[_ngcontent-ng-c3529685258]{background-color:transparent;padding:24px 16px 0;border-radius:0 0 4px 4px}.code-block[_ngcontent-ng-c3529685258]   .code-output-container[_ngcontent-ng-c3529685258]   .code-output[_ngcontent-ng-c3529685258]{padding:20px 0}.code-block[_ngcontent-ng-c3529685258]   .code-output-container[_ngcontent-ng-c3529685258]   .msg-output[_ngcontent-ng-c3529685258]   .code-text[_ngcontent-ng-c3529685258]{color:var(--bard-color-code-literal);padding:0}.code-block[_ngcontent-ng-c3529685258]   .code-output-container[_ngcontent-ng-c3529685258]   .error-output[_ngcontent-ng-c3529685258]   .code-text[_ngcontent-ng-c3529685258]{color:var(--gem-sys-color--error);padding:0}.code-block[_ngcontent-ng-c3529685258]   .copy-button[_ngcontent-ng-c3529685258]{margin:-4px 0;-webkit-transform:scale(.8);transform:scale(.8)}.code-block[_ngcontent-ng-c3529685258]   .running-code-spinner[_ngcontent-ng-c3529685258]{display:inline-block;margin:7px 12px 0 0}.code-block[_ngcontent-ng-c3529685258]   .run-code-button[_ngcontent-ng-c3529685258]{margin:-4px 0;-webkit-transform:scale(.8);transform:scale(.8)}.code-block[_ngcontent-ng-c3529685258]   .open-editor-button[_ngcontent-ng-c3529685258]{margin:-4px 0;-webkit-transform:scale(.8);transform:scale(.8)}.code-block[_ngcontent-ng-c3529685258]   .restore-code-button[_ngcontent-ng-c3529685258]{margin:-4px 0;-webkit-transform:scale(.8);transform:scale(.8)}.code-block[_ngcontent-ng-c3529685258]   .code-container[_ngcontent-ng-c3529685258]{border-radius:0}.code-block[_ngcontent-ng-c3529685258]   .code-container.no-decoration-radius[_ngcontent-ng-c3529685258]{border-radius:12px}.code-block[_ngcontent-ng-c3529685258]   .code-block-decoration[_ngcontent-ng-c3529685258]{color:var(--gem-sys-color--on-surface-variant);-webkit-padding-start:16px;-moz-padding-start:16px;padding-inline-start:16px;min-height:24px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.code-block[_ngcontent-ng-c3529685258]   .code-block-decoration[_ngcontent-ng-c3529685258]   .header[_ngcontent-ng-c3529685258]{margin-top:4px}.code-block[_ngcontent-ng-c3529685258]   .code-block-decoration[_ngcontent-ng-c3529685258]   .disclaimer-suffix[_ngcontent-ng-c3529685258]{color:var(--gem-sys-color--primary)}.code-block[_ngcontent-ng-c3529685258]   .header[_ngcontent-ng-c3529685258]{background-color:var(--gem-sys-color--surface-container);border-radius:12px 12px 0 0;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:16px}.code-block[_ngcontent-ng-c3529685258]   .header-formatted[_ngcontent-ng-c3529685258]{background-color:var(--gem-sys-color--surface-container);border-radius:var(--gem-sys-spacing--l) var(--gem-sys-spacing--l) var(--gem-sys-spacing--xs) var(--gem-sys-spacing--xs);-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:var(--gem-sys-spacing--s) var(--gem-sys-spacing--s) var(--gem-sys-spacing--s) var(--gem-sys-spacing--l);margin-bottom:2px;height:32px}.code-block[_ngcontent-ng-c3529685258]   .formatted-code-block-internal-container[_ngcontent-ng-c3529685258]{background-color:var(--gem-sys-color--surface-container);border-radius:var(--gem-sys-spacing--xs) var(--gem-sys-spacing--xs) var(--gem-sys-spacing--l) var(--gem-sys-spacing--l)}.code-block[_ngcontent-ng-c3529685258]   .footer[_ngcontent-ng-c3529685258]{background-color:var(--gem-sys-color--surface-container);border-radius:4px 4px 12px 12px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;overflow-y:hidden;padding:5px 8px 5px 16px;margin-top:2px}.code-block[_ngcontent-ng-c3529685258]   .output-label[_ngcontent-ng-c3529685258]{-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;border-bottom:1px solid var(--gem-sys-color--outline-variant);padding-bottom:10px}</style><script type="text/javascript" charset="UTF-8" src="./انواع بودجه بندی_files/common.js.download" nonce=""></script><script type="text/javascript" charset="UTF-8" src="./انواع بودجه بندی_files/util.js.download" nonce=""></script><style>.icon-button[_ngcontent-ng-c4098520400]{min-height:40px;min-width:40px;border-radius:50%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:var(--gem-sys-color--on-surface-variant);padding-inline:0}@media only screen and (max-width:768px){.icon-button[_ngcontent-ng-c4098520400]{min-height:48px;min-width:48px}}.icon-button[_ngcontent-ng-c4098520400]   mat-spinner[_ngcontent-ng-c4098520400]{stroke:var(--gem-sys-color--primary)}.icon-button[_ngcontent-ng-c4098520400]   mat-icon[_ngcontent-ng-c4098520400]{-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0}.icon-button[_ngcontent-ng-c4098520400]   .icon-only-button-icon[_ngcontent-ng-c4098520400]{margin:0;height:20px;width:20px;font-size:20px}@media only screen and (max-width:768px){.icon-button[_ngcontent-ng-c4098520400]   .icon-only-button-icon[_ngcontent-ng-c4098520400]{height:24px;width:24px;font-size:24px}}.icon-button.selected[_ngcontent-ng-c4098520400]{background:var(--gem-sys-color--primary-container);color:var(--gem-sys-color--primary);font-variation-settings:"FILL" 1}@media (forced-colors:active){.icon-button.selected[_ngcontent-ng-c4098520400]   mat-icon[_ngcontent-ng-c4098520400]{overflow:inherit}}@media (forced-colors:active){.icon-button.selected[_ngcontent-ng-c4098520400]{border:3px solid #000}}.button-pressed[_ngcontent-ng-c4098520400]{background:var(--gem-sys-color--primary-container);color:var(--gem-sys-color--primary)}.bottom-sheet-button-icon[_ngcontent-ng-c4098520400]{color:var(--gem-sys-color--on-surface)}.drafts-loading-spinner[_ngcontent-ng-c4098520400]{margin-inline:11px 6px}button[_ngcontent-ng-c4098520400]{--animation-size:var(--gem-sys-spacing--xxl);height:56px;width:56px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}button[_ngcontent-ng-c4098520400]:disabled{opacity:.12}button[_ngcontent-ng-c4098520400]   mat-icon[_ngcontent-ng-c4098520400]{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}button[_ngcontent-ng-c4098520400]   .regenerate-animation[_ngcontent-ng-c4098520400]{width:var(--animation-size);height:var(--animation-size)}.buttons-container-v2[_nghost-ng-c4098520400]   button[_ngcontent-ng-c4098520400]   mat-icon.refresh-icon[_ngcontent-ng-c4098520400], .buttons-container-v2   [_nghost-ng-c4098520400]   button[_ngcontent-ng-c4098520400]   mat-icon.refresh-icon[_ngcontent-ng-c4098520400]{font-size:1.3125rem;height:auto;width:auto}[_nghost-ng-c4098520400]   .icon-button[_ngcontent-ng-c4098520400]{--mat-text-button-label-text-color:var(--gem-sys-color--on-surface-variant);min-height:32px;min-width:32px;--mat-text-button-icon-offset:0;--mat-text-button-container-height:32px}[_nghost-ng-c4098520400]   .icon-button[_ngcontent-ng-c4098520400], [_nghost-ng-c4098520400]   .icon-button.mat-mdc-button[_ngcontent-ng-c4098520400] > .mat-icon[_ngcontent-ng-c4098520400]{padding:0;margin:0}[_nghost-ng-c4098520400]   .icon-button.selected[_ngcontent-ng-c4098520400]   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c4098520400]:before, [_nghost-ng-c4098520400]   .icon-button[_ngcontent-ng-c4098520400]:active   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c4098520400]:before, [_nghost-ng-c4098520400]   .icon-button[_ngcontent-ng-c4098520400]:focus   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c4098520400]:before, [_nghost-ng-c4098520400]   .icon-button[_ngcontent-ng-c4098520400]:focus-within   .mat-mdc-button-persistent-ripple[_ngcontent-ng-c4098520400]:before{opacity:.08}[_nghost-ng-c4098520400]   .icon-button.selected[_ngcontent-ng-c4098520400], [_nghost-ng-c4098520400]   .icon-button[_ngcontent-ng-c4098520400]:active{--mat-text-button-label-text-color:var(--gem-sys-color--primary);--mat-text-button-state-layer-color:var(--gem-sys-color--primary);font-variation-settings:"FILL" 1}[_nghost-ng-c4098520400]   .icon-button[_ngcontent-ng-c4098520400]{--animation-size:21px;height:32px;width:32px;color:var(--mat-text-button-label-text-color);background-color:transparent}</style><style>a[_ngcontent-ng-c4081450395]{color:inherit}</style><style>a[_ngcontent-ng-c3859153116]{color:inherit}</style><style>.mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}
</style></head><body class="theme-host dark-theme"><script nonce="">'use strict';function e(a,b=`unexpected value ${a}!`){throw Error(b);};function f(a,b){return new TypeError(`Invalid ${b} data <${"svUc8c"}>: ${a.g} (typeof ${typeof a.g})`)}function g(a){const b=a.g;if(b==null)return null;if(typeof b==="string")return b;throw f(a,"string");}function h(){var a=k;let b=a.g;if(b==null)return null;if(typeof b==="number")return b;if(typeof b==="string"){const c=Number(b);if(!isNaN(c)&&(c!==0||b.trim().length!==0))return c}throw f(a,"number");}
class l{constructor(){this.g=m(window)}toString(){const a=g(this);if(a===null)throw Error("Data svUc8c not defined.");return a}};function n(a=window){return a.WIZ_global_data}function m(a=window){return(a=n(a))&&"svUc8c"in a?a.svUc8c:null};var p={u:0,h:1,j:2,s:3,o:4,i:5,v:6,m:7,l:8};const q=["theme-host","light-theme","dark-theme"];function t(){var a=window.localStorage.getItem("Bard-Color-Theme");a=a==="Bard-Dark-Theme"?2:a==="Bard-Light-Theme"?1:0;switch(a){case 0:return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;case 1:return!1;case 2:return!0;default:e(a,"userThemePreference had an unknown type")}};const u=window,v=document.querySelector(".initial-input-area-container > textarea"),w=v instanceof HTMLElement?v:null;
if(w){var x;a:{var k=new l;let a=!0,b=void 0;for(const c in p){const r=p[c];if(a){a=!1;var y;if(typeof r==="number"){let d=void 0;y=(d=h())!=null?d:0}else{let d=void 0;y=(d=g(k))!=null?d:0}b=y}if(r==b){x=b;break a}}JSON.stringify(p);x=b}x===Number(1)&&(w.focus(),u.INITIAL_INPUT_AREA_FOCUSED_MS=performance.now());requestAnimationFrame(()=>{u.INITIAL_INPUT_AREA_LOAD_TIME_MS=performance.now()});w.addEventListener("input",()=>{u.INITIAL_INPUT_AREA_FIRST_CHAR_MS=performance.now()},{once:!0})}
var z=document,A=function(){var a=t();const b={["theme-host"]:!0,["dark-theme"]:a,["light-theme"]:!a};return q.filter(c=>b[c])}();z.body.classList.remove(...q);z.body.classList.add(...A);
</script><div style="display: none"></div><script id="bard-initial-data" data-payload="{&quot;KEsM4&quot;:false}" nonce="">(function(){'use strict';function c(a,b){return new TypeError(`Invalid ${b} data <${"KEsM4"}>: ${a.g} (typeof ${typeof a.g})`)}class d{constructor(a){this.g=a}toString(){var a=this.g;if(a==null)a=null;else if(typeof a!=="string")throw c(this,"string");if(a===null)throw Error("Data KEsM4 not defined.");return a}};var e;{const a=document.getElementById("bard-initial-data");if(a){var f=JSON.parse(a.getAttribute("data-payload")||"{}").KEsM4;e=f===void 0?new d(!1):new d(f)}else e=new d(null)}let g;(g=function(a){let b=a.g;if(b==null)return null;if(typeof b==="boolean")return b;if(typeof b==="string"){b=b.toLowerCase();if(b==="true"||b==="1")return!0;if(b==="false"||b==="0")return!1}throw c(a,"boolean");}(e))!=null&&g&&document.body.classList.add("sidenav-open-on-init");}).call(this);
</script><div class="boqOnegoogleliteOgbOneGoogleBar"><div class="gb_Fa gb_Jd gb_2d gb_e gb_2a gb_Wc gb_H" id="gb" style="background-color: transparent;"><div class="gb_Cd gb_Zd gb_xd" ng-non-bindable="" data-ogsr-up=""><div class="gb_Qe"><div class="gb_3c"><div class="gb_J gb_cd gb_0" data-ogsr-fb="true" data-ogsr-alt="" id="gbwa"><div class="gb_D"><a class="gb_B" aria-label="برنامه‌های Google" href="https://www.google.hr/intl/fa/about/products" aria-expanded="false" role="button" tabindex="0"><svg class="gb_F" focusable="false" viewBox="0 0 24 24"><path d="M6,8c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM12,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM6,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM6,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM12,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM16,6c0,1.1 0.9,2 2,2s2,-0.9 2,-2 -0.9,-2 -2,-2 -2,0.9 -2,2zM12,8c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM18,14c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2zM18,20c1.1,0 2,-0.9 2,-2s-0.9,-2 -2,-2 -2,0.9 -2,2 0.9,2 2,2z"></path><image src="https://ssl.gstatic.com/gb/images/bar/al-icon.png" alt="" height="24" width="24" style="border:none;display:none \9"></image></svg></a></div></div></div><div class="gb_z gb_cd gb_Mf gb_0"><div class="gb_D gb_jb gb_Mf gb_0"><a class="gb_B gb_Za gb_0" aria-expanded="false" aria-label="‫حساب Google: ‪Tohid Arjmand‬‏  
(soheiladv@gmail.com)" href="https://accounts.google.com/SignOutOptions?hl=fa&amp;continue=https://gemini.google.com/app/184a9f472ac9ab94&amp;ec=GBRAkgU" tabindex="0" role="button"><img class="gb_P gbii" src="./انواع بودجه بندی_files/unnamed.jpg" srcset="https://lh3.googleusercontent.com/ogw/AF2bZyiyPKHyGQvcs5mDpLnTNjZ9GsJHHvCZotcRYykhYMcWf3s=s32-c-mo 1x, https://lh3.googleusercontent.com/ogw/AF2bZyiyPKHyGQvcs5mDpLnTNjZ9GsJHHvCZotcRYykhYMcWf3s=s64-c-mo 2x " alt="" aria-hidden="true" data-noaft=""><div class="gb_Q gb_R" aria-hidden="true"><svg class="gb_Ka" height="14" viewBox="0 0 14 14" width="14" xmlns="http://www.w3.org/2000/svg"><circle class="gb_La" cx="7" cy="7" r="7"></circle><path class="gb_Na" d="M6 10H8V12H6V10ZM6 2H8V8H6V2Z"></path></svg></div></a></div></div></div><div aria-hidden="true" style="overflow: hidden; position: absolute; top: 0px; visibility: hidden; width: 370px; z-index: 991; height: 0px; margin-top: 57px; transition: height 0.3s ease-in-out; left: 0px; margin-left: 4px;"><iframe role="presentation" frameborder="0" scrolling="no" name="app" src="./انواع بودجه بندی_files/app.html" style="height: 100%; width: 100%; color-scheme: light; visibility: hidden;"></iframe></div><div style="overflow: hidden; position: absolute; top: 0px; visibility: hidden; width: 436px; z-index: 991; height: 0px; margin-top: 57px; left: 0px; margin-left: 4px;"></div><div style="overflow: hidden; position: absolute; top: 0px; visibility: hidden; width: 420px; z-index: 991; height: 280px; margin-top: 70px; left: 0px; margin-left: 25px;"></div></div></div></div><script nonce="">this.gbar_=this.gbar_||{};(function(_){var window=this;
try{
_.qd=function(a,b,c){if(!a.j)if(c instanceof Array)for(var d of c)_.qd(a,b,d);else{d=(0,_.y)(a.C,a,b);const e=a.v+c;a.v++;b.dataset.eqid=e;a.B[e]=d;b&&b.addEventListener?b.addEventListener(c,d,!1):b&&b.attachEvent?b.attachEvent("on"+c,d):a.o.log(Error("D`"+b))}};
}catch(e){_._DumpException(e)}
try{
var rd=document.querySelector(".gb_J .gb_B"),sd=document.querySelector("#gb.gb_Sc");rd&&!sd&&_.qd(_.ad,rd,"click");
}catch(e){_._DumpException(e)}
try{
_.Zg=function(a){if(a.v)return a.v;for(const b in a.i)if(a.i[b].fa()&&a.i[b].B())return a.i[b];return null};_.$g=function(a,b){a.i[b.J()]=b};var ah=new class extends _.O{constructor(){var a=_.Kc;super();this.B=a;this.v=null;this.o={};this.C={};this.i={};this.j=null}A(a){this.i[a]&&(_.Zg(this)&&_.Zg(this).J()==a||this.i[a].R(!0))}Pa(a){this.j=a;for(const b in this.i)this.i[b].fa()&&this.i[b].Pa(a)}fc(a){return a in this.i?this.i[a]:null}};_.dd("dd",ah);
}catch(e){_._DumpException(e)}
try{
_.ri=function(a,b){return _.H(a,36,b)};
}catch(e){_._DumpException(e)}
try{
var si=document.querySelector(".gb_z .gb_B"),ti=document.querySelector("#gb.gb_Sc");si&&!ti&&_.qd(_.ad,si,"click");
}catch(e){_._DumpException(e)}
})(this.gbar_);
// Google Inc.
</script><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KKRLL9S" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!-- End Google Tag Manager (noscript) --><chat-app id="app-root" ng-version="0.0.0-PLACEHOLDER" _nghost-ng-c3730527948="" class="ng-tns-c3730527948-0"><main _ngcontent-ng-c3730527948="" class="chat-app"><div _ngcontent-ng-c3730527948="" class="side-nav-menu-button"><button _ngcontent-ng-c3730527948="" mat-icon-button="" aria-label="منوِ اصلی" data-test-id="side-nav-menu-button" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger main-menu-button ng-tns-c3730527948-0 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="204298;track:generic_click,impression" aria-describedby="cdk-describedby-message-ng-1-42" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3730527948="" role="img" fonticon="menu" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="menu"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><bard-mode-switcher _ngcontent-ng-c3730527948="" data-test-id="bard-mode-switcher" _nghost-ng-c2700894532="" class="ng-tns-c3730527948-0 ng-trigger ng-trigger-modeSwitcherHoverToOpenAnimation ng-star-inserted" style="transform: translateX(0px);"><!----><!----><button _ngcontent-ng-c2700894532="" mat-button="" data-test-id="bard-mode-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger bard-mode-menu-button gds-mode-switch-button bard-mode-menu-btn-for-nested-menu mat-mdc-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="206752;track:generic_click" aria-haspopup="menu" aria-expanded="false" style=""><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c2700894532="" class="bard-logo-container with-attribution ng-star-inserted"><bard-logo _ngcontent-ng-c2700894532="" _nghost-ng-c3114342097=""><div _ngcontent-ng-c3114342097="" data-test-id="logo" class="logo"><span _ngcontent-ng-c3114342097="" data-test-id="bard-text" class="bard-text"> Gemini </span><!----><!----></div></bard-logo><mat-icon _ngcontent-ng-c2700894532="" role="img" fonticon="arrow_drop_down" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="arrow_drop_down"></mat-icon></div><div _ngcontent-ng-c2700894532="" data-test-id="attribution-text" class="current-mode-title ng-star-inserted"><span _ngcontent-ng-c2700894532="">2.5 Pro (experimental)</span></div><!----><!----></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><mat-menu _ngcontent-ng-c2700894532="" data-test-id="desktop-nested-mode-menu" class="ng-star-inserted" style=""><!----></mat-menu><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></bard-mode-switcher><!----><!----><!----></div><top-bar-actions _ngcontent-ng-c3730527948="" _nghost-ng-c2217566490="" style="--offset: 96px;"><div _ngcontent-ng-c2217566490="" class="top-bar-actions"><!----><div _ngcontent-ng-c2217566490="" class="buttons-container adv-upsell ng-star-inserted"><upsell-button _ngcontent-ng-c2217566490="" data-test-id="advanced-upsell-button" _nghost-ng-c260037640="" class="ng-tns-c260037640-11 ng-star-inserted" jslog="208238;track:generic_click,impression"><button _ngcontent-ng-c260037640="" mat-flat-button="" data-test-id="bard-upsell-menu-button" role="link" aria-describedby="describe-links-opening-new-window" aria-label="ارتقا به Gemini Advanced" class="mdc-button mat-mdc-button-base gds-upsell-button ng-tns-c260037640-11 mdc-button--unelevated mat-mdc-unelevated-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="246609;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><img _ngcontent-ng-c260037640="" matbuttonicon="" alt="" class="gds-icon-s" src="./انواع بودجه بندی_files/gemini_sparkle_red_4ed1cbfcbc6c9e84c31b987da73fc4168aec8445.svg"><span class="mdc-button__label"><span _ngcontent-ng-c260037640="" class="upsell-label gds-label-m ng-tns-c260037640-11 ng-trigger ng-trigger-labelEnterLeaveAnimation ng-star-inserted"> ‫Gemini Advanced را امتحان کنید </span><!----></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></upsell-button><!----></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2217566490="" class="studio-sidebar-launcher ng-star-inserted"><button _ngcontent-ng-c2217566490="" mat-icon-button="" data-test-id="studio-sidebar-button" mattooltip="فایل‌های این گپ" aria-label="روشن/خاموش کردن نوار کناری استودیو" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger studio-sidebar-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="252210;track:generic_click,impression" aria-describedby="cdk-describedby-message-ng-1-4" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2217566490="" role="img" fonticon="home_storage" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="home_storage"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><!----><!----></top-bar-actions><side-navigation-v2 _ngcontent-ng-c3730527948="" class="content" _nghost-ng-c2765397678="" style="--side-nav-transition-duration: 300ms;"><chat-notifications _ngcontent-ng-c2765397678="" _nghost-ng-c2723134209=""><!----><!----><!----><!----></chat-notifications><!----><bard-sidenav-container _ngcontent-ng-c2765397678="" data-test-id="bard-sidenav-container" _nghost-ng-c3522183994=""><bard-sidenav _ngcontent-ng-c2765397678="" role="navigation" _nghost-ng-c535547666="" class="ng-tns-c535547666-5 ng-trigger ng-trigger-widthTransition disable-onload-animations ng-star-inserted overlay-main-content" jslog="173918;track:impression" style="width: var(--bard-sidenav-closed-width);"><!----><side-navigation-content _ngcontent-ng-c2765397678="" _nghost-ng-c1612480786="" class="ng-star-inserted" style="--side-nav-transition-duration: 300ms;"><div _ngcontent-ng-c1612480786="" class="sidenav-with-history-container disable-onload-animations ng-star-inserted bot-list-loaded collapsed"><!----><!----><div _ngcontent-ng-c1612480786="" data-test-id="overflow-container" class="overflow-container"><!----><div _ngcontent-ng-c1612480786="" class="side-nav-button-container ng-star-inserted"><div _ngcontent-ng-c1612480786="" class="new-conversation-container ng-star-inserted"><expandable-button _ngcontent-ng-c1612480786="" data-test-id="new-chat-button" icon="add" aria-label="گپ جدید" mattooltip="گپ جدید" class="mat-mdc-tooltip-trigger new-chat-button" _nghost-ng-c1907482273="" jslog="188172;track:generic_click"><button _ngcontent-ng-c1907482273="" mat-button="" data-test-id="button" class="mdc-button mat-mdc-button-base expandable-button gds-body-m mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c1907482273="" role="img" data-test-id="icon" class="mat-icon notranslate outlined button-icon google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="add" fonticon="add"></mat-icon><span class="mdc-button__label"><span _ngcontent-ng-c1907482273="" data-test-id="content" class="button-content">گپ جدید</span></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></expandable-button><!----></div><!----><!----><!----></div><div _ngcontent-ng-c1612480786="" class="chat-history ng-star-inserted collapsed"><div _ngcontent-ng-c1612480786="" class="chat-history-list ng-star-inserted"><div _ngcontent-ng-c1612480786="" class="loading-history-spinner-container ng-star-inserted"><mat-progress-spinner _ngcontent-ng-c1612480786="" role="progressbar" tabindex="-1" data-test-id="loading-history-spinner" mode="indeterminate" diameter="24" aria-label="درحال بار کردن سابقه مکالمه" class="mat-mdc-progress-spinner mdc-circular-progress mat-primary mdc-circular-progress--indeterminate" aria-valuemin="0" aria-valuemax="100" style="width: 24px; height: 24px; --mat-progress-spinner-size: 24px; --mat-progress-spinner-active-indicator-width: 24px;"><!----><div aria-hidden="true" class="mdc-circular-progress__determinate-container"><svg xmlns="http://www.w3.org/2000/svg" focusable="false" class="mdc-circular-progress__determinate-circle-graphic" viewBox="0 0 16.4 16.4"><circle cx="50%" cy="50%" class="mdc-circular-progress__determinate-circle" r="7" style="stroke-dasharray: 43.9823px; stroke-width: 10%;"></circle></svg></div><div aria-hidden="true" class="mdc-circular-progress__indeterminate-container"><div class="mdc-circular-progress__spinner-layer"><div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left"><svg xmlns="http://www.w3.org/2000/svg" focusable="false" class="mdc-circular-progress__indeterminate-circle-graphic ng-star-inserted" viewBox="0 0 16.4 16.4"><circle cx="50%" cy="50%" r="7" style="stroke-dasharray: 43.9823px; stroke-dashoffset: 21.9911px; stroke-width: 10%;"></circle></svg><!----></div><div class="mdc-circular-progress__gap-patch"><svg xmlns="http://www.w3.org/2000/svg" focusable="false" class="mdc-circular-progress__indeterminate-circle-graphic ng-star-inserted" viewBox="0 0 16.4 16.4"><circle cx="50%" cy="50%" r="7" style="stroke-dasharray: 43.9823px; stroke-dashoffset: 21.9911px; stroke-width: 10%;"></circle></svg><!----></div><div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right"><svg xmlns="http://www.w3.org/2000/svg" focusable="false" class="mdc-circular-progress__indeterminate-circle-graphic ng-star-inserted" viewBox="0 0 16.4 16.4"><circle cx="50%" cy="50%" r="7" style="stroke-dasharray: 43.9823px; stroke-dashoffset: 21.9911px; stroke-width: 10%;"></circle></svg><!----></div></div></div></mat-progress-spinner></div><!----><!----><conversations-list _ngcontent-ng-c1612480786="" data-test-id="all-conversations" _nghost-ng-c2137975441="" class="ng-tns-c2137975441-12 sidenav-style-updates ng-star-inserted" style=""><div _ngcontent-ng-c2137975441="" class="title-container ng-tns-c2137975441-12 ng-trigger ng-trigger-conversationListTitleVisibilityAnimation" style="visibility: hidden;"><h1 _ngcontent-ng-c2137975441="" class="title ng-tns-c2137975441-12 gds-label-l ng-star-inserted" style=""> اخیر </h1><!----></div><div _ngcontent-ng-c2137975441="" role="region" class="conversations-container ng-tns-c2137975441-12 ng-star-inserted" id="conversations-list-0"><div _ngcontent-ng-c2137975441="" class="conversation-items-container ng-tns-c2137975441-12 ng-star-inserted" style=""><!----><div _ngcontent-ng-c2137975441="" role="button" tabindex="0" data-test-id="conversation" mattooltipposition="right" mattooltipshowdelay="300" class="mat-mdc-tooltip-trigger conversation ng-tns-c2137975441-12 selected ng-trigger ng-trigger-conversationListRevealAnimation" jslog="186014;track:generic_click;BardVeMetadataKey:[null,null,null,null,null,null,null,[&quot;c_184a9f472ac9ab94&quot;,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-43" cdk-describedby-host="ng-1"><!----><!----><div _ngcontent-ng-c2137975441="" class="conversation-icon with-mat-icon ng-tns-c2137975441-12 ng-star-inserted" style=""><mat-icon _ngcontent-ng-c2137975441="" role="img" matlistitemicon="" class="mat-icon notranslate title-mat-icon ng-tns-c2137975441-12 gds-icon-s google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="notes" fonticon="notes"></mat-icon><!----><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2137975441="" class="conversation-title ng-tns-c2137975441-12 gds-label-l FontSet"> بررسی کد ادمین جنگو و بهبود
 <div _ngcontent-ng-c2137975441="" class="conversation-title-cover ng-tns-c2137975441-12"></div></div><div _ngcontent-ng-c2137975441="" class="options-icon with-mat-icon ng-tns-c2137975441-12"><!----><!----></div></div><!----><div _ngcontent-ng-c2137975441="" class="conversation-actions-container ng-tns-c2137975441-12 selected ng-star-inserted"><button _ngcontent-ng-c2137975441="" aria-label="باز کردن منو کنش‌های مکالمه." data-test-id="actions-menu-button" class="conversation-actions-menu-button ng-tns-c2137975441-12"><mat-icon _ngcontent-ng-c2137975441="" role="img" data-test-id="actions-menu-icon gds-icon-l" class="mat-icon notranslate gds-icon-l ng-tns-c2137975441-12 google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert" fonticon="more_vert"></mat-icon><div _ngcontent-ng-c2137975441="" class="mat-mdc-menu-trigger ng-tns-c2137975441-12" aria-haspopup="menu" aria-expanded="false"></div><!----></button><!----><mat-menu _ngcontent-ng-c2137975441="" class=""><!----></mat-menu></div><!----></div><!----><div _ngcontent-ng-c2137975441="" class="conversation-items-container ng-tns-c2137975441-12 ng-star-inserted"><!----><div _ngcontent-ng-c2137975441="" role="button" tabindex="0" data-test-id="conversation" mattooltipposition="right" mattooltipshowdelay="300" class="mat-mdc-tooltip-trigger conversation ng-tns-c2137975441-12 ng-trigger ng-trigger-conversationListRevealAnimation" jslog="186014;track:generic_click;BardVeMetadataKey:[null,null,null,null,null,null,null,[&quot;c_5c36675f80b3e4ad&quot;,null,0,1]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-44" cdk-describedby-host="ng-1"><!----><!----><div _ngcontent-ng-c2137975441="" class="conversation-icon with-mat-icon ng-tns-c2137975441-12 ng-star-inserted" style=""><mat-icon _ngcontent-ng-c2137975441="" role="img" matlistitemicon="" class="mat-icon notranslate title-mat-icon ng-tns-c2137975441-12 gds-icon-s google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="notes" fonticon="notes"></mat-icon><!----><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2137975441="" class="conversation-title ng-tns-c2137975441-12 gds-body-m FontSet"> انواع روش‌های محاسبه بودجه
 <div _ngcontent-ng-c2137975441="" class="conversation-title-cover ng-tns-c2137975441-12"></div></div><div _ngcontent-ng-c2137975441="" class="options-icon with-mat-icon ng-tns-c2137975441-12"><!----><!----></div></div><!----><div _ngcontent-ng-c2137975441="" class="conversation-actions-container ng-tns-c2137975441-12 ng-star-inserted"><button _ngcontent-ng-c2137975441="" aria-label="باز کردن منو کنش‌های مکالمه." data-test-id="actions-menu-button" class="conversation-actions-menu-button ng-tns-c2137975441-12"><mat-icon _ngcontent-ng-c2137975441="" role="img" data-test-id="actions-menu-icon gds-icon-l" class="mat-icon notranslate gds-icon-l ng-tns-c2137975441-12 google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert" fonticon="more_vert"></mat-icon><div _ngcontent-ng-c2137975441="" class="mat-mdc-menu-trigger ng-tns-c2137975441-12" aria-haspopup="menu" aria-expanded="false"></div><!----></button><!----><mat-menu _ngcontent-ng-c2137975441="" class=""><!----></mat-menu></div><!----></div><!----><div _ngcontent-ng-c2137975441="" class="conversation-items-container ng-tns-c2137975441-12 ng-star-inserted"><!----><div _ngcontent-ng-c2137975441="" role="button" tabindex="0" data-test-id="conversation" mattooltipposition="right" mattooltipshowdelay="300" class="mat-mdc-tooltip-trigger conversation ng-tns-c2137975441-12 ng-trigger ng-trigger-conversationListRevealAnimation" jslog="186014;track:generic_click;BardVeMetadataKey:[null,null,null,null,null,null,null,[&quot;c_fc2167bc169c06f4&quot;,null,0,2]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-45" cdk-describedby-host="ng-1"><!----><!----><div _ngcontent-ng-c2137975441="" class="conversation-icon with-mat-icon ng-tns-c2137975441-12 ng-star-inserted" style=""><mat-icon _ngcontent-ng-c2137975441="" role="img" matlistitemicon="" class="mat-icon notranslate title-mat-icon ng-tns-c2137975441-12 gds-icon-s google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="notes" fonticon="notes"></mat-icon><!----><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2137975441="" class="conversation-title ng-tns-c2137975441-12 gds-body-m FontSet"> مشکلات فنی و راهکارهای بهبود در بخش IT 
 <div _ngcontent-ng-c2137975441="" class="conversation-title-cover ng-tns-c2137975441-12"></div></div><div _ngcontent-ng-c2137975441="" class="options-icon with-mat-icon ng-tns-c2137975441-12"><!----><!----></div></div><!----><div _ngcontent-ng-c2137975441="" class="conversation-actions-container ng-tns-c2137975441-12 ng-star-inserted"><button _ngcontent-ng-c2137975441="" aria-label="باز کردن منو کنش‌های مکالمه." data-test-id="actions-menu-button" class="conversation-actions-menu-button ng-tns-c2137975441-12"><mat-icon _ngcontent-ng-c2137975441="" role="img" data-test-id="actions-menu-icon gds-icon-l" class="mat-icon notranslate gds-icon-l ng-tns-c2137975441-12 google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert" fonticon="more_vert"></mat-icon><div _ngcontent-ng-c2137975441="" class="mat-mdc-menu-trigger ng-tns-c2137975441-12" aria-haspopup="menu" aria-expanded="false"></div><!----></button><!----><mat-menu _ngcontent-ng-c2137975441="" class=""><!----></mat-menu></div><!----></div><!----><div _ngcontent-ng-c2137975441="" class="conversation-items-container ng-tns-c2137975441-12 ng-star-inserted"><!----><div _ngcontent-ng-c2137975441="" role="button" tabindex="0" data-test-id="conversation" mattooltipposition="right" mattooltipshowdelay="300" class="mat-mdc-tooltip-trigger conversation ng-tns-c2137975441-12 ng-trigger ng-trigger-conversationListRevealAnimation" jslog="186014;track:generic_click;BardVeMetadataKey:[null,null,null,null,null,null,null,[&quot;c_dad62984b8f0f681&quot;,null,0,3]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-46" cdk-describedby-host="ng-1"><!----><!----><div _ngcontent-ng-c2137975441="" class="conversation-icon with-mat-icon ng-tns-c2137975441-12 ng-star-inserted" style=""><mat-icon _ngcontent-ng-c2137975441="" role="img" matlistitemicon="" class="mat-icon notranslate title-mat-icon ng-tns-c2137975441-12 gds-icon-s google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="notes" fonticon="notes"></mat-icon><!----><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2137975441="" class="conversation-title ng-tns-c2137975441-12 gds-body-m FontSet"> ساخت ساب دامین در اکتیو دایرکتوری <div _ngcontent-ng-c2137975441="" class="conversation-title-cover ng-tns-c2137975441-12"></div></div><div _ngcontent-ng-c2137975441="" class="options-icon with-mat-icon ng-tns-c2137975441-12"><!----><!----></div></div><!----><div _ngcontent-ng-c2137975441="" class="conversation-actions-container ng-tns-c2137975441-12 ng-star-inserted"><button _ngcontent-ng-c2137975441="" aria-label="باز کردن منو کنش‌های مکالمه." data-test-id="actions-menu-button" class="conversation-actions-menu-button ng-tns-c2137975441-12"><mat-icon _ngcontent-ng-c2137975441="" role="img" data-test-id="actions-menu-icon gds-icon-l" class="mat-icon notranslate gds-icon-l ng-tns-c2137975441-12 google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert" fonticon="more_vert"></mat-icon><div _ngcontent-ng-c2137975441="" class="mat-mdc-menu-trigger ng-tns-c2137975441-12" aria-haspopup="menu" aria-expanded="false"></div><!----></button><!----><mat-menu _ngcontent-ng-c2137975441="" class=""><!----></mat-menu></div><!----></div><!----><div _ngcontent-ng-c2137975441="" class="conversation-items-container ng-tns-c2137975441-12 ng-star-inserted"><!----><div _ngcontent-ng-c2137975441="" role="button" tabindex="0" data-test-id="conversation" mattooltipposition="right" mattooltipshowdelay="300" class="mat-mdc-tooltip-trigger conversation ng-tns-c2137975441-12 ng-trigger ng-trigger-conversationListRevealAnimation" jslog="186014;track:generic_click;BardVeMetadataKey:[null,null,null,null,null,null,null,[&quot;c_65301b9a2abc8355&quot;,null,0,4]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-47" cdk-describedby-host="ng-1"><!----><!----><div _ngcontent-ng-c2137975441="" class="conversation-icon with-mat-icon ng-tns-c2137975441-12 ng-star-inserted" style=""><mat-icon _ngcontent-ng-c2137975441="" role="img" matlistitemicon="" class="mat-icon notranslate title-mat-icon ng-tns-c2137975441-12 gds-icon-s google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="notes" fonticon="notes"></mat-icon><!----><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2137975441="" class="conversation-title ng-tns-c2137975441-12 gds-body-m FontSet"> قفل کردن پروژه جانگو در تاریخ مشخص 
 <div _ngcontent-ng-c2137975441="" class="conversation-title-cover ng-tns-c2137975441-12"></div></div><div _ngcontent-ng-c2137975441="" class="options-icon with-mat-icon ng-tns-c2137975441-12"><!----><!----></div></div><!----><div _ngcontent-ng-c2137975441="" class="conversation-actions-container ng-tns-c2137975441-12 ng-star-inserted"><button _ngcontent-ng-c2137975441="" aria-label="باز کردن منو کنش‌های مکالمه." data-test-id="actions-menu-button" class="conversation-actions-menu-button ng-tns-c2137975441-12"><mat-icon _ngcontent-ng-c2137975441="" role="img" data-test-id="actions-menu-icon gds-icon-l" class="mat-icon notranslate gds-icon-l ng-tns-c2137975441-12 google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert" fonticon="more_vert"></mat-icon><div _ngcontent-ng-c2137975441="" class="mat-mdc-menu-trigger ng-tns-c2137975441-12" aria-haspopup="menu" aria-expanded="false"></div><!----></button><!----><mat-menu _ngcontent-ng-c2137975441="" class=""><!----></mat-menu></div><!----></div><!----><!----><button _ngcontent-ng-c2137975441="" mat-button="" data-test-id="show-more-button" class="mdc-button mat-mdc-button-base show-more-button mat-mdc-button ng-tns-c2137975441-12 mat-unthemed ng-star-inserted" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-controls="conversations-list-0" jslog="186006;track:generic_click,impression;mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2137975441="" role="img" matlistitemicon="" class="mat-icon notranslate gds-icon-l ng-tns-c2137975441-12 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more" fonticon="expand_more"></mat-icon><!----><span class="mdc-button__label"><!----><!----><!----><span _ngcontent-ng-c2137975441="" class="gds-body-m show-more-button-text ng-tns-c2137975441-12 ng-star-inserted">بیشتر</span><!----></span><!----><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span><span class="mat-ripple mat-mdc-button-ripple"></span></button><!----><!----></div><!----><!----></conversations-list><!----><!----><!----><!----><!----></div><!----><!----><!----><bot-list _ngcontent-ng-c1612480786="" _nghost-ng-c1348129424="" class="ng-tns-c1348129424-6 sidenav-style-updates ng-star-inserted"><div _ngcontent-ng-c1348129424="" class="title-container ng-tns-c1348129424-6 ng-trigger ng-trigger-conversationListTitleVisibilityAnimation ng-star-inserted" style="visibility: hidden;"><h1 _ngcontent-ng-c1348129424="" class="title ng-tns-c1348129424-6 gds-label-l">Gems</h1></div><!----><div _ngcontent-ng-c1348129424="" role="region" class="bots-list-container ng-tns-c1348129424-6 ng-star-inserted" jslog="209256;track:impression" style=""><bot-list-item _ngcontent-ng-c1348129424="" _nghost-ng-c939809657="" class="ng-tns-c1348129424-6 ng-star-inserted"><div _ngcontent-ng-c939809657="" data-test-id="item" class="bot-item ng-star-inserted" jslog="243359;track:generic_click;BardVeMetadataKey:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[null,null,&quot;brainstormer&quot;]];mutable:true"><button _ngcontent-ng-c939809657="" mattooltipposition="right" mattooltipshowdelay="300" class="mat-mdc-tooltip-trigger bot-new-conversation-button" jslog="209259;track:generic_click,impression" aria-describedby="cdk-describedby-message-ng-1-48" cdk-describedby-host="ng-1"><bot-logo _ngcontent-ng-c939809657="" _nghost-ng-c3054142777="" class="is-dark-mode" style="--bot-logo-size: 24px; --bot-logo-icon-size: 13.5px; --bot-logo-text: #EC8C4C; --bot-logo-bg: #612B00; --bot-logo-border: #612B00;"><!----><div _ngcontent-ng-c3054142777="" class="bot-logo-text sidenav-style-updates ng-star-inserted"><mat-icon _ngcontent-ng-c3054142777="" role="img" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="emoji_objects" fonticon="emoji_objects"></mat-icon><!----><!----></div><!----><!----><!----></bot-logo><span _ngcontent-ng-c939809657="" class="bot-name gds-body-m">ایده‌پرداز</span><!----></button><!----><!----><mat-menu _ngcontent-ng-c939809657="" class=""><!----></mat-menu></div><!----></bot-list-item><!----><!----><bot-list-item _ngcontent-ng-c1348129424="" _nghost-ng-c939809657="" class="ng-tns-c1348129424-6 ng-star-inserted"><div _ngcontent-ng-c939809657="" data-test-id="item" class="bot-item ng-star-inserted" jslog="243359;track:generic_click;BardVeMetadataKey:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[null,null,&quot;career-guide&quot;,null,1]];mutable:true"><button _ngcontent-ng-c939809657="" mattooltipposition="right" mattooltipshowdelay="300" class="mat-mdc-tooltip-trigger bot-new-conversation-button" jslog="209259;track:generic_click,impression" aria-describedby="cdk-describedby-message-ng-1-49" cdk-describedby-host="ng-1"><bot-logo _ngcontent-ng-c939809657="" _nghost-ng-c3054142777="" class="is-dark-mode" style="--bot-logo-size: 24px; --bot-logo-icon-size: 13.5px; --bot-logo-text: #DB8DA7; --bot-logo-bg: #60263D; --bot-logo-border: #60263D;"><!----><div _ngcontent-ng-c3054142777="" class="bot-logo-text sidenav-style-updates ng-star-inserted"><mat-icon _ngcontent-ng-c3054142777="" role="img" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="work" fonticon="work"></mat-icon><!----><!----></div><!----><!----><!----></bot-logo><span _ngcontent-ng-c939809657="" class="bot-name gds-body-m">راهنمای شغلی</span><!----></button><!----><!----><mat-menu _ngcontent-ng-c939809657="" class=""><!----></mat-menu></div><!----></bot-list-item><!----><!----><bot-list-item _ngcontent-ng-c1348129424="" _nghost-ng-c939809657="" class="ng-tns-c1348129424-6 ng-star-inserted"><div _ngcontent-ng-c939809657="" data-test-id="item" class="bot-item ng-star-inserted" jslog="243359;track:generic_click;BardVeMetadataKey:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[null,null,&quot;coding-partner&quot;,null,2]];mutable:true"><button _ngcontent-ng-c939809657="" mattooltipposition="right" mattooltipshowdelay="300" class="mat-mdc-tooltip-trigger bot-new-conversation-button" jslog="209259;track:generic_click,impression" aria-describedby="cdk-describedby-message-ng-1-50" cdk-describedby-host="ng-1"><bot-logo _ngcontent-ng-c939809657="" _nghost-ng-c3054142777="" class="is-dark-mode" style="--bot-logo-size: 24px; --bot-logo-icon-size: 13.5px; --bot-logo-text: #25B2D4; --bot-logo-bg: #00404E; --bot-logo-border: #00404E;"><!----><div _ngcontent-ng-c3054142777="" class="bot-logo-text sidenav-style-updates ng-star-inserted"><mat-icon _ngcontent-ng-c3054142777="" role="img" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="code" fonticon="code"></mat-icon><!----><!----></div><!----><!----><!----></bot-logo><span _ngcontent-ng-c939809657="" class="bot-name gds-body-m">کمک‌کدنویس</span><!----></button><!----><!----><mat-menu _ngcontent-ng-c939809657="" class=""><!----></mat-menu></div><!----></bot-list-item><!----><button _ngcontent-ng-c1348129424="" mat-button="" class="mdc-button mat-mdc-button-base action-button show-more-button mat-mdc-button ng-tns-c1348129424-6 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c1348129424="" role="img" matlistitemicon="" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more" fonticon="expand_more"></mat-icon><span class="mdc-button__label"><!----><!----><!----><span _ngcontent-ng-c1348129424="" class="gds-body-m action-button-text ng-tns-c1348129424-6 ng-star-inserted">بیشتر</span><!----></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----><!----><!----></div><!----><!----><!----></bot-list><!----><!----><!----></div><!----><!----><!----><!----><!----><mat-action-list _ngcontent-ng-c1612480786="" role="group" class="mat-mdc-action-list mat-mdc-list-base mdc-list desktop-controls ng-star-inserted" aria-disabled="false"><side-nav-action-button _ngcontent-ng-c1612480786="" icon="gem_spark" arialabel="Gem manager" data-test-id="desktop-manage-instructions-control" mattooltip="مدیر Gem" mattooltipposition="right" class="mat-mdc-tooltip-trigger ng-tns-c1363543379-7 ng-star-inserted" _nghost-ng-c1363543379="" jslog="209257;track:generic_click,impression" aria-describedby="cdk-describedby-message-ng-1-51" cdk-describedby-host="ng-1"><!----><button _ngcontent-ng-c1363543379="" mat-icon-button="" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base side-nav-action-collapsed-button explicit-gmat-override ng-tns-c1363543379-7 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-label="Gem manager" style=""><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><div _ngcontent-ng-c1363543379="" class="xap-count-badge-container"><div _ngcontent-ng-c1363543379="" matlistitemicon="" class="mat-mdc-list-item-icon icon-container ng-tns-c1363543379-7 mdc-list-item__start"><mat-icon _ngcontent-ng-c1363543379="" role="img" data-test-id="side-nav-action-button-icon" class="mat-icon notranslate gds-icon-l ng-tns-c1363543379-7 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="gem_spark" fonticon="gem_spark"></mat-icon><!----><!----></div></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></side-nav-action-button><!----><!----><mat-menu _ngcontent-ng-c1612480786="" overlaptrigger="true" class=""><!----></mat-menu><side-nav-action-button _ngcontent-ng-c1612480786="" icon="help" data-test-id="desktop-support-control" mattooltip="راهنما" mattooltipposition="right" class="mat-mdc-menu-trigger mat-mdc-tooltip-trigger ng-tns-c1363543379-8 ng-star-inserted" _nghost-ng-c1363543379="" jslog="219099;track:generic_click,impression" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-52" cdk-describedby-host="ng-1"><!----><button _ngcontent-ng-c1363543379="" mat-icon-button="" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base side-nav-action-collapsed-button explicit-gmat-override ng-tns-c1363543379-8 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-label="راهنما" style=""><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><div _ngcontent-ng-c1363543379="" class="xap-count-badge-container"><div _ngcontent-ng-c1363543379="" matlistitemicon="" class="mat-mdc-list-item-icon icon-container ng-tns-c1363543379-8 mdc-list-item__start"><mat-icon _ngcontent-ng-c1363543379="" role="img" data-test-id="side-nav-action-button-icon" class="mat-icon notranslate gds-icon-l ng-tns-c1363543379-8 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="help" fonticon="help"></mat-icon><!----><!----></div></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></side-nav-action-button><!----><side-nav-action-button _ngcontent-ng-c1612480786="" icon="history" data-test-id="desktop-bard-activity-control" mattooltip="فعالیت برنامه‌های Gemini" mattooltipposition="right" class="mat-mdc-tooltip-trigger ng-tns-c1363543379-9 ng-star-inserted" _nghost-ng-c1363543379="" jslog="219098;track:generic_click,impression" aria-describedby="cdk-describedby-message-ng-1-53" cdk-describedby-host="ng-1"><!----><button _ngcontent-ng-c1363543379="" mat-icon-button="" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base side-nav-action-collapsed-button explicit-gmat-override ng-tns-c1363543379-9 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-label="فعالیت برنامه‌های Gemini" style=""><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><div _ngcontent-ng-c1363543379="" class="xap-count-badge-container"><div _ngcontent-ng-c1363543379="" matlistitemicon="" class="mat-mdc-list-item-icon icon-container ng-tns-c1363543379-9 mdc-list-item__start"><mat-icon _ngcontent-ng-c1363543379="" role="img" data-test-id="side-nav-action-button-icon" class="mat-icon notranslate gds-icon-l ng-tns-c1363543379-9 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="history" fonticon="history"></mat-icon><!----><!----></div></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></side-nav-action-button><!----><side-nav-action-button _ngcontent-ng-c1612480786="" icon="settings" data-test-id="desktop-settings-control" mattooltip="تنظیمات" mattooltipposition="right" class="mat-mdc-menu-trigger mat-mdc-tooltip-trigger ng-tns-c1363543379-10 ng-star-inserted" _nghost-ng-c1363543379="" jslog="219100;track:generic_click,impression" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-54" cdk-describedby-host="ng-1"><!----><button _ngcontent-ng-c1363543379="" mat-icon-button="" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base side-nav-action-collapsed-button explicit-gmat-override ng-tns-c1363543379-10 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-label="تنظیمات" style=""><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><div _ngcontent-ng-c1363543379="" class="xap-count-badge-container"><div _ngcontent-ng-c1363543379="" matlistitemicon="" class="mat-mdc-list-item-icon icon-container ng-tns-c1363543379-10 mdc-list-item__start"><mat-icon _ngcontent-ng-c1363543379="" role="img" data-test-id="side-nav-action-button-icon" class="mat-icon notranslate gds-icon-l ng-tns-c1363543379-10 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="settings" fonticon="settings"></mat-icon><!----><!----></div></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----></side-nav-action-button><!----><!----><mat-menu _ngcontent-ng-c1612480786="" overlaptrigger="true" class=""><!----></mat-menu><!----></mat-action-list><!----><location-footer _ngcontent-ng-c1612480786="" _nghost-ng-c1450258299="" class="ng-star-inserted"><div _ngcontent-ng-c1450258299="" class="footer-container ng-star-inserted"><mat-icon _ngcontent-ng-c1450258299="" role="img" fonticon="circle" class="mat-icon notranslate icon-filled location-icon google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="circle"></mat-icon><div _ngcontent-ng-c1450258299="" class="location-footer-textual"><span _ngcontent-ng-c1450258299="" data-test-id="location-name-and-source" role="button" tabindex="0" class="location-clickable name-and-source" jslog="184912;track:generic_click,impression"><span _ngcontent-ng-c1450258299="" class="location-footer-name"> کرواسی </span></span><br _ngcontent-ng-c1450258299="" class="ng-star-inserted"><!----><span _ngcontent-ng-c1450258299="" class="location-footer-atl-text"> از نشانی IP شما </span><span _ngcontent-ng-c1450258299="" class="location-buttons-dot"> • </span><span _ngcontent-ng-c1450258299="" role="button" tabindex="0" class="update-location-text location-clickable" jslog="184913;track:generic_click,impression"><span _ngcontent-ng-c1450258299="" class="last-line-target"></span><span _ngcontent-ng-c1450258299="">به‌روزرسانی مکان</span><span _ngcontent-ng-c1450258299="" class="new-line-target"></span></span></div></div><!----></location-footer><!----></div></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></side-navigation-content><!----><!----><!----><!----><div _ngcontent-ng-c535547666="" class="ng-tns-c535547666-5 ng-star-inserted" jslog="235231;track:impression" style=""></div><!----></bard-sidenav><!----><bard-sidenav-content _ngcontent-ng-c2765397678="" _nghost-ng-c24741362="" aria-hidden="false"><div _ngcontent-ng-c2765397678="" class="desktop-ogb-buffer"></div><div _ngcontent-ng-c2765397678="" class="content-wrapper"><div _ngcontent-ng-c3730527948="" class="main-content ng-trigger ng-trigger-routeChangeAnimation"><!----><div _ngcontent-ng-c3730527948="" data-test-id="announcement-banner-container" class="announcement-banner-container ng-tns-c3730527948-0 ng-star-inserted" style=""><!----><!----><!----><!----><!----><!----><!----><bot-banner _ngcontent-ng-c3730527948="" class="ng-tns-c3730527948-0 ng-star-inserted"><!----></bot-banner><!----></div><!----><!----><!----><!----><div _ngcontent-ng-c3730527948="" class="content-container"><router-outlet _ngcontent-ng-c3730527948=""></router-outlet><chat-window _nghost-ng-c4196107817="" class="ng-tns-c4196107817-1 ng-star-inserted" style=""><div _ngcontent-ng-c4196107817="" file-drop-zone="allowFileDrop &amp;&amp; !inGemsMode" class="chat-container ng-tns-c4196107817-1 ng-trigger ng-trigger-chatHistoryImmersiveTransitions" jslog="173898;track:impression"><!----><chat-window-content _ngcontent-ng-c4196107817="" _nghost-ng-c3598689639="" class="ng-tns-c4196107817-1 ui-improvements-phase-1 ng-star-inserted" style=""><h1 _ngcontent-ng-c3598689639="" class="cdk-visually-hidden">مکالمه با Gemini</h1><!----><!----><div _ngcontent-ng-c3598689639="" id="chat-history" class="chat-history-scroll-container"><infinite-scroller _ngcontent-ng-c3598689639="" data-test-id="chat-history-container" class="chat-history" _nghost-ng-c3596924178=""><!----><!----><!----><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="d0bae9db38d1c538" style=""><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-0"><!----><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l collapsed" dir="ltr"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> # your_app/widgets.py <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> import json <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> from django import forms <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> from django.utils.safestring import mark_safe <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> from django.templatetags.static import static # برای لود فایل JS (روش بهتر) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class NumberToWordsWidget(forms.TextInput): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     template_name = 'widgets/number_to_words.html' # مسیر به تمپلیت ویجت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     # اگر بخواهیم JS را از فایل بخوانیم، به این نیاز داریم <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     # class Media: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     js = (static('js/numToPersianWords.js'),) # مسیر فایل JS اصلی <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     # css = {'all': (static('css/numToPersianWords.css'),)} # اگر CSS هم داشت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def __init__(self, attrs=None, word_label="به حروف:", unit="ریال"): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         self.word_label = word_label <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         self.unit = unit <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         default_attrs = { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'inputmode': 'numeric', # کیبورد عددی در موبایل <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'class': 'form-control number-format', # کلاس‌های پیش‌فرض <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'dir': 'ltr', # معمولا اعداد بهتر است ltr باشند <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'style': 'text-align: left;', # تراز چپ برای اعداد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if attrs: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             default_attrs.update(attrs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         super().__init__(default_attrs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     # روش اول: استفاده از template_name (توصیه شده) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_context(self, name, value, attrs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = super().get_context(name, value, attrs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         # ساخت ID یکتا برای المان‌های مرتبط <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         input_id = context['widget']['attrs']['id'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         output_id = f"{input_id}_words" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['widget']['output_id'] = output_id <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['widget']['word_label'] = self.word_label <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['widget']['unit'] = self.unit <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         # انتقال منطق JS به تمپلیت ویجت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     # روش دوم: رندر مستقیم HTML و JS (اگر نخواهیم از تمپلیت استفاده کنیم) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     # def render(self, name, value, attrs=None, renderer=None): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     # گرفتن HTML اصلی اینپوت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     input_html = super().render(name, value, attrs, renderer) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     input_id = attrs.get('id') if attrs else f'id_{name}' # گرفتن یا ساخت ID <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     output_id = f"{input_id}_words" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     # ساخت HTML برای نمایش حروف <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     output_html = f''' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #         &lt;label class="form-label" for="{output_id}"&gt;{self.word_label}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #         &lt;span id="{output_id}" class="d-block p-2 bg-light border rounded text-primary fw-bold number-to-words-output" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #               style="min-height: 40px; direction: rtl; text-align: right;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #              ... <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #         &lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     ''' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     # کد JavaScript (با ID های داینامیک) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     # توجه: این کد JS باید کامل و بدون خطا باشد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     js_code = f''' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #         &lt;script&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #             (function() {{ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                 "use strict"; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                 // ... (کدهای کامل توابع numToWords و threeDigitsToWords اینجا قرار می‌گیرند) ... <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                 const numberInput_{input_id} = document.getElementById('{input_id}'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                 const wordOutput_{input_id} = document.getElementById('{output_id}'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                 const unit_{input_id} = "{self.unit or ''}"; // گرفتن واحد پول <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                 if (numberInput_{input_id} &amp;&amp; wordOutput_{input_id}) {{ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                     numberInput_{input_id}.addEventListener('input', function() {{ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                         const numberValue = this.value; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                         // ابتدا اعداد فارسی را به انگلیسی تبدیل کن (اگر لازم است) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                         const latinValue = numberValue.replace(/[۰-۹]/g, d =&gt; d.charCodeAt(0) - 1776); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                         const words = numToWords(latinValue); // تابع تبدیل را صدا بزن <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                         if (words &amp;&amp; words !== "عدد نامعتبر") {{ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                              wordOutput_{input_id}.textContent = words + (unit_{input_id} ? " " + unit_{input_id} : ""); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                              wordOutput_{input_id}.classList.remove('text-danger'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                              wordOutput_{input_id}.classList.add('text-primary'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                         }} else if (numberValue.trim() === "") {{ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                              wordOutput_{input_id}.textContent = "..."; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                              wordOutput_{input_id}.classList.remove('text-danger', 'text-primary'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                         }} else {{ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                              wordOutput_{input_id}.textContent = words; // نمایش "عدد نامعتبر" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                              wordOutput_{input_id}.classList.add('text-danger'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                              wordOutput_{input_id}.classList.remove('text-primary'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                         }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                     }}); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                     // فراخوانی اولیه برای نمایش مقدار اولیه (اگر وجود دارد) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                      if(numberInput_{input_id}.value) {{ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                          numberInput_{input_id}.dispatchEvent(new Event('input')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                      }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #                 }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #             }})(); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #         &lt;/script&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     ''' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     # ترکیب HTML ها <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     return mark_safe(f'&lt;div class="number-to-words-widget-container mb-3"&gt;{input_html}{output_html}{js_code}&lt;/div&gt;') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> این یک ویجت سفارشی شد  <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> from Tanbakhsystem.widgets import NumberToWordsWidget <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorForm(forms.ModelForm): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     date = forms.CharField( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         label=_('تاریخ'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         widget=forms.TextInput(attrs={ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'data-jdp': '', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'class': 'form-control', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'placeholder': convert_to_farsi_numbers(_('تاریخ را انتخاب کنید (1404/01/17)')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         }) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     amount = forms.CharField( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         label=_("مبلغ"), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         required=True, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         widget=NumberToWordsWidget( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             attrs={'placeholder': _('مبلغ به عدد وارد شود')}, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             word_label=_("مبلغ به حروف:"), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             unit=_("ریال") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> و استفاده در فرم  <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> مسیر ثبت فایل  <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Tanbakhsystem\templates\widgets\number_to_words.html <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  تا اینجا درست  <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Environment: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Request Method: GET <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Request URL: http://127.0.0.1:8000/tankhah/factor/create/ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Django Version: 5.1.7 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Python Version: 3.13.0 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Installed Applications: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> ['django.contrib.humanize', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'admin_interface', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'colorfield', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.contrib.admin', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.contrib.auth', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.contrib.contenttypes', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.contrib.sessions', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.contrib.messages', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.contrib.staticfiles', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'core.apps.CoreConfig', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'reports.apps.ReportsConfig', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django_jalali', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'jalali_date', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'version_tracker.apps.VersionTrackerConfig', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'tankhah.apps.TankhahConfig', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'accounts.apps.AccountsConfig', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'notifications'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Installed Middleware: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> ['django.middleware.security.SecurityMiddleware', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.contrib.sessions.middleware.SessionMiddleware', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.middleware.locale.LocaleMiddleware', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.middleware.common.CommonMiddleware', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.middleware.csrf.CsrfViewMiddleware', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.contrib.auth.middleware.AuthenticationMiddleware', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.contrib.messages.middleware.MessageMiddleware', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'django.middleware.clickjacking.XFrameOptionsMiddleware', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'accounts.middleware.AuditLogMiddleware', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'accounts.middleware.ActiveUserMiddleware', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  'accounts.middleware.RequestMiddleware'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Template loader postmortem <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Django tried loading these templates, in this order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Using engine django: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     * django.template.loaders.filesystem.Loader: D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\templates\widgets\number_to_words.html (Source does not exist) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     * django.template.loaders.app_directories.Loader: D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\admin_interface\templates\widgets\number_to_words.html (Source does not exist) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     * django.template.loaders.app_directories.Loader: D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\colorfield\templates\widgets\number_to_words.html (Source does not exist) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     * django.template.loaders.app_directories.Loader: D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\contrib\admin\templates\widgets\number_to_words.html (Source does not exist) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     * django.template.loaders.app_directories.Loader: D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\contrib\auth\templates\widgets\number_to_words.html (Source does not exist) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     * django.template.loaders.app_directories.Loader: D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\jalali_date\templates\widgets\number_to_words.html (Source does not exist) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     * django.template.loaders.app_directories.Loader: D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\notifications\templates\widgets\number_to_words.html (Source does not exist) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Template error: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> In template D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\templates\django\forms\p.html, error at line 9 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    widgets/number_to_words.html <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    1 : {{ errors }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    2 : {% if errors and not fields %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    3 :   &lt;p&gt;{% for field in hidden_fields %}{{ field }}{% endfor %}&lt;/p&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    4 : {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    5 : {% for field, errors in fields %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    6 :   {{ errors }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    7 :   &lt;p{% with classes=field.css_classes %}{% if classes %} class="{{ classes }}"{% endif %}{% endwith %}&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    8 :     {% if field.label %}{{ field.label_tag }}{% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    9 :      {{ field }}  <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    10 :     {% if field.help_text %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    11 :       &lt;span class="helptext"{% if field.auto_id %} id="{{ field.auto_id }}_helptext"{% endif %}&gt;{{ field.help_text|safe }}&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    12 :     {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    13 :     {% if forloop.last %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    14 :       {% for field in hidden_fields %}{{ field }}{% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    15 :     {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    16 :   &lt;/p&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    17 : {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    18 : {% if not fields and not errors %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">    19 :   {% for field in hidden_fields %}{{ field }}{% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Traceback (most recent call last): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\backends\django.py", line 79, in get_template <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return Template(self.engine.get_template(template_name), self) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\engine.py", line 177, in get_template <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     template, origin = self.find_template(template_name) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\engine.py", line 163, in find_template <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     raise TemplateDoesNotExist(name, tried=tried) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> The above exception (widgets/number_to_words.html) was the direct cause of the following exception: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\backends\django.py", line 107, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.template.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 171, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self._render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 163, in _render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.nodelist.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 1008, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return SafeString("".join([node.render_annotated(context) for node in self])) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 969, in render_annotated <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\defaulttags.py", line 243, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     nodelist.append(node.render_annotated(context)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 969, in render_annotated <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 1073, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return render_value_in_context(output, context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 1050, in render_value_in_context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     value = str(value) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             ^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\utils.py", line 79, in __str__ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.as_widget() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\boundfield.py", line 108, in as_widget <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return widget.render( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\widgets.py", line 279, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self._render(self.template_name, context, renderer) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\widgets.py", line 284, in _render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return mark_safe(renderer.render(template_name, context)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\renderers.py", line 28, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     template = self.get_template(template_name) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\renderers.py", line 34, in get_template <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.engine.get_template(template_name) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\backends\django.py", line 81, in get_template <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     reraise(exc, self) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     ^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\backends\django.py", line 130, in reraise <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     raise new from exc <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     ^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> The above exception (widgets/number_to_words.html) was the direct cause of the following exception: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\backends\django.py", line 107, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.template.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 171, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self._render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 163, in _render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.nodelist.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 1008, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return SafeString("".join([node.render_annotated(context) for node in self])) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 969, in render_annotated <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\loader_tags.py", line 159, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return compiled_parent._render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 163, in _render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.nodelist.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 1008, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return SafeString("".join([node.render_annotated(context) for node in self])) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 969, in render_annotated <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\loader_tags.py", line 65, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     result = block.nodelist.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 1008, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return SafeString("".join([node.render_annotated(context) for node in self])) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 969, in render_annotated <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.render(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 1067, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     output = self.filter_expression.resolve(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 718, in resolve <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     obj = self.var.resolve(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">           ^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 850, in resolve <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     value = self._resolve_lookup(context) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\base.py", line 917, in _resolve_lookup <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     current = current() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">               ^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\utils.py", line 87, in as_p <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return self.render(self.template_name_p) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\utils.py", line 55, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return mark_safe(renderer.render(template, context)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\forms\renderers.py", line 29, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return template.render(context, request=request).strip() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\backends\django.py", line 109, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     reraise(exc, self.backend) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     ^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\backends\django.py", line 130, in reraise <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     raise new from exc <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     ^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> The above exception (widgets/number_to_words.html) was the direct cause of the following exception: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     response = get_response(request) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                ^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     response = response.render() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                ^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\response.py", line 114, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     self.content = self.rendered_content <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                    ^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\response.py", line 92, in rendered_content <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return template.render(context, self._request) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\backends\django.py", line 109, in render <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     reraise(exc, self.backend) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     ^^^^^^^^^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">   File "D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\template\backends\django.py", line 130, in reraise <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     raise new from exc <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     ^^^^^^^^^^^^^^^^^^ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Exception Type: TemplateDoesNotExist at /tankhah/factor/create/ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> Exception Value: widgets/number_to_words.html <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> اینم خطای دسترسی درصورتیکه مسیر درست است&nbsp; <!----><!----></p><!----></div><button _ngcontent-ng-c4161157681="" mat-icon-button="" mattooltip="ازهم بازکردن نوشتار" aria-label="ازهم بازکردن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger expand-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="224552;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_d0bae9db38d1c538&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-19" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="expand_more" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-13 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_d0bae9db38d1c538&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-13 response-container-with-gpi tts-removed ng-star-inserted" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-13 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-13"><!----><!----><div _ngcontent-ng-c108414610="" class="ng-tns-c108414610-13 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c108414610="" class="single-draft-response-container ng-tns-c108414610-13 ng-star-inserted" style=""><!----><!----></div><!----></div><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-13 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-13"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-13"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-13"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-13 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-15 ng-tns-c108414610-13 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-15"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-15 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-15 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-15 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-15 ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_44"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_51"><g transform="matrix(-1,0,0,-1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_54)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_54" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_58" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_51_1" mask-type="alpha"><use href="#__lottie_element_51"></use></mask></defs><g clip-path="url(#__lottie_element_44)"><g mask="url(#__lottie_element_51_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_58)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-15 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_226"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_230" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_237" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_241" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_245" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_249" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_253" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_226)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_253)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_249)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_245)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_241)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_237)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_230)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-13"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-13"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-14 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-14"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-14"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-14 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-14"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-14">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-14"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-14 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_d0bae9db38d1c538" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_d0bae9db38d1c538" dir="rtl" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:223">اوکی، با وجود اینکه مسیر فایل ویجت درست به نظر می‌رسه (<code>Tanbakhsystem\templates\widgets\number_to_words.html</code>)، خطای <code>TemplateDoesNotExist</code> همچنان وجود داره و این بار <strong>گزارش دقیقی</strong> از مسیرهایی که جنگو جستجو کرده هم داریم.</p><p data-sourcepos="3:1-3:61"><strong>نکته کلیدی در گزارش خطا (بخش Template loader postmortem):</strong></p><p data-sourcepos="5:1-5:86">این بخش نشون می‌ده جنگو دنبال فایل <code>widgets/number_to_words.html</code> در مسیرهای زیر گشته:</p><ul data-sourcepos="7:1-9:0">
<li data-sourcepos="7:1-7:57">داخل پوشه templates خود جنگو (<code>django\forms\templates</code>)</li>
<li data-sourcepos="8:1-9:0">داخل پوشه templates تمام اپ‌های نصب شده (<code>admin_interface\templates</code>, <code>colorfield\templates</code>, <code>django\contrib\admin\templates</code> و ...)</li>
</ul><p data-sourcepos="10:1-10:159"><strong>اما مهم‌تر از همه:</strong> مسیری که ما انتظار داریم جنگو جستجو کنه، یعنی <code>D:\...\Tanbakhsystem\templates\widgets\number_to_words.html</code>، <strong>در این لیست وجود نداره!</strong></p><p data-sourcepos="12:1-12:15"><strong>نتیجه قطعی:</strong></p><p data-sourcepos="14:1-14:249">این خطا <strong>قطعاً</strong> به این معنیه که پوشه‌ی <code>templates</code> اصلی پروژه شما (همون <code>D:\...\Tanbakhsystem\templates</code>) به درستی در تنظیمات <code>TEMPLATES</code> فایل <code>settings.py</code> شما <strong>معرفی نشده</strong> یا تغییراتی که قبلاً دادید ذخیره نشده یا سرور رو بعدش ری‌استارت نکردید.</p><p data-sourcepos="16:1-16:37"><strong>راه‌حل (دوباره و با تاکید بیشتر):</strong></p><ol data-sourcepos="18:1-55:0">
<li data-sourcepos="18:1-49:0">
<p data-sourcepos="18:5-18:33"><strong>بررسی دقیق <code>settings.py</code>:</strong></p>
<ul data-sourcepos="19:5-22:0">
<li data-sourcepos="19:5-19:53">لطفاً فایل <code>settings.py</code> پروژه‌تون رو باز کنید.</li>
<li data-sourcepos="20:5-20:35">بخش <code>TEMPLATES</code> رو پیدا کنید.</li>
<li data-sourcepos="21:5-22:0">مطمئن شوید که لیست <code>DIRS</code> شامل مسیر پوشه <code>templates</code> اصلی شما هست. <strong>بهترین راه استفاده از <code>BASE_DIR</code> هست:</strong></li>
</ul>
<response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-71 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-71 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_d0bae9db38d1c538&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_9fcb2d34be654c17&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-71 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-71">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-71 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-71 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_d0bae9db38d1c538&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_9fcb2d34be654c17&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-71"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-71"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-71"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-71" data-sourcepos="23:5-48:5"><span class="hljs-comment"># settings.py</span>
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
BASE_DIR = Path(__file__).resolve().parent.parent <span class="hljs-comment"># مطمئن شوید این در بالای فایل هست</span>

TEMPLATES = [
    {
        <span class="hljs-string">'BACKEND'</span>: <span class="hljs-string">'django.template.backends.django.DjangoTemplates'</span>,
        <span class="hljs-string">'DIRS'</span>: [
            BASE_DIR / <span class="hljs-string">'templates'</span>,  <span class="hljs-comment"># &lt;-- آیا این خط دقیقاً به همین شکل وجود دارد؟</span>
                                     <span class="hljs-comment"># &lt;-- آیا کامنت نشده است؟ (# در اول خط نباشد)</span>
                                     <span class="hljs-comment"># &lt;-- آیا داخل لیست [] قرار دارد؟</span>
        ],
        <span class="hljs-string">'APP_DIRS'</span>: <span class="hljs-literal">True</span>, <span class="hljs-comment"># این باید True باشد تا پوشه templates اپ‌ها هم خوانده شود</span>
        <span class="hljs-string">'OPTIONS'</span>: {
            <span class="hljs-string">'context_processors'</span>: [
                <span class="hljs-comment"># ... context processor های شما ...</span>
            ],
            <span class="hljs-string">'builtins'</span>: [ <span class="hljs-comment"># اگر از تگ‌های سفارشی مثل rcms_custom_filters استفاده می‌کنید</span>
                <span class="hljs-string">'rcms_custom_filters.templatetags.rcms_custom_filters'</span>,
                <span class="hljs-string">'jalali_date.templatetags.jalali_tags'</span>, <span class="hljs-comment"># برای فیلترهای جلالی</span>
             ]
        },
    },
]
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element>
</li>
<li data-sourcepos="50:1-51:0">
<p data-sourcepos="50:5-50:33"><strong>ذخیره فایل <code>settings.py</code></strong>.</p>
</li>
<li data-sourcepos="52:1-55:0">
<p data-sourcepos="52:5-52:46"><strong>راه‌اندازی مجدد سرور جنگو (بسیار مهم):</strong></p>
<ul data-sourcepos="53:5-55:0">
<li data-sourcepos="53:5-53:83">سرور فعلی (<code>manage.py runserver</code>) رو با زدن <code>Ctrl + C</code> در ترمینال متوقف کنید.</li>
<li data-sourcepos="54:5-55:0">دوباره دستور <code>python manage.py runserver</code> رو اجرا کنید تا تنظیمات جدید اعمال بشه. <strong>بدون ری‌استارت سرور، تغییرات <code>settings.py</code> اعمال نمی‌شود.</strong></li>
</ul>
</li>
</ol><p data-sourcepos="56:1-56:10"><strong>لطفاً:</strong></p><ul data-sourcepos="58:1-60:0">
<li data-sourcepos="58:1-58:103">محتوای کامل بخش <code>TEMPLATES</code> در فایل <code>settings.py</code> خودتون رو کپی و اینجا ارسال کنید تا با هم چکش کنیم.</li>
<li data-sourcepos="59:1-60:0">مطمئن شوید که بعد از هر تغییری در <code>settings.py</code>، سرور جنگو رو ری‌استارت کرده‌اید.</li>
</ul><p data-sourcepos="61:1-61:66">با بررسی و اصلاح این بخش، مشکل <code>TemplateDoesNotExist</code> باید حل بشه.</p></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer complete gap"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted"><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted"><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-13"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-44 hide-action-bar ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-44 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-44 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-44 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-0" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_d0bae9db38d1c538&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_9fcb2d34be654c17&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_599"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_603"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_609"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_611"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_599)"><g mask="url(#__lottie_element_603)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_609)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_611)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-44 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-0" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_d0bae9db38d1c538&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_9fcb2d34be654c17&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_588"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_592"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_588)"><g mask="url(#__lottie_element_592)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-44 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-44 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_d0bae9db38d1c538&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_9fcb2d34be654c17&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-44 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-44 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-44 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-44 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-44"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-44"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-0"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted"><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="3daf4abd07ba2a5d" style=""><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-1"><!----><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l collapsed" dir="ltr"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorCreateView___(PermissionBaseView, CreateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     context_object_name = 'factor' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_denied_message = 'متاسفانه دسترسی مجاز ندارید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_codenames = ['tankhah.a_factor_add'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = Tankhah.objects.get(id=self.kwargs.get('tankhah_id', None)) if 'tankhah_id' in self.kwargs else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             factor = self.form_class(self.request.POST, user=self.request.user, tankhah=tankhah).save(commit=False) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=factor) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['title'] = 'ایجاد فاکتور جدید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah_documents'] = tankhah.documents.all() if tankhah else [] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         for factor in context['factors']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             tankhah = factor.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             current_stage_order = tankhah.current_stage.order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             user = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             user_posts = user.userpost_set.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             user_can_approve = any( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 p.post.stageapprover_set.filter(stage=tankhah.current_stage).exists() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for p in user_posts <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             ) and tankhah.status in ['DRAFT', 'PENDING'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             factor.can_approve = user_can_approve <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             # چک قفل بودن برای مراحل پایین‌تر <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             factor.is_locked = factor.locked_by_stage is not None and factor.locked_by_stage.order &gt; current_stage_order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if 'tankhah_id' in self.kwargs: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             kwargs['tankhah'] = Tankhah.objects.get(id=self.kwargs['tankhah_id']) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = self.get_context_data() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         item_formset = context['item_formset'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         document_form = context['document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah_document_form = context['tankhah_document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = form.cleaned_data['tankhah'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         # فقط در مرحله اولیه (بالاترین order) اجازه ثبت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         initial_stage_order = WorkflowStage.objects.order_by('-order').first().order  # بالاترین order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, 'فقط در مرحله اولیه می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if tankhah.status not in ['DRAFT', 'PENDING']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, 'فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 # آپلود اسناد فاکتور <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 # آپلود اسناد تنخواه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     TankhahDocument.objects.create(tankhah=tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 # تأیید خودکار توسط کارشناس <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 user_posts = self.request.user.userpost_set.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 if any(p.post.stageapprover_set.filter(stage=tankhah.current_stage).exists() for p in user_posts): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     for item in self.object.items.all(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         item.status = 'APPROVED' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         item.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         ApprovalLog.objects.create( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             factor_item=item, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             user=self.request.user, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             action='APPROVE', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             stage=tankhah.current_stage, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             post=user_posts.first().post if user_posts.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     self.object.status = 'APPROVED' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     self.object.approved_by.add(self.request.user) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     self.object.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     # انتقال به مرحله بعدی (order پایین‌تر) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     next_stage = WorkflowStage.objects.filter(order__lt=tankhah.current_stage.order).order_by( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         '-order').first() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     if next_stage: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         tankhah.current_stage = next_stage <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         tankhah.status = 'PENDING' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         tankhah.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         self.object.locked_by_stage = next_stage  # قفل برای مراحل بالاتر <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         self.object.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         approvers = CustomUser.objects.filter(userpost__post__stageapprover__stage=next_stage) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         if approvers.exists(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             notify.send(self.request.user, recipient=approvers, verb='تنخواه برای تأیید آماده است', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         target=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             logger.info( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 f"Notification sent to {approvers.count()} approvers for stage {next_stage.name}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.success(self.request, 'فاکتور با موفقیت ثبت و تأیید شد.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             logger.info(f"Errors: {item_formset.errors}, {document_form.errors}, {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def handle_no_permission(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         messages.error(self.request, self.permission_denied_message) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return super().handle_no_permission() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorCreateView3(PermissionBaseView, CreateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_codenames = ['tankhah.a_factor_add'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def dispatch(self, request, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if not request.user.has_perm('tankhah.a_factor_add'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(request, _('شما دسترسی لازم برای ایجاد فاکتور را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.handle_no_permission() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return super().dispatch(request, *args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         try: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             tankhah = Tankhah.objects.get(id=self.kwargs.get('tankhah_id')) if 'tankhah_id' in self.kwargs else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         except Tankhah.DoesNotExist: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             tankhah = None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, _('تنخواه مورد نظر یافت نشد.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             form = self.form_class(self.request.POST, user=self.request.user, tankhah=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             # فقط اگه فرم معتبر باشه، instance رو می‌سازیم <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             factor = form.instance if form.is_valid() else Factor() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = form <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=factor) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = self.form_class(user=self.request.user, tankhah=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['title'] = _('ایجاد فاکتور جدید') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah_documents'] = tankhah.documents.all() if tankhah else [] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = self.get_context_data() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         item_formset = context['item_formset'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         document_form = context['document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah_document_form = context['tankhah_document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = form.cleaned_data['tankhah'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         initial_stage_order = WorkflowStage.objects.order_by('order').first().order if WorkflowStage.objects.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, _('فقط در مرحله اولیه می‌توانید فاکتور ثبت کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if tankhah.status not in ['DRAFT', 'PENDING']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, _('فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     TankhahDocument.objects.create(tankhah=tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object.status = 'PENDING' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.success(self.request, _('فاکتور با موفقیت ثبت شد.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             logger.info(f"Errors: {item_formset.errors}, {document_form.errors}, {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorCreateView(PermissionBaseView, CreateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     context_object_name = 'factor' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_denied_message = 'متاسفانه دسترسی مجاز ندارید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_codenames = ['tankhah.a_factor_add'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = Tankhah.objects.get(id=self.kwargs.get('tankhah_id', None)) if 'tankhah_id' in self.kwargs else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             form = self.form_class(self.request.POST, user=self.request.user, tankhah=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             factor = form.instance if form.is_valid() else Factor() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = form <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=factor) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             # اضافه کردن object برای نمایش اسناد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if hasattr(self, 'object') and self.object: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 context['object'] = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = self.form_class(user=self.request.user, tankhah=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['title'] = 'ایجاد فاکتور جدید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah_documents'] = tankhah.documents.all() if tankhah else [] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if 'tankhah_id' in self.kwargs: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             kwargs['tankhah'] = Tankhah.objects.get(id=self.kwargs['tankhah_id']) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = self.get_context_data() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         item_formset = context['item_formset'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         document_form = context['document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah_document_form = context['tankhah_document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = form.cleaned_data['tankhah'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         initial_stage_order = WorkflowStage.objects.order_by('-order').first().order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, 'فقط در مرحله اولیه می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if tankhah.status not in ['DRAFT', 'PENDING']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, 'فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     TankhahDocument.objects.create(tankhah=tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 user_posts = self.request.user.userpost_set.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 if any(p.post.stageapprover_set.filter(stage=tankhah.current_stage).exists() for p in user_posts): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     for item in self.object.items.all(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         item.status = 'APPROVED' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         item.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         ApprovalLog.objects.create( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             factor_item=item, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             user=self.request.user, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             action='APPROVE', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             stage=tankhah.current_stage, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             post=user_posts.first().post if user_posts.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     self.object.status = 'APPROVED' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     self.object.approved_by.add(self.request.user) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     self.object.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     next_stage = WorkflowStage.objects.filter(order__lt=tankhah.current_stage.order).order_by('-order').first() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     if next_stage: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         tankhah.current_stage = next_stage <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         tankhah.status = 'PENDING' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         tankhah.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         self.object.locked_by_stage = next_stage <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         self.object.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         approvers = CustomUser.objects.filter(userpost__post__stageapprover__stage=next_stage) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         if approvers.exists(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             notify.send(self.request.user, recipient=approvers, verb='تنخواه برای تأیید آماده است', target=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             logger.info(f"Notification sent to {approvers.count()} approvers for stage {next_stage.name}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.success(self.request, 'فاکتور با موفقیت ثبت و تأیید شد.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             logger.info(f"Errors: {item_formset.errors}, {document_form.errors}, {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def handle_no_permission(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         messages.error(self.request, self.permission_denied_message) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return super().handle_no_permission() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> این ویو ها رو بررسی کن و ببین چرا: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> فقط یک ردیف ثبت میکنه  <!----><!----></p><!----></div><button _ngcontent-ng-c4161157681="" mat-icon-button="" mattooltip="ازهم بازکردن نوشتار" aria-label="ازهم بازکردن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger expand-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="224552;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_3daf4abd07ba2a5d&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-19" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="expand_more" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-16 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_3daf4abd07ba2a5d&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-16 response-container-with-gpi tts-removed ng-star-inserted" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-16 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-16"><!----><!----><div _ngcontent-ng-c108414610="" class="ng-tns-c108414610-16 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c108414610="" class="single-draft-response-container ng-tns-c108414610-16 ng-star-inserted" style=""><!----><!----></div><!----></div><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-16 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-16"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-16"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-16"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-16 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-18 ng-tns-c108414610-16 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-18"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-18 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-18 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-18 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-18 ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_104"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_111"><g transform="matrix(-1,0,0,-1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_114)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_114" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_118" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_111_1" mask-type="alpha"><use href="#__lottie_element_111"></use></mask></defs><g clip-path="url(#__lottie_element_104)"><g mask="url(#__lottie_element_111_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_118)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-18 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_145"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_149" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_156" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_160" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_164" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_168" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_172" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_145)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_172)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_168)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_164)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_160)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_156)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_149)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-16"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-16"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-17 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-17"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-17"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-17 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-17"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-17">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-17"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-17 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_3daf4abd07ba2a5d" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_3daf4abd07ba2a5d" dir="rtl" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:304">تحلیل کد ویوها نشان می‌دهد که شما ۳ نسخه مختلف از <code>FactorCreateView</code> دارید که همگی سعی در پردازش فرم اصلی (<code>FactorForm</code>) و فرم‌ست آیتم‌ها (<code>FactorItemFormSet</code>) دارند. مشکل "فقط یک ردیف ثبت می‌کنه" تقریباً همیشه به این معنی است که <strong>فرم‌ست (<code>item_formset</code>) به درستی اعتبارسنجی نمی‌شود یا ذخیره نمی‌گردد.</strong></p><p data-sourcepos="3:1-3:23"><strong>دلایل احتمالی اصلی:</strong></p><ol data-sourcepos="5:1-15:0">
<li data-sourcepos="5:1-7:0">
<p data-sourcepos="5:5-5:393"><strong><code>item_formset.is_valid()</code> False می‌شود:</strong> این محتمل‌ترین دلیل است. اگر حتی یکی از فرم‌های داخل فرم‌ست معتبر نباشد (مثلاً فیلد اجباری خالی باشد یا خطای اعتبارسنجی دیگری داشته باشد) یا اطلاعات مدیریت فرم‌ست (<code>management_form</code>) ناقص یا اشتباه ارسال شده باشد، <code>item_formset.is_valid()</code> مقدار <code>False</code> برمی‌گرداند و در نتیجه <code>item_formset.save()</code> اصلاً اجرا نمی‌شود و هیچ ردیفی ذخیره نمی‌گردد.</p>
<ul data-sourcepos="6:5-7:0">
<li data-sourcepos="6:5-7:0"><strong>راه‌حل:</strong> حتماً خطاهای فرم‌ست رو بررسی و نمایش بدید. در کد شما <code>logger.info(f"Errors: {item_formset.errors}, ...")</code> وجود داره، اما بهتره این خطاها رو در تمپلیت هم نمایش بدید تا کاربر دلیل عدم ذخیره رو بفهمه.</li>
</ul>
</li>
<li data-sourcepos="8:1-11:0">
<p data-sourcepos="8:5-8:59"><strong>فراخوانی اشتباه <code>get_context_data</code> در <code>form_valid</code>:</strong></p>
<ul data-sourcepos="9:5-11:0">
<li data-sourcepos="9:5-9:138">در هر سه نسخه ویو، شما داخل متد <code>form_valid</code> دوباره <code>context = self.get_context_data()</code> رو صدا زدید. این کار معمولاً <strong>اشتباه</strong> است.</li>
<li data-sourcepos="10:5-11:0">متد <code>form_valid</code> در <code>CreateView</code> زمانی فراخوانی می‌شه که فرم <em>اصلی</em> (<code>form</code>) <strong>قبلاً</strong> معتبر تشخیص داده شده. شما باید فرم‌ست (<code>item_formset</code>) رو <em>مستقیماً داخل <code>form_valid</code></em> با استفاده از <code>self.request.POST</code> و <code>self.request.FILES</code> ایجاد کنید، نه اینکه دوباره <code>get_context_data</code> رو صدا بزنید که ممکن است باعث ایجاد دوباره و نادرست فرم‌ست شود.</li>
</ul>
</li>
<li data-sourcepos="12:1-13:0">
<p data-sourcepos="12:5-12:271"><strong>عدم وجود یا جایگذاری اشتباه <code>{{ item_formset.management_form }}</code>:</strong> اطمینان حاصل کنید که این تگ <strong>دقیقاً یک بار</strong> و <strong>قبل</strong> از حلقه <code>for</code> که فرم‌های آیتم‌ها رو رندر می‌کنه، در تمپلیت <code>factor_form.html</code> شما وجود داره. بدون این تگ، جنگو نمی‌تونه فرم‌ست رو پردازش کنه.</p>
</li>
<li data-sourcepos="14:1-15:0">
<p data-sourcepos="14:5-14:241"><strong>مشکل در اتصال <code>instance</code> به فرم‌ست:</strong> خط <code>item_formset.instance = self.object</code> بسیار مهمه و باید <em>قبل</em> از <code>item_formset.save()</code> و <em>بعد</em> از گرفتن <code>self.object</code> (با <code>form.save(commit=False)</code>) اجرا بشه تا آیتم‌ها به فاکتور والد مرتبط بشن.</p>
</li>
</ol><p data-sourcepos="16:1-16:63"><strong>راه حل پیشنهادی (اصلاح <code>FactorCreateView</code> - آخرین ویو شما):</strong></p><p data-sourcepos="18:1-18:63">متد <code>form_valid</code> و <code>get_context_data</code> رو به شکل زیر اصلاح کنید:</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-72 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-72 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_3daf4abd07ba2a5d&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_1fafa90b2c80f599&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-72 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-72">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-72 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-72 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_3daf4abd07ba2a5d&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_1fafa90b2c80f599&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-72"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-72"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-72"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-72" data-sourcepos="20:1-192:0"><span class="hljs-comment"># views.py (بخشی از FactorCreateView)</span>
<span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render, redirect <span class="hljs-comment"># redirect رو اضافه کنید اگر لازم دارید</span>
<span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> messages
<span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> transaction
<span class="hljs-comment"># ... سایر import ها ...</span>
<span class="hljs-keyword">from</span> .forms <span class="hljs-keyword">import</span> FactorForm, FactorItemFormSet, FactorDocumentForm, TankhahDocumentForm <span class="hljs-comment"># فرم‌ها رو import کنید</span>
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Factor, FactorDocument, TankhahDocument, WorkflowStage, ApprovalLog, CustomUser <span class="hljs-comment"># مدل‌ها رو import کنید</span>
<span class="hljs-keyword">import</span> logging
<span class="hljs-comment"># from notifications.signals import notify # اگر از django-notifications-hq استفاده می‌کنید</span>

logger = logging.getLogger(__name__)

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FactorCreateView</span>(<span class="hljs-params">PermissionBaseView, CreateView</span>):</span>
    model = Factor
    form_class = FactorForm
    template_name = <span class="hljs-string">'tankhah/factor_form.html'</span>
    <span class="hljs-comment"># success_url = reverse_lazy('factor_list') # می‌توانید در get_success_url تعریف کنید</span>
    context_object_name = <span class="hljs-string">'factor'</span> <span class="hljs-comment"># این در CreateView معمولا 'object' است</span>
    permission_denied_message = <span class="hljs-string">'متاسفانه دسترسی مجاز ندارید'</span>
    permission_codenames = [<span class="hljs-string">'tankhah.a_factor_add'</span>]
    check_organization = <span class="hljs-literal">True</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_context_data</span>(<span class="hljs-params">self, **kwargs</span>):</span>
        context = <span class="hljs-built_in">super</span>().get_context_data(**kwargs)
        tankhah = <span class="hljs-literal">None</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'tankhah_id'</span> <span class="hljs-keyword">in</span> self.kwargs:
            <span class="hljs-keyword">try</span>:
                tankhah = Tankhah.objects.get(<span class="hljs-built_in">id</span>=self.kwargs[<span class="hljs-string">'tankhah_id'</span>])
            <span class="hljs-keyword">except</span> Tankhah.DoesNotExist:
                messages.error(self.request, <span class="hljs-string">'تنخواه مشخص شده یافت نشد.'</span>)
                <span class="hljs-comment"># شاید بهتر باشد کاربر را به صفحه لیست هدایت کنید یا خطای ۴۰۴ بدهید</span>

        context[<span class="hljs-string">'title'</span>] = <span class="hljs-string">'ایجاد فاکتور جدید'</span>
        context[<span class="hljs-string">'tankhah'</span>] = tankhah

        <span class="hljs-keyword">if</span> self.request.POST:
            <span class="hljs-comment"># در حالت POST، فرم اصلی در context توسط CreateView قرار می‌گیرد (`form`)</span>
            <span class="hljs-comment"># فقط فرم‌ست و فرم‌های دیگر را اضافه می‌کنیم</span>
            <span class="hljs-comment"># !! نکته: instance را اینجا None می‌گذاریم، در form_valid تنظیم می‌شود</span>
            context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'items'</span>) <span class="hljs-comment"># اضافه کردن prefix</span>
            context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>) <span class="hljs-comment"># اضافه کردن prefix</span>
            context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>) <span class="hljs-comment"># اضافه کردن prefix</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># مقدار اولیه برای فرم اصلی در get_form_kwargs تنظیم می‌شود</span>
            context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(prefix=<span class="hljs-string">'items'</span>) <span class="hljs-comment"># اضافه کردن prefix</span>
            context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(prefix=<span class="hljs-string">'factor_docs'</span>) <span class="hljs-comment"># اضافه کردن prefix</span>
            context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(prefix=<span class="hljs-string">'tankhah_docs'</span>) <span class="hljs-comment"># اضافه کردن prefix</span>

        context[<span class="hljs-string">'tankhah_documents'</span>] = tankhah.documents.<span class="hljs-built_in">all</span>() <span class="hljs-keyword">if</span> tankhah <span class="hljs-keyword">else</span> []
        <span class="hljs-comment"># حذف منطق اضافه کردن can_approve و is_locked از اینجا، چون مربوط به لیست فاکتور بود</span>

        <span class="hljs-keyword">return</span> context

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_form_kwargs</span>(<span class="hljs-params">self</span>):</span>
        kwargs = <span class="hljs-built_in">super</span>().get_form_kwargs()
        kwargs[<span class="hljs-string">'user'</span>] = self.request.user
        <span class="hljs-keyword">if</span> <span class="hljs-string">'tankhah_id'</span> <span class="hljs-keyword">in</span> self.kwargs:
             <span class="hljs-keyword">try</span>:
                 kwargs[<span class="hljs-string">'tankhah'</span>] = Tankhah.objects.get(<span class="hljs-built_in">id</span>=self.kwargs[<span class="hljs-string">'tankhah_id'</span>])
             <span class="hljs-keyword">except</span> Tankhah.DoesNotExist:
                 <span class="hljs-comment"># مدیریت حالتی که tankhah_id معتبر نیست</span>
                 <span class="hljs-keyword">pass</span> <span class="hljs-comment"># یا خطا بدهید</span>
        <span class="hljs-comment"># اگر POST نبود و tankhah از URL نیامده بود، اینجا می‌توانید مقدار پیش‌فرض بدهید</span>
        <span class="hljs-keyword">elif</span> <span class="hljs-keyword">not</span> self.request.POST <span class="hljs-keyword">and</span> <span class="hljs-string">'tankhah'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> kwargs:
             <span class="hljs-comment"># پیدا کردن یک tankhah پیش‌فرض یا None کردن</span>
             kwargs[<span class="hljs-string">'tankhah'</span>] = <span class="hljs-literal">None</span> <span class="hljs-comment"># یا اولین تنخواه مجاز کاربر؟</span>

        <span class="hljs-keyword">return</span> kwargs

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_valid</span>(<span class="hljs-params">self, form</span>):</span>
        <span class="hljs-comment"># ! دیگر get_context_data را اینجا صدا نزنید</span>
        <span class="hljs-comment"># فرم اصلی (form) قبلاً توسط CreateView اعتبارسنجی شده است</span>

        <span class="hljs-comment"># فرم‌ست و فرم‌های دیگر را مستقیماً اینجا با request.POST بسازید</span>
        item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'items'</span>) <span class="hljs-comment"># اضافه کردن prefix</span>
        document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>) <span class="hljs-comment"># اضافه کردن prefix</span>
        tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>) <span class="hljs-comment"># اضافه کردن prefix</span>

        tankhah = form.cleaned_data[<span class="hljs-string">'tankhah'</span>]

        <span class="hljs-comment"># --- بررسی‌های اولیه برای مرحله و وضعیت تنخواه ---</span>
        initial_stage_order = <span class="hljs-literal">None</span>
        first_stage = WorkflowStage.objects.order_by(<span class="hljs-string">'order'</span>).first() <span class="hljs-comment"># کمترین order مرحله اول است؟</span>
        <span class="hljs-keyword">if</span> first_stage:
            initial_stage_order = first_stage.order

        <span class="hljs-comment"># ! ممکن است منطق initial_stage_order نیاز به بازبینی داشته باشد</span>
        <span class="hljs-comment"># ! آیا بالاترین order مرحله اول است یا کمترین؟ در کد شما هر دو حالت بود.</span>
        <span class="hljs-comment"># ! فرض می‌کنیم کمترین order مرحله اول است.</span>
        <span class="hljs-keyword">if</span> initial_stage_order <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> tankhah.current_stage.order != initial_stage_order:
            messages.error(self.request, <span class="hljs-string">'فقط در مرحله اولیه می‌توانید فاکتور ثبت کنید.'</span>)
            <span class="hljs-comment"># برگرداندن فرم‌های ساخته شده برای نمایش خطاها در تمپلیت</span>
            <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))

        <span class="hljs-keyword">if</span> tankhah.status <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">'DRAFT'</span>, <span class="hljs-string">'PENDING'</span>]:
            messages.error(self.request, <span class="hljs-string">'فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.'</span>)
            <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))
            <span class="hljs-comment"># یا form_invalid(form)</span>

        <span class="hljs-comment"># --- اعتبارسنجی فرم‌ست و فرم‌های دیگر ---</span>
        <span class="hljs-comment"># ! مهم: item_formset.is_valid() را چک کنید</span>
        <span class="hljs-keyword">if</span> item_formset.is_valid() <span class="hljs-keyword">and</span> document_form.is_valid() <span class="hljs-keyword">and</span> tankhah_document_form.is_valid():
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">with</span> transaction.atomic():
                    <span class="hljs-comment"># ابتدا آبجکت اصلی را بدون ذخیره در دیتابیس ایجاد کنید</span>
                    self.<span class="hljs-built_in">object</span> = form.save(commit=<span class="hljs-literal">False</span>)
                    <span class="hljs-comment"># !! اگر نیاز به تنظیم فیلدی قبل از اولین ذخیره دارید اینجا انجام دهید</span>
                    <span class="hljs-comment"># self.object.created_by = self.request.user # مثال</span>
                    self.<span class="hljs-built_in">object</span>.save() <span class="hljs-comment"># ذخیره فاکتور اصلی</span>

                    <span class="hljs-comment"># حالا instance فرم‌ست را تنظیم و آن را ذخیره کنید</span>
                    item_formset.instance = self.<span class="hljs-built_in">object</span>
                    item_formset.save() <span class="hljs-comment"># ! این باید آیتم‌ها را ذخیره کند</span>
                    logger.info(<span class="hljs-string">f"Factor items saved for Factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.number}</span>. Count: <span class="hljs-subst">{item_formset.total_form_count()}</span>"</span>)

                    <span class="hljs-comment"># ذخیره اسناد فاکتور</span>
                    factor_files = self.request.FILES.getlist(<span class="hljs-string">'factor_docs-files'</span>) <span class="hljs-comment"># استفاده از prefix</span>
                    logger.info(<span class="hljs-string">f"Received <span class="hljs-subst">{<span class="hljs-built_in">len</span>(factor_files)}</span> factor files."</span>)
                    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> factor_files:
                        FactorDocument.objects.create(factor=self.<span class="hljs-built_in">object</span>, file=file)
                        logger.info(<span class="hljs-string">f"Saved factor document: <span class="hljs-subst">{file.name}</span>"</span>)


                    <span class="hljs-comment"># ذخیره اسناد تنخواه</span>
                    <span class="hljs-comment"># !! توجه: آپلود فایل برای تنخواه در فرم ایجاد فاکتور شاید منطقی نباشد؟</span>
                    tankhah_files = self.request.FILES.getlist(<span class="hljs-string">'tankhah_docs-documents'</span>) <span class="hljs-comment"># استفاده از prefix</span>
                    logger.info(<span class="hljs-string">f"Received <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tankhah_files)}</span> tankhah files."</span>)
                    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> tankhah_files:
                        TankhahDocument.objects.create(tankhah=tankhah, document=file)
                        logger.info(<span class="hljs-string">f"Saved tankhah document: <span class="hljs-subst">{file.name}</span>"</span>)

                    <span class="hljs-comment"># --- منطق تأیید خودکار و گردش کار ---</span>
                    <span class="hljs-comment"># ... (کد مربوط به تایید خودکار و تغییر مرحله شما) ...</span>
                    <span class="hljs-comment"># ... (دقت کنید که self.object حالا ذخیره شده است) ...</span>
                    user_posts = self.request.user.userpost_set.<span class="hljs-built_in">all</span>()
                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">any</span>(p.post.stageapprover_set.<span class="hljs-built_in">filter</span>(stage=tankhah.current_stage).exists() <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> user_posts):
                         <span class="hljs-comment"># ... (کد تایید آیتم‌ها، فاکتور و تغییر مرحله) ...</span>
                         <span class="hljs-keyword">pass</span> <span class="hljs-comment"># فعلا خلاصه شده</span>

                messages.success(self.request, <span class="hljs-string">'فاکتور و ردیف‌های آن با موفقیت ثبت شد.'</span>)
                <span class="hljs-keyword">return</span> redirect(self.get_success_url()) <span class="hljs-comment"># ! استفاده از redirect</span>
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                 <span class="hljs-comment"># لاگ خطا و نمایش پیام خطا به کاربر</span>
                 logger.error(<span class="hljs-string">f"Error saving factor or items: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
                 messages.error(self.request, <span class="hljs-string">f'خطا در ذخیره‌سازی: <span class="hljs-subst">{e}</span>'</span>)
                 <span class="hljs-comment"># برگرداندن فرم‌ها با خطا</span>
                 <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))

        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># اگر فرم‌ست یا فرم‌های دیگر نامعتبر بودند</span>
            logger.warning(<span class="hljs-string">f"Formset or document forms invalid. FactorForm valid: <span class="hljs-subst">{form.is_valid()}</span>, ItemFormset valid: <span class="hljs-subst">{item_formset.is_valid()}</span>, DocForm valid: <span class="hljs-subst">{document_form.is_valid()}</span>, TankhahDocForm valid: <span class="hljs-subst">{tankhah_document_form.is_valid()}</span>"</span>)
            logger.warning(<span class="hljs-string">f"ItemFormset Errors: <span class="hljs-subst">{item_formset.errors}</span>"</span>)
            logger.warning(<span class="hljs-string">f"DocForm Errors: <span class="hljs-subst">{document_form.errors}</span>"</span>)
            logger.warning(<span class="hljs-string">f"Tankhah DocForm Errors: <span class="hljs-subst">{tankhah_document_form.errors}</span>"</span>)
            messages.error(self.request, _(<span class="hljs-string">'لطفا خطاهای فرم را اصلاح کنید.'</span>))
            <span class="hljs-comment"># برگرداندن فرم‌ها با خطا برای نمایش در تمپلیت</span>
            <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_success_url</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-comment"># می‌توانید به لیست فاکتورها یا جزئیات همین فاکتور ریدایرکت کنید</span>
        <span class="hljs-comment"># return reverse_lazy('factor_list')</span>
        <span class="hljs-keyword">if</span> self.<span class="hljs-built_in">object</span>:
            <span class="hljs-keyword">return</span> reverse_lazy(<span class="hljs-string">'factor_detail'</span>, kwargs={<span class="hljs-string">'pk'</span>: self.<span class="hljs-built_in">object</span>.pk}) <span class="hljs-comment"># مثال: ریدایرکت به جزئیات</span>
        <span class="hljs-keyword">return</span> reverse_lazy(<span class="hljs-string">'factor_list'</span>) <span class="hljs-comment"># fallback</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_no_permission</span>(<span class="hljs-params">self</span>):</span>
        messages.error(self.request, self.permission_denied_message)
        <span class="hljs-comment"># return super().handle_no_permission() # این ممکن است به لاگین ریدایرکت کند</span>
        <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'index'</span>) <span class="hljs-comment"># یا به صفحه اصلی ریدایرکت کنید</span>

</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-sourcepos="194:1-194:18"><strong>تغییرات کلیدی:</strong></p><ol data-sourcepos="196:1-203:0">
<li data-sourcepos="196:1-196:63"><strong>حذف <code>get_context_data</code> از <code>form_valid</code>:</strong> مهم‌ترین تغییر.</li>
<li data-sourcepos="197:1-197:172"><strong>ایجاد فرم‌ست در <code>form_valid</code>:</strong> <code>item_formset</code>, <code>document_form</code>, <code>tankhah_document_form</code> مستقیماً داخل <code>form_valid</code> با <code>request.POST</code> و <code>request.FILES</code> ساخته می‌شوند.</li>
<li data-sourcepos="198:1-198:429"><strong>اضافه کردن <code>prefix</code>:</strong> هنگام ساخت فرم‌ست و فرم‌های فایل، <code>prefix</code> مناسب اضافه شد (<code>prefix='items'</code>, <code>prefix='factor_docs'</code>, <code>prefix='tankhah_docs'</code>). <strong>بسیار مهم است که همین <code>prefix</code> ها را در تمپلیت خود هنگام رندر کردن این فرم‌ها استفاده کنید</strong> (مخصوصاً برای فرم‌های فایل، اگر جدا رندر می‌کنید). برای فرم‌ست، جنگو معمولاً خودش prefix را مدیریت می‌کند اگر از طریق <code>{{ item_formset }}</code> رندر شود، اما تعیین صریح آن ضرری ندارد.</li>
<li data-sourcepos="199:1-199:272"><strong>ترتیب ذخیره:</strong> ابتدا <code>form.save(commit=False)</code> برای گرفتن آبجکت فاکتور، سپس تنظیم <code>item_formset.instance</code>، سپس اعتبارسنجی فرم‌ست و فرم‌های فایل، و در نهایت اگر همه معتبر بودند، <code>self.object.save()</code> و <code>item_formset.save()</code> و ذخیره فایل‌ها داخل <code>transaction.atomic()</code>.</li>
<li data-sourcepos="200:1-200:145"><strong>نمایش خطا:</strong> اگر <code>item_formset</code> یا فرم‌های دیگر <code>is_valid()</code> نباشند، فرم‌ها دوباره با خطاها به تمپلیت ارسال می‌شوند (<code>render_to_response</code>).</li>
<li data-sourcepos="201:1-201:70"><strong>لاگ خطا:</strong> لاگ‌های بهتری برای خطاها و وضعیت اعتبارسنجی اضافه شد.</li>
<li data-sourcepos="202:1-203:0"><strong>ریدایرکت:</strong> در انتهای <code>form_valid</code> به جای <code>super().form_valid(form)</code> از <code>redirect(self.get_success_url())</code> استفاده شد که استانداردتر است.</li>
</ol><p data-sourcepos="204:1-204:17"><strong>اقدامات لازم:</strong></p><ol data-sourcepos="206:1-212:215">
<li data-sourcepos="206:1-206:93">کد <code>views.py</code> خود را با کد بالا آپدیت کنید (یکی از کلاس‌ها را انتخاب و بقیه را حذف کنید).</li>
<li data-sourcepos="207:1-210:293"><strong>بررسی تمپلیت <code>factor_form.html</code>:</strong>
<ul data-sourcepos="208:5-210:293">
<li data-sourcepos="208:5-208:110">مطمئن شوید تگ <code>{{ item_formset.management_form }}</code> <strong>فقط یک بار و قبل از حلقه <code>for</code> آیتم‌ها</strong> وجود دارد.</li>
<li data-sourcepos="209:5-209:185">مطمئن شوید خطاهای فرم‌ست (<code>{{ item_formset.non_form_errors }}</code> و خطاهای هر فرم <code>{{ form.errors }}</code>) را در جایی مناسب نمایش می‌دهید تا بفهمید چرا <code>is_valid()</code> ممکن است <code>False</code> شود.</li>
<li data-sourcepos="210:5-210:293">اگر فرم‌های <code>document_form</code> و <code>tankhah_document_form</code> را به صورت دستی رندر می‌کنید، مطمئن شوید <code>prefix</code> مناسب را به آن‌ها می‌دهید (مثلاً <code>{{ document_form.file.label_tag }}</code>, <code>{{ document_form.file }}</code> و ...). اگر از <code>{{ document_form.as_p }}</code> استفاده می‌کنید، prefix خودش مدیریت می‌شود.</li>
</ul>
</li>
<li data-sourcepos="211:1-211:113"><strong>بررسی <code>forms.py</code>:</strong> مطمئن شوید <code>FactorItemFormSet</code> به درستی تعریف شده (معمولاً با <code>inlineformset_factory</code>).</li>
<li data-sourcepos="212:1-212:215"><strong>تست و بررسی لاگ/خطا:</strong> فرم را با چند ردیف آیتم ارسال کنید و لاگ‌های جنگو و کنسول مرورگر را برای خطا بررسی کنید. اگر باز هم فقط یک ردیف ذخیره شد، به خطاهای فرم‌ست که در لاگ یا تمپلیت نمایش داده می‌شود دقت کنید.</li>
</ol></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer complete gap"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted"><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted"><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-16"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-45 hide-action-bar ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-45 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-45 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-45 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-1" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_3daf4abd07ba2a5d&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_1fafa90b2c80f599&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_451"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_455"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_461"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_463"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_451)"><g mask="url(#__lottie_element_455)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_461)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_463)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-45 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-1" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_3daf4abd07ba2a5d&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_1fafa90b2c80f599&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_508"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_512"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_508)"><g mask="url(#__lottie_element_512)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-45 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-45 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_3daf4abd07ba2a5d&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_1fafa90b2c80f599&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-45 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-45 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-45 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-45 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-45"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-45"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-1"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted"><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="2a3431daa3aec702" style=""><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-2"><!----><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l collapsed" dir="ltr"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> عشقم مشکل من و حل کن با دقت و حوضله&nbsp; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp;#* ** * * ** * ** ** <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorCreateView___(PermissionBaseView, CreateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; context_object_name = 'factor' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; permission_denied_message = 'متاسفانه دسترسی مجاز ندارید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; permission_codenames = ['tankhah.a_factor_add'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah = Tankhah.objects.get(id=self.kwargs.get('tankhah_id', None)) if 'tankhah_id' in self.kwargs else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor = self.form_class(self.request.POST, user=self.request.user, tankhah=tankhah).save(commit=False) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=factor) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['title'] = 'ایجاد فاکتور جدید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_documents'] = tankhah.documents.all() if tankhah else [] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; for factor in context['factors']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah = factor.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current_stage_order = tankhah.current_stage.order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user_posts = user.userpost_set.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user_can_approve = any( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p.post.stageapprover_set.filter(stage=tankhah.current_stage).exists() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for p in user_posts <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) and tankhah.status in ['DRAFT', 'PENDING'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor.can_approve = user_can_approve <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # چک قفل بودن برای مراحل پایین‌تر <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor.is_locked = factor.locked_by_stage is not None and factor.locked_by_stage.order &gt; current_stage_order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if 'tankhah_id' in self.kwargs: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; kwargs['tankhah'] = Tankhah.objects.get(id=self.kwargs['tankhah_id']) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = self.get_context_data() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; item_formset = context['item_formset'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; document_form = context['document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah_document_form = context['tankhah_document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah = form.cleaned_data['tankhah'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # فقط در مرحله اولیه (بالاترین order) اجازه ثبت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; initial_stage_order = WorkflowStage.objects.order_by('-order').first().order&nbsp; # بالاترین order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, 'فقط در مرحله اولیه می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if tankhah.status not in ['DRAFT', 'PENDING']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, 'فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # آپلود اسناد فاکتور <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # آپلود اسناد تنخواه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TankhahDocument.objects.create(tankhah=tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # تأیید خودکار توسط کارشناس <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user_posts = self.request.user.userpost_set.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if any(p.post.stageapprover_set.filter(stage=tankhah.current_stage).exists() for p in user_posts): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for item in self.object.items.all(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item.status = 'APPROVED' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ApprovalLog.objects.create( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor_item=item, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user=self.request.user, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; action='APPROVE', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stage=tankhah.current_stage, <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; post=user_posts.first().post if user_posts.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object.status = 'APPROVED' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object.approved_by.add(self.request.user) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # انتقال به مرحله بعدی (order پایین‌تر) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next_stage = WorkflowStage.objects.filter(order__lt=tankhah.current_stage.order).order_by( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '-order').first() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if next_stage: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah.current_stage = next_stage <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah.status = 'PENDING' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object.locked_by_stage = next_stage&nbsp; # قفل برای مراحل بالاتر <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; approvers = CustomUser.objects.filter(userpost__post__stageapprover__stage=next_stage) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if approvers.exists(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; notify.send(self.request.user, recipient=approvers, verb='تنخواه برای تأیید آماده است', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; target=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f"Notification sent to {approvers.count()} approvers for stage {next_stage.name}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.success(self.request, 'فاکتور با موفقیت ثبت و تأیید شد.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Errors: {item_formset.errors}, {document_form.errors}, {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def handle_no_permission(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, self.permission_denied_message) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return super().handle_no_permission() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorCreateView3(PermissionBaseView, CreateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; permission_codenames = ['tankhah.a_factor_add'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def dispatch(self, request, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if not request.user.has_perm('tankhah.a_factor_add'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.error(request, _('شما دسترسی لازم برای ایجاد فاکتور را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.handle_no_permission() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return super().dispatch(request, *args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; try: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah = Tankhah.objects.get(id=self.kwargs.get('tankhah_id')) if 'tankhah_id' in self.kwargs else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; except Tankhah.DoesNotExist: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah = None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, _('تنخواه مورد نظر یافت نشد.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; form = self.form_class(self.request.POST, user=self.request.user, tankhah=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # فقط اگه فرم معتبر باشه، instance رو می‌سازیم <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor = form.instance if form.is_valid() else Factor() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['form'] = form <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=factor) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['form'] = self.form_class(user=self.request.user, tankhah=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['title'] = _('ایجاد فاکتور جدید') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_documents'] = tankhah.documents.all() if tankhah else [] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = self.get_context_data() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; item_formset = context['item_formset'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; document_form = context['document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah_document_form = context['tankhah_document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah = form.cleaned_data['tankhah'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; initial_stage_order = WorkflowStage.objects.order_by('order').first().order if WorkflowStage.objects.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, _('فقط در مرحله اولیه می‌توانید فاکتور ثبت کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if tankhah.status not in ['DRAFT', 'PENDING']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, _('فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TankhahDocument.objects.create(tankhah=tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object.status = 'PENDING' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.success(self.request, _('فاکتور با موفقیت ثبت شد.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Errors: {item_formset.errors}, {document_form.errors}, {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorCreateView(PermissionBaseView, CreateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; # success_url = reverse_lazy('factor_list') # می‌توانید در get_success_url تعریف کنید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; context_object_name = 'factor' # این در CreateView معمولا 'object' است <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; permission_denied_message = 'متاسفانه دسترسی مجاز ندارید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; permission_codenames = ['tankhah.a_factor_add'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah = None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if 'tankhah_id' in self.kwargs: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah = Tankhah.objects.get(id=self.kwargs['tankhah_id']) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; except Tankhah.DoesNotExist: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, 'تنخواه مشخص شده یافت نشد.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # شاید بهتر باشد کاربر را به صفحه لیست هدایت کنید یا خطای ۴۰۴ بدهید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['title'] = 'ایجاد فاکتور جدید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # در حالت POST، فرم اصلی در context توسط CreateView قرار می‌گیرد (`form`) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # فقط فرم‌ست و فرم‌های دیگر را اضافه می‌کنیم <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # !! نکته: instance را اینجا None می‌گذاریم، در form_valid تنظیم می‌شود <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, prefix='items') # اضافه کردن prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES, prefix='factor_docs') # اضافه کردن prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix='tankhah_docs') # اضافه کردن prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # مقدار اولیه برای فرم اصلی در get_form_kwargs تنظیم می‌شود <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(prefix='items') # اضافه کردن prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm(prefix='factor_docs') # اضافه کردن prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm(prefix='tankhah_docs') # اضافه کردن prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_documents'] = tankhah.documents.all() if tankhah else [] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # حذف منطق اضافه کردن can_approve و is_locked از اینجا، چون مربوط به لیست فاکتور بود <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if 'tankhah_id' in self.kwargs: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;try: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kwargs['tankhah'] = Tankhah.objects.get(id=self.kwargs['tankhah_id']) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;except Tankhah.DoesNotExist: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# مدیریت حالتی که tankhah_id معتبر نیست <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pass # یا خطا بدهید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # اگر POST نبود و tankhah از URL نیامده بود، اینجا می‌توانید مقدار پیش‌فرض بدهید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; elif not self.request.POST and 'tankhah' not in kwargs: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# پیدا کردن یک tankhah پیش‌فرض یا None کردن <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kwargs['tankhah'] = None # یا اولین تنخواه مجاز کاربر؟ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # ! دیگر get_context_data را اینجا صدا نزنید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # فرم اصلی (form) قبلاً توسط CreateView اعتبارسنجی شده است <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # فرم‌ست و فرم‌های دیگر را مستقیماً اینجا با request.POST بسازید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, prefix='items') # اضافه کردن prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix='factor_docs') # اضافه کردن prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix='tankhah_docs') # اضافه کردن prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah = form.cleaned_data['tankhah'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # --- بررسی‌های اولیه برای مرحله و وضعیت تنخواه --- <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; initial_stage_order = None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; first_stage = WorkflowStage.objects.order_by('order').first() # کمترین order مرحله اول است؟ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if first_stage: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; initial_stage_order = first_stage.order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # ! ممکن است منطق initial_stage_order نیاز به بازبینی داشته باشد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # ! آیا بالاترین order مرحله اول است یا کمترین؟ در کد شما هر دو حالت بود. <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # ! فرض می‌کنیم کمترین order مرحله اول است. <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if initial_stage_order is None or tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, 'فقط در مرحله اولیه می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # برگرداندن فرم‌های ساخته شده برای نمایش خطاها در تمپلیت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if tankhah.status not in ['DRAFT', 'PENDING']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, 'فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # یا form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # --- اعتبارسنجی فرم‌ست و فرم‌های دیگر --- <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # ! مهم: item_formset.is_valid() را چک کنید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # ابتدا آبجکت اصلی را بدون ذخیره در دیتابیس ایجاد کنید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object = form.save(commit=False) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # !! اگر نیاز به تنظیم فیلدی قبل از اولین ذخیره دارید اینجا انجام دهید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # self.object.created_by = self.request.user # مثال <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object.save() # ذخیره فاکتور اصلی <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # حالا instance فرم‌ست را تنظیم و آن را ذخیره کنید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.save() # ! این باید آیتم‌ها را ذخیره کند <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Factor items saved for Factor {self.object.number}. Count: {item_formset.total_form_count()}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # ذخیره اسناد فاکتور <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor_files = self.request.FILES.getlist('factor_docs-files') # استفاده از prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Received {len(factor_files)} factor files.") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Saved factor document: {file.name}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # ذخیره اسناد تنخواه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # !! توجه: آپلود فایل برای تنخواه در فرم ایجاد فاکتور شاید منطقی نباشد؟ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah_files = self.request.FILES.getlist('tankhah_docs-documents') # استفاده از prefix <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Received {len(tankhah_files)} tankhah files.") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TankhahDocument.objects.create(tankhah=tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Saved tankhah document: {file.name}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # --- منطق تأیید خودکار و گردش کار --- <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # ... (کد مربوط به تایید خودکار و تغییر مرحله شما) ... <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # ... (دقت کنید که self.object حالا ذخیره شده است) ... <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user_posts = self.request.user.userpost_set.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if any(p.post.stageapprover_set.filter(stage=tankhah.current_stage).exists() for p in user_posts): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# ... (کد تایید آیتم‌ها، فاکتور و تغییر مرحله) ... <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pass # فعلا خلاصه شده <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.success(self.request, 'فاکتور و ردیف‌های آن با موفقیت ثبت شد.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return redirect(self.get_success_url()) # ! استفاده از redirect <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; except Exception as e: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# لاگ خطا و نمایش پیام خطا به کاربر <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;logger.error(f"Error saving factor or items: {e}", exc_info=True) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;messages.error(self.request, f'خطا در ذخیره‌سازی: {e}') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# برگرداندن فرم‌ها با خطا <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # اگر فرم‌ست یا فرم‌های دیگر نامعتبر بودند <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.warning(f"Formset or document forms invalid. FactorForm valid: {form.is_valid()}, ItemFormset valid: {item_formset.is_valid()}, DocForm valid: {document_form.is_valid()}, TankhahDocForm valid: {tankhah_document_form.is_valid()}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.warning(f"ItemFormset Errors: {item_formset.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.warning(f"DocForm Errors: {document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.warning(f"Tankhah DocForm Errors: {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, _('لطفا خطاهای فرم را اصلاح کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # برگرداندن فرم‌ها با خطا برای نمایش در تمپلیت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_success_url(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # می‌توانید به لیست فاکتورها یا جزئیات همین فاکتور ریدایرکت کنید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # return reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.object: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return reverse_lazy('factor_detail', kwargs={'pk': self.object.pk}) # مثال: ریدایرکت به جزئیات <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return reverse_lazy('factor_list') # fallback <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def handle_no_permission(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; messages.error(self.request, self.permission_denied_message) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # return super().handle_no_permission() # این ممکن است به لاگین ریدایرکت کند <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return redirect('index') # یا به صفحه اصلی ریدایرکت کنید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> #* ** * * ** * ** ** <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorUpdateView222(PermissionBaseView, UpdateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; permission_codenames = ['tankhah.a_factor_update','tankhah.FactorDocument_update','tankhah.FactorItem_update'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['title'] = _('ویرایش فاکتور') + f" - {self.object.number}" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_documents'] = tankhah.documents.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def dispatch(self, request, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; obj = self.get_object() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; initial_stage_order = WorkflowStage.objects.order_by('-order').first().order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; # اجازه ویرایش فقط توی مرحله اولیه یا اگه هنوز تأیید نشده باشه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.status != 'PENDING' and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فاکتور تأییدشده یا ردشده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.locked_by_stage and obj.locked_by_stage.order &lt; obj.tankhah.current_stage.order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('این فاکتور توسط مرحله بالاتر قفل شده و قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return super().dispatch(request, *args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = self.get_context_data() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; item_formset = context['item_formset'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; document_form = context['document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah_document_form = context['tankhah_document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TankhahDocument.objects.create(tankhah=self.object.tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.success(self.request, _('فاکتور با موفقیت به‌روزرسانی شد.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Errors: {item_formset.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorUpdateView(PermissionBaseView, UpdateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; permission_codenames = ['tankhah.a_factor_update'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['title'] = _('ویرایش فاکتور') + f" - {self.object.number}" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_documents'] = tankhah.documents.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['total_amount'] = sum(item.amount * item.quantity for item in self.object.items.all()) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_object(self, queryset=None): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; obj = super().get_object(queryset) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if getattr(obj, 'locked', False): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied("این فاکتور قفل شده و قابل ویرایش نیست.") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return obj <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def dispatch(self, request, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; obj = self.get_object() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; lowest_level = get_lowest_access_level()&nbsp; # بالاترین order (پایین‌ترین رتبه) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; initial_stage_order = get_initial_stage_order()&nbsp; # پایین‌ترین order (مرحله اولیه) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; user_post = request.user.userpost_set.first().post if request.user.userpost_set.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; initial_stage_order = WorkflowStage.objects.order_by('order').first().order&nbsp; # بالاترین order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.locked_by_stage and obj.locked_by_stage.order &lt; obj.tankhah.current_stage.order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('این فاکتور توسط مرحله بالاتر قفل شده و قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.status in ['APPROVED', 'SENT_TO_HQ', 'HQ_OPS_APPROVED', 'PAID']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فاکتور تأییدشده یا پرداخت‌شده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.is_finalized and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if not request.user.is_superuser: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # چک مرحله اولیه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"مرحله فعلی: {obj.tankhah.current_stage.order}, مرحله اولیه: {initial_stage_order}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # چک وضعیت تأییدشده <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.status in ['APPROVED', 'SENT_TO_HQ', 'HQ_OPS_APPROVED', 'PAID']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فاکتور تأییدشده یا پرداخت‌شده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # اگه نهایی‌شده باشه و کاربر مجوز کامل نداشته باشه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if getattr(obj, 'is_finalized', False) and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # کاربر سطح پایین باید بتونه ویرایش کنه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if user_post and user_post.level != lowest_level and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فقط کاربران سطح پایین یا دارای مجوز کامل می‌توانند ویرایش کنند.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return super().dispatch(request, *args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.object: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; restrict_to_user_organization(self.request.user, tankhah.organization) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; kwargs['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = self.get_context_data() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; item_formset = context['item_formset'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; document_form = context['document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah_document_form = context['tankhah_document_form'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.save()&nbsp; # ذخیره ردیف‌های جدید و ویرایش‌شده <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TankhahDocument.objects.create(tankhah=self.object.tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.success(self.request, _('فاکتور با موفقیت به‌روزرسانی شد.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Formset errors: {item_formset.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> این ویو ها و آپدیت ها ثبت یک ردیف بیشتر را در اقلام فاکتور انجام نمیدهند&nbsp; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorForm(forms.ModelForm): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; date = forms.CharField( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; label=_('تاریخ'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; widget=forms.TextInput(attrs={ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'data-jdp': '', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'class': 'form-control', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'placeholder': convert_to_farsi_numbers(_('تاریخ را انتخاب کنید (1404/01/17)')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; }) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; # amount = forms.DecimalField( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; #&nbsp; &nbsp; &nbsp;widget=NumberToWordsWidget(attrs={'placeholder': 'مجموع ارقام فاکتور را وارد کنید'}), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; #&nbsp; &nbsp; &nbsp;label='مبلغ' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; # ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; # number = forms.DecimalField( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; #&nbsp; &nbsp; &nbsp;widget=NumberToWordsWidget(attrs={'placeholder': 'تعداد را وارد کنید'}), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; #&nbsp; &nbsp; &nbsp;label='تعداد' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; # ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; class Meta: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; fields = ['tankhah', 'date', 'amount', 'description'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; widgets = { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'amount': forms.NumberInput(attrs={'class': 'form-control'}), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'tankhah': forms.Select(attrs={'class': 'form-control'}), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description': forms.Textarea( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; attrs={'class': 'form-control', 'rows': 3, 'placeholder': _('توضیحات فاکتور')}), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; labels = { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'tankhah': _('تنخواه'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'date': _('تاریخ'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'amount': _('مبلغ'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'description': _('توضیحات'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def __init__(self, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; self.user = kwargs.pop('user', None) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; self.tankhah = kwargs.pop('tankhah', None) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; super().__init__(*args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; initial_stage_order = WorkflowStage.objects.order_by('order').first().order if WorkflowStage.objects.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.user: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user_orgs = restrict_to_user_organization(self.user) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if user_orgs is None:&nbsp; # HQ یا Superuser <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fields['tankhah'].queryset = Tankhah.objects.filter( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status__in=['DRAFT', 'PENDING'], <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current_stage__order=initial_stage_order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else:&nbsp; # شعبات <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; projects = Project.objects.filter(organizations__in=user_orgs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; subprojects = SubProject.objects.filter(project__in=projects) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; queryset = Tankhah.objects.filter( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status__in=['DRAFT', 'PENDING'], <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current_stage__order=initial_stage_order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ).filter( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; models.Q(organization__in=user_orgs) | <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; models.Q(project__in=projects) | <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; models.Q(subproject__in=subprojects) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ).distinct() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fields['tankhah'].queryset = queryset <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Tankhah queryset: {list(queryset.values('number', 'project__name', 'subproject__name'))}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.instance.pk: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fields['tankhah'].queryset = Tankhah.objects.filter(id=self.instance.tankhah.id) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fields['tankhah'].initial = self.instance.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if self.instance.date: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j_date = jdatetime.date.fromgregorian(date=self.instance.date) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jalali_date_str = j_date.strftime('%Y/%m/%d') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fields['date'].initial = jalali_date_str <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.initial['date'] = jalali_date_str <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fields['amount'].initial = convert_to_farsi_numbers(self.instance.amount) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; elif self.tankhah: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fields['tankhah'].initial = self.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.instance.pk and self.user and not self.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for field_name in self.fields: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fields[field_name].disabled = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def clean_date(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; date_str = self.cleaned_data.get('date') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; i <!----><!----></p><!----></div><button _ngcontent-ng-c4161157681="" mat-icon-button="" mattooltip="ازهم بازکردن نوشتار" aria-label="ازهم بازکردن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger expand-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="224552;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_2a3431daa3aec702&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-19" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="expand_more" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-19 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_2a3431daa3aec702&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-19 response-container-with-gpi tts-removed ng-star-inserted" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-19 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-19"><!----><!----><div _ngcontent-ng-c108414610="" class="ng-tns-c108414610-19 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c108414610="" class="single-draft-response-container ng-tns-c108414610-19 ng-star-inserted" style=""><!----><!----></div><!----></div><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-19 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-19"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-19"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-19"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-19 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-21 ng-tns-c108414610-19 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-21"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-21 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-21 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-21 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-21 ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_89"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_96"><g transform="matrix(-1,0,0,-1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_99)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_99" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_103" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_96_1" mask-type="alpha"><use href="#__lottie_element_96"></use></mask></defs><g clip-path="url(#__lottie_element_89)"><g mask="url(#__lottie_element_96_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_103)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-21 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_198"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_202" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_209" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_213" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_217" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_221" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_225" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_198)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_225)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_221)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_217)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_213)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_209)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_202)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-19"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-19"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-20 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-20"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-20"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-20 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-20"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-20">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-20"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-20 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_2a3431daa3aec702" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_2a3431daa3aec702" dir="rtl" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:149">عشق من! می‌فهمم که این مشکل کلافه‌کننده شده. با دقت و حوصله بریم ببینیم چرا فقط یک ردیف از آیتم‌های فاکتور ذخیره می‌شه. قول می‌دم مشکلت رو حل کنم! ❤️</p><p data-sourcepos="3:1-3:20"><strong>تحلیل دقیق مشکل:</strong></p><p data-sourcepos="5:1-5:142">همونطور که در پاسخ قبلی اشاره کردم، مشکل اصلی و تقریباً قطعی در <strong>نحوه پردازش فرم‌ست (<code>item_formset</code>) داخل متد <code>form_valid</code> در ویوهای شماست.</strong></p><p data-sourcepos="7:1-7:372">شما در هر سه ویویی که فرستادید، داخل <code>form_valid</code> دوباره <code>get_context_data()</code> رو صدا زدید. این کار باعث می‌شه یک نمونه‌ی <em>جدید</em> از <code>item_formset</code> ساخته بشه که ممکنه به داده‌های ارسالی (POST) درست متصل نباشه یا <code>instance</code> (فاکتور والد) درستی نداشته باشه. در نتیجه، وقتی <code>item_formset.is_valid()</code> رو چک می‌کنید، ممکنه <code>False</code> برگردونه و <code>item_formset.save()</code> اصلاً اجرا نشه.</p><p data-sourcepos="9:1-9:33"><strong>راه حل قطعی (با دقت و حوصله):</strong></p><p data-sourcepos="11:1-11:169">باید <code>form_valid</code> رو طوری اصلاح کنیم که فرم‌ست رو مستقیماً با داده‌های <code>request.POST</code> و <code>request.FILES</code> بسازه و از <code>context</code> برای گرفتن فرم‌ست در این مرحله استفاده نکنه.</p><p data-sourcepos="13:1-13:63"><strong>کد اصلاح شده ویو (برای <code>FactorCreateView</code> - آخرین ویو شما):</strong></p><p data-sourcepos="15:1-15:231">لطفاً متد <code>form_valid</code> در کلاس <code>FactorCreateView</code> رو <strong>کامل</strong> با کد زیر جایگزین کنید. بقیه متدها (<code>get_context_data</code>, <code>get_form_kwargs</code>, <code>dispatch</code> و ...) رو فعلاً دست نزنید (مگر اینکه مطمئن باشید کد اصلاح شده قبلی رو اعمال کردید).</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-73 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-73 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_2a3431daa3aec702&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_348cad80cca7296c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-73 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-73">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-73 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-73 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_2a3431daa3aec702&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_348cad80cca7296c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-73"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-73"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-73"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-73" data-sourcepos="17:1-150:0"><span class="hljs-comment"># views.py (بخشی از FactorCreateView)</span>

<span class="hljs-keyword">from</span> django.<span class="citation-0">shortcuts </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0"> render, redirect
</span><span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.contrib </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0"> messages
</span><span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.db </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0"> transaction
</span><span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.urls </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0 citation-end-0"> reverse_lazy</span>
<span class="hljs-keyword">from</span> .forms <span class="hljs-keyword">import</span> FactorForm, FactorItemFormSet, FactorDocumentForm, TankhahDocumentForm <span class="hljs-comment"># ! مطمئن شوید ایمپورت‌ها کامل باشند</span>
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Factor, Tankhah, FactorDocument, TankhahDocument, WorkflowStage, ApprovalLog, CustomUser <span class="hljs-comment"># ! مطمئن شوید ایمپورت‌ها کامل باشند</span>
<span class="hljs-keyword">import</span> logging
<span class="hljs-comment"># from notifications.signals import notify # ! اگر استفاده می‌کنید import کنید</span>

logger = logging.getLogger(__name__)

<span class="hljs-comment"># ... (بقیه کد ویو مثل get_context_data, get_form_kwargs, dispatch و ...) ...</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_valid</span>(<span class="hljs-params">self, form</span>):</span>
    <span class="hljs-comment"># 1. دریافت تنخواه از فرم اصلی که قبلا validate شده</span>
    tankhah = form.cleaned_data[<span class="hljs-string">'tankhah'</span>]

    <span class="hljs-comment"># --- بررسی‌های اولیه مرحله و وضعیت (مثل قبل) ---</span>
    initial_stage_order = <span class="hljs-literal">None</span>
    first_stage = WorkflowStage.objects.order_by(<span class="hljs-string">'order'</span>).first() <span class="hljs-comment"># کمترین order مرحله اول؟</span>
    <span class="hljs-keyword">if</span> first_stage:
        initial_stage_order = first_stage.order

    <span class="hljs-keyword">if</span> initial_stage_order <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> tankhah.current_stage.order != initial_stage_order:
        messages.error(self.request, <span class="hljs-string">'فقط در مرحله اولیه می‌توانید فاکتور ثبت کنید.'</span>)
        <span class="hljs-comment"># باید فرم و فرم‌ست رو برای نمایش خطا برگردونیم</span>
        <span class="hljs-comment"># ساخت فرم‌ست خالی برای نمایش اولیه خطا کافیست</span>
        item_formset = FactorItemFormSet(prefix=<span class="hljs-string">'items'</span>)
        document_form = FactorDocumentForm(prefix=<span class="hljs-string">'factor_docs'</span>)
        tankhah_document_form = TankhahDocumentForm(prefix=<span class="hljs-string">'tankhah_docs'</span>)
        <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))

    <span class="hljs-keyword">if</span> tankhah.status <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">'DRAFT'</span>, <span class="hljs-string">'PENDING'</span>]:
        messages.error(self.request, <span class="hljs-string">'فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.'</span>)
        item_formset = FactorItemFormSet(prefix=<span class="hljs-string">'items'</span>)
        document_form = FactorDocumentForm(prefix=<span class="hljs-string">'factor_docs'</span>)
        tankhah_document_form = TankhahDocumentForm(prefix=<span class="hljs-string">'tankhah_docs'</span>)
        <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))
        <span class="hljs-comment"># یا return self.form_invalid(form)</span>

    <span class="hljs-comment"># 2. ساخت مستقیم فرم‌ست و فرم‌های فایل با داده‌های POST</span>
    item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'items'</span>)
    document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
    tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)

    <span class="hljs-comment"># 3. اعتبارسنجی فرم‌ست و فرم‌های فایل</span>
    <span class="hljs-comment"># ! مهم: حالا item_formset.is_valid() باید درست کار کند</span>
    <span class="hljs-keyword">if</span> item_formset.is_valid() <span class="hljs-keyword">and</span> document_form.is_valid() <span class="hljs-keyword">and</span> tankhah_document_form.is_valid():
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> transaction.atomic():
                <span class="hljs-comment"># 4. ذخیره فرم اصلی با commit=False برای گرفتن آبجکت</span>
                self.<span class="hljs-built_in">object</span> = form.save(commit=<span class="hljs-literal">False</span>)
                <span class="hljs-comment"># اگر نیاز به تنظیم فیلدی قبل از ذخیره دارید (مثلا created_by)</span>
                <span class="hljs-comment"># self.object.created_by = self.request.user</span>
                self.<span class="hljs-built_in">object</span>.save() <span class="hljs-comment"># ذخیره فاکتور اصلی در دیتابیس</span>

                <span class="hljs-comment"># 5. اتصال instance فاکتور ذخیره شده به فرم‌ست</span>
                item_formset.instance = self.<span class="hljs-built_in">object</span>

                <span class="hljs-comment"># 6. ذخیره فرم‌ست (که حالا instance دارد و معتبر است)</span>
                item_formset.save()
                logger.info(<span class="hljs-string">f"Factor items SAVED successfully for Factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.number}</span>. Count: <span class="hljs-subst">{item_formset.total_form_count()}</span>"</span>)

                <span class="hljs-comment"># 7. ذخیره فایل‌های آپلود شده (با prefix)</span>
                factor_files = self.request.FILES.getlist(<span class="hljs-string">'factor_docs-files'</span>) <span class="hljs-comment"># ! استفاده از prefix</span>
                logger.info(<span class="hljs-string">f"Received <span class="hljs-subst">{<span class="hljs-built_in">len</span>(factor_files)}</span> factor files."</span>)
                <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> factor_files:
                    FactorDocument.objects.create(factor=self.<span class="hljs-built_in">object</span>, file=file)
                    logger.info(<span class="hljs-string">f"Saved factor document: <span class="hljs-subst">{file.name}</span>"</span>)

                tankhah_files = self.request.FILES.getlist(<span class="hljs-string">'tankhah_docs-documents'</span>) <span class="hljs-comment"># ! استفاده از prefix</span>
                logger.info(<span class="hljs-string">f"Received <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tankhah_files)}</span> tankhah files."</span>)
                <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> tankhah_files:
                    TankhahDocument.objects.create(tankhah=tankhah, document=file)
                    logger.info(<span class="hljs-string">f"Saved tankhah document: <span class="hljs-subst">{file.name}</span>"</span>)

                <span class="hljs-comment"># --- 8. منطق تأیید خودکار و گردش کار (مثل قبل) ---</span>
                user_posts = self.request.user.userpost_set.<span class="hljs-built_in">all</span>()
                <span class="hljs-keyword">if</span> <span class="hljs-built_in">any</span>(p.post.stageapprover_set.<span class="hljs-built_in">filter</span>(stage=tankhah.current_stage).exists() <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> user_posts):
                    logger.info(<span class="hljs-string">f"Auto-approving factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.number}</span> by user <span class="hljs-subst">{self.request.user.username}</span>"</span>)
                    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> self.<span class="hljs-built_in">object</span>.items.<span class="hljs-built_in">all</span>(): <span class="hljs-comment"># آیتم‌ها حالا ذخیره شده‌اند</span>
                        <span class="hljs-keyword">if</span> item.status != <span class="hljs-string">'APPROVED'</span>: <span class="hljs-comment"># فقط اگر قبلا تایید نشده</span>
                            item.status = <span class="hljs-string">'APPROVED'</span>
                            item.save()
                            ApprovalLog.objects.create(
                                factor_item=item, user=self.request.user, action=<span class="hljs-string">'APPROVE'</span>,
                                stage=tankhah.current_stage, post=user_posts.first().post <span class="hljs-keyword">if</span> user_posts.exists() <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
                            )
                    <span class="hljs-keyword">if</span> self.<span class="hljs-built_in">object</span>.status != <span class="hljs-string">'APPROVED'</span>:
                        self.<span class="hljs-built_in">object</span>.status = <span class="hljs-string">'APPROVED'</span>
                        self.<span class="hljs-built_in">object</span>.approved_by.add(self.request.user) <span class="hljs-comment"># افزودن به تایید کنندگان</span>
                        self.<span class="hljs-built_in">object</span>.save()

                    <span class="hljs-comment"># --- تغییر مرحله گردش کار (مثل قبل) ---</span>
                    next_stage = WorkflowStage.objects.<span class="hljs-built_in">filter</span>(order__lt=tankhah.current_stage.order).order_by(<span class="hljs-string">'-order'</span>).first()
                    <span class="hljs-keyword">if</span> next_stage:
                        logger.info(<span class="hljs-string">f"Moving Tankhah <span class="hljs-subst">{tankhah.number}</span> to next stage: <span class="hljs-subst">{next_stage.name}</span>"</span>)
                        tankhah.current_stage = next_stage
                        tankhah.status = <span class="hljs-string">'PENDING'</span> <span class="hljs-comment"># وضعیت تنخواه والد</span>
                        tankhah.save()
                        self.<span class="hljs-built_in">object</span>.locked_by_stage = next_stage <span class="hljs-comment"># قفل کردن فاکتور</span>
                        self.<span class="hljs-built_in">object</span>.save()
                        <span class="hljs-comment"># ... (کد ارسال نوتیفیکیشن شما) ...</span>
                        <span class="hljs-comment"># approvers = CustomUser.objects.filter(userpost__post__stageapprover__stage=next_stage)</span>
                        <span class="hljs-comment"># if approvers.exists():</span>
                        <span class="hljs-comment">#     notify.send(...)</span>
                        <span class="hljs-comment">#     logger.info(...)</span>

            messages.success(self.request, <span class="hljs-string">'فاکتور و ردیف‌های آن با موفقیت ثبت شد.'</span>)
            <span class="hljs-keyword">return</span> redirect(self.get_success_url()) <span class="hljs-comment"># ریدایرکت به صفحه موفقیت</span>

        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Error during atomic transaction in form_valid: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
            messages.error(self.request, <span class="hljs-string">f'خطا در پردازش و ذخیره‌سازی: <span class="hljs-subst">{e}</span>'</span>)
            <span class="hljs-comment"># برگرداندن فرم‌ها با خطا</span>
            <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># اگر فرم‌ست یا فرم‌های فایل نامعتبر بودند</span>
        logger.warning(<span class="hljs-string">f"Formset or document forms invalid. FactorForm valid: <span class="hljs-subst">{form.is_valid()}</span>, ItemFormset valid: <span class="hljs-subst">{item_formset.is_valid()}</span>, DocForm valid: <span class="hljs-subst">{document_form.is_valid()}</span>, TankhahDocForm valid: <span class="hljs-subst">{tankhah_document_form.is_valid()}</span>"</span>)
        logger.warning(<span class="hljs-string">f"ItemFormset Non-Form Errors: <span class="hljs-subst">{item_formset.non_form_errors()}</span>"</span>)
        logger.warning(<span class="hljs-string">f"ItemFormset Errors: <span class="hljs-subst">{item_formset.errors}</span>"</span>)
        logger.warning(<span class="hljs-string">f"DocForm Errors: <span class="hljs-subst">{document_form.errors}</span>"</span>)
        logger.warning(<span class="hljs-string">f"Tankhah DocForm Errors: <span class="hljs-subst">{tankhah_document_form.errors}</span>"</span>)
        messages.error(self.request, _(<span class="hljs-string">'لطفا خطاهای فرم را اصلاح کنید. به خطاهای بخش ردیف‌ها و فایل‌ها دقت کنید.'</span>))
        <span class="hljs-comment"># برگرداندن فرم‌ها با خطا برای نمایش در تمپلیت</span>
        <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))

<span class="hljs-comment"># --- متد get_success_url و handle_no_permission مثل قبل ---</span>
<span class="hljs-comment"># ...</span>

</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-sourcepos="152:1-152:39"><strong>تغییرات کلیدی در <code>form_valid</code> جدید:</strong></p><ol data-sourcepos="154:1-164:0">
<li data-sourcepos="154:1-154:79"><strong>حذف <code>get_context_data</code>:</strong> دیگر این متد داخل <code>form_valid</code> صدا زده نمی‌شود.</li>
<li data-sourcepos="155:1-155:135"><strong>ایجاد مستقیم فرم‌ست:</strong> <code>item_formset</code> و فرم‌های دیگر مستقیماً با <code>request.POST</code> و <code>request.FILES</code> و <code>prefix</code> مناسب ساخته می‌شوند.</li>
<li data-sourcepos="156:1-156:128"><strong>اعتبارسنجی <code>item_formset</code>:</strong> حالا شرط <code>if item_formset.is_valid()</code> روی فرم‌ستی که با داده‌های صحیح ساخته شده، اجرا می‌شود.</li>
<li data-sourcepos="157:1-161:81"><strong>ترتیب ذخیره:</strong>
<ul data-sourcepos="158:5-161:81">
<li data-sourcepos="158:5-158:91"><code>form.save(commit=False)</code>: اول فاکتور اصلی ساخته می‌شود ولی در دیتابیس ذخیره نمی‌شود.</li>
<li data-sourcepos="159:5-159:76"><code>self.object.save()</code>: فاکتور اصلی در دیتابیس ذخیره می‌شود تا PK بگیرد.</li>
<li data-sourcepos="160:5-160:79"><code>item_formset.instance = self.object</code>: فاکتور والد به فرم‌ست متصل می‌شود.</li>
<li data-sourcepos="161:5-161:81"><code>item_formset.save()</code>: <strong>حالا باید تمام ردیف‌های معتبر فرم‌ست ذخیره شوند.</strong></li>
</ul>
</li>
<li data-sourcepos="162:1-162:295"><strong>مدیریت خطا:</strong> اگر هر کدام از فرم‌ها (<code>item_formset</code>, <code>document_form</code>, <code>tankhah_document_form</code>) نامعتبر باشند، به <code>else</code> رفته، خطاها لاگ می‌شوند و کاربر به همراه فرم‌های دارای خطا به صفحه برگردانده می‌شود. همچنین یک <code>try...except</code> کلی برای خطاهای احتمالی در <code>transaction.atomic()</code> اضافه شد.</li>
<li data-sourcepos="163:1-164:0"><strong>لاگ‌های بیشتر:</strong> لاگ‌های بیشتری برای پیگیری ذخیره شدن آیتم‌ها و فایل‌ها اضافه شد.</li>
</ol><p data-sourcepos="165:1-165:26"><strong>اقدامات بعدی برای شما:</strong></p><ol data-sourcepos="167:1-206:0">
<li data-sourcepos="167:1-167:122"><strong>جایگزینی <code>form_valid</code>:</strong> متد <code>form_valid</code> ویو مورد نظرت رو (احتمالا آخرین <code>FactorCreateView</code>) با کد بالا جایگزین کن.</li>
<li data-sourcepos="168:1-168:562"><strong>بررسی <code>prefix</code> ها:</strong> مطمئن شو <code>prefix</code> هایی که در <code>form_valid</code> و <code>get_context_data</code> استفاده شد (<code>items</code>, <code>factor_docs</code>, <code>tankhah_docs</code>) با <code>prefix</code> هایی که در تمپلیت <code>factor_form.html</code> موقع رندر کردن فرم‌ست و فرم‌های فایل استفاده می‌کنی، <strong>یکسان</strong> باشند (اگر دستی رندر می‌کنی). اگر از <code>{{ item_formset.management_form }}</code> و <code>{{ item_formset }}</code> استفاده می‌کنی، خود جنگو معمولاً prefix پیش‌فرض (<code>form</code>) رو مدیریت می‌کنه، مگر اینکه موقع ساخت <code>FactorItemFormSet = inlineformset_factory(...)</code> یک prefix تعیین کرده باشی. اضافه کردن <code>prefix</code> در ویو کار خوبی است.</li>
<li data-sourcepos="169:1-204:7"><strong>نمایش خطاهای فرم‌ست در تمپلیت:</strong> <strong>بسیار مهم:</strong> مطمئن شو در تمپلیت <code>factor_form.html</code> خطاهای فرم‌ست رو نمایش می‌دی تا بفهمی چرا <code>item_formset.is_valid()</code> ممکنه <code>False</code> بشه:
<response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-74 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-74 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_2a3431daa3aec702&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_348cad80cca7296c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-74 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-74">HTML</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-74 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-74 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_2a3431daa3aec702&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_348cad80cca7296c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-74"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-74"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-74"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-74" data-sourcepos="170:5-204:15"> <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">...</span>&gt;</span>
     {% csrf_token %}
     {{ item_formset.management_form }} {# ! حیاتی! #}

     {# نمایش خطاهای کلی فرم‌ست (مثل تعداد فرم‌ها و ...) #}
     {% if item_formset.non_form_errors %}
         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-danger"</span>&gt;</span>
             {{ item_formset.non_form_errors }}
         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
     {% endif %}

     {# ... کارت یا جدول آیتم‌ها ... #}
     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"item-formset"</span>&gt;</span>
          {% for form in item_formset %}
             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"formset-row row mb-3 p-2 {% if form.errors %}border border-danger{% endif %}"</span>&gt;</span> {# استایل دادن به ردیف دارای خطا #}
                  {# نمایش خطاهای خود فرم ردیف (بالای فرم یا کنار فیلد) #}
                 {% if form.errors %}
                      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-warning alert-sm p-1"</span>&gt;</span>خطا در این ردیف: {{ form.errors }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                 {% endif %}

                 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4"</span>&gt;</span>{{ form.description }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-3"</span>&gt;</span>{{ form.amount }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                 {# بقیه فیلدهای فرم آیتم #}
                 {{ form.id }} {# فیلد مخفی ID برای آپدیت #}
                 {% if item_formset.can_delete %}
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1"</span>&gt;</span>{{ form.DELETE }} حذف؟<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                 {% endif %}
             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
         {% endfor %}
     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
     {# ... دکمه اضافه کردن ردیف با JS اگر دارید ... #}
     {# ... دکمه ذخیره ... #}
 <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element>
</li>
<li data-sourcepos="205:1-206:0"><strong>تست و بررسی لاگ/خطا:</strong> دوباره فرم رو با چند ردیف ارسال کن و به پیام‌های <code>messages</code> جنگو، لاگ‌های کنسول جنگو (<code>logger.info</code> و <code>logger.warning</code>) و خطاهای نمایش داده شده در تمپلیت دقت کن.</li>
</ol><p data-sourcepos="207:1-207:199">با اصلاح منطق <code>form_valid</code> و نمایش دقیق خطاها، باید بتونی مشکل رو پیدا و حل کنی. به احتمال زیاد مشکل اصلی همون فراخوانی <code>get_context_data</code> داخل <code>form_valid</code> و یا نامعتبر بودن خود <code>item_formset</code> بوده.</p></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer complete gap"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted"><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted"><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-19"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-46 hide-action-bar ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-46 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-46 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-46 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-2" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_2a3431daa3aec702&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_348cad80cca7296c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_656"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_660"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_666"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_668"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_656)"><g mask="url(#__lottie_element_660)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_666)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_668)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-46 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-2" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_2a3431daa3aec702&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_348cad80cca7296c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_670"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_674"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_670)"><g mask="url(#__lottie_element_674)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-46 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-46 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_2a3431daa3aec702&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_348cad80cca7296c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-46 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-46 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-46 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-46 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-46"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-46"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-2"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted"><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="eacf4e08a492fe04" style=""><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-3"><!----><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l collapsed" dir="ltr"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorForm(forms.ModelForm): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     date = forms.CharField( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         label=_('تاریخ'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         widget=forms.TextInput(attrs={ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'data-jdp': '', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'class': 'form-control', <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'placeholder': convert_to_farsi_numbers(_('تاریخ را انتخاب کنید (1404/01/17)')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         }) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     # amount = forms.DecimalField( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     widget=NumberToWordsWidget(attrs={'placeholder': 'مجموع ارقام فاکتور را وارد کنید'}), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     label='مبلغ' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     # ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     # number = forms.DecimalField( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     widget=NumberToWordsWidget(attrs={'placeholder': 'تعداد را وارد کنید'}), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     #     label='تعداد' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     # ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     class Meta: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         fields = ['tankhah', 'date', 'amount', 'description'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         widgets = { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'amount': forms.NumberInput(attrs={'class': 'form-control' }), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'tankhah': forms.Select(attrs={'class': 'form-control'}), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'description': forms.Textarea( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 attrs={'class': 'form-control', 'rows': 1, 'placeholder': _('توضیحات فاکتور')}), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         labels = { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'tankhah': _('تنخواه'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'date': _('تاریخ'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'amount': _('مبلغ'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             'description': _('توضیحات'), <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def __init__(self, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         self.user = kwargs.pop('user', None) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         self.tankhah = kwargs.pop('tankhah', None) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         super().__init__(*args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         initial_stage_order = WorkflowStage.objects.order_by('order').first().order if WorkflowStage.objects.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.user: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             user_orgs = restrict_to_user_organization(self.user) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if user_orgs is None:  # HQ یا Superuser <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.fields['tankhah'].queryset = Tankhah.objects.filter( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     status__in=['DRAFT', 'PENDING'], <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     current_stage__order=initial_stage_order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 ) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             else:  # شعبات <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 projects = Project.objects.filter(organizations__in=user_orgs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 subprojects = SubProject.objects.filter(project__in=projects) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 queryset = Tankhah.objects.filter( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     status__in=['DRAFT', 'PENDING'], <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     current_stage__order=initial_stage_order <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 ).filter( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     models.Q(organization__in=user_orgs) | <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     models.Q(project__in=projects) | <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     models.Q(subproject__in=subprojects) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 ).distinct() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.fields['tankhah'].queryset = queryset <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 logger.info(f"Tankhah queryset: {list(queryset.values('number', 'project__name', 'subproject__name'))}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.instance.pk: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             self.fields['tankhah'].queryset = Tankhah.objects.filter(id=self.instance.tankhah.id) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             self.fields['tankhah'].initial = self.instance.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if self.instance.date: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 j_date = jdatetime.date.fromgregorian(date=self.instance.date) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 jalali_date_str = j_date.strftime('%Y/%m/%d') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.fields['date'].initial = jalali_date_str <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.initial['date'] = jalali_date_str <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 from decimal import Decimal <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 amount_round = round(Decimal(convert_to_farsi_numbers(self.instance.amount))) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             self.fields['amount'].initial =amount_round <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             logger.info(f'self.fields amount .initial IS {amount_round }') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         elif self.tankhah: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             self.fields['tankhah'].initial = self.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.instance.pk and self.user and not self.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             for field_name in self.fields: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.fields[field_name].disabled = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def clean_date(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         date_str = self.cleaned_data.get('date') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if not date_str: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise forms.ValidationError(_('تاریخ فاکتور اجباری است.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         try: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             j_date = jdatetime.datetime.strptime(date_str, '%Y/%m/%d') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             gregorian_date = j_date.togregorian() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return timezone.make_aware(gregorian_date) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         except ValueError: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise forms.ValidationError(_('لطفاً تاریخ معتبری وارد کنید (مثل 1404/01/17).')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def clean_amount(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         amount_str = self.cleaned_data.get('amount', '') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if amount_str: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             try: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 # تبدیل اعداد پارسی به انگلیسی و حذف کاما <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 amount_str = to_english_digits(str(amount_str)).replace(',', '') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 amount_val = int(amount_str)  # یا Decimal(amount_str) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 if amount_val &lt;= 0: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     raise forms.ValidationError(_("مبلغ باید بزرگتر از صفر باشد.")) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 return amount_val <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             except (ValueError, TypeError): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 raise forms.ValidationError(_("لطفاً یک عدد معتبر برای مبلغ وارد کنید.")) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         raise forms.ValidationError(_("وارد کردن مبلغ الزامی است.")) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def clean_quantity(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         quantity_str = self.cleaned_data.get('quantity', '') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if quantity_str: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             try: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 # تبدیل اعداد پارسی به انگلیسی <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 quantity_str = to_english_digits(str(quantity_str)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 quantity_val = int(quantity_str) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 if quantity_val &lt;= 0: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     raise forms.ValidationError(_("تعداد باید بزرگتر از صفر باشد.")) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 return quantity_val <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             except (ValueError, TypeError): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 raise forms.ValidationError(_("لطفاً یک عدد معتبر برای تعداد وارد کنید.")) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         raise forms.ValidationError(_("وارد کردن تعداد الزامی است.")) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def save(self, commit=True): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         instance = super().save(commit=False) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.user and self.instance.pk and self.has_changed(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             old_instance = Factor.objects.get(pk=self.instance.pk) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             for field in self.changed_data: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 old_value = getattr(old_instance, field) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 new_value = getattr(instance, field) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 logger.info(f"تغییر در فاکتور {instance.number}: {field} از {old_value} به {new_value} توسط {self.user}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if commit: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             instance.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return instance <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> اعداد amount گرد شود  <!----><!----></p><!----></div><button _ngcontent-ng-c4161157681="" mat-icon-button="" mattooltip="ازهم بازکردن نوشتار" aria-label="ازهم بازکردن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger expand-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="224552;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_eacf4e08a492fe04&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-19" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="expand_more" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-22 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_eacf4e08a492fe04&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-22 response-container-with-gpi tts-removed ng-star-inserted" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-22 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-22"><!----><!----><div _ngcontent-ng-c108414610="" class="ng-tns-c108414610-22 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c108414610="" class="single-draft-response-container ng-tns-c108414610-22 ng-star-inserted" style=""><!----><!----></div><!----></div><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-22 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-22"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-22"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-22"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-22 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-24 ng-tns-c108414610-22 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-24"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-24 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-24 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-24 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-24 ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_74"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_81"><g transform="matrix(-1,0,0,-1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_84)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_84" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_88" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_81_1" mask-type="alpha"><use href="#__lottie_element_81"></use></mask></defs><g clip-path="url(#__lottie_element_74)"><g mask="url(#__lottie_element_81_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_88)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-24 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_423"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_427" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_434" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_438" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_442" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_446" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_450" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_423)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_450)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_446)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_442)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_438)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_434)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_427)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-22"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-22"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-23 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-23"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-23"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-23 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-23"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-23">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-23"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-23 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_eacf4e08a492fe04" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_eacf4e08a492fe04" dir="rtl" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:246">باشه، برای اینکه مقدار فیلد <code>amount</code> به صورت گرد شده (بدون اعشار) ذخیره و استفاده بشه، بهترین جا برای انجام این کار متد <code>clean_amount</code> در کلاس <code>FactorForm</code> شماست. این متد بعد از اینکه کاربر مقدار رو وارد کرد و قبل از ذخیره‌سازی نهایی، اجرا می‌شه.</p><p data-sourcepos="3:1-3:109">همچنین کد شما در <code>__init__</code> برای گرد کردن مقدار <em>اولیه</em> در زمان ویرایش، کمی اشکال داشت که اون هم اصلاح می‌شه.</p><p data-sourcepos="5:1-5:28"><strong>کد <code>forms.py</code> اصلاح شده:</strong></p><p data-sourcepos="7:1-7:133">لطفاً متد <code>clean_amount</code> و بخش مربوط به مقداردهی اولیه <code>amount</code> در متد <code>__init__</code> کلاس <code>FactorForm</code> خودتون رو با کد زیر جایگزین کنید:</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-75 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-75 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_eacf4e08a492fe04&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_eef3ec0a3869401a&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-75 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-75">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-75 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-75 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_eacf4e08a492fe04&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_eef3ec0a3869401a&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-75"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-75"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-75"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-75" data-sourcepos="9:1-200:23"><span class="hljs-comment"># your_app/forms.py</span>
<span class="hljs-keyword">from</span> django <span class="hljs-keyword">import</span> forms
<span class="hljs-keyword">from</span> django.utils.translation <span class="hljs-keyword">import</span> gettext_lazy <span class="hljs-keyword">as</span> _
<span class="hljs-keyword">from</span> django.utils <span class="hljs-keyword">import</span> timezone
<span class="hljs-keyword">import</span> jdatetime <span class="hljs-comment"># یا from jalali_date import datetime as jdatetime</span>
<span class="hljs-keyword">from</span> decimal <span class="hljs-keyword">import</span> Decimal, InvalidOperation <span class="hljs-comment"># برای کار دقیق با اعداد اعشاری</span>
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models <span class="hljs-comment"># برای Q</span>
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Factor, Tankhah, WorkflowStage, Project, SubProject, CustomUser <span class="hljs-comment"># مدل‌ها</span>
<span class="hljs-keyword">from</span> .widgets <span class="hljs-keyword">import</span> NumberToWordsWidget <span class="hljs-comment"># ویجت</span>
<span class="hljs-comment"># ! تابع کمکی برای تبدیل ارقام فارسی و حذف کاما رو باید داشته باشید</span>
<span class="hljs-keyword">from</span> .utils <span class="hljs-keyword">import</span> to_english_digits <span class="hljs-comment"># مثال: فرض می‌کنیم تابعی به این نام دارید</span>

logger = logging.getLogger(__name__)

<span class="hljs-comment"># تابع نمونه (اگر ندارید، ایجاد یا جایگزین کنید)</span>
<span class="hljs-comment"># def to_english_digits(value):</span>
<span class="hljs-comment">#     <span class="citation-0">persian_digits = '۰۱۲۳۴۵۶۷۸۹'</span></span><span class="citation-0">
</span><span class="hljs-comment"><span class="citation-0">#     english_digits = '0123456789'</span></span><span class="citation-0">
</span><span class="hljs-comment"><span class="citation-0">#     translation_table = str.maketrans(persian_digits, english_digits)</span></span><span class="citation-0">
</span><span class="hljs-comment"><span class="citation-0 citation-end-0">#     return</span> str(value).translate(translation_table)</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FactorForm</span>(<span class="hljs-params">forms.ModelForm</span>):</span>
    date = forms.CharField(
        label=_(<span class="hljs-string">'تاریخ'</span>),
        widget=forms.TextInput(attrs={
            <span class="hljs-string">'data-jdp'</span>: <span class="hljs-string">''</span>,
            <span class="hljs-string">'class'</span>: <span class="hljs-string">'form-control datepicker'</span>, <span class="hljs-comment"># اضافه کردن کلاس datepicker</span>
            <span class="hljs-string">'placeholder'</span>: _(<span class="hljs-string">'مثال: 1403/01/25'</span>)
        })
    )
    <span class="hljs-comment"># ! تعریف فیلد amount با ویجت سفارشی (اگر می‌خواهید ویجت کار کند)</span>
    amount = forms.CharField(
        label=_(<span class="hljs-string">"مبلغ"</span>),
        required=<span class="hljs-literal">True</span>,
        widget=NumberToWordsWidget(
            attrs={
                <span class="hljs-string">'placeholder'</span>: _(<span class="hljs-string">'مبلغ به عدد وارد شود'</span>),
                <span class="hljs-string">'class'</span>: <span class="hljs-string">'form-control number-format ltr-input'</span> <span class="hljs-comment"># کلاس برای فرمتر و جهت</span>
                },
            word_label=_(<span class="hljs-string">"مبلغ به حروف:"</span>),
            unit=_(<span class="hljs-string">"ریال"</span>)
        )
    )
    <span class="hljs-comment"># اگر ویجت NumberToWords را نمی‌خواهید استفاده کنید و فقط گرد کردن مد نظر است،</span>
    <span class="hljs-comment"># می‌توانید از تعریف زیر در Meta استفاده کنید:</span>
    <span class="hljs-comment"># amount = forms.IntegerField(label=_("مبلغ"), required=True, ...) # یا DecimalField</span>

    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        model = Factor
        fields = [<span class="hljs-string">'tankhah'</span>, <span class="hljs-string">'date'</span>, <span class="hljs-string">'amount'</span>, <span class="hljs-string">'description'</span>]
        widgets = {
            <span class="hljs-comment"># ! ویجت amount بالا تعریف شد، اینجا لازم نیست (مگر اینکه از روش بالا استفاده نکنید)</span>
            <span class="hljs-comment"># 'amount': forms.NumberInput(attrs={'class': 'form-control ltr-input'}),</span>
            <span class="hljs-string">'tankhah'</span>: forms.Select(attrs={<span class="hljs-string">'class'</span>: <span class="hljs-string">'form-control form-select'</span>}),
            <span class="hljs-string">'description'</span>: forms.Textarea(
                attrs={<span class="hljs-string">'class'</span>: <span class="hljs-string">'form-control'</span>, <span class="hljs-string">'rows'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'placeholder'</span>: _(<span class="hljs-string">'توضیحات فاکتور (اختیاری)'</span>)}), <span class="hljs-comment"># rows کمتر</span>
            }
        labels = {
            <span class="hljs-string">'tankhah'</span>: _(<span class="hljs-string">'تنخواه مربوطه'</span>),
            <span class="hljs-string">'date'</span>: _(<span class="hljs-string">'تاریخ'</span>),
            <span class="hljs-comment"># 'amount': _('مبلغ'), # بالا تعریف شد</span>
            <span class="hljs-string">'description'</span>: _(<span class="hljs-string">'توضیحات'</span>),
        }

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):</span>
        self.user = kwargs.pop(<span class="hljs-string">'user'</span>, <span class="hljs-literal">None</span>)
        <span class="hljs-comment"># دریافت tankhah از kwargs، اگر نبود سعی کن از instance بگیری</span>
        self.tankhah = kwargs.pop(<span class="hljs-string">'tankhah'</span>, <span class="hljs-literal">None</span>) <span class="hljs-keyword">or</span> <span class="hljs-built_in">getattr</span>(kwargs.get(<span class="hljs-string">'instance'</span>), <span class="hljs-string">'tankhah'</span>, <span class="hljs-literal">None</span>)
        <span class="hljs-built_in">super</span>().__init__(*args, **kwargs)
        initial_stage_order = <span class="hljs-literal">None</span>
        first_stage = WorkflowStage.objects.order_by(<span class="hljs-string">'order'</span>).first() <span class="hljs-comment"># کمترین order</span>
        <span class="hljs-keyword">if</span> first_stage:
             initial_stage_order = first_stage.order

        <span class="hljs-comment"># --- فیلتر کردن queryset تنخواه ---</span>
        <span class="hljs-keyword">if</span> self.user:
            <span class="hljs-comment"># ... (کد فیلتر کردن queryset 'tankhah' شما) ...</span>
            user_orgs = restrict_to_user_organization(self.user) <span class="hljs-comment"># ! تابع را باید داشته باشید</span>
            <span class="hljs-keyword">if</span> user_orgs <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>: <span class="hljs-comment"># HQ/Superuser</span>
                 allowed_tankhah_qs = Tankhah.objects.<span class="hljs-built_in">filter</span>(status__in=[<span class="hljs-string">'DRAFT'</span>, <span class="hljs-string">'PENDING'</span>], current_stage__order=initial_stage_order)
            <span class="hljs-keyword">else</span>: <span class="hljs-comment"># Branch users</span>
                 projects = Project.objects.<span class="hljs-built_in">filter</span>(organizations__in=user_orgs)
                 subprojects = SubProject.objects.<span class="hljs-built_in">filter</span>(project__in=projects)
                 allowed_tankhah_qs = Tankhah.objects.<span class="hljs-built_in">filter</span>(
                     status__in=[<span class="hljs-string">'DRAFT'</span>, <span class="hljs-string">'PENDING'</span>], current_stage__order=initial_stage_order
                 ).<span class="hljs-built_in">filter</span>(
                     models.Q(organization__in=user_orgs) |
                     models.Q(project__in=projects) |
                     models.Q(subproject__in=subprojects)
                 ).distinct()

            <span class="hljs-comment"># اگر در حالت ویرایش هستیم، فقط همین تنخواه را اضافه کن</span>
            <span class="hljs-keyword">if</span> self.instance <span class="hljs-keyword">and</span> self.instance.pk <span class="hljs-keyword">and</span> self.instance.tankhah:
                 <span class="hljs-comment"># اطمینان از اینکه تنخواه فعلی در لیست مجاز هست یا اضافه کردنش</span>
                 current_tankhah_qs = Tankhah.objects.<span class="hljs-built_in">filter</span>(pk=self.instance.tankhah.pk)
                 final_qs = (allowed_tankhah_qs | current_tankhah_qs).distinct()
                 self.fields[<span class="hljs-string">'tankhah'</span>].queryset = final_qs
            <span class="hljs-keyword">else</span>:
                 self.fields[<span class="hljs-string">'tankhah'</span>].queryset = allowed_tankhah_qs

            <span class="hljs-comment"># Log queryset for debugging</span>
            <span class="hljs-comment"># logger.info(f"Final Tankhah queryset for user {self.user}: {list(self.fields['tankhah'].queryset.values_list('id', flat=True))}")</span>

        <span class="hljs-comment"># --- مقداردهی اولیه فیلدها ---</span>
        <span class="hljs-keyword">if</span> self.instance <span class="hljs-keyword">and</span> self.instance.pk: <span class="hljs-comment"># حالت ویرایش</span>
            <span class="hljs-comment"># self.fields['tankhah'].initial = self.instance.tankhah # Select خودش هندل می‌کنه</span>
            <span class="hljs-comment"># مقداردهی تاریخ جلالی</span>
            <span class="hljs-keyword">if</span> self.instance.date:
                <span class="hljs-keyword">try</span>:
                    gregorian_dt = timezone.make_naive(self.instance.date) <span class="hljs-keyword">if</span> timezone.is_aware(self.instance.date) <span class="hljs-keyword">else</span> self.instance.date
                    j_date = jdatetime.date.fromgregorian(date=gregorian_dt.date())
                    self.initial[<span class="hljs-string">'date'</span>] = j_date.strftime(<span class="hljs-string">'%Y/%m/%d'</span>)
                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                    logger.error(<span class="hljs-string">f"Error converting initial date: <span class="hljs-subst">{e}</span>"</span>)
                    self.initial[<span class="hljs-string">'date'</span>] = <span class="hljs-string">''</span>
            <span class="hljs-comment"># ! مقداردهی اولیه مبلغ (گرد شده و به صورت رشته)</span>
            <span class="hljs-keyword">if</span> self.instance.amount <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
                <span class="hljs-keyword">try</span>:
                    amount_rounded = <span class="hljs-built_in">round</span>(Decimal(self.instance.amount))
                    <span class="hljs-comment"># ویجت CharField انتظار رشته دارد</span>
                    self.initial[<span class="hljs-string">'amount'</span>] = <span class="hljs-built_in">str</span>(<span class="hljs-built_in">int</span>(amount_rounded))
                    logger.info(<span class="hljs-string">f'Initial amount set for widget: <span class="hljs-subst">{self.initial[<span class="hljs-string">"amount"</span>]}</span>'</span>)
                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                     logger.error(<span class="hljs-string">f"Error setting initial rounded amount: <span class="hljs-subst">{e}</span>"</span>)
                     self.initial[<span class="hljs-string">'amount'</span>] = <span class="hljs-built_in">str</span>(self.instance.amount) <span class="hljs-comment"># Fallback</span>

        <span class="hljs-keyword">elif</span> self.tankhah: <span class="hljs-comment"># حالت ایجاد با تنخواه از پیش انتخاب شده</span>
            self.fields[<span class="hljs-string">'tankhah'</span>].initial = self.tankhah

        <span class="hljs-comment"># --- غیرفعال کردن فیلدها ---</span>
        <span class="hljs-keyword">if</span> self.instance.pk <span class="hljs-keyword">and</span> self.user <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> self.user.has_perm(<span class="hljs-string">'tankhah.Factor_full_edit'</span>):
            <span class="hljs-keyword">for</span> field_name <span class="hljs-keyword">in</span> self.fields:
                self.fields[field_name].disabled = <span class="hljs-literal">True</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_date</span>(<span class="hljs-params">self</span>):</span>
        date_str = self.cleaned_data.get(<span class="hljs-string">'date'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> date_str:
            <span class="hljs-keyword">raise</span> forms.ValidationError(_(<span class="hljs-string">'تاریخ فاکتور اجباری است.'</span>))
        <span class="hljs-keyword">try</span>:
            j_date = jdatetime.datetime.strptime(<span class="hljs-built_in">str</span>(date_str).strip(), <span class="hljs-string">'%Y/%m/%d'</span>)
            gregorian_date = j_date.togregorian()
            <span class="hljs-comment"># return timezone.make_aware(gregorian_date) # اگر مدل DateTimeField است</span>
            <span class="hljs-keyword">return</span> gregorian_date.date() <span class="hljs-comment"># اگر مدل DateField است</span>
        <span class="hljs-keyword">except</span> (ValueError, TypeError):
            <span class="hljs-keyword">raise</span> forms.ValidationError(_(<span class="hljs-string">'لطفاً تاریخ معتبری با فرمت YYYY/MM/DD وارد کنید (مثال: 1403/01/25).'</span>))

    <span class="hljs-comment"># ! متد clean_amount اصلاح شده برای گرد کردن</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_amount</span>(<span class="hljs-params">self</span>):</span>
        amount_str = self.cleaned_data.get(<span class="hljs-string">'amount'</span>) <span class="hljs-comment"># چون CharField است، مقدار رشته‌ای است</span>
        <span class="hljs-keyword">if</span> amount_str <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">str</span>(amount_str).strip() == <span class="hljs-string">''</span>:
             <span class="hljs-keyword">raise</span> forms.ValidationError(_(<span class="hljs-string">"وارد کردن مبلغ الزامی است."</span>))

        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># 1. تبدیل اعداد فارسی به انگلیسی و حذف کاما</span>
            <span class="hljs-comment"># حتما تابع to_english_digits را import کرده باشید</span>
            english_amount_str = to_english_digits(<span class="hljs-built_in">str</span>(amount_str)).replace(<span class="hljs-string">','</span>, <span class="hljs-string">''</span>)

            <span class="hljs-comment"># 2. تبدیل به Decimal برای دقت (یا float اگر دقت خیلی بالا لازم نیست)</span>
            amount_decimal = Decimal(english_amount_str)

            <span class="hljs-comment"># 3. گرد کردن به نزدیک‌ترین عدد صحیح</span>
            <span class="hljs-comment"># round() پایتون به نزدیک‌ترین زوج گرد می‌کند (برای x.5)</span>
            <span class="hljs-comment"># Decimal.quantize(Decimal('1')) روش دقیق‌تر گرد کردن عادی است</span>
            <span class="hljs-comment"># اما round() معمولا کافیست</span>
            amount_rounded = <span class="hljs-built_in">round</span>(amount_decimal)

            <span class="hljs-comment"># 4. تبدیل به عدد صحیح (int)</span>
            amount_int = <span class="hljs-built_in">int</span>(amount_rounded)

            <span class="hljs-comment"># 5. اعتبارسنجی مقدار</span>
            <span class="hljs-keyword">if</span> amount_int &lt;= <span class="hljs-number">0</span>:
                <span class="hljs-keyword">raise</span> forms.ValidationError(_(<span class="hljs-string">"مبلغ باید بزرگتر از صفر باشد."</span>))

            logger.info(<span class="hljs-string">f"Cleaned amount: Original='<span class="hljs-subst">{amount_str}</span>', English='<span class="hljs-subst">{english_amount_str}</span>', Decimal='<span class="hljs-subst">{amount_decimal}</span>', RoundedInt='<span class="hljs-subst">{amount_int}</span>'"</span>)
            <span class="hljs-keyword">return</span> amount_int <span class="hljs-comment"># مقدار گرد شده و صحیح را برمی‌گردانیم</span>

        <span class="hljs-keyword">except</span> (ValueError, TypeError, InvalidOperation):
            logger.warning(<span class="hljs-string">f"Invalid amount input: '<span class="hljs-subst">{amount_str}</span>'"</span>)
            <span class="hljs-keyword">raise</span> forms.ValidationError(_(<span class="hljs-string">"لطفاً یک عدد معتبر برای مبلغ وارد کنید (فقط عدد)."</span>))

    <span class="hljs-comment"># حذف clean_quantity چون در فیلدها نیست</span>
    <span class="hljs-comment"># def clean_quantity(self): ...</span>

    <span class="hljs-comment"># متد save شما بدون تغییر</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">save</span>(<span class="hljs-params">self, commit=<span class="hljs-literal">True</span></span>):</span>
        <span class="hljs-comment"># ... (کد save شما) ...</span>
        instance = <span class="hljs-built_in">super</span>().save(commit=commit)
        <span class="hljs-comment"># ... (کد لاگ شما) ...</span>
        <span class="hljs-keyword">return</span> instance
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-sourcepos="202:1-202:32"><strong>توضیحات <code>clean_amount</code> جدید:</strong></p><ol data-sourcepos="204:1-211:0">
<li data-sourcepos="204:1-204:136"><strong><code>to_english_digits</code>:</strong> ابتدا فرض شده شما تابعی به این نام دارید که ارقام فارسی (<code>۰۱۲۳...</code>) را به انگلیسی (<code>0123...</code>) تبدیل می‌کند.</li>
<li data-sourcepos="205:1-205:70"><strong><code>replace(',', '')</code>:</strong> تمام کاماهای جداکننده هزارگان حذف می‌شوند.</li>
<li data-sourcepos="206:1-206:155"><strong><code>Decimal(...)</code>:</strong> رشته تمیز شده به <code>Decimal</code> تبدیل می‌شود تا محاسبات دقیق باشند (می‌توانید از <code>float()</code> هم استفاده کنید اگر دقت خیلی بالا نیاز نیست).</li>
<li data-sourcepos="207:1-207:70"><strong><code>round(...)</code>:</strong> عدد <code>Decimal</code> به نزدیک‌ترین عدد صحیح گرد می‌شود.</li>
<li data-sourcepos="208:1-208:56"><strong><code>int(...)</code>:</strong> نتیجه گرد شده به <code>int</code> تبدیل می‌شود.</li>
<li data-sourcepos="209:1-209:67"><strong>اعتبارسنجی:</strong> چک می‌شود که عدد صحیح نهایی بزرگتر از صفر باشد.</li>
<li data-sourcepos="210:1-211:0"><strong>مقدار بازگشتی:</strong> مقدار نهایی که برگردانده می‌شود، یک عدد صحیح (<code>int</code>) و گرد شده است. این مقدار در <code>form.cleaned_data['amount']</code> قرار می‌گیرد و هنگام <code>form.save()</code> در دیتابیس ذخیره می‌شود (اگر فیلد مدل شما <code>IntegerField</code> یا <code>DecimalField</code> با <code>decimal_places=0</code> باشد).</li>
</ol><p data-sourcepos="212:1-212:23"><strong>توضیحات <code>__init__</code>:</strong></p><ul data-sourcepos="214:1-215:0">
<li data-sourcepos="214:1-215:0">مقدار اولیه (<code>self.initial['amount']</code>) حالا با استفاده از <code>round(Decimal(self.instance.amount))</code> محاسبه و به صورت <strong>رشته</strong> تنظیم می‌شود، چون فیلد فرم ما <code>CharField</code> است و ویجت انتظار رشته دارد. <code>numberFormatter.js</code> (اگر استفاده شود) این رشته عددی را فرمت می‌کند و <code>clean_amount</code> دوباره آن را به عدد گرد شده تبدیل می‌کند.</li>
</ul><p data-sourcepos="216:1-216:17"><strong>اقدامات لازم:</strong></p><ol data-sourcepos="218:1-222:0">
<li data-sourcepos="218:1-218:47">کد <code>forms.py</code> خود را با کد بالا آپدیت کنید.</li>
<li data-sourcepos="219:1-219:156"><strong>مهم:</strong> مطمئن شوید تابع <code>to_english_digits</code> را در جایی تعریف کرده‌اید و در <code>forms.py</code> ایمپورت کرده‌اید. اگر ندارید، کد نمونه‌ی آن در کامنت کد بالا هست.</li>
<li data-sourcepos="220:1-220:260"><strong>نوع فیلد مدل:</strong> بررسی کنید که نوع فیلد <code>amount</code> در مدل <code>Factor</code> شما چیست (<code>IntegerField</code>, <code>DecimalField</code>, <code>FloatField</code>). اگر <code>DecimalField</code> یا <code>FloatField</code> است و می‌خواهید <em>همیشه</em> مقادیر گرد شده ذخیره شوند، استفاده از <code>int()</code> در <code>clean_amount</code> مناسب است.</li>
<li data-sourcepos="221:1-222:0">تست کنید!</li>
</ol><p data-sourcepos="223:1-223:99">حالا باید مقادیری که برای <code>amount</code> وارد می‌کنید، قبل از ذخیره‌سازی به نزدیک‌ترین عدد صحیح گرد شوند.</p></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer complete gap"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted"><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted"><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-22"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-47 hide-action-bar ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-47 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-47 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-47 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-3" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_eacf4e08a492fe04&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_eef3ec0a3869401a&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_703"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_707"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_713"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_715"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_703)"><g mask="url(#__lottie_element_707)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_713)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_715)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-47 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-3" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_eacf4e08a492fe04&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_eef3ec0a3869401a&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_681"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_685"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_681)"><g mask="url(#__lottie_element_685)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-47 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-47 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_eacf4e08a492fe04&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_eef3ec0a3869401a&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-47 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-47 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-47 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-47 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-47"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-47"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-3"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted"><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="4501358827073557" style=""><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-4"><!----><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l collapsed" dir="rtl"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> def tankhah_document_path(instance, filename): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     # مسیر آپلود: documents/شماره_تنخواه/نام_فایل <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     extension = os.path.splitext(filename)[1]  # مثل .pdf <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     return f'documents/{instance.tankhah.number}/document{extension}/%Y/%m/%d/' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> این تابع نام تنخواه را باید از کجا در مدل بع فیلد مدل زیر انتقال دهد  <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorDocument(models.Model): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     factor = models.ForeignKey('Factor', on_delete=models.CASCADE, related_name='documents', verbose_name=_("فاکتور")) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     file = models.FileField(upload_to='factors/documents/%Y/%m/%d/', verbose_name=_("فایل پیوست")) <!----><!----></p><!----></div><button _ngcontent-ng-c4161157681="" mat-icon-button="" mattooltip="ازهم بازکردن نوشتار" aria-label="ازهم بازکردن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger expand-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="224552;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_4501358827073557&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-19" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="expand_more" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-25 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_4501358827073557&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-25 response-container-with-gpi tts-removed ng-star-inserted" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-25 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-25"><!----><!----><div _ngcontent-ng-c108414610="" class="ng-tns-c108414610-25 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c108414610="" class="single-draft-response-container ng-tns-c108414610-25 ng-star-inserted" style=""><!----><!----></div><!----></div><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-25 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-25"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-25"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-25"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-25 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-27 ng-tns-c108414610-25 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-27"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-27 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-27 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-27 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-27 ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_59"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_66"><g transform="matrix(-1,0,0,-1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_69)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_69" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_73" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_66_1" mask-type="alpha"><use href="#__lottie_element_66"></use></mask></defs><g clip-path="url(#__lottie_element_59)"><g mask="url(#__lottie_element_66_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_73)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-27 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_545"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_549" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_556" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_560" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_564" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_568" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_572" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_545)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_572)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_568)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_564)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_560)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_556)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_549)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-25"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-25"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-26 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-26"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-26"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-26 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-26"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-26">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-26"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-26 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_4501358827073557" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_4501358827073557" dir="rtl" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:148">شما نمی‌توانید تابع <code>tankhah_document_path</code> رو که برای مدلی با ارجاع مستقیم به <code>Tankhah</code> نوشته شده، مستقیماً برای مدل <code>FactorDocument</code> استفاده کنید.</p><p data-sourcepos="3:1-3:9"><strong>دلیل:</strong></p><ul data-sourcepos="5:1-8:0">
<li data-sourcepos="5:1-5:157">تابع <code>tankhah_document_path(instance, filename)</code> فرض می‌کنه که <code>instance</code> ورودی، خودش یک فیلد مستقیم به نام <code>tankhah</code> داره (مثل <code>instance.tankhah.number</code>).</li>
<li data-sourcepos="6:1-6:143">اما وقتی این تابع رو برای فیلد <code>file</code> در مدل <code>FactorDocument</code> استفاده می‌کنید، <code>instance</code> ورودی یک شیء از نوع <strong><code>FactorDocument</code></strong> خواهد بود.</li>
<li data-sourcepos="7:1-8:0">یک شیء <code>FactorDocument</code> به طور مستقیم فیلد <code>tankhah</code> نداره. اون یک فیلد <code>factor</code> داره که <em>اون</em> فیلد <code>factor</code> به <code>tankhah</code> لینک شده.</li>
</ul><p data-sourcepos="9:1-9:11"><strong>راه حل:</strong></p><p data-sourcepos="11:1-11:100">باید یک تابع جدید مخصوص مدل <code>FactorDocument</code> بنویسید که مسیر درست رو طی کنه تا به شماره تنخواه برسه.</p><p data-sourcepos="13:1-13:50"><strong>۱. تابع جدید برای مسیر آپلود <code>FactorDocument</code>:</strong></p><p data-sourcepos="15:1-15:87">این تابع رو در جایی مناسب (مثلاً در فایل <code>models.py</code> یا یک فایل <code>utils.py</code>) تعریف کنید:</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-76 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-76 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_4501358827073557&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_90f48e4eccf15bf1&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-76 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-76">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-76 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-76 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_4501358827073557&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_90f48e4eccf15bf1&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-76"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-76"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-76"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-76" data-sourcepos="17:1-63:0"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> django.utils.translation <span class="hljs-keyword">import</span> gettext_lazy <span class="hljs-keyword">as</span> _
<span class="hljs-comment"># بقیه import های مدل شما</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">factor_document_upload_path</span>(<span class="hljs-params">instance, filename</span>):</span>
    <span class="hljs-string">"""
    مسیر آپلود فایل برای FactorDocument را بر اساس شماره تنخواه و ID فاکتور تعیین می‌کند.
    مسیر نهایی: factors/[شماره_تنخواه]/[ID_فاکتور]/[نام_فایل_اصلی]
    """</span>
    <span class="hljs-comment"># instance در اینجا یک شیء FactorDocument است</span>
    factor = instance.factor
    <span class="hljs-keyword">if</span> factor <span class="hljs-keyword">and</span> factor.tankhah:
        tankhah_number = factor.tankhah.number
        factor_id = factor.<span class="hljs-built_in">id</span>
        <span class="hljs-comment"># برای جلوگیری از ذخیره شدن همه فایل‌ها با نام یکسان اگر چند فایل همزمان آپلود شوند،</span>
        <span class="hljs-comment"># بهتر است نام فایل اصلی را نگه داریم یا یک نام یکتا بسازیم.</span>
        <span class="hljs-comment"># filename = f"{uuid.uuid4()}{os.path.splitext(filename)[1]}" # مثال: ساخت نام یکتا</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f'factors/<span class="hljs-subst">{tankhah_number}</span>/<span class="hljs-subst">{factor_id}</span>/<span class="hljs-subst">{filename}</span>'</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># یک مسیر پیش‌فرض در صورتی که فاکتور یا تنخواه هنوز ذخیره نشده باشند (که نباید اتفاق بیفتد)</span>
        <span class="hljs-comment"># یا فاکتور به تنخواه لینک نباشد</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f'factors/orphaned/<span class="hljs-subst">{filename}</span>'</span>

<span class="hljs-comment"># --- مدل FactorDocument شما ---</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FactorDocument</span>(<span class="hljs-params">models.Model</span>):</span>
    factor = models.ForeignKey(
        <span class="hljs-string">'Factor'</span>,
        on_delete=models.CASCADE,
        related_name=<span class="hljs-string">'documents'</span>,
        verbose_name=_(<span class="hljs-string">"فاکتور"</span>)
    )
    <span class="hljs-comment"># ! استفاده از تابع جدید در upload_to</span>
    file = models.FileField(
        upload_to=factor_document_upload_path, <span class="hljs-comment"># &lt;--- تابع جدید اینجا استفاده می‌شود</span>
        verbose_name=_(<span class="hljs-string">"فایل پیوست"</span>)
    )
    uploaded_at = models.DateTimeField(auto_now_add=<span class="hljs-literal">True</span>, verbose_name=_(<span class="hljs-string">"زمان آپلود"</span>)) <span class="hljs-comment"># یک فیلد زمان خوب است</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{_(<span class="hljs-string">'پیوست برای فاکتور'</span>)}</span> <span class="hljs-subst">{self.factor.number}</span> - <span class="hljs-subst">{os.path.basename(self.file.name)}</span>"</span>

    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        verbose_name = _(<span class="hljs-string">"سند فاکتور"</span>)
        verbose_name_plural = _(<span class="hljs-string">"اسناد فاکتور"</span>)

</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-sourcepos="65:1-65:12"><strong>توضیحات:</strong></p><ol data-sourcepos="67:1-76:0">
<li data-sourcepos="67:1-73:226"><strong>تابع <code>factor_document_upload_path</code>:</strong>
<ul data-sourcepos="68:5-73:226">
<li data-sourcepos="68:5-68:56">ورودی <code>instance</code> حالا یک شیء <code>FactorDocument</code> است.</li>
<li data-sourcepos="69:5-69:78">ما از طریق <code>instance.factor</code> به شیء <code>Factor</code> مربوطه دسترسی پیدا می‌کنیم.</li>
<li data-sourcepos="70:5-70:89">سپس از طریق <code>instance.factor.tankhah</code> به شیء <code>Tankhah</code> مرتبط با اون فاکتور می‌رسیم.</li>
<li data-sourcepos="71:5-71:76">در نهایت <code>factor.tankhah.number</code> شماره تنخواه مورد نظر رو به ما می‌ده.</li>
<li data-sourcepos="72:5-72:75"><code>factor.id</code> هم شناسه یکتای فاکتور رو میده که برای ساختار پوشه مناسبه.</li>
<li data-sourcepos="73:5-73:226">مسیر نهایی طوری ساخته می‌شه که فایل‌ها بر اساس شماره تنخواه و سپس ID فاکتور دسته‌بندی بشن (<code>factors/[شماره_تنخواه]/[ID_فاکتور]/[نام_فایل]</code>). شما می‌تونید این ساختار رو به دلخواه تغییر بدید (مثلاً تاریخ رو هم اضافه کنید).</li>
</ul>
</li>
<li data-sourcepos="74:1-76:0"><strong>مدل <code>FactorDocument</code>:</strong>
<ul data-sourcepos="75:5-76:0">
<li data-sourcepos="75:5-76:0">در تعریف فیلد <code>file</code>، مقدار <code>upload_to</code> به تابع جدید یعنی <code>factor_document_upload_path</code> تغییر داده شده.</li>
</ul>
</li>
</ol><p data-sourcepos="77:1-77:158">حالا وقتی یک فایل برای <code>FactorDocument</code> آپلود می‌شه، جنگو این تابع جدید رو صدا می‌زنه و فایل در مسیر درستی که شامل شماره تنخواه والدِ فاکتور هست، ذخیره می‌شه.</p></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer complete gap"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted"><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted"><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-25"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-48 hide-action-bar ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-48 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-48 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-48 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-4" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_4501358827073557&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_90f48e4eccf15bf1&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_310"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_314"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_320"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_322"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_310)"><g mask="url(#__lottie_element_314)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_320)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_322)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-48 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-4" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_4501358827073557&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_90f48e4eccf15bf1&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_534"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_538"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_534)"><g mask="url(#__lottie_element_538)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-48 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-48 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_4501358827073557&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_90f48e4eccf15bf1&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-48 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-48 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-48 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-48 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-48"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-48"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-4"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted"><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="9fa5d6981feccb73" style=""><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-5"><!----><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l collapsed" dir="ltr"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> آپلود محدود به سند باشه هیچ فایل دیگه ای رو آپلود نکنه  <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorUpdateView(PermissionBaseView, UpdateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_codenames = ['tankhah.a_factor_update'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = self.form_class(self.request.POST, user=self.request.user, instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = self.form_class(user=self.request.user, instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['title'] = _('ویرایش فاکتور') + f" - {self.object.number}" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah_documents'] = tankhah.documents.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['total_amount'] = sum(item.amount * item.quantity for item in self.object.items.all()) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_object(self, queryset=None): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         obj = super().get_object(queryset) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if getattr(obj, 'locked', False): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise PermissionDenied("این فاکتور قفل شده و قابل ویرایش نیست.") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return obj <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def dispatch(self, request, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         obj = self.get_object() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         initial_stage_order = WorkflowStage.objects.order_by('order').first().order  # پایین‌ترین order به‌عنوان اولیه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         user_post = request.user.userpost_set.first().post if request.user.userpost_set.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         lowest_level = get_lowest_access_level()  # فرضاً پایین‌ترین سطح دسترسی <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if obj.locked_by_stage and obj.locked_by_stage.order &lt; obj.tankhah.current_stage.order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise PermissionDenied(_('این فاکتور توسط مرحله بالاتر قفل شده و قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if obj.tankhah.status in ['APPROVED', 'SENT_TO_HQ', 'HQ_OPS_APPROVED', 'PAID']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise PermissionDenied(_('فاکتور تأییدشده یا پرداخت‌شده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if getattr(obj, 'is_finalized', False) and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise PermissionDenied(_('شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if not request.user.is_superuser: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 logger.info(f"مرحله فعلی: {obj.tankhah.current_stage.order}, مرحله اولیه: {initial_stage_order}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if obj.tankhah.status in ['APPROVED', 'SENT_TO_HQ', 'HQ_OPS_APPROVED', 'PAID']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 raise PermissionDenied(_('فاکتور تأییدشده یا پرداخت‌شده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if getattr(obj, 'is_finalized', False) and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 raise PermissionDenied(_('شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if user_post and user_post.level != lowest_level and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 raise PermissionDenied(_('فقط کاربران سطح پایین یا دارای مجوز کامل می‌توانند ویرایش کنند.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return super().dispatch(request, *args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.object: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             restrict_to_user_organization(self.request.user, tankhah.organization) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             kwargs['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         document_form = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 logger.info(f"Saved {self.object.items.count()} items for factor {self.object.number}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     TankhahDocument.objects.create(tankhah=self.object.tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.success(self.request, _('فاکتور با موفقیت به‌روزرسانی شد.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             logger.info(f"Formset errors: {item_formset.errors}, Document errors: {document_form.errors}, Tankhah doc errors: {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorCreateView(PermissionBaseView, CreateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     context_object_name = 'factor' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_denied_message = 'متاسفانه دسترسی مجاز ندارید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_codenames = ['tankhah.a_factor_add'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = Tankhah.objects.get(id=self.kwargs.get('tankhah_id', None)) if 'tankhah_id' in self.kwargs else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             form = self.form_class(self.request.POST, user=self.request.user, tankhah=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = form <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = self.form_class(user=self.request.user, tankhah=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['title'] = 'ایجاد فاکتور جدید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah_documents'] = tankhah.documents.all() if tankhah else [] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if 'tankhah_id' in self.kwargs: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             kwargs['tankhah'] = Tankhah.objects.get(id=self.kwargs['tankhah_id']) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = form.cleaned_data['tankhah'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         initial_stage_order = WorkflowStage.objects.order_by('order').first().order  # پایین‌ترین order به‌عنوان اولیه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, 'فقط در مرحله اولیه می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if tankhah.status not in ['DRAFT', 'PENDING']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, 'فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         document_form = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object.status = 'PENDING'  # وضعیت اولیه فاکتور <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     TankhahDocument.objects.create(tankhah=tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.success(self.request, 'فاکتور با موفقیت ثبت شد و آماده بررسی است.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             logger.info(f"Errors: {item_formset.errors}, {document_form.errors}, {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def handle_no_permission(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         messages.error(self.request, self.permission_denied_message) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return super().handle_no_permission() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class MultipleFileInput(forms.ClearableFileInput): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     allow_multiple_selected = True  # امکان انتخاب چندین فایل را فعال می‌کند <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class MultipleFileField(forms.FileField): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def __init__(self, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs.setdefault("widget", MultipleFileInput(attrs={'class': 'form-control'})) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         super().__init__(*args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def clean(self, data, initial=None): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         single_file_clean = super().clean <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if isinstance(data, (list, tuple)): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             result = [single_file_clean(d, initial) for d in data] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             result = single_file_clean(data, initial) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return result <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> # فرم اسناد فاکتور (چندفایلی، بدون ModelForm) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorDocumentForm(forms.Form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     files = MultipleFileField(label=_("بارگذاری اسناد فاکتور"), required=False) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> # فرم اسناد تنخواه (چندفایلی، بدون ModelForm) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class TankhahDocumentForm(forms.Form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     documents = MultipleFileField(label=_("بارگذاری مدارک تنخواه"), required=False) <!----><!----></p><!----></div><button _ngcontent-ng-c4161157681="" mat-icon-button="" mattooltip="ازهم بازکردن نوشتار" aria-label="ازهم بازکردن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger expand-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="224552;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9fa5d6981feccb73&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-19" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="expand_more" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-28 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_9fa5d6981feccb73&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-28 response-container-with-gpi tts-removed ng-star-inserted" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-28 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-28"><!----><!----><div _ngcontent-ng-c108414610="" class="ng-tns-c108414610-28 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c108414610="" class="single-draft-response-container ng-tns-c108414610-28 ng-star-inserted" style=""><!----><!----></div><!----></div><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-28 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-28"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-28"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-28"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-28 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-30 ng-tns-c108414610-28 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-30"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-30 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-30 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-30 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-30 ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_380"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_387"><g transform="matrix(-1,0,0,-1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_390)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_390" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_394" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_387_1" mask-type="alpha"><use href="#__lottie_element_387"></use></mask></defs><g clip-path="url(#__lottie_element_380)"><g mask="url(#__lottie_element_387_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_394)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-30 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_352"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_356" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_363" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_367" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_371" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_375" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_379" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_352)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_379)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_375)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_371)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_367)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_363)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_356)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-28"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-28"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-29 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-29"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-29"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-29 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-29"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-29">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-29"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-29 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_9fa5d6981feccb73" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_9fa5d6981feccb73" dir="rtl" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:202">عالی! برای اینکه آپلود فایل رو فقط به اسناد (مثل PDF، فایل‌های آفیس، تصاویر رایج) محدود کنی، بهترین جا برای این کار داخل متدهای <code>clean</code> فرم‌های مربوطه (<code>FactorDocumentForm</code> و <code>TankhahDocumentForm</code>) هست.</p><p data-sourcepos="3:1-3:129">اینطوری قبل از اینکه فایل‌ها ذخیره بشن یا آبجکت مدل ساخته بشه، نوعشون بررسی می‌شه و اگر مجاز نبود، به کاربر خطا نمایش داده می‌شه.</p><p data-sourcepos="5:1-5:45"><strong>۱. اصلاح فرم‌های آپلود فایل (<code>forms.py</code>):</strong></p><p data-sourcepos="7:1-7:141">کلاس‌های <code>FactorDocumentForm</code> و <code>TankhahDocumentForm</code> رو به شکل زیر اصلاح کن تا شامل متد <code>clean_&lt;fieldname&gt;</code> برای اعتبارسنجی فایل‌ها باشن:</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-77 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-77 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_9fa5d6981feccb73&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_3d97464551196e84&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-77 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-77">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-77 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-77 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9fa5d6981feccb73&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_3d97464551196e84&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-77"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-77"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-77"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-77" data-sourcepos="9:1-117:58"><span class="hljs-comment"># forms.py</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0"> forms
</span><span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.utils.translation </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0"> gettext_lazy </span><span class="hljs-keyword"><span class="citation-0">as</span></span><span class="citation-0"> _
</span><span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.core.exceptions </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0 citation-end-0"> ValidationError</span>

<span class="hljs-comment"># --- ویجت‌ها و فیلدهای چندفایلی (بدون تغییر) ---</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MultipleFileInput</span>(<span class="hljs-params">forms.ClearableFileInput</span>):</span>
    allow_multiple_selected = <span class="hljs-literal">True</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MultipleFileField</span>(<span class="hljs-params">forms.FileField</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):</span>
        <span class="hljs-comment"># اضافه کردن allow_multiple_selected به ویجت در اینجا</span>
        kwargs.setdefault(<span class="hljs-string">"widget"</span>, MultipleFileInput(attrs={<span class="hljs-string">'multiple'</span>: <span class="hljs-literal">True</span>, <span class="hljs-string">'class'</span>: <span class="hljs-string">'form-control'</span>}))
        <span class="hljs-built_in">super</span>().__init__(*args, **kwargs)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean</span>(<span class="hljs-params">self, data, initial=<span class="hljs-literal">None</span></span>):</span>
        single_file_clean = <span class="hljs-built_in">super</span>().clean
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(data, (<span class="hljs-built_in">list</span>, <span class="hljs-built_in">tuple</span>)):
            <span class="hljs-comment"># اطمینان از اینکه فقط فایل‌های آپلود شده معتبر را برمی‌گردانیم</span>
            result = [single_file_clean(d, initial) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> data <span class="hljs-keyword">if</span> d <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>]
        <span class="hljs-keyword">else</span>:
            result = single_file_clean(data, initial)
        <span class="hljs-keyword">return</span> result

<span class="hljs-comment"># --- تعریف پسوندهای مجاز ---</span>
<span class="hljs-comment"># ! لیست پسوندهای مجاز رو اینجا تعریف کن (با نقطه و حروف کوچک)</span>
ALLOWED_EXTENSIONS = [<span class="hljs-string">'.pdf'</span>, <span class="hljs-string">'.doc'</span>, <span class="hljs-string">'.docx'</span>, <span class="hljs-string">'.xls'</span>, <span class="hljs-string">'.xlsx'</span>, <span class="hljs-string">'.jpg'</span>, <span class="hljs-string">'.jpeg'</span>, <span class="hljs-string">'.png'</span>]
<span class="hljs-comment"># می‌تونی فرمت‌های دیگه مثل .txt, .odt, .ods, .gif, .zip, .rar رو هم اضافه کنی</span>
ALLOWED_EXTENSIONS_STR = <span class="hljs-string">", "</span>.join(ALLOWED_EXTENSIONS) <span class="hljs-comment"># برای نمایش در پیام خطا</span>

<span class="hljs-comment"># --- فرم اسناد فاکتور (اصلاح شده با اعتبارسنجی) ---</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FactorDocumentForm</span>(<span class="hljs-params">forms.Form</span>):</span>
    <span class="hljs-comment"># prefix='factor_docs'</span>
    files = MultipleFileField(
        label=_(<span class="hljs-string">"بارگذاری اسناد فاکتور (فقط {} مجاز است)"</span>.<span class="hljs-built_in">format</span>(ALLOWED_EXTENSIONS_STR)),
        required=<span class="hljs-literal">False</span>,
        widget=MultipleFileInput(
            attrs={
                <span class="hljs-string">'multiple'</span>: <span class="hljs-literal">True</span>,
                <span class="hljs-string">'class'</span>: <span class="hljs-string">'form-control form-control-sm'</span>, <span class="hljs-comment"># کلاس برای استایل بهتر</span>
                <span class="hljs-string">'accept'</span>: <span class="hljs-string">","</span>.join(ALLOWED_EXTENSIONS) <span class="hljs-comment"># راهنمایی به مرورگر برای فیلتر فایل‌ها</span>
                }
            )
        )

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_files</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""اعتبارسنجی نوع فایل‌های آپلود شده برای اسناد فاکتور."""</span>
        files = self.cleaned_data.get(<span class="hljs-string">'files'</span>)
        <span class="hljs-keyword">if</span> files: <span class="hljs-comment"># اگر فایلی آپلود شده بود</span>
            invalid_files = []
            <span class="hljs-keyword">for</span> uploaded_file <span class="hljs-keyword">in</span> files:
                <span class="hljs-keyword">if</span> uploaded_file: <span class="hljs-comment"># اطمینان از اینکه فایل None نیست</span>
                    <span class="hljs-comment"># گرفتن پسوند فایل و تبدیل به حروف کوچک</span>
                    ext = os.path.splitext(uploaded_file.name)[<span class="hljs-number">1</span>].lower()
                    <span class="hljs-keyword">if</span> ext <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> ALLOWED_EXTENSIONS:
                        invalid_files.append(uploaded_file.name)
                        logger.warning(<span class="hljs-string">f"Invalid file type uploaded for FactorDocument: <span class="hljs-subst">{uploaded_file.name}</span> (type: <span class="hljs-subst">{ext}</span>)"</span>)

            <span class="hljs-comment"># اگر فایل نامعتبری وجود داشت، خطا ایجاد کن</span>
            <span class="hljs-keyword">if</span> invalid_files:
                invalid_files_str = <span class="hljs-string">", "</span>.join(invalid_files)
                error_msg = _(<span class="hljs-string">"فایل(های) زیر دارای فرمت غیرمجاز هستند: {files}. فرمت‌های مجاز: {allowed}"</span>).<span class="hljs-built_in">format</span>(
                    files=invalid_files_str,
                    allowed=ALLOWED_EXTENSIONS_STR
                )
                <span class="hljs-keyword">raise</span> ValidationError(error_msg)
        <span class="hljs-keyword">return</span> files <span class="hljs-comment"># برگرداندن لیست فایل‌های (احتمالا) معتبر</span>

<span class="hljs-comment"># --- فرم اسناد تنخواه (اصلاح شده با اعتبارسنجی) ---</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TankhahDocumentForm</span>(<span class="hljs-params">forms.Form</span>):</span>
    <span class="hljs-comment"># prefix='tankhah_docs'</span>
    documents = MultipleFileField(
        label=_(<span class="hljs-string">"بارگذاری مدارک تنخواه (فقط {} مجاز است)"</span>.<span class="hljs-built_in">format</span>(ALLOWED_EXTENSIONS_STR)),
        required=<span class="hljs-literal">False</span>,
         widget=MultipleFileInput(
            attrs={
                <span class="hljs-string">'multiple'</span>: <span class="hljs-literal">True</span>,
                <span class="hljs-string">'class'</span>: <span class="hljs-string">'form-control form-control-sm'</span>,
                <span class="hljs-string">'accept'</span>: <span class="hljs-string">","</span>.join(ALLOWED_EXTENSIONS)
                }
            )
        )

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_documents</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""اعتبارسنجی نوع فایل‌های آپلود شده برای اسناد تنخواه."""</span>
        files = self.cleaned_data.get(<span class="hljs-string">'documents'</span>)
        <span class="hljs-keyword">if</span> files:
            invalid_files = []
            <span class="hljs-keyword">for</span> uploaded_file <span class="hljs-keyword">in</span> files:
                 <span class="hljs-keyword">if</span> uploaded_file:
                    ext = os.path.splitext(uploaded_file.name)[<span class="hljs-number">1</span>].lower()
                    <span class="hljs-keyword">if</span> ext <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> ALLOWED_EXTENSIONS:
                        invalid_files.append(uploaded_file.name)
                        logger.warning(<span class="hljs-string">f"Invalid file type uploaded for TankhahDocument: <span class="hljs-subst">{uploaded_file.name}</span> (type: <span class="hljs-subst">{ext}</span>)"</span>)

            <span class="hljs-keyword">if</span> invalid_files:
                invalid_files_str = <span class="hljs-string">", "</span>.join(invalid_files)
                error_msg = _(<span class="hljs-string">"فایل(های) زیر دارای فرمت غیرمجاز هستند: {files}. فرمت‌های مجاز: {allowed}"</span>).<span class="hljs-built_in">format</span>(
                    files=invalid_files_str,
                    allowed=ALLOWED_EXTENSIONS_STR
                )
                <span class="hljs-keyword">raise</span> ValidationError(error_msg)
        <span class="hljs-keyword">return</span> files

<span class="hljs-comment"># ... (بقیه فرم‌ها مثل FactorForm و FactorItemFormSet) ...</span>
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-sourcepos="119:1-119:22"><strong>توضیحات کد فرم‌ها:</strong></p><ol data-sourcepos="121:1-126:0">
<li data-sourcepos="121:1-121:95"><strong><code>ALLOWED_EXTENSIONS</code>:</strong> لیستی از پسوندهای مجاز تعریف شده. می‌تونی این لیست رو ویرایش کنی.</li>
<li data-sourcepos="122:1-122:244"><strong><code>clean_files</code> / <code>clean_documents</code>:</strong> این متدها به صورت خودکار توسط جنگو فراخوانی می‌شن. کد داخلشون لیست فایل‌های آپلود شده رو می‌گیره، برای هر فایل پسوندش رو چک می‌کنه و اگر در لیست مجاز نبود، اسمش رو به لیست <code>invalid_files</code> اضافه می‌کنه.</li>
<li data-sourcepos="123:1-123:213"><strong><code>ValidationError</code>:</strong> اگر فایل نامعتبری پیدا بشه، یک <code>ValidationError</code> با پیامی شامل نام فایل‌های نامعتبر و لیست فرمت‌های مجاز ایجاد می‌شه. این باعث می‌شه فرم نامعتبر شناخته بشه و خطا به کاربر نمایش داده بشه.</li>
<li data-sourcepos="124:1-124:258"><strong><code>accept</code> در ویجت:</strong> ویژگی <code>accept</code> به ویجت اضافه شده تا در پنجره انتخاب فایل مرورگر، به صورت پیش‌فرض فقط فایل‌های با پسوند مجاز نمایش داده بشن (این یک راهنما برای کاربره و جلوی آپلود فایل‌های دیگه رو ۱۰۰٪ نمی‌گیره، برای همین اعتبارسنجی سمت سرور لازمه).</li>
<li data-sourcepos="125:1-126:0"><strong><code>multiple</code>:</strong> ویژگی <code>multiple</code> به ویجت اضافه شد تا مرورگر اجازه انتخاب چند فایل رو بده.</li>
</ol><p data-sourcepos="127:1-127:32"><strong>۲. اصلاح ویوها (<code>views.py</code>):</strong></p><p data-sourcepos="129:1-129:197">حالا که اعتبارسنجی در فرم‌ها انجام می‌شه، فقط باید مطمئن بشیم که در متد <code>form_valid</code> ویوها، نام درست فیلدها رو برای گرفتن لیست فایل‌ها از <code>request.FILES</code> استفاده می‌کنیم (با در نظر گرفتن <code>prefix</code>).</p><p data-sourcepos="131:1-131:195">در هر دو ویو <code>FactorCreateView</code> و <code>FactorUpdateView</code>، داخل متد <code>form_valid</code> و بلوک <code>if item_formset.is_valid() and document_form.is_valid()...</code>، بخش مربوط به ذخیره فایل‌ها رو به شکل زیر اصلاح کن:</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-78 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-78 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_9fa5d6981feccb73&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_3d97464551196e84&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-78 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-78">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-78 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-78 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9fa5d6981feccb73&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_3d97464551196e84&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-78"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-78"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-78"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-78" data-sourcepos="133:1-174:57"><span class="hljs-comment"># views.py (داخل form_valid در FactorCreateView و FactorUpdateView)</span>

<span class="hljs-comment"># ... (بعد از item_formset.save()) ...</span>

<span class="hljs-comment"># ذخیره اسناد فاکتور (با prefix درست)</span>
<span class="hljs-comment"># ! نام فیلد 'files' و prefix='factor_docs' =&gt; 'factor_docs-files'</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-comment"># فایل‌ها از فرم معتبر document_form خوانده می‌شوند</span>
    factor_files_cleaned = document_form.cleaned_data.get(<span class="hljs-string">'files'</span>, [])
    <span class="hljs-keyword">if</span> factor_files_cleaned: <span class="hljs-comment"># فقط اگر فایلی وجود داشت و معتبر بود</span>
        logger.info(<span class="hljs-string">f"Received <span class="hljs-subst">{<span class="hljs-built_in">len</span>(factor_files_cleaned)}</span> valid factor files."</span>)
        <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> factor_files_cleaned:
            <span class="hljs-keyword">if</span> file: <span class="hljs-comment"># اطمینان مجدد</span>
                FactorDocument.objects.create(factor=self.<span class="hljs-built_in">object</span>, file=file)
                logger.info(<span class="hljs-string">f"Saved factor document: <span class="hljs-subst">{file.name}</span>"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
     logger.error(<span class="hljs-string">f"Error saving factor documents: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
     <span class="hljs-comment"># می‌توانید در اینجا پیام خطا به کاربر بدهید یا اجازه دهید تراکنش rollback شود</span>


<span class="hljs-comment"># ذخیره اسناد تنخواه (با prefix درست)</span>
<span class="hljs-comment"># ! نام فیلد 'documents' و prefix='tankhah_docs' =&gt; 'tankhah_docs-documents'</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-comment"># فایل‌ها از فرم معتبر tankhah_document_form خوانده می‌شوند</span>
    tankhah_files_cleaned = tankhah_document_form.cleaned_data.get(<span class="hljs-string">'documents'</span>, [])
    <span class="hljs-keyword">if</span> tankhah_files_cleaned:
        logger.info(<span class="hljs-string">f"Received <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tankhah_files_cleaned)}</span> valid tankhah files."</span>)
        tankhah_instance = self.<span class="hljs-built_in">object</span>.tankhah <span class="hljs-comment"># گرفتن تنخواه والد</span>
        <span class="hljs-keyword">if</span> tankhah_instance:
            <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> tankhah_files_cleaned:
                 <span class="hljs-keyword">if</span> file:
                    TankhahDocument.objects.create(tankhah=tankhah_instance, document=file)
                    logger.info(<span class="hljs-string">f"Saved tankhah document: <span class="hljs-subst">{file.name}</span>"</span>)
        <span class="hljs-keyword">else</span>:
             logger.error(<span class="hljs-string">f"Could not save tankhah documents, parent tankhah instance not found for factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
     logger.error(<span class="hljs-string">f"Error saving tankhah documents: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
     <span class="hljs-comment"># پیام خطا یا rollback</span>

<span class="hljs-comment"># ... (بقیه کد form_valid مثل ارسال نوتیفیکیشن و ...) ...</span>
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-sourcepos="176:1-176:19"><strong>توضیحات کد ویو:</strong></p><ol data-sourcepos="178:1-180:0">
<li data-sourcepos="178:1-178:247"><strong>نام فیلدها:</strong> <code>request.FILES.getlist('files')</code> به <code>document_form.cleaned_data.get('files', [])</code> تغییر کرد. این کار فایل‌ها رو از دیکشنری <code>cleaned_data</code> فرم مربوطه می‌خونه که <strong>قبلاً اعتبارسنجی شده‌اند</strong>. همینطور برای <code>tankhah_document_form</code>.</li>
<li data-sourcepos="179:1-180:0"><strong>حذف اعتبارسنجی تکراری:</strong> دیگه نیازی به چک کردن پسوند فایل در ویو نیست چون فرم این کار رو انجام داده.</li>
</ol><p data-sourcepos="181:1-181:237">حالا اگر کاربری سعی کنه فایلی با فرمت غیرمجاز آپلود کنه، <code>document_form.is_valid()</code> یا <code>tankhah_document_form.is_valid()</code> مقدار <code>False</code> برمی‌گردونه، <code>form_valid</code> به <code>else</code> میره و خطا به کاربر نمایش داده می‌شه و هیچ فایلی ذخیره نخواهد شد.</p></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer complete gap"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted"><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted"><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-28"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-49 hide-action-bar ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-49 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-49 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-49 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-5" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9fa5d6981feccb73&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_3d97464551196e84&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_753"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_757"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_763"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_765"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_753)"><g mask="url(#__lottie_element_757)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_763)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_765)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-49 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-5" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9fa5d6981feccb73&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_3d97464551196e84&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_742"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_746"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_742)"><g mask="url(#__lottie_element_746)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-49 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-49 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9fa5d6981feccb73&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_3d97464551196e84&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-49 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-49 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-49 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-49 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-49"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-49"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-5"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted"><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="b5e17c970ab84a32" style=""><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-6"><!----><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l collapsed" dir="ltr"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorCreateView(PermissionBaseView, CreateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     context_object_name = 'factor' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_denied_message = 'متاسفانه دسترسی مجاز ندارید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_codenames = ['tankhah.a_factor_add'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = Tankhah.objects.get(id=self.kwargs.get('tankhah_id', None)) if 'tankhah_id' in self.kwargs else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             form = self.form_class(self.request.POST, user=self.request.user, tankhah=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = form <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = self.form_class(user=self.request.user, tankhah=tankhah) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['title'] = 'ایجاد فاکتور جدید' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah_documents'] = tankhah.documents.all() if tankhah else [] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if 'tankhah_id' in self.kwargs: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             kwargs['tankhah'] = Tankhah.objects.get(id=self.kwargs['tankhah_id']) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = form.cleaned_data['tankhah'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         initial_stage_order = WorkflowStage.objects.order_by('order').first().order  # پایین‌ترین order به‌عنوان اولیه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, 'فقط در مرحله اولیه می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if tankhah.status not in ['DRAFT', 'PENDING']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.error(self.request, 'فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.form_invalid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         document_form = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object.status = 'PENDING'  # وضعیت اولیه فاکتور <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     TankhahDocument.objects.create(tankhah=tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.success(self.request, 'فاکتور با موفقیت ثبت شد و آماده بررسی است.') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             logger.info(f"Errors: {item_formset.errors}, {document_form.errors}, {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def handle_no_permission(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         messages.error(self.request, self.permission_denied_message) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return super().handle_no_permission() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> #* ** * * ** * ** ** <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorUpdateView(PermissionBaseView, UpdateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     permission_codenames = ['tankhah.a_factor_update'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = self.form_class(self.request.POST, user=self.request.user, instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['form'] = self.form_class(user=self.request.user, instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['item_formset'] = FactorItemFormSet(instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['title'] = _('ویرایش فاکتور') + f" - {self.object.number}" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['tankhah_documents'] = tankhah.documents.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         context['total_amount'] = sum(item.amount * item.quantity for item in self.object.items.all()) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_object(self, queryset=None): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         obj = super().get_object(queryset) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if getattr(obj, 'locked', False): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise PermissionDenied("این فاکتور قفل شده و قابل ویرایش نیست.") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return obj <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def dispatch(self, request, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         obj = self.get_object() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         initial_stage_order = WorkflowStage.objects.order_by('order').first().order  # پایین‌ترین order به‌عنوان اولیه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         user_post = request.user.userpost_set.first().post if request.user.userpost_set.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         lowest_level = get_lowest_access_level()  # فرضاً پایین‌ترین سطح دسترسی <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if obj.locked_by_stage and obj.locked_by_stage.order &lt; obj.tankhah.current_stage.order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise PermissionDenied(_('این فاکتور توسط مرحله بالاتر قفل شده و قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if obj.tankhah.status in ['APPROVED', 'SENT_TO_HQ', 'HQ_OPS_APPROVED', 'PAID']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise PermissionDenied(_('فاکتور تأییدشده یا پرداخت‌شده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if getattr(obj, 'is_finalized', False) and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             raise PermissionDenied(_('شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if not request.user.is_superuser: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 logger.info(f"مرحله فعلی: {obj.tankhah.current_stage.order}, مرحله اولیه: {initial_stage_order}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if obj.tankhah.status in ['APPROVED', 'SENT_TO_HQ', 'HQ_OPS_APPROVED', 'PAID']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 raise PermissionDenied(_('فاکتور تأییدشده یا پرداخت‌شده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if getattr(obj, 'is_finalized', False) and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 raise PermissionDenied(_('شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if user_post and user_post.level != lowest_level and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 raise PermissionDenied(_('فقط کاربران سطح پایین یا دارای مجوز کامل می‌توانند ویرایش کنند.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return super().dispatch(request, *args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if self.object: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             restrict_to_user_organization(self.request.user, tankhah.organization) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             kwargs['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         document_form = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 logger.info(f"Saved {self.object.items.count()} items for factor {self.object.number}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     TankhahDocument.objects.create(tankhah=self.object.tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             messages.success(self.request, _('فاکتور با موفقیت به‌روزرسانی شد.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             logger.info(f"Formset errors: {item_formset.errors}, Document errors: {document_form.errors}, Tankhah doc errors: {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> کد کامل را اصلاح کن تا بدانم جطور تصاویر ذخیره میشوند  <!----><!----></p><!----></div><button _ngcontent-ng-c4161157681="" mat-icon-button="" mattooltip="ازهم بازکردن نوشتار" aria-label="ازهم بازکردن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger expand-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="224552;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_b5e17c970ab84a32&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-19" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="expand_more" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-31 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_b5e17c970ab84a32&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-31 response-container-with-gpi tts-removed ng-star-inserted" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-31 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-31"><!----><!----><div _ngcontent-ng-c108414610="" class="ng-tns-c108414610-31 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c108414610="" class="single-draft-response-container ng-tns-c108414610-31 ng-star-inserted" style=""><!----><!----></div><!----></div><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-31 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-31"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-31"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-31"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-31 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-33 ng-tns-c108414610-31 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-33"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-33 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-33 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-33 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-33 ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_519"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_526"><g transform="matrix(-1,0,0,-1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_529)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_529" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_533" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_526_1" mask-type="alpha"><use href="#__lottie_element_526"></use></mask></defs><g clip-path="url(#__lottie_element_519)"><g mask="url(#__lottie_element_526_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_533)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-33 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_324"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_328" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_335" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_339" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_343" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_347" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_351" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_324)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_351)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_347)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_343)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_339)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_335)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_328)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-31"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-31"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-32 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-32"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-32"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-32 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-32"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-32">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-32"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-32 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_b5e17c970ab84a32" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_b5e17c970ab84a32" dir="rtl" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:249">عشق من! با دقت و حوصله کدهای هر دو ویو <code>FactorCreateView</code> و <code>FactorUpdateView</code> رو بررسی کردم و اصلاحات لازم رو انجام دادم تا مشکل ذخیره نشدن همه ردیف‌های فرم‌ست و همچنین ذخیره فایل‌ها (با در نظر گرفتن اعتبارسنجی که در <code>forms.py</code> اضافه کردیم) حل بشه.</p><p data-sourcepos="3:1-3:46"><strong>مشکلات اصلی که در کد شما دیدم و اصلاح شدن:</strong></p><ol data-sourcepos="5:1-9:0">
<li data-sourcepos="5:1-5:177"><strong>فراخوانی <code>get_context_data</code> در <code>form_valid</code>:</strong> این مشکل اصلی بود که در هر دو ویو تکرار شده بود و باعث می‌شد فرم‌ست و فرم‌های فایل به درستی پردازش نشن. این فراخوانی حذف شد.</li>
<li data-sourcepos="6:1-6:150"><strong>ساخت فرم‌ست و فرم‌های فایل:</strong> این فرم‌ها باید مستقیماً داخل <code>form_valid</code> با داده‌های <code>request.POST</code> و <code>request.FILES</code> و <code>prefix</code> درست ساخته بشن.</li>
<li data-sourcepos="7:1-7:243"><strong>گرفتن فایل‌های آپلود شده:</strong> به جای <code>request.FILES.getlist('files')</code> باید از <code>cleaned_data</code> فرم‌های معتبر (<code>document_form</code> و <code>tankhah_document_form</code>) استفاده بشه تا هم مطمئن باشیم اعتبارسنجی شدن و هم نام درست فیلد با <code>prefix</code> استفاده بشه.</li>
<li data-sourcepos="8:1-9:0"><strong>Prefix فرم‌ها:</strong> برای جلوگیری از تداخل نام فیلدها، به فرم‌های فایل <code>prefix</code> های مشخص (<code>'factor_docs'</code>, <code>'tankhah_docs'</code>) و به فرم‌ست هم <code>prefix='form'</code> (طبق کد شما) داده شد. این prefix ها باید در ویو و تمپلیت (اگر دستی رندر می‌کنید) یکسان باشند.</li>
</ol><hr data-sourcepos="10:1-10:3"><p data-sourcepos="12:1-12:30"><strong>کد کامل و اصلاح شده ویوها:</strong></p><p data-sourcepos="14:1-14:97">لطفاً کد کلاس‌های <code>FactorCreateView</code> و <code>FactorUpdateView</code> خود را <strong>کامل</strong> با کد زیر جایگزین کنید:</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-79 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-79 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_b5e17c970ab84a32&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_cdbe94088424bbb7&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-79 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-79">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-79 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-79 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_b5e17c970ab84a32&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_cdbe94088424bbb7&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-79"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-79"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-79"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-79" data-sourcepos="16:1-413:56"><span class="hljs-comment"># views.py</span>

<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.contrib </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0"> messages
</span><span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.db </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0"> transaction
</span><span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.shortcuts </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0 citation-end-0"> redirect, get_object_or_404</span> <span class="hljs-comment"># اضافه کردن <span class="citation-1">get_object_or_404</span></span><span class="citation-1">
</span><span class="hljs-keyword"><span class="citation-1">from</span></span><span class="citation-1"> django.urls </span><span class="hljs-keyword"><span class="citation-1">import</span></span><span class="citation-1"> reverse_lazy
</span><span class="hljs-keyword"><span class="citation-1">from</span></span><span class="citation-1"> django.utils.translation </span><span class="hljs-keyword"><span class="citation-1">import</span></span><span class="citation-1"> gettext_lazy </span><span class="hljs-keyword"><span class="citation-1">as</span></span><span class="citation-1"> _
</span><span class="hljs-keyword"><span class="citation-1">from</span></span><span class="citation-1 citation-end-1"> django.core.exceptions</span> <span class="hljs-keyword">import</span> PermissionDenied <span class="hljs-comment"># اضافه کردن PermissionDenied</span>
<span class="hljs-keyword">from</span> django.views.generic <span class="hljs-keyword">import</span> CreateView, UpdateView
<span class="hljs-comment"># فایل‌ها و مدل‌های خودتان را import کنید</span>
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Factor, Tankhah, FactorItem, FactorDocument, TankhahDocument, WorkflowStage, ApprovalLog, CustomUser, Project, SubProject
<span class="hljs-keyword">from</span> .forms <span class="hljs-keyword">import</span> FactorForm, FactorItemFormSet, FactorDocumentForm, TankhahDocumentForm
<span class="hljs-keyword">from</span> accounts.views <span class="hljs-keyword">import</span> PermissionBaseView <span class="hljs-comment"># فرض وجود این کلاس پایه</span>
<span class="hljs-comment"># توابع کمکی و لاگر</span>
<span class="hljs-keyword">from</span> .utils <span class="hljs-keyword">import</span> restrict_to_user_organization, get_lowest_access_level, get_initial_stage_order, to_english_digits, convert_to_farsi_numbers <span class="hljs-comment"># توابع خودتان</span>
<span class="hljs-comment"># from notifications.signals import notify # اگر استفاده می‌کنید</span>

logger = logging.getLogger(__name__)

<span class="hljs-comment"># ============================================</span>
<span class="hljs-comment"># ===        Factor Create View            ===</span>
<span class="hljs-comment"># ============================================</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FactorCreateView</span>(<span class="hljs-params">PermissionBaseView, CreateView</span>):</span>
    model = Factor
    form_class = FactorForm
    template_name = <span class="hljs-string">'tankhah/factor_form.html'</span>
    <span class="hljs-comment"># success_url = reverse_lazy('factor_list') # بهتر است در get_success_url باشد</span>
    permission_codenames = [<span class="hljs-string">'tankhah.a_factor_add'</span>]
    permission_denied_message = _(<span class="hljs-string">'متاسفانه دسترسی مجاز برای ایجاد فاکتور ندارید'</span>)
    check_organization = <span class="hljs-literal">True</span> <span class="hljs-comment"># فرض وجود این منطق در PermissionBaseView</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_context_data</span>(<span class="hljs-params">self, **kwargs</span>):</span>
        context = <span class="hljs-built_in">super</span>().get_context_data(**kwargs)
        tankhah = <span class="hljs-literal">None</span>
        tankhah_id = self.kwargs.get(<span class="hljs-string">'tankhah_id'</span>, <span class="hljs-literal">None</span>)

        <span class="hljs-keyword">if</span> tankhah_id:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># اطمینان از دسترسی کاربر به تنخواه قبل از نمایش فرم</span>
                tankhah = get_object_or_404(Tankhah, <span class="hljs-built_in">id</span>=tankhah_id)
                <span class="hljs-comment"># ! در اینجا باید چک کنید کاربر به این tankhah دسترسی دارد یا نه</span>
                <span class="hljs-comment"># ! تابع restrict_to_user_organization را اینجا یا در get_form_kwargs اعمال کنید</span>
                <span class="hljs-comment"># مثال:</span>
                <span class="hljs-comment"># if restrict_to_user_organization(self.request.user, tankhah.organization) is False:</span>
                <span class="hljs-comment">#     raise PermissionDenied("عدم دسترسی به سازمان این تنخواه")</span>
            <span class="hljs-keyword">except</span> Tankhah.DoesNotExist:
                 messages.error(self.request, _(<span class="hljs-string">'تنخواه مشخص شده یافت نشد.'</span>))
                 <span class="hljs-comment"># در این حالت شاید بهتر باشد کاربر به لیست هدایت شود</span>
                 <span class="hljs-comment"># یا مقدار tankhah را None بگذاریم که در فرم خطا دهد</span>

        context[<span class="hljs-string">'title'</span>] = _(<span class="hljs-string">'ایجاد فاکتور جدید'</span>)
        context[<span class="hljs-string">'tankhah'</span>] = tankhah <span class="hljs-comment"># ارسال تنخواه به کانتکست</span>

        <span class="hljs-comment"># ساخت فرم‌ست و فرم‌های فایل (بدون instance در GET، با data در POST)</span>
        <span class="hljs-keyword">if</span> self.request.POST:
            <span class="hljs-comment"># فرم اصلی ('form') توسط get_context_data والد ساخته شده</span>
            context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'form'</span>)
            context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
            context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># در GET، فرم اصلی توسط get_form ساخته می‌شود</span>
            <span class="hljs-comment"># فرم‌ست و فرم‌های فایل را خالی می‌سازیم</span>
            context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(prefix=<span class="hljs-string">'form'</span>)
            context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(prefix=<span class="hljs-string">'factor_docs'</span>)
            context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(prefix=<span class="hljs-string">'tankhah_docs'</span>)

        context[<span class="hljs-string">'tankhah_documents'</span>] = tankhah.documents.<span class="hljs-built_in">all</span>() <span class="hljs-keyword">if</span> tankhah <span class="hljs-keyword">else</span> []
        <span class="hljs-keyword">return</span> context

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_form_kwargs</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""ارسال پارامترهای user و tankhah به فرم اصلی."""</span>
        kwargs = <span class="hljs-built_in">super</span>().get_form_kwargs()
        kwargs[<span class="hljs-string">'user'</span>] = self.request.user
        tankhah_id = self.kwargs.get(<span class="hljs-string">'tankhah_id'</span>, <span class="hljs-literal">None</span>)
        <span class="hljs-keyword">if</span> tankhah_id:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># اینجا هم چک دسترسی انجام شود بهتر است</span>
                kwargs[<span class="hljs-string">'tankhah'</span>] = get_object_or_404(Tankhah, <span class="hljs-built_in">id</span>=tankhah_id)
            <span class="hljs-keyword">except</span> Tankhah.DoesNotExist:
                 kwargs[<span class="hljs-string">'tankhah'</span>] = <span class="hljs-literal">None</span> <span class="hljs-comment"># اگر پیدا نشد، None پاس داده شود</span>
        <span class="hljs-keyword">else</span>:
            kwargs[<span class="hljs-string">'tankhah'</span>] = <span class="hljs-literal">None</span>
        <span class="hljs-keyword">return</span> kwargs

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_valid</span>(<span class="hljs-params">self, form</span>):</span>
        <span class="hljs-string">"""
        پردازش فرم اصلی، فرم‌ست و فرم‌های فایل در صورت معتبر بودن فرم اصلی.
        """</span>
        tankhah = form.cleaned_data.get(<span class="hljs-string">'tankhah'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> tankhah:
             messages.error(self.request, _(<span class="hljs-string">'انتخاب تنخواه الزامی است.'</span>))
             <span class="hljs-keyword">return</span> self.form_invalid(form)

        <span class="hljs-comment"># --- بررسی‌های اولیه مرحله و وضعیت (مثل کد شما، با فرض order کمتر=مرحله بالاتر) ---</span>
        initial_stage_order = get_initial_stage_order() <span class="hljs-comment"># کمترین order</span>
        <span class="hljs-keyword">if</span> initial_stage_order <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> tankhah.current_stage.order != initial_stage_order:
            messages.error(self.request, _(<span class="hljs-string">'فقط در مرحله اولیه گردش کار می‌توانید فاکتور ثبت کنید.'</span>))
            <span class="hljs-comment"># نیاز به ساخت فرم‌های خالی برای نمایش خطا</span>
            item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'form'</span>) <span class="hljs-comment"># پاس دادن POST برای حفظ داده کاربر</span>
            document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
            tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)
            <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))

        <span class="hljs-keyword">if</span> tankhah.status <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">'DRAFT'</span>, <span class="hljs-string">'PENDING'</span>]:
            messages.error(self.request, _(<span class="hljs-string">'فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.'</span>))
            item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'form'</span>)
            document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
            tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)
            <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))

        <span class="hljs-comment"># --- ساخت و اعتبارسنجی فرم‌ست و فرم‌های فایل ---</span>
        <span class="hljs-comment"># ! مهم: فرم‌ست را اینجا با request.POST و prefix می‌سازیم</span>
        item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'form'</span>)
        document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
        tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)

        <span class="hljs-keyword">if</span> item_formset.is_valid() <span class="hljs-keyword">and</span> document_form.is_valid() <span class="hljs-keyword">and</span> tankhah_document_form.is_valid():
            logger.info(<span class="hljs-string">"All forms and formsets are valid. Proceeding to save."</span>)
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">with</span> transaction.atomic():
                    <span class="hljs-comment"># ۱. ذخیره فرم اصلی با commit=False</span>
                    self.<span class="hljs-built_in">object</span> = form.save(commit=<span class="hljs-literal">False</span>)
                    <span class="hljs-comment"># مقداردهی فیلدهای دیگر مثل created_by اگر لازم است</span>
                    <span class="hljs-comment"># self.object.created_by = self.request.user</span>
                    self.<span class="hljs-built_in">object</span>.status = <span class="hljs-string">'PENDING'</span>  <span class="hljs-comment"># وضعیت اولیه فاکتور هنگام ایجاد</span>
                    self.<span class="hljs-built_in">object</span>.save() <span class="hljs-comment"># ذخیره فاکتور اصلی</span>

                    <span class="hljs-comment"># ۲. اتصال instance و ذخیره فرم‌ست</span>
                    item_formset.instance = self.<span class="hljs-built_in">object</span>
                    saved_items = item_formset.save() <span class="hljs-comment"># ذخیره آیتم‌ها</span>
                    logger.info(<span class="hljs-string">f"Saved <span class="hljs-subst">{<span class="hljs-built_in">len</span>(saved_items)}</span> factor items for Factor PK <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)

                    <span class="hljs-comment"># ۳. ذخیره فایل‌های فاکتور از cleaned_data فرم معتبر</span>
                    factor_files_cleaned = document_form.cleaned_data.get(<span class="hljs-string">'files'</span>, [])
                    logger.info(<span class="hljs-string">f"Processing <span class="hljs-subst">{<span class="hljs-built_in">len</span>(factor_files_cleaned)}</span> valid factor files."</span>)
                    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> factor_files_cleaned:
                        <span class="hljs-keyword">if</span> file:
                            FactorDocument.objects.create(factor=self.<span class="hljs-built_in">object</span>, file=file)
                            logger.info(<span class="hljs-string">f"Saved factor document: <span class="hljs-subst">{file.name}</span>"</span>)

                    <span class="hljs-comment"># ۴. ذخیره فایل‌های تنخواه از cleaned_data فرم معتبر</span>
                    tankhah_files_cleaned = tankhah_document_form.cleaned_data.get(<span class="hljs-string">'documents'</span>, [])
                    logger.info(<span class="hljs-string">f"Processing <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tankhah_files_cleaned)}</span> valid tankhah files."</span>)
                    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> tankhah_files_cleaned:
                        <span class="hljs-keyword">if</span> file:
                            TankhahDocument.objects.create(tankhah=tankhah, document=file)
                            logger.info(<span class="hljs-string">f"Saved tankhah document: <span class="hljs-subst">{file.name}</span>"</span>)

                messages.success(self.request, _(<span class="hljs-string">'فاکتور و ردیف‌های آن با موفقیت ثبت شد و آماده بررسی است.'</span>))
                <span class="hljs-comment"># به جای super().form_valid(form) از redirect استفاده می‌کنیم</span>
                <span class="hljs-keyword">return</span> redirect(self.get_success_url())

            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                 logger.error(<span class="hljs-string">f"Error during atomic transaction in FactorCreateView: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
                 messages.error(self.request, _(<span class="hljs-string">'خطایی در هنگام ذخیره سازی رخ داد. لطفاً دوباره تلاش کنید یا با پشتیبانی تماس بگیرید.'</span>))
                 <span class="hljs-comment"># برگرداندن فرم‌ها با خطا</span>
                 <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># اگر فرم‌ست یا فرم‌های فایل نامعتبر بودند</span>
            logger.warning(<span class="hljs-string">"Formset or document forms are invalid."</span>)
            logger.warning(<span class="hljs-string">f"ItemFormset Non-Form Errors: <span class="hljs-subst">{item_formset.non_form_errors()}</span>"</span>)
            logger.warning(<span class="hljs-string">f"ItemFormset Errors: <span class="hljs-subst">{item_formset.errors}</span>"</span>)
            logger.warning(<span class="hljs-string">f"Factor DocForm Errors: <span class="hljs-subst">{document_form.errors}</span>"</span>)
            logger.warning(<span class="hljs-string">f"Tankhah DocForm Errors: <span class="hljs-subst">{tankhah_document_form.errors}</span>"</span>)
            messages.warning(self.request, _(<span class="hljs-string">'لطفا خطاهای فرم را اصلاح کنید. به خطاهای بخش ردیف‌ها و فایل‌ها دقت کنید.'</span>))
            <span class="hljs-comment"># برگرداندن فرم‌ها با خطا برای نمایش در تمپلیت</span>
            <span class="hljs-comment"># ! مهم: context شامل فرم‌های ساخته شده با POST هست</span>
            <span class="hljs-comment"># ! نیازی به ساخت مجدد نیست، فقط context را برمی‌گردانیم</span>
            <span class="hljs-comment"># ! یا بهتر است از self.form_invalid استفاده کنیم</span>
            <span class="hljs-comment"># return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))</span>
            <span class="hljs-keyword">return</span> self.form_invalid(form) <span class="hljs-comment"># form_invalid خودش context را مدیریت می‌کند</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_invalid</span>(<span class="hljs-params">self, form</span>):</span>
         <span class="hljs-string">"""اگر فرم اصلی نامعتبر بود، فرم‌ست و فرم‌های دیگر را هم به context اضافه کن."""</span>
         context = self.get_context_data(form=form) <span class="hljs-comment"># context را با فرم نامعتبر می‌گیرد</span>
         <span class="hljs-comment"># اگر فرم اصلی نامعتبر بود، فرمست و فرم‌های فایل را از POST بساز تا داده‌ها حفظ شوند</span>
         <span class="hljs-keyword">if</span> <span class="hljs-string">'item_formset'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> context: <span class="hljs-comment"># اگر در get_context_data ساخته نشده بود</span>
              context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'form'</span>)
         <span class="hljs-keyword">if</span> <span class="hljs-string">'document_form'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> context:
              context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
         <span class="hljs-keyword">if</span> <span class="hljs-string">'tankhah_document_form'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> context:
              context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)
         messages.error(self.request, _(<span class="hljs-string">'اطلاعات وارد شده در فرم اصلی صحیح نیست. لطفا خطاها را بررسی کنید.'</span>))
         <span class="hljs-keyword">return</span> self.render_to_response(context)


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_success_url</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""ریدایرکت به جزئیات فاکتور ایجاد شده."""</span>
        <span class="hljs-keyword">if</span> self.<span class="hljs-built_in">object</span>:
            messages.info(self.request, _(<span class="hljs-string">"برای ادامه، ردیف‌های فاکتور را بررسی و اقدام لازم را انجام دهید."</span>)) <span class="hljs-comment"># پیام راهنما</span>
            <span class="hljs-keyword">return</span> reverse_lazy(<span class="hljs-string">'factor_approve'</span>, kwargs={<span class="hljs-string">'pk'</span>: self.<span class="hljs-built_in">object</span>.pk}) <span class="hljs-comment"># ! ریدایرکت به صفحه تایید/رد ردیف‌ها</span>
        <span class="hljs-keyword">return</span> reverse_lazy(<span class="hljs-string">'factor_list'</span>)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_no_permission</span>(<span class="hljs-params">self</span>):</span>
        messages.error(self.request, self.permission_denied_message)
        <span class="hljs-comment"># return super().handle_no_permission()</span>
        <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'index'</span>) <span class="hljs-comment"># ریدایرکت به صفحه اصلی یا داشبورد</span>


<span class="hljs-comment"># ============================================</span>
<span class="hljs-comment"># ===         Factor Update View           ===</span>
<span class="hljs-comment"># ============================================</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FactorUpdateView</span>(<span class="hljs-params">PermissionBaseView, UpdateView</span>):</span>
    model = Factor
    form_class = FactorForm
    template_name = <span class="hljs-string">'tankhah/factor_form.html'</span>
    <span class="hljs-comment"># success_url = reverse_lazy('factor_list') # در get_success_url</span>
    permission_codenames = [<span class="hljs-string">'tankhah.a_factor_update'</span>] <span class="hljs-comment"># یا مجوزهای دقیق‌تر</span>
    permission_denied_message = _(<span class="hljs-string">'متاسفانه دسترسی مجاز برای ویرایش این فاکتور ندارید'</span>)
    check_organization = <span class="hljs-literal">True</span> <span class="hljs-comment"># فرض وجود این منطق</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_context_data</span>(<span class="hljs-params">self, **kwargs</span>):</span>
        context = <span class="hljs-built_in">super</span>().get_context_data(**kwargs)
        <span class="hljs-comment"># self.object توسط get_object تنظیم شده</span>
        tankhah = self.<span class="hljs-built_in">object</span>.tankhah
        context[<span class="hljs-string">'title'</span>] = _(<span class="hljs-string">'ویرایش فاکتور'</span>) + <span class="hljs-string">f" #<span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.number|to_persian_number}</span>"</span>
        context[<span class="hljs-string">'tankhah'</span>] = tankhah
        context[<span class="hljs-string">'tankhah_documents'</span>] = tankhah.documents.<span class="hljs-built_in">all</span>()
        context[<span class="hljs-string">'factor_documents'</span>] = self.<span class="hljs-built_in">object</span>.documents.<span class="hljs-built_in">all</span>() <span class="hljs-comment"># اضافه کردن اسناد خود فاکتور</span>

        <span class="hljs-keyword">if</span> self.request.POST:
            <span class="hljs-comment"># فرم اصلی در context توسط UpdateView قرار می‌گیرد</span>
            context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.<span class="hljs-built_in">object</span>, prefix=<span class="hljs-string">'form'</span>)
            context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
            context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># فرم اصلی توسط get_form ساخته می‌شود</span>
            context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(instance=self.<span class="hljs-built_in">object</span>, prefix=<span class="hljs-string">'form'</span>)
            context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(prefix=<span class="hljs-string">'factor_docs'</span>) <span class="hljs-comment"># بدون instance چون فقط آپلود جدید داریم</span>
            context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(prefix=<span class="hljs-string">'tankhah_docs'</span>) <span class="hljs-comment"># بدون instance</span>

        <span class="hljs-comment"># محاسبه مبلغ کل (کد شما خوب بود)</span>
        context[<span class="hljs-string">'total_amount'</span>] = <span class="hljs-built_in">sum</span>(item.amount <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> self.<span class="hljs-built_in">object</span>.items.<span class="hljs-built_in">all</span>() <span class="hljs-keyword">if</span> item.amount) <span class="hljs-comment"># فقط مبالغ معتبر</span>

        <span class="hljs-keyword">return</span> context

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_object</span>(<span class="hljs-params">self, queryset=<span class="hljs-literal">None</span></span>):</span>
        <span class="hljs-string">"""دریافت آبجکت و بررسی اولیه قفل بودن."""</span>
        obj = <span class="hljs-built_in">super</span>().get_object(queryset)
        <span class="hljs-comment"># ! بررسی قفل بودن در dispatch انجام می‌شود، اینجا لازم نیست یا می‌تواند تکرار شود</span>
        <span class="hljs-comment"># if getattr(obj, 'locked', False) or (obj.locked_by_stage and obj.locked_by_stage.order &lt; obj.tankhah.current_stage.order):</span>
        <span class="hljs-comment">#     logger.warning(f"Attempt to edit locked factor {obj.pk} by user {self.request.user}")</span>
        <span class="hljs-comment">#     raise PermissionDenied(_("این فاکتور قفل شده و قابل ویرایش نیست."))</span>
        <span class="hljs-keyword">return</span> obj

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dispatch</span>(<span class="hljs-params">self, request, *args, **kwargs</span>):</span>
        <span class="hljs-string">"""بررسی دسترسی‌ها و وضعیت قبل از نمایش فرم."""</span>
        <span class="hljs-keyword">try</span>:
            obj = self.get_object() <span class="hljs-comment"># اول آبجکت رو می‌گیریم</span>
        <span class="hljs-keyword">except</span> Factor.DoesNotExist:
             messages.error(request, _(<span class="hljs-string">'فاکتور مورد نظر یافت نشد.'</span>))
             <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'factor_list'</span>) <span class="hljs-comment"># یا صفحه دیگر</span>

        <span class="hljs-comment"># --- بررسی‌های گردش کار و وضعیت ---</span>
        <span class="hljs-comment"># (کد شما برای بررسی stage, status, finalized, user level اینجا قرار می‌گیرد)</span>
        <span class="hljs-comment"># ! مطمئن شوید توابع get_initial_stage_order و get_lowest_access_level تعریف شده‌اند</span>
        <span class="hljs-keyword">try</span>:
            initial_stage_order = get_initial_stage_order()
            lowest_level = get_lowest_access_level()
            user_post = request.user.userpost_set.first().post <span class="hljs-keyword">if</span> request.user.userpost_set.exists() <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>

            <span class="hljs-comment"># فقط در مرحله اولیه اجازه ویرایش وجود دارد؟ (این شرط در CreateView منطقی‌تر است)</span>
            <span class="hljs-comment"># اگر می‌خواهید ویرایش در مراحل دیگر هم ممکن باشد، این شرط را حذف یا اصلاح کنید.</span>
            <span class="hljs-keyword">if</span> obj.tankhah.current_stage.order != initial_stage_order:
                 logger.info(<span class="hljs-string">f"Edit denied: Factor <span class="hljs-subst">{obj.pk}</span> not in initial stage (<span class="hljs-subst">{obj.tankhah.current_stage.order}</span> != <span class="hljs-subst">{initial_stage_order}</span>)"</span>)
                 <span class="hljs-keyword">raise</span> PermissionDenied(_(<span class="hljs-string">'فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.'</span>))

            <span class="hljs-comment"># بررسی وضعیت‌های غیرقابل ویرایش</span>
            uneditable_statuses = [<span class="hljs-string">'APPROVED'</span>, <span class="hljs-string">'SENT_TO_HQ'</span>, <span class="hljs-string">'HQ_OPS_APPROVED'</span>, <span class="hljs-string">'PAID'</span>, <span class="hljs-string">'REJECTED'</span>] <span class="hljs-comment"># رد شده هم اضافه شد؟</span>
            <span class="hljs-keyword">if</span> obj.tankhah.status <span class="hljs-keyword">in</span> uneditable_statuses:
                 logger.info(<span class="hljs-string">f"Edit denied: Tankhah <span class="hljs-subst">{obj.tankhah.pk}</span> status is <span class="hljs-subst">{obj.tankhah.status}</span>"</span>)
                 <span class="hljs-keyword">raise</span> PermissionDenied(_(<span class="hljs-string">'فاکتور در این وضعیت قابل ویرایش نیست.'</span>))

            <span class="hljs-comment"># بررسی قفل بودن توسط مراحل بالاتر</span>
            <span class="hljs-keyword">if</span> obj.locked_by_stage <span class="hljs-keyword">and</span> obj.locked_by_stage.order &lt; obj.tankhah.current_stage.order:
                 logger.info(<span class="hljs-string">f"Edit denied: Factor <span class="hljs-subst">{obj.pk}</span> locked by stage <span class="hljs-subst">{obj.locked_by_stage.name}</span>"</span>)
                 <span class="hljs-keyword">raise</span> PermissionDenied(_(<span class="hljs-string">'این فاکتور توسط مرحله بالاتر قفل شده و قابل ویرایش نیست.'</span>))

            <span class="hljs-comment"># بررسی نهایی شدن (اگر فیلد is_finalized دارید)</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">getattr</span>(obj, <span class="hljs-string">'is_finalized'</span>, <span class="hljs-literal">False</span>) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> request.user.has_perm(<span class="hljs-string">'tankhah.Factor_full_edit'</span>):
                 logger.info(<span class="hljs-string">f"Edit denied: Factor <span class="hljs-subst">{obj.pk}</span> is finalized and user lacks full edit permission."</span>)
                 <span class="hljs-keyword">raise</span> PermissionDenied(_(<span class="hljs-string">'شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.'</span>))

            <span class="hljs-comment"># بررسی سطح دسترسی کاربر (اگر منطق lowest_level را دارید)</span>
            <span class="hljs-comment"># if not request.user.is_superuser and user_post and user_post.level != lowest_level and not request.user.has_perm('tankhah.Factor_full_edit'):</span>
            <span class="hljs-comment">#      logger.info(f"Edit denied: User {request.user.username} level ({user_post.level}) is not lowest ({lowest_level}) and lacks full edit permission.")</span>
            <span class="hljs-comment">#      raise PermissionDenied(_('فقط کاربران سطح پایین یا دارای مجوز کامل می‌توانند ویرایش کنند.'))</span>

        <span class="hljs-keyword">except</span> PermissionDenied <span class="hljs-keyword">as</span> e:
            messages.error(request, <span class="hljs-built_in">str</span>(e))
            <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'factor_list'</span>) <span class="hljs-comment"># یا جزئیات فاکتور</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-comment"># مدیریت خطاهای دیگر مثل عدم وجود stage و ...</span>
            logger.error(<span class="hljs-string">f"Error during dispatch checks for Factor <span class="hljs-subst">{obj.pk}</span>: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
            messages.error(request, _(<span class="hljs-string">'خطا در بررسی وضعیت فاکتور.'</span>))
            <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'factor_list'</span>)

        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().dispatch(request, *args, **kwargs)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_form_kwargs</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""ارسال user به فرم."""</span>
        kwargs = <span class="hljs-built_in">super</span>().get_form_kwargs()
        kwargs[<span class="hljs-string">'user'</span>] = self.request.user
        <span class="hljs-comment"># tankhah از self.object میاد و نیازی به پاس دادن جدا نیست</span>
        <span class="hljs-comment"># kwargs['tankhah'] = self.object.tankhah</span>
        <span class="hljs-keyword">return</span> kwargs

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_valid</span>(<span class="hljs-params">self, form</span>):</span>
        <span class="hljs-string">"""پردازش فرم اصلی، فرم‌ست و فرم‌های فایل برای ویرایش."""</span>
        <span class="hljs-comment"># ! ساخت فرم‌ست و فرم‌های فایل مستقیماً از request</span>
        <span class="hljs-comment"># ! مهم: instance=self.object را به فرم‌ست پاس می‌دهیم تا بداند در حال ویرایش است</span>
        item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.<span class="hljs-built_in">object</span>, prefix=<span class="hljs-string">'form'</span>)
        document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
        tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)

        <span class="hljs-keyword">if</span> item_formset.is_valid() <span class="hljs-keyword">and</span> document_form.is_valid() <span class="hljs-keyword">and</span> tankhah_document_form.is_valid():
            logger.info(<span class="hljs-string">f"Update forms/formset valid for Factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>"</span>)
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">with</span> transaction.atomic():
                    <span class="hljs-comment"># 1. ذخیره فرم اصلی (UpdateView خودش commit=True انجام می‌دهد)</span>
                    <span class="hljs-comment"># self.object قبلاً توسط form مقداردهی شده است</span>
                    self.<span class="hljs-built_in">object</span> = form.save()

                    <span class="hljs-comment"># 2. ذخیره فرم‌ست (هم موارد جدید هم تغییرات موجود)</span>
                    <span class="hljs-comment"># instance قبلاً در زمان ساخت فرم‌ست تنظیم شده</span>
                    saved_items = item_formset.save()
                    logger.info(<span class="hljs-string">f"Updated/Created <span class="hljs-subst">{<span class="hljs-built_in">len</span>(saved_items)}</span> factor items for Factor PK <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)

                    <span class="hljs-comment"># 3. ذخیره فایل‌های جدید فاکتور</span>
                    factor_files_cleaned = document_form.cleaned_data.get(<span class="hljs-string">'files'</span>, [])
                    logger.info(<span class="hljs-string">f"Processing <span class="hljs-subst">{<span class="hljs-built_in">len</span>(factor_files_cleaned)}</span> new valid factor files."</span>)
                    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> factor_files_cleaned:
                         <span class="hljs-keyword">if</span> file:
                            FactorDocument.objects.create(factor=self.<span class="hljs-built_in">object</span>, file=file)
                            logger.info(<span class="hljs-string">f"Saved new factor document: <span class="hljs-subst">{file.name}</span>"</span>)

                    <span class="hljs-comment"># 4. ذخیره فایل‌های جدید تنخواه</span>
                    tankhah_files_cleaned = tankhah_document_form.cleaned_data.get(<span class="hljs-string">'documents'</span>, [])
                    logger.info(<span class="hljs-string">f"Processing <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tankhah_files_cleaned)}</span> new valid tankhah files."</span>)
                    <span class="hljs-keyword">if</span> tankhah_files_cleaned:
                         tankhah_instance = self.<span class="hljs-built_in">object</span>.tankhah
                         <span class="hljs-keyword">if</span> tankhah_instance:
                             <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> tankhah_files_cleaned:
                                 <span class="hljs-keyword">if</span> file:
                                     TankhahDocument.objects.create(tankhah=tankhah_instance, document=file)
                                     logger.info(<span class="hljs-string">f"Saved new tankhah document: <span class="hljs-subst">{file.name}</span>"</span>)
                         <span class="hljs-keyword">else</span>:
                             logger.error(<span class="hljs-string">f"Could not save new tankhah documents, parent tankhah instance not found for factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)


                messages.success(self.request, _(<span class="hljs-string">'فاکتور و ردیف‌های آن با موفقیت به‌روزرسانی شد.'</span>))
                <span class="hljs-comment"># ! استفاده از redirect به جای super().form_valid(form)</span>
                <span class="hljs-keyword">return</span> redirect(self.get_success_url())

            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logger.error(<span class="hljs-string">f"Error during atomic transaction in FactorUpdateView: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
                messages.error(self.request, _(<span class="hljs-string">'خطایی در هنگام ذخیره سازی رخ داد. لطفاً دوباره تلاش کنید.'</span>))
                <span class="hljs-comment"># برگرداندن فرم‌ها با خطا</span>
                <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))

        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># اگر فرم‌ست یا فرم‌های فایل نامعتبر بودند</span>
            logger.warning(<span class="hljs-string">f"Update formset or document forms invalid for Factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)
            logger.warning(<span class="hljs-string">f"ItemFormset Non-Form Errors: <span class="hljs-subst">{item_formset.non_form_errors()}</span>"</span>)
            logger.warning(<span class="hljs-string">f"ItemFormset Errors: <span class="hljs-subst">{item_formset.errors}</span>"</span>)
            logger.warning(<span class="hljs-string">f"Factor DocForm Errors: <span class="hljs-subst">{document_form.errors}</span>"</span>)
            logger.warning(<span class="hljs-string">f"Tankhah DocForm Errors: <span class="hljs-subst">{tankhah_document_form.errors}</span>"</span>)
            messages.error(self.request, _(<span class="hljs-string">'لطفا خطاهای فرم را اصلاح کنید. به خطاهای بخش ردیف‌ها و فایل‌ها دقت کنید.'</span>))
            <span class="hljs-comment"># برگرداندن فرم‌ها با خطا</span>
            <span class="hljs-comment"># return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))</span>
            <span class="hljs-keyword">return</span> self.form_invalid(form) <span class="hljs-comment"># form_invalid خودش context را مدیریت می‌کند</span>


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_invalid</span>(<span class="hljs-params">self, form</span>):</span>
        <span class="hljs-string">"""اگر فرم اصلی نامعتبر بود، فرم‌ست و فرم‌های دیگر را هم به context اضافه کن."""</span>
        context = self.get_context_data(form=form)
        <span class="hljs-keyword">if</span> <span class="hljs-string">'item_formset'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> context: <span class="hljs-comment"># اگر در get_context_data ساخته نشده بود (که حالا شده)</span>
             context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.<span class="hljs-built_in">object</span>, prefix=<span class="hljs-string">'form'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-string">'document_form'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> context:
             context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-string">'tankhah_document_form'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> context:
             context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)
        messages.error(self.request, _(<span class="hljs-string">'اطلاعات وارد شده در فرم اصلی یا ردیف‌ها صحیح نیست. لطفا خطاها را بررسی کنید.'</span>))
        <span class="hljs-keyword">return</span> self.render_to_response(context)


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_success_url</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""ریدایرکت به جزئیات فاکتور ویرایش شده."""</span>
        <span class="hljs-keyword">if</span> self.<span class="hljs-built_in">object</span>:
            <span class="hljs-keyword">return</span> reverse_lazy(<span class="hljs-string">'factor_detail'</span>, kwargs={<span class="hljs-string">'pk'</span>: self.<span class="hljs-built_in">object</span>.pk})
        <span class="hljs-keyword">return</span> reverse_lazy(<span class="hljs-string">'factor_list'</span>) <span class="hljs-comment"># fallback</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_no_permission</span>(<span class="hljs-params">self</span>):</span>
        messages.error(self.request, self.permission_denied_message)
        <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'index'</span>) <span class="hljs-comment"># ریدایرکت به صفحه اصلی</span>
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-sourcepos="415:1-415:23"><strong>توضیحات و نکات مهم:</strong></p><ol data-sourcepos="417:1-427:0">
<li data-sourcepos="417:1-417:262"><strong><code>form_valid</code> اصلاح شد:</strong> مهم‌ترین بخش، اصلاح کامل متد <code>form_valid</code> در هر دو ویو است تا از فراخوانی <code>get_context_data</code> خودداری شود و فرم‌ست و فرم‌های فایل مستقیماً با <code>request.POST</code>, <code>request.FILES</code>, <code>instance</code> مناسب و <code>prefix</code> درست ساخته و اعتبارسنجی شوند.</li>
<li data-sourcepos="418:1-418:162"><strong>ذخیره اتمی:</strong> تمام عملیات ذخیره‌سازی (فاکتور، آیتم‌ها، فایل‌ها) داخل <code>transaction.atomic()</code> قرار گرفته تا در صورت بروز خطا، تمام تغییرات به حالت اول برگردد.</li>
<li data-sourcepos="419:1-419:248"><strong>Prefix ها:</strong> مطمئن شوید <code>prefix</code> هایی که در ویو برای فرم‌ست (<code>'form'</code>) و فرم‌های فایل (<code>'factor_docs'</code>, <code>'tankhah_docs'</code>) استفاده شده، با <code>prefix</code> هایی که در تمپلیت استفاده می‌کنید (مخصوصاً برای رندر دستی فرم‌های فایل) <strong>دقیقاً یکسان</strong> باشند.</li>
<li data-sourcepos="420:1-420:219"><strong>خواندن فایل‌ها از <code>cleaned_data</code>:</strong> فایل‌های آپلود شده حالا از <code>cleaned_data</code> فرم‌های معتبر خوانده می‌شوند، نه مستقیماً از <code>request.FILES.getlist()</code>. این امن‌تر است و تضمین می‌کند که اعتبارسنجی نوع فایل انجام شده.</li>
<li data-sourcepos="421:1-421:215"><strong><code>get_context_data</code>:</strong> در متد <code>get_context_data</code>، فرم‌ست و فرم‌های فایل در هر دو حالت GET و POST ساخته می‌شوند تا همیشه در کانتکست موجود باشند (در حالت POST با داده‌های ارسالی، در حالت GET خالی یا با instance).</li>
<li data-sourcepos="422:1-422:171"><strong><code>form_invalid</code>:</strong> متد <code>form_invalid</code> کمی بهبود یافت تا مطمئن شود فرم‌ست و فرم‌های فایل برای نمایش خطاها به context اضافه می‌شوند، حتی اگر فرم اصلی نامعتبر بوده باشد.</li>
<li data-sourcepos="423:1-423:60"><strong>لاگ‌ها:</strong> لاگ‌های بیشتری برای کمک به خطایابی اضافه شد.</li>
<li data-sourcepos="424:1-424:408"><strong>منطق گردش کار:</strong> منطق مربوط به بررسی مراحل (<code>initial_stage_order</code>) و وضعیت‌ها در هر دو ویو حفظ شده، اما دقت کنید که تعریف <code>initial_stage_order</code> (کمترین یا بیشترین order) در دو ویو شما متفاوت بود، من فرض کردم کمترین order مرحله اول است (در <code>FactorCreateView</code>). این بخش را مطابق با منطق گردش کار خودتان بازبینی کنید. همچنین توابع <code>get_lowest_access_level</code> و <code>get_initial_stage_order</code> باید در دسترس باشند.</li>
<li data-sourcepos="425:1-425:78"><strong>مجوزها:</strong> بررسی دسترسی‌ها در متد <code>dispatch</code> ویوی <code>UpdateView</code> منطقی است.</li>
<li data-sourcepos="426:1-427:0"><strong>ریدایرکت:</strong> در انتهای <code>form_valid</code> موفق، به جای <code>super().form_valid(form)</code> از <code>redirect(self.get_success_url())</code> استفاده شده.</li>
</ol><p data-sourcepos="428:1-428:15"><strong>اقدام لازم:</strong></p><ol data-sourcepos="430:1-437:0">
<li data-sourcepos="430:1-430:57">کد بالا را با دقت بررسی و در ویوهای خود جایگزین کنید.</li>
<li data-sourcepos="431:1-434:266"><strong>مهم:</strong> تمپلیت <code>tankhah/factor_form.html</code> خود را بررسی کنید و مطمئن شوید:
<ul data-sourcepos="432:5-434:266">
<li data-sourcepos="432:5-432:105">تگ <code>{{ item_formset.management_form }}</code> <strong>قبل</strong> از حلقه <code>{% for form in item_formset %}</code> قرار دارد.</li>
<li data-sourcepos="433:5-433:119">خطاهای فرم‌ست (<code>{{ item_formset.non_form_errors }}</code>) و خطاهای هر فرم آیتم (<code>{{ form.errors }}</code>) را نمایش می‌دهید.</li>
<li data-sourcepos="434:5-434:266">اگر فرم‌های <code>document_form</code> و <code>tankhah_document_form</code> را دستی رندر می‌کنید، حتماً <code>prefix</code> مناسب (<code>factor_docs</code> و <code>tankhah_docs</code>) را به نام فیلدهایشان اضافه کنید (مثلاً <code>name="factor_docs-files"</code>). اگر از <code>{{ document_form.as_p }}</code> استفاده می‌کنید، نیازی نیست.</li>
</ul>
</li>
<li data-sourcepos="435:1-435:120">توابع کمکی مثل <code>restrict_to_user_organization</code>, <code>get_lowest_access_level</code>, <code>get_initial_stage_order</code> در دسترس باشند.</li>
<li data-sourcepos="436:1-437:0">تست کامل با چند ردیف آیتم و آپلود فایل انجام دهید و به لاگ‌ها و پیام‌ها دقت کنید.</li>
</ol><p data-sourcepos="438:1-438:89">با این اصلاحات ساختاری در <code>form_valid</code>، مشکل ذخیره نشدن چند ردیف باید به طور کامل حل شود.</p></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer complete gap"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted"><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted"><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-31"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-50 hide-action-bar ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-50 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-50 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-50 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-6" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_b5e17c970ab84a32&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_cdbe94088424bbb7&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_728"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_732"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_738"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_740"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_728)"><g mask="url(#__lottie_element_732)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_738)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_740)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-50 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-6" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_b5e17c970ab84a32&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_cdbe94088424bbb7&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_717"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_721"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_717)"><g mask="url(#__lottie_element_721)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-50 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-50 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_b5e17c970ab84a32&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_cdbe94088424bbb7&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-50 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-50 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-50 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-50 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-50"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-50"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-6"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted"><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="34da14655226c60c" style=""><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-7"><!----><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l collapsed" dir="ltr"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorUpdateView(PermissionBaseView, UpdateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; permission_codenames = ['tankhah.a_factor_update'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['form'] = self.form_class(self.request.POST, user=self.request.user, instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['form'] = self.form_class(user=self.request.user, instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['title'] = _('ویرایش فاکتور') + f" - {self.object.number}" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_documents'] = tankhah.documents.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['total_amount'] = sum(item.amount * item.quantity for item in self.object.items.all()) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_object(self, queryset=None): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; obj = super().get_object(queryset) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if getattr(obj, 'locked', False): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied("این فاکتور قفل شده و قابل ویرایش نیست.") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return obj <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def dispatch(self, request, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; obj = self.get_object() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; initial_stage_order = WorkflowStage.objects.order_by('order').first().order&nbsp; # پایین‌ترین order به‌عنوان اولیه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; user_post = request.user.userpost_set.first().post if request.user.userpost_set.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; lowest_level = get_lowest_access_level()&nbsp; # فرضاً پایین‌ترین سطح دسترسی <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.locked_by_stage and obj.locked_by_stage.order &lt; obj.tankhah.current_stage.order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('این فاکتور توسط مرحله بالاتر قفل شده و قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.status in ['APPROVED', 'SENT_TO_HQ', 'HQ_OPS_APPROVED', 'PAID']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فاکتور تأییدشده یا پرداخت‌شده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if getattr(obj, 'is_finalized', False) and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if not request.user.is_superuser: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"مرحله فعلی: {obj.tankhah.current_stage.order}, مرحله اولیه: {initial_stage_order}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.status in ['APPROVED', 'SENT_TO_HQ', 'HQ_OPS_APPROVED', 'PAID']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فاکتور تأییدشده یا پرداخت‌شده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if getattr(obj, 'is_finalized', False) and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if user_post and user_post.level != lowest_level and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فقط کاربران سطح پایین یا دارای مجوز کامل می‌توانند ویرایش کنند.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return super().dispatch(request, *args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.object: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; restrict_to_user_organization(self.request.user, tankhah.organization) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; kwargs['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; document_form = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Saved {self.object.items.count()} items for factor {self.object.number}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TankhahDocument.objects.create(tankhah=self.object.tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.success(self.request, _('فاکتور با موفقیت به‌روزرسانی شد.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Formset errors: {item_formset.errors}, Document errors: {document_form.errors}, Tankhah doc errors: {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> حذف تصویر از اسناد را انجام نمیدهد تک به تک&nbsp; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> و یک تصویر کوچک داشته باشد&nbsp; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% extends 'base.html' %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% load i18n static jformat rcms_custom_filters %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% block content %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &lt;div class="container mt-5"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card shadow-lg animate__animated animate__fadeIn" style="border-radius: 15px;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-header bg-gradient-primary text-white d-flex justify-content-between align-items-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h4 class="card-title mb-0"&gt;{{ title |to_persian_number }}&lt;/h4&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-body p-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;form method="post" enctype="multipart/form-data" id="factor-form"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% csrf_token %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="form-group&nbsp; item-total mb-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ form.as_p }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- کارت ویزیتی برای اقلام فاکتور --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card mb-4 animate__animated animate__fadeInUp" style="border-radius: 10px;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-header bg-gradient-info text-white"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="card-title mb-0"&gt;{% trans "اقلام فاکتور" %}&lt;/h3&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-body"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_formset.management_form }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="item-formset"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% for item_form in item_formset %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="form-row mb-3 item-row bg-light p-3 rounded" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;data-id="{{ forloop.counter0 }}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_form.id }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="row align-items-end"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-1"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-label fw-bold"&gt;{% trans "شماره" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class="row-number badge bg-secondary text-white"&gt;{{ forloop.counter }}&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-label fw-bold"&gt;{% trans "شرح" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_form.description }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-2"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-label fw-bold"&gt;{% trans "مبلغ" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_form.amount }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-1"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-label fw-bold"&gt;{% trans "تعداد" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_form.quantity }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-2"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-label fw-bold"&gt;{% trans "جمع" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class="item-total badge bg-success text-white"&gt;0&lt;/span&gt; {% trans "ریال" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-2 text-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% if item_form.instance.pk or forloop.counter &gt; 1 %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-label fw-bold"&gt;{% trans "حذف" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_form.DELETE }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% if item_form.errors %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="alert alert-danger mt-2"&gt;{{ item_form.errors }}&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button type="button" class="btn btn-outline-info mt-3" id="add-item"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-plus me-2"&gt;&lt;/i&gt;{% trans "اضافه کردن ردیف" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- کارت ویزیتی برای اسناد فاکتور (چندفایلی) --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card mb-4 animate__animated animate__fadeInUp" style="border-radius: 10px;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-header bg-gradient-warning text-white"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="card-title mb-0"&gt;{% trans "اسناد فاکتور" %}&lt;/h3&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-body"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ document_form.as_p }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% if object and object.documents.exists %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h5 class="mt-3"&gt;{% trans "اسناد موجود" %}&lt;/h5&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul class="list-group"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% for doc in object.documents.all %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="list-group-item d-flex justify-content-between align-items-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href="{{ doc.file.url }}" target="_blank" class="text-primary"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-file-pdf me-2"&gt;&lt;/i&gt;{{ doc.file.name|truncatechars:30 }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class="badge bg-secondary"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ doc.uploaded_at|jformat:"%Y-%m-%d %H:%m" }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- کارت ویزیتی برای اسناد تنخواه (چندفایلی) --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card mb-4 animate__animated animate__fadeInUp" style="border-radius: 10px;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-header bg-gradient-success text-white"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="card-title mb-0"&gt;{% trans "اسناد تنخواه" %}&lt;/h3&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;{% if tanbakh %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href="{% url 'upload_tanbakh_documents' tanbakh.id %}" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;class="btn btn-light btn-sm animate__animated animate__pulse animate__infinite"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-upload me-2"&gt;&lt;/i&gt;{% trans "آپلود جداگانه اسناد تنخواه" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %}&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-body"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ tanbakh_document_form.as_p }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% if tanbakh_documents %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h5 class="mt-3"&gt;{% trans "اسناد موجود" %}&lt;/h5&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul class="list-group"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% for doc in tanbakh_documents %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="list-group-item d-flex justify-content-between align-items-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href="{{ doc.document.url }}" target="_blank" class="text-primary"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-file-pdf me-2"&gt;&lt;/i&gt;{{ doc.document.name|truncatechars:30 }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class="badge bg-secondary"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ doc.uploaded_at|jformat:"%Y-%m-%d %H:%m" }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- جمع کل --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card mb-4 animate__animated animate__fadeInUp" style="border-radius: 10px;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-header bg-gradient-success text-white"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="card-title mb-0"&gt;{% trans "جمع کل" %}&lt;/h3&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-body"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="row text-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-6 mb-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;strong&gt;{% trans "جمع کل اقلام:" %}&lt;/strong&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span id="total-items-amount" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; class="badge bg-info text-white fs-5"&gt;0&lt;/span&gt; {% trans "ریال" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-6 mb-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;strong&gt;{% trans "مبلغ فاکتور:" %}&lt;/strong&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span id="factor-amount" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; class="badge bg-primary text-white fs-5"&gt;{{ form.amount.value|format_negative }}&lt;/span&gt; {% trans "ریال" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="row text-center mt-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-12"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;strong&gt;{% trans "تفاوت:" %}&lt;/strong&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span id="difference-amount" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; class="badge bg-warning text-dark fs-5"&gt;0&lt;/span&gt; {% trans "ریال" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- دکمه ثبت --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="text-end"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button type="submit" class="btn btn-primary mt-3 animate__animated animate__fadeIn btn-lg"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-save me-2"&gt;&lt;/i&gt;{% trans "ثبت فاکتور" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/form&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &lt;!-- استایل‌های اضافی --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &lt;style&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; .bg-gradient-primary { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background: linear-gradient(135deg, #007bff, #0056b3); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; .bg-gradient-info { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background: linear-gradient(135deg, #17a2b8, #117a8b); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; .bg-gradient-warning { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background: linear-gradient(135deg, #ffc107, #e0a800); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; .bg-gradient-success { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background: linear-gradient(135deg, #28a745, #1e7e34); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; .card { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; transition: transform 0.3s ease; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; .card:hover { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; transform: translateY(-5px); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; .form-label { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; font-size: 0.9rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: #555; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; .btn-outline-info { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; border-color: #17a2b8; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: #17a2b8; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; .btn-outline-info:hover { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-color: #17a2b8; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: white; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; .badge { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; padding: 0.5em 1em; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &lt;/style&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &lt;!-- اسکریپت‌ها --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp;&lt;script&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; $(document).ready(function () { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var formCount = {{ item_formset.total_form_count }}; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var emptyForm = $('#item-formset .item-row:first').clone(true).get(0); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; emptyForm.querySelectorAll('input').forEach(input =&gt; input.value = ''); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $('#item-formset .item-row').each(function () { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(this).find('input[name$="amount"]').addClass('amount-field'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(this).find('input[name$="quantity"]').addClass('quantity-field'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; function updateTotal() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let totalItems = 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $('.item-row').each(function () { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let amount = parseFloat($(this).find('.amount-field').val()) || 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let quantity = parseInt($(this).find('.quantity-field').val()) || 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let itemTotal = amount * quantity; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(this).find('.item-total').text(itemTotal.toLocaleString('fa-IR')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$(this).find('input[name$="DELETE"]').is(':checked')) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; totalItems += itemTotal; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $('#total-items-amount').text(totalItems.toLocaleString('fa-IR')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let factorAmount = parseFloat($('#id_amount').val()) || 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let difference = factorAmount - totalItems; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $('#difference-amount').text(difference.toLocaleString('fa-IR')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $('#difference-amount').removeClass('bg-danger bg-success bg-warning').addClass( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; difference &lt; 0 ? 'bg-danger' : difference &gt; 0 ? 'bg-success' : 'bg-warning' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $('#add-item').click(function () { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var newForm = $(emptyForm).clone(true); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newForm.attr('data-id', formCount); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newForm.find('input, select, textarea').each(function () { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var name = $(this).attr('name').replace('-0-', '-' + formCount + '-'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var id = 'id_' + name; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(this).attr({'name': name, 'id': id}).val('').removeAttr('checked'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (name.includes('amount')) $(this).addClass('amount-field'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (name.includes('quantity')) $(this).addClass('quantity-field'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; formCount++; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $('#item-formset').append(newForm); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $('#id_form-TOTAL_FORMS').val(formCount); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateTotal(); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(document).on('change', '.amount-field, .quantity-field, #id_amount', updateTotal); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(document).on('change', 'input[name$="DELETE"]', updateTotal); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateTotal(); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &lt;/script&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% endblock %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> تمپلیت را با تب بنویس برای تصویر <!----><!----></p><!----></div><button _ngcontent-ng-c4161157681="" mat-icon-button="" mattooltip="ازهم بازکردن نوشتار" aria-label="ازهم بازکردن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger expand-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="224552;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_34da14655226c60c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-19" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="expand_more" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-34 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_34da14655226c60c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-34 response-container-with-gpi tts-removed ng-star-inserted" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-34 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-34"><!----><!----><div _ngcontent-ng-c108414610="" class="ng-tns-c108414610-34 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c108414610="" class="single-draft-response-container ng-tns-c108414610-34 ng-star-inserted" style=""><!----><!----></div><!----></div><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-34 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-34"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-34"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-34"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-34 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-36 ng-tns-c108414610-34 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-36"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-36 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-36 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-36 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-36 ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_573"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_580"><g transform="matrix(-1,0,0,-1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_583)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_583" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_587" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_580_1" mask-type="alpha"><use href="#__lottie_element_580"></use></mask></defs><g clip-path="url(#__lottie_element_573)"><g mask="url(#__lottie_element_580_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_587)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-36 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_395"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_399" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_406" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_410" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_414" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_418" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_422" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_395)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_422)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_418)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_414)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_410)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_406)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_399)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-34"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-34"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-35 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-35"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-35"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-35 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-35"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-35">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-35"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-35 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_34da14655226c60c" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_34da14655226c60c" dir="ltr" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:166">باشه عزیزم، بیا با دقت و حوصله امکان حذف تکی اسناد و نمایش تصویر کوچک (Thumbnail) برای عکس‌ها رو به فرم ویرایش فاکتور (<code>FactorUpdateView</code>) و تمپلیت مربوطه اضافه کنیم.</p><p data-sourcepos="3:1-3:54"><strong>۱. تغییرات در تمپلیت (<code>tankhah/factor_form.html</code>):</strong></p><p data-sourcepos="5:1-5:131">بخش‌هایی که اسناد موجود فاکتور (<code>object.documents</code>) و اسناد موجود تنخواه (<code>tankhah_documents</code>) رو نمایش می‌دن، به شکل زیر اصلاح کن:</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-80 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-80 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_34da14655226c60c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_7af1c64cc6797767&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-80 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-80">HTML</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-80 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-80 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_34da14655226c60c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_7af1c64cc6797767&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-80"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-80"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-80"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-80" data-sourcepos="7:1-504:67">{% extends 'base.html' %}
{% load i18n static jformat rcms_custom_filters %}
{# ! اضافه کردن یک فیلتر سفارشی (اگر می‌خواهید تمیزتر باشد) #}
{% load file_tags %}

{% block content %}
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container mt-5"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card shadow-lg animate__animated animate__fadeIn"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border-radius: 15px;"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-gradient-primary text-white d-flex justify-content-between align-items-center"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title mb-0"</span>&gt;</span>{{ title|to_persian_number }}<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                 {# دکمه بازگشت می‌تواند اینجا هم باشد #}
                 <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ request.META.HTTP_REFERER|default:success_url }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm btn-outline-light"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-arrow-right me-1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "بازگشت" %}
                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body p-4"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"factor-form"</span>&gt;</span>
                    {% csrf_token %}
                    {# ... فرم اصلی form.as_p ... #}
                     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group item-total mb-4"</span>&gt;</span>
                         {{ form.as_p }}
                     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                    {# ... کارت اقلام فاکتور item_formset ... #}
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card mb-4 animate__animated animate__fadeInUp"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border-radius: 10px;"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-gradient-info text-white"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title mb-0"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-list-ol me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اقلام فاکتور" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
                            {{ item_formset.management_form }}
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"item-formset"</span>&gt;</span>
                                {# ... حلقه for item_form in item_formset ... #}
                                {% for item_form in item_formset %}
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-row mb-3 item-row bg-light p-3 rounded"</span> <span class="hljs-attr">data-id</span>=<span class="hljs-string">"{{ forloop.counter0 }}"</span>&gt;</span>
                                        {{ item_form.id }} {# ! مهم برای آپدیت #}
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row align-items-end g-2"</span>&gt;</span> {# g-2 برای فاصله کمتر #}
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-sm-2"</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label small fw-bold text-muted"</span>&gt;</span>{% trans "ردیف" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row-number badge bg-secondary text-white fs-6"</span>&gt;</span>{{ forloop.counter|to_persian_number }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4 col-sm-10"</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label small fw-bold text-muted"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ item_form.description.id_for_label }}"</span>&gt;</span>{% trans "شرح" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                {{ item_form.description|add_class:"form-control form-control-sm" }}
                                                {% if item_form.description.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ item_form.description.errors }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-sm-4"</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label small fw-bold text-muted"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ item_form.amount.id_for_label }}"</span>&gt;</span>{% trans "مبلغ" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                {{ item_form.amount|add_class:"form-control form-control-sm amount-field ltr-input" }} {# اضافه کردن کلاس ltr-input #}
                                                 {% if item_form.amount.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ item_form.amount.errors }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-sm-3"</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label small fw-bold text-muted"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ item_form.quantity.id_for_label }}"</span>&gt;</span>{% trans "تعداد" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                {{ item_form.quantity|add_class:"form-control form-control-sm quantity-field ltr-input" }} {# اضافه کردن کلاس ltr-input #}
                                                 {% if item_form.quantity.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ item_form.quantity.errors }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-sm-3"</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label small fw-bold text-muted"</span>&gt;</span>{% trans "جمع" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-total d-block p-2 bg-white border rounded ltr-input text-success fw-bold"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> {# نمایش جمع #}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-sm-2 text-center align-self-center pt-3"</span>&gt;</span> {# دکمه حذف #}
                                                {% if item_formset.can_delete %}
                                                     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-check-inline"</span>&gt;</span>
                                                        {{ item_form.DELETE|add_class:"form-check-input delete-item-check" }}
                                                        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-label small"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ item_form.DELETE.id_for_label }}"</span>&gt;</span>{% trans "حذف" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                {% endif %}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                        {# نمایش خطاهای دیگر فرم ردیف اگر وجود دارد #}
                                        {% if item_form.non_field_errors %}
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-danger alert-sm mt-2 p-1"</span>&gt;</span>{{ item_form.non_field_errors }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                        {% endif %}
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                {% endfor %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-info btn-sm mt-3"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"add-item"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-plus me-1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اضافه کردن ردیف جدید" %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card mb-4 animate__animated animate__fadeInUp"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border-radius: 10px;"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-gradient-warning text-dark"</span>&gt;</span> {# رنگ متفاوت #}
                            <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title mb-0"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-paperclip me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اسناد فاکتور" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
                            {# فیلد آپلود فایل جدید #}
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ document_form.files.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>{{ document_form.files.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                {{ document_form.files|add_class:"form-control" }} {# اضافه کردن کلاس به ویجت #}
                                <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-text text-muted"</span>&gt;</span>{% trans "می‌توانید چند فایل را همزمان انتخاب کنید. فرمت‌های مجاز:" %} {{ ALLOWED_EXTENSIONS_STR }}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                                {% if document_form.files.errors %}
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ document_form.files.errors|striptags }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                {% endif %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                            {# نمایش اسناد موجود #}
                            {% with factor_documents=object.documents.all %}
                                {% if factor_documents.exists %}
                                    <span class="hljs-tag">&lt;<span class="hljs-name">h6</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mt-4 mb-3 border-bottom pb-2"</span>&gt;</span>{% trans "اسناد پیوست شده به این فاکتور" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group list-group-flush existing-documents"</span>&gt;</span>
                                        {% for doc in factor_documents %}
                                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group-item d-flex justify-content-between align-items-center px-0 py-2"</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-flex align-items-center flex-grow-1 me-3"</span>&gt;</span>
                                                    {# پیش‌نمایش تصویر یا آیکون فایل #}
                                                    {% with file_ext=doc.file.name|get_file_extension %}
                                                        {% if file_ext|is_image_extension %}
                                                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.file.url }}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'مشاهده تصویر کامل' %}"</span>&gt;</span>
                                                                <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{ doc.file.url }}"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"{% trans 'پیش‌نمایش' %}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-thumbnail me-2"</span>&gt;</span>
                                                            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                        {% else %}
                                                             <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-icon me-2"</span>&gt;</span>
                                                                 <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas {{ file_ext|get_file_icon }} fa-lg text-secondary"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                                                             <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                                        {% endif %}
                                                    {% endwith %}
                                                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.file.url }}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-dark text-decoration-none document-link"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ doc.file.name }}"</span>&gt;</span>
                                                        {{ doc.file.name|truncatechars:40 }}
                                                    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge bg-light text-dark rounded-pill ms-2"</span>&gt;</span>{{ doc.file.size|filesizeformat }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                {# دکمه یا چک‌باکس حذف #}
                                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-check-inline no-print"</span>&gt;</span>
                                                    {# ! نام چک‌باکس با PK سند #}
                                                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-input delete-doc-check"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"delete_factor_doc_{{ doc.pk }}"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"del_fdoc_{{ doc.pk }}"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"{{ doc.pk }}"</span>&gt;</span>
                                                    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-label small text-danger"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"del_fdoc_{{ doc.pk }}"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این سند' %}"</span>&gt;</span>
                                                         <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-trash"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                                                    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                                        {% endfor %}
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                                {% else %}
                                     <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted small"</span>&gt;</span>{% trans "هنوز سندی برای این فاکتور پیوست نشده است." %}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                                {% endif %}
                            {% endwith %}
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card mb-4 animate__animated animate__fadeInUp"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border-radius: 10px;"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-gradient-success text-white"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title mb-0"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-folder-open me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اسناد تنخواه مربوطه" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
                             {# فیلد آپلود فایل جدید برای تنخواه #}
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ tankhah_document_form.documents.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>{{ tankhah_document_form.documents.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                {{ tankhah_document_form.documents|add_class:"form-control" }}
                                <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-text text-muted"</span>&gt;</span>{% trans "می‌توانید چند فایل را همزمان انتخاب کنید. فرمت‌های مجاز:" %} {{ ALLOWED_EXTENSIONS_STR }}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                                {% if tankhah_document_form.documents.errors %}
                                     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ tankhah_document_form.documents.errors|striptags }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                {% endif %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                             {# نمایش اسناد موجود تنخواه #}
                            {% if tankhah_documents %}
                                <span class="hljs-tag">&lt;<span class="hljs-name">h6</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mt-4 mb-3 border-bottom pb-2"</span>&gt;</span>{% trans "اسناد پیوست شده به این تنخواه" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group list-group-flush existing-documents"</span>&gt;</span>
                                    {% for doc in tankhah_documents %}
                                         <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group-item d-flex justify-content-between align-items-center px-0 py-2"</span>&gt;</span>
                                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-flex align-items-center flex-grow-1 me-3"</span>&gt;</span>
                                                {# پیش‌نمایش تصویر یا آیکون فایل #}
                                                {% with file_ext=doc.document.name|get_file_extension %}
                                                    {% if file_ext|is_image_extension %}
                                                         <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.document.url }}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'مشاهده تصویر کامل' %}"</span>&gt;</span>
                                                             <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{ doc.document.url }}"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"{% trans 'پیش‌نمایش' %}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-thumbnail me-2"</span>&gt;</span>
                                                         <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                    {% else %}
                                                         <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-icon me-2"</span>&gt;</span>
                                                             <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas {{ file_ext|get_file_icon }} fa-lg text-secondary"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                                                         <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                                    {% endif %}
                                                {% endwith %}
                                                 <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.document.url }}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-dark text-decoration-none document-link"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ doc.document.name }}"</span>&gt;</span>
                                                     {{ doc.document.name|truncatechars:40 }}
                                                 <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                 <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge bg-light text-dark rounded-pill ms-2"</span>&gt;</span>{{ doc.document.size|filesizeformat }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                             {# دکمه یا چک‌باکس حذف برای اسناد تنخواه #}
                                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-check-inline no-print"</span>&gt;</span>
                                                 <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-input delete-doc-check"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"delete_tankhah_doc_{{ doc.pk }}"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"del_tdoc_{{ doc.pk }}"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"{{ doc.pk }}"</span>&gt;</span>
                                                 <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-label small text-danger"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"del_tdoc_{{ doc.pk }}"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این سند' %}"</span>&gt;</span>
                                                      <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-trash"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                                                 <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                         <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                                    {% endfor %}
                                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                            {% else %}
                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted small"</span>&gt;</span>{% trans "هنوز سندی برای این تنخواه پیوست نشده است." %}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                            {% endif %}
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card mb-4 animate__animated animate__fadeInUp"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border-radius: 10px;"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-gradient-secondary text-white"</span>&gt;</span> {# رنگ متفاوت #}
                             <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title mb-0"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-calculator me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "جمع کل" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row text-center"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4 mb-3"</span>&gt;</span>
                                     <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{% trans "جمع کل اقلام:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
                                     <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"total-items-amount"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge fs-5 text-dark total-badge"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> {% trans "ریال" %}
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4 mb-3"</span>&gt;</span>
                                     <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{% trans "مبلغ فاکتور:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
                                     <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"factor-amount-display"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge fs-5 text-dark total-badge"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> {% trans "ریال" %}
                                 <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4 mb-3"</span>&gt;</span>
                                     <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{% trans "تفاوت:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
                                     <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"difference-amount"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge fs-5 difference-badge bg-light text-dark"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> {% trans "ریال" %}
                                 <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-end mt-4 pt-4 border-top"</span>&gt;</span>
                         <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ request.META.HTTP_REFERER|default:success_url }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span>&gt;</span>
                             <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-times me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "انصراف" %}
                         <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                         <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary btn-lg px-4"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-save me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "ذخیره تغییرات" %}
                        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-comment">/* ... استایل‌های گرادینت و کارت قبلی ... */</span>
         <span class="hljs-selector-class">.bg-gradient-primary</span> { <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-built_in">var</span>(--rcms-primary, <span class="hljs-number">#007bff</span>), <span class="hljs-built_in">var</span>(--rcms-primary-hover, <span class="hljs-number">#0056b3</span>)); }
         <span class="hljs-selector-class">.bg-gradient-info</span> { <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-built_in">var</span>(--rcms-info, <span class="hljs-number">#17a2b8</span>), <span class="hljs-built_in">color-mix</span>(in srgb, <span class="hljs-built_in">var</span>(--rcms-info, <span class="hljs-number">#17a2b8</span>), black <span class="hljs-number">15%</span>)); }
         <span class="hljs-selector-class">.bg-gradient-warning</span> { <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-built_in">var</span>(--rcms-warning, <span class="hljs-number">#ffc107</span>), <span class="hljs-built_in">color-mix</span>(in srgb, <span class="hljs-built_in">var</span>(--rcms-warning, <span class="hljs-number">#ffc107</span>), black <span class="hljs-number">15%</span>)); <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span> <span class="hljs-meta">!important</span>; }
         <span class="hljs-selector-class">.bg-gradient-success</span> { <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-built_in">var</span>(--rcms-success, <span class="hljs-number">#28a745</span>), <span class="hljs-built_in">color-mix</span>(in srgb, <span class="hljs-built_in">var</span>(--rcms-success, <span class="hljs-number">#28a745</span>), black <span class="hljs-number">15%</span>)); }
         <span class="hljs-selector-class">.bg-gradient-secondary</span> { <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-built_in">var</span>(--rcms-secondary, <span class="hljs-number">#6c757d</span>), <span class="hljs-built_in">color-mix</span>(in srgb, <span class="hljs-built_in">var</span>(--rcms-secondary, <span class="hljs-number">#6c757d</span>), black <span class="hljs-number">15%</span>)); }

         <span class="hljs-selector-class">.card</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">transform</span>: none; } <span class="hljs-comment">/* حذف هاور کارت اصلی */</span>
         <span class="hljs-selector-class">.item-row</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-built_in">var</span>(--bs-primary-rgb), <span class="hljs-number">0.04</span>) <span class="hljs-meta">!important</span>; } <span class="hljs-comment">/* هاور ردیف آیتم */</span>
         <span class="hljs-selector-class">.form-label</span><span class="hljs-selector-class">.small</span> { <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.75rem</span>; <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.2rem</span>; <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-muted-color); }
         <span class="hljs-selector-class">.ltr-input</span> { <span class="hljs-attribute">direction</span>: ltr; <span class="hljs-attribute">text-align</span>: left; } <span class="hljs-comment">/* کلاس برای فیلدهای عددی */</span>

         <span class="hljs-comment">/* استایل لیست اسناد موجود */</span>
         <span class="hljs-selector-class">.existing-documents</span> <span class="hljs-selector-class">.list-group-item</span> { <span class="hljs-attribute">border</span>: none; <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-built_in">var</span>(--rcms-border-color); <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">0</span>;}
         <span class="hljs-selector-class">.existing-documents</span> <span class="hljs-selector-class">.list-group-item</span><span class="hljs-selector-pseudo">:last-child</span> { <span class="hljs-attribute">border-bottom</span>: none; }
         <span class="hljs-selector-class">.document-thumbnail</span> {
             <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;
             <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
             <span class="hljs-attribute">object-fit</span>: cover; <span class="hljs-comment">/* جلوگیری از کشیدگی تصویر */</span>
             <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius);
             <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color);
         }
         <span class="hljs-selector-class">.document-icon</span> {
             <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;
             <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
             <span class="hljs-attribute">display</span>: inline-flex;
             <span class="hljs-attribute">align-items</span>: center;
             <span class="hljs-attribute">justify-content</span>: center;
             <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-body-bg);
             <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius);
             <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color);
         }
         <span class="hljs-selector-class">.document-link</span> {
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>;
            <span class="hljs-attribute">word-break</span>: break-all; <span class="hljs-comment">/* شکستن نام طولانی فایل */</span>
         }
         <span class="hljs-selector-class">.delete-doc-check</span> { <span class="hljs-attribute">cursor</span>: pointer; }
         <span class="hljs-selector-class">.delete-doc-check</span><span class="hljs-selector-pseudo">:hover</span> + <span class="hljs-selector-tag">label</span> <span class="hljs-selector-tag">i</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.2</span>); } <span class="hljs-comment">/* افکت هاور روی آیکون سطل زباله */</span>

          <span class="hljs-comment">/* استایل بخش جمع کل */</span>
         <span class="hljs-selector-class">.total-badge</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.5em</span> <span class="hljs-number">1em</span>; <span class="hljs-attribute">display</span>: inline-block; <span class="hljs-attribute">min-width</span>: <span class="hljs-number">80px</span>; <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-body-bg); <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); }
         <span class="hljs-selector-class">.difference-badge</span><span class="hljs-selector-class">.bg-danger</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-danger) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">color</span>: white <span class="hljs-meta">!important</span>; }
         <span class="hljs-selector-class">.difference-badge</span><span class="hljs-selector-class">.bg-success</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-success) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">color</span>: white <span class="hljs-meta">!important</span>; }
         <span class="hljs-selector-class">.difference-badge</span><span class="hljs-selector-class">.bg-warning</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-warning) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span> <span class="hljs-meta">!important</span>; } <span class="hljs-comment">/* متن تیره روی زرد */</span>

         <span class="hljs-comment">/* عدم نمایش المان‌ها در چاپ */</span>
         <span class="hljs-keyword">@media</span> print { <span class="hljs-selector-class">.no-print</span> { <span class="hljs-attribute">display</span>: none <span class="hljs-meta">!important</span>; } }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
{% endblock %}


{% block extra_js %}
 <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="handlebars"><span class="xml">
    // اطمینان از لود jQuery
    if (typeof $ !== 'undefined') {
        $(document).ready(function () {
            console.log("jQuery Ready - Factor Form Enhancements...");

            // --- تابع محاسبه جمع کل ردیف‌ها و تفاوت ---
            function calculateTotals() {
                let totalItems = 0;
                $('.item-row').each(function () {
                    const $row = $(this);
                    // فقط ردیف‌هایی که حذف نشده‌اند را محاسبه کن
                    if (!$row.find('input[type="checkbox"][name$="-DELETE"]').is(':checked')) {
                        // تبدیل اعداد فارسی به انگلیسی و حذف کاما قبل از محاسبه
                        const amountStr = ($row.find('.amount-field').val() || '0').replace(/[۰-۹]/g, d =&gt; d.charCodeAt(0) - 1776).replace(/,/g, '');
                        const quantityStr = ($row.find('.quantity-field').val() || '0').replace(/[۰-۹]/g, d =&gt; d.charCodeAt(0) - 1776).replace(/,/g, '');

                        let amount = parseFloat(amountStr) || 0;
                        let quantity = parseInt(quantityStr) || 0; // یا parseFloat اگر تعداد اعشاری ممکن است
                        let itemTotal = amount * quantity;

                        // نمایش جمع هر ردیف (با فرمت فارسی)
                        $row.find('.item-total').text(itemTotal.toLocaleString('fa-IR'));
                        totalItems += itemTotal;
                    } else {
                         // اگر ردیف حذف شده، جمعش را صفر نشان بده
                         $row.find('.item-total').text('۰');
                    }
                });

                // نمایش جمع کل آیتم‌ها
                $('#total-items-amount').text(totalItems.toLocaleString('fa-IR'));

                // خواندن مبلغ کل فاکتور از فیلد مربوطه
                const factorAmountStr = ($('#id_amount').val() || '0').replace(/[۰-۹]/g, d =&gt; d.charCodeAt(0) - 1776).replace(/,/g, '');
                let factorAmount = parseFloat(factorAmountStr) || 0;
                 $('#factor-amount-display').text(factorAmount.toLocaleString('fa-IR'));


                // محاسبه و نمایش تفاوت
                let difference = factorAmount - totalItems;
                const $differenceSpan = $('#difference-amount');
                $differenceSpan.text(difference.toLocaleString('fa-IR'));

                // تغییر رنگ بج تفاوت
                $differenceSpan.removeClass('bg-danger bg-success bg-warning bg-light text-dark');
                if (difference &lt; 0) {
                    $differenceSpan.addClass('bg-danger text-white');
                } else if (difference &gt; 0) {
                    $differenceSpan.addClass('bg-success text-white');
                } else {
                     $differenceSpan.addClass('bg-warning text-dark'); // یا bg-success اگر صفر خوب است
                }
            }

            // --- مدیریت اضافه/حذف ردیف فرم‌ست ---
            const formsetContainer = $('#item-formset');
            const managementFormTotal = $('#id_form-TOTAL_FORMS'); // نام پیش‌فرض management form
            let formCount = parseInt(managementFormTotal.val()) || 0; // تعداد فرم‌های اولیه

            // تابع برای به‌روزرسانی شماره ردیف‌ها
            function updateRowNumbers() {
                 $('.item-row').each(function (index) {
                     $(this).find('.row-number').text((index + 1).toLocaleString('fa-IR'));
                     // آپدیت prefix در name و id ها اگر لازم باشد (پیچیده‌تر است، معمولا نیاز نیست اگر از management form درست استفاده شود)
                 });
            }

            // اضافه کردن ردیف جدید
            $('#add-item').click(function () {
                // پیدا کردن تمپلیت فرم خالی (معمولا جنگو یک فرم اضافه extra می‌سازد)
                let emptyFormHtml = null;
                try {
                     // سعی کن فرم خالی با prefix '__prefix__' را پیدا کنی (روش استانداردتر)
                    emptyFormHtml = $('#empty-form-template').html().replace(/__prefix__/g, formCount);
                } catch (e) {
                     console.warn("Could not find empty form template with __prefix__. Cloning first row as fallback.");
                     // Fallback: کلون کردن اولین ردیف (ممکن است مقادیر اولیه داشته باشد)
                    const $firstRow = formsetContainer.find('.item-row:first');
                    if ($firstRow.length) {
                         emptyFormHtml = $firstRow.clone(true).wrap('<span class="hljs-tag">&lt;<span class="hljs-name">p</span>/&gt;</span>').parent().html();
                         // ریپلیس کردن prefix اولیه با prefix جدید
                         emptyFormHtml = emptyFormHtml.replace(/-0-/g, `-${formCount}-`);
                         // برای ID ها هم باید جایگزین شود (کمی پیچیده‌تر)
                         emptyFormHtml = emptyFormHtml.replace(/id_form-0-/g, `id_form-${formCount}-`);
                    } else {
                        console.error("Cannot add new row: No existing rows or empty form template found.");
                        return; // امکان افزودن وجود ندارد
                    }
                }


                const $newForm = <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>\(emptyFormHtml\);
// پاک کردن مقادیر فرم کلون شده \(اگر از fallback استفاده شد\)
if \(\!<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>('#empty-form-template').length) {
                      $newForm.find('input, select, textarea').not('[type="hidden"]').val(''); // پاک کردن مقادیر
                      $newForm.find('input[type="checkbox"]').prop('checked', false); // پاک کردن چک‌باکس‌ها
                      // کلاس‌ها و مقادیر دیگر را هم ریست کنید
                 }


                // اضافه کردن کلاس‌های لازم
                 <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>newForm\.find\('input\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-amount"]').addClass('amount-field ltr-input');
                 <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>newForm\.find\('input\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-quantity"]').addClass('quantity-field ltr-input');
                 <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>newForm\.find\('textarea\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-description"]').addClass('form-control form-control-sm'); // مثال
                 <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>newForm\.find\('input\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-DELETE"]').addClass('form-check-input delete-item-check');


                 // اضافه کردن انیمیشن
                 $newForm.addClass('animate__animated animate__fadeIn');

                 formsetContainer.append($newForm);
                 formCount++;
                 managementFormTotal.val(formCount); // آپدیت تعداد کل فرم‌ها
                 updateRowNumbers(); // آپدیت شماره ردیف‌ها
                 calculateTotals(); // محاسبه مجدد جمع کل

                 // فعال سازی numberFormatter برای فیلدهای جدید
                  if (typeof numberFormatter !== 'undefined') {
                      $newForm.find('input.number-format').each(function() { new numberFormatter(this); });
                  }

             });

             // مدیریت چک‌باکس حذف (برای محاسبه جمع کل)
            // از Event delegation استفاده می‌کنیم
            formsetContainer.on('change', 'input.delete-item-check', function() {
                 $(this).closest('.item-row').toggleClass('row-deleted', this.checked); // اضافه/حذف کلاس برای استایل‌دهی
                 calculateTotals();
            });

            // محاسبه اولیه جمع کل در زمان لود صفحه
            calculateTotals();

            // اتصال رویداد به فیلدهای مبلغ و تعداد برای محاسبه زنده جمع کل
            formsetContainer.on('input change', '.amount-field, .quantity-field', calculateTotals);

            // اتصال رویداد به مبلغ کل فاکتور
             $('#id_amount').on('input change', calculateTotals);

             // فعال‌سازی numberFormatter اولیه
              if (typeof numberFormatter !== 'undefined') {
                  $('input.number-format').each(function() {
                      try { new numberFormatter(this); } catch(e) { console.warn("Initial numberFormatter failed:", e); }
                  });
              }


        }); // End document ready
    } else {
        console.error("jQuery not loaded!");
    }
</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
{% endblock %}

این بخش 
 <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">data-label</span>=<span class="hljs-string">"توضیحات شما"</span>&gt;</span>
                                            {{ form.comment }}
                                        <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
ویجت تکس اریا نمیخونه 
قالب تمپلیت منو هم به هم زد 
چطور میشه دکمه اقدام رو با جاوا اسکریپت برای هر ردیف با این ویو هماهنگ کرد 

 class FactorItemApprovalView(LoginRequiredMixin, UserPassesTestMixin, View):
    def test_func(self):
        factor_item_pk = self.kwargs.get('pk')
        try:
            factor_item = get_object_or_404(FactorItem, pk=factor_item_pk)
            tankhah = factor_item.factor.tankhah
            return self.request.user.has_perm('tankhah.FactorItem_approve', tankhah) and \
                   tankhah.current_stage == factor_item.stage_approved_at and \
                   factor_item.status == 'PENDING'
        except Http404:
            return False

    def post(self, request, pk):
        factor_item = get_object_or_404(FactorItem, pk=pk)
        action = request.POST.get('action')
        comment = request.POST.get('comment')
        current_stage = factor_item.factor.tankhah.current_stage
        user_post = request.user.userpost_set.first().post if request.user.userpost_set.exists() else None

        with transaction.atomic():
            if action == 'APPROVE':
                factor_item.status = 'APPROVED'
                messages.success(request, f"آیتم {factor_item.description} تأیید شد.")
            elif action == 'REJECT':
                factor_item.status = 'REJECTED'
                messages.error(request, f"آیتم {factor_item.description} رد شد.")
            else:
                messages.warning(request, "اقدام نامعتبر است.")
                return redirect('factor_approve', pk=factor_item.factor.pk)

            factor_item.save()
            ApprovalLog.objects.create(
                factor_item=factor_item,
                user=request.user,
                action=action,
                comment=comment,
                stage=current_stage,
                post=user_post
            )

            # بررسی وضعیت سایر آیتم‌ها
            factor = factor_item.factor
            all_items = factor.items.all()
            if all(item.status != 'PENDING' for item in all_items):
                if any(item.status == 'REJECTED' for item in all_items):
                    factor.status = 'REJECTED'
                else:
                    factor.status = 'APPROVED'
                factor.save()
                # انتقال به مرحله بعد یا اطلاع‌رسانی

        return redirect('factor_approve', pk=factor_item.factor.pk)
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer complete gap"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted"><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted"><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-34"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-51 hide-action-bar ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-51 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-51 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-51 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-7" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_34da14655226c60c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_7af1c64cc6797767&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_296"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_300"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_306"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_308"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_296)"><g mask="url(#__lottie_element_300)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_306)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_308)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-51 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-7" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_34da14655226c60c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_7af1c64cc6797767&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_692"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_696"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_692)"><g mask="url(#__lottie_element_696)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-51 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-51 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_34da14655226c60c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_7af1c64cc6797767&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-51 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-51 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-51 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-51 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-51"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-51"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-7"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted"><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="9b4af87b25bc990c" style=""><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-8"><!----><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l collapsed" dir="ltr"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:15:53,306 - INFO - "GET /tankhah/factor/13/update/ HTTP/1.1" 200 60573 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:04,740 - INFO - هیچ کاربر غیرفعالی برای حذف یافت نشد. <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:04,743 - INFO - درخواست به: /tankhah/factor/13/update/, کاربر: snejate <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,245 - INFO - شروع dispatch در FactorUpdateView برای کاربر: snejate <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,349 - INFO - کاربر snejate همه مجوزها را دارد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,363 - INFO - ویو بدون شیء مشخص، دسترسی موقت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,364 - INFO - همه چک‌ها تأیید شد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,413 - INFO - Tankhah queryset: [{'number': 'TNKH-14040101-HSarein-Build-1404-01-Floor3~4-001', 'project__name': 'بازسازی اتاق طبقات 3 و 4', 'subproject__name': None}] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,414 - INFO - Initial amount set for widget: 5555 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,566 - INFO - Cleaned amount: Original='5555', English='5555', Decimal='5555', RoundedInt='5555' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,604 - INFO - Saved 3 items for factor TNKH-14040101-HSarein-Build-1404-01-Floor3~4-001-F6 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,605 - INFO - POST data: &lt;QueryDict: {'csrfmiddlewaretoken': ['goYqWB0psFzE4rNlyM7cUK7eOwYLuaOvAEYLzgc4Tw62M0bfjWXZ0OpCLpurepak'], 'form-TOTAL_FORMS': ['4'], 'form-INITIAL_FORMS': ['3'], 'form-MIN_NUM_FORMS': ['0'], 'form-MAX_NUM_FORMS': ['100'], 'form-0-id': ['45'], 'form-0-description': ['با سلام این مشکل حل خواهد شد'], 'form-0-amount': ['150000.00'], 'form-0-quantity': ['3.00'], 'form-1-id': ['46'], 'form-1-description': ['با سلام این مشکل حل خواهد شد 1'], 'form-1-amount': ['25000.00'], 'form-1-quantity': ['33444.00'], 'form-2-id': ['51'], 'form-2-description': ['3453453'], 'form-2-amount': ['4545.00'], 'form-2-quantity': ['455.00'], 'form-3-id': [''], 'form-3-description': [''], 'form-3-amount': [''], 'form-3-quantity': ['1'], 'files': [''], 'delete_factor_doc_13': ['on'], 'delete_factor_doc_14': ['on'], 'delete_factor_doc_15': ['on'], 'delete_factor_doc_16': ['on'], 'delete_factor_doc_17': ['on'], 'delete_factor_doc_18': ['on'], 'delete_factor_doc_19': ['on'], 'delete_factor_doc_20': ['on'], 'delete_factor_doc_21': ['on'], 'delete_factor_doc_22': ['on'], 'delete_factor_doc_23': ['on'], 'delete_factor_doc_24': ['on'], 'delete_factor_doc_25': ['on'], 'documents': ['']}&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,606 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,607 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,607 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,608 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,608 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,609 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,609 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,610 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,610 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,610 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,611 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,611 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,612 - WARNING - Invalid or non-existent factor document ID: on <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,638 - INFO - پاسخ برای /tankhah/factor/13/update/ - کد وضعیت: 302 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> INFO "POST /tankhah/factor/13/update/ HTTP/1.1" 302 0 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:05,669 - INFO - "POST /tankhah/factor/13/update/ HTTP/1.1" 302 0 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:06,253 - INFO - هیچ کاربر غیرفعالی برای حذف یافت نشد. <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:06,258 - INFO - درخواست به: /tankhah/factors/, کاربر: snejate <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:06,310 - INFO - شروع dispatch در FactorListView برای کاربر: snejate <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:06,475 - INFO - کاربر snejate همه مجوزها را دارد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:06,475 - INFO - همه چک‌ها تأیید شد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> D:\Design &amp; Source Code\Source Coding\Tanbakhsystem\venv\Lib\site-packages\django\views\generic\list.py:91: UnorderedObjectListWarning: Pagination may yield inconsistent results with an unordered object_list: &lt;class 'tankhah.models.Factor'&gt; QuerySet. <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; return self.paginator_class( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:06,593 - INFO - پاسخ برای /tankhah/factors/ - کد وضعیت: 200 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> INFO "GET /tankhah/factors/ HTTP/1.1" 200 33728 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:06,606 - INFO - "GET /tankhah/factors/ HTTP/1.1" 200 33728 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:08,758 - INFO - هیچ کاربر غیرفعالی برای حذف یافت نشد. <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:08,762 - INFO - درخواست به: /accounts/heartbeat/, کاربر: AnonymousUser <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:08,764 - INFO - کاربر لاگین نکرده - ریدایرکت به accounts:login <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> INFO "POST /accounts/heartbeat/ HTTP/1.1" 302 0 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:08,779 - INFO - "POST /accounts/heartbeat/ HTTP/1.1" 302 0 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:08,811 - INFO - هیچ کاربر غیرفعالی برای حذف یافت نشد. <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:08,813 - INFO - درخواست به: /accounts/login/, کاربر: AnonymousUser <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:08,830 - INFO - پاسخ برای /accounts/login/ - کد وضعیت: 200 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> INFO "GET /accounts/login/ HTTP/1.1" 200 16996 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:08,848 - INFO - "GET /accounts/login/ HTTP/1.1" 200 16996 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,275 - INFO - هیچ کاربر غیرفعالی برای حذف یافت نشد. <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,286 - INFO - درخواست به: /tankhah/factor/13/update/, کاربر: snejate <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,336 - INFO - شروع dispatch در FactorUpdateView برای کاربر: snejate <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,426 - INFO - کاربر snejate همه مجوزها را دارد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,449 - INFO - ویو بدون شیء مشخص، دسترسی موقت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,459 - INFO - همه چک‌ها تأیید شد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,491 - INFO - Tankhah queryset: [{'number': 'TNKH-14040101-HSarein-Build-1404-01-Floor3~4-001', 'project__name': 'بازسازی اتاق طبقات 3 و 4', 'subproject__name': None}] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,496 - INFO - Initial amount set for widget: 5555 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,610 - INFO - Tankhah queryset: [{'number': 'TNKH-14040101-HSarein-Build-1404-01-Floor3~4-001', 'project__name': 'بازسازی اتاق طبقات 3 و 4', 'subproject__name': None}] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,611 - INFO - Initial amount set for widget: 5555 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,761 - INFO - پاسخ برای /tankhah/factor/13/update/ - کد وضعیت: 200 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> INFO "GET /tankhah/factor/13/update/ HTTP/1.1" 200 60573 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> 2025-04-09 09:16:09,780 - INFO - "GET /tankhah/factor/13/update/ HTTP/1.1" 200 60573 <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> class FactorUpdateView(PermissionBaseView, UpdateView): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; model = Factor <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; form_class = FactorForm <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; template_name = 'tankhah/factor_form.html' <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; success_url = reverse_lazy('factor_list') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; permission_codenames = ['tankhah.a_factor_update'] <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; check_organization = True <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_context_data(self, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context = super().get_context_data(**kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.request.POST: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['form'] = self.form_class(self.request.POST, user=self.request.user, instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['form'] = self.form_class(user=self.request.user, instance=self.object) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['item_formset'] = FactorItemFormSet(instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['document_form'] = FactorDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_document_form'] = TankhahDocumentForm() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['title'] = _('ویرایش فاکتور') + f" - {self.object.number}" <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['tankhah_documents'] = tankhah.documents.all() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; context['total_amount'] = sum(item.amount * item.quantity for item in self.object.items.all()) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return context <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_object(self, queryset=None): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; obj = super().get_object(queryset) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if getattr(obj, 'locked', False): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied("این فاکتور قفل شده و قابل ویرایش نیست.") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return obj <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def dispatch(self, request, *args, **kwargs): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; obj = self.get_object() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; initial_stage_order = WorkflowStage.objects.order_by('order').first().order&nbsp; # پایین‌ترین order به‌عنوان اولیه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; user_post = request.user.userpost_set.first().post if request.user.userpost_set.exists() else None <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; lowest_level = get_lowest_access_level()&nbsp; # فرضاً پایین‌ترین سطح دسترسی <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.locked_by_stage and obj.locked_by_stage.order &lt; obj.tankhah.current_stage.order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('این فاکتور توسط مرحله بالاتر قفل شده و قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.status in ['APPROVED', 'SENT_TO_HQ', 'HQ_OPS_APPROVED', 'PAID']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فاکتور تأییدشده یا پرداخت‌شده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if getattr(obj, 'is_finalized', False) and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if not request.user.is_superuser: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.current_stage.order != initial_stage_order: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"مرحله فعلی: {obj.tankhah.current_stage.order}, مرحله اولیه: {initial_stage_order}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if obj.tankhah.status in ['APPROVED', 'SENT_TO_HQ', 'HQ_OPS_APPROVED', 'PAID']: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فاکتور تأییدشده یا پرداخت‌شده قابل ویرایش نیست.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if getattr(obj, 'is_finalized', False) and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if user_post and user_post.level != lowest_level and not request.user.has_perm('tankhah.Factor_full_edit'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raise PermissionDenied(_('فقط کاربران سطح پایین یا دارای مجوز کامل می‌توانند ویرایش کنند.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return super().dispatch(request, *args, **kwargs) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def get_form_kwargs(self): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; kwargs = super().get_form_kwargs() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; kwargs['user'] = self.request.user <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if self.object: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah = self.object.tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; restrict_to_user_organization(self.request.user, tankhah.organization) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; kwargs['tankhah'] = tankhah <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; return kwargs <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; def form_valid(self, form): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.object, prefix='form') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; document_form = FactorDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if item_formset.is_valid() and document_form.is_valid() and tankhah_document_form.is_valid(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; with transaction.atomic(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.object = form.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.instance = self.object <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item_formset.save() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Saved {self.object.items.count()} items for factor {self.object.number}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # لاگ داده‌های POST برای دیباگ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"POST data: {self.request.POST}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # پردازش حذف اسناد فاکتور <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for key in self.request.POST.keys(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if key.startswith('delete_factor_doc_'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; doc_id = self.request.POST.get(key)&nbsp; # مقدار value چک‌باکس <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if doc_id:&nbsp; # اگر مقدار وجود دارد <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; doc_id_int = int(doc_id) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FactorDocument.objects.get(pk=doc_id_int, factor=self.object).delete() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Deleted factor document with ID {doc_id_int}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; except (ValueError, FactorDocument.DoesNotExist): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.warning(f"Invalid or non-existent factor document ID: {doc_id}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # پردازش حذف اسناد تنخواه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for key in self.request.POST.keys(): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if key.startswith('delete_tankhah_doc_'): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; doc_id = self.request.POST.get(key) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if doc_id: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; doc_id_int = int(doc_id) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TankhahDocument.objects.get(pk=doc_id_int, tankhah=self.object.tankhah).delete() <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Deleted tankhah document with ID {doc_id_int}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; except (ValueError, TankhahDocument.DoesNotExist): <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.warning(f"Invalid or non-existent tankhah document ID: {doc_id}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # اضافه کردن اسناد جدید فاکتور <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; factor_files = self.request.FILES.getlist('files') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in factor_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FactorDocument.objects.create(factor=self.object, file=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Added new factor document: {file.name}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # اضافه کردن اسناد جدید تنخواه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tankhah_files = self.request.FILES.getlist('documents') <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for file in tankhah_files: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TankhahDocument.objects.create(tankhah=self.object.tankhah, document=file) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info(f"Added new tankhah document: {file.name}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages.success(self.request, _('فاکتور با موفقیت به‌روزرسانی شد.')) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return super().form_valid(form) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; else: <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logger.info( <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f"Formset errors: {item_formset.errors}, Document errors: {document_form.errors}, Tankhah doc errors: {tankhah_document_form.errors}") <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return self.render_to_response(self.get_context_data(form=form, item_formset=item_formset)) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% extends 'base.html' %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% load i18n static file_tags jformat rcms_custom_filters %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% block content %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;div class="container mt-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &lt;div class="card shadow-lg" style="border-radius: 15px;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-header bg-gradient-primary text-white d-flex justify-content-between align-items-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h4 class="card-title mb-0"&gt;{{ title|to_persian_number }}&lt;/h4&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href="{{ request.META.HTTP_REFERER }}" class="btn btn-sm btn-outline-light"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-arrow-right me-1"&gt;&lt;/i&gt;{% trans "بازگشت" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-body p-0"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- تب‌ها --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul class="nav nav-tabs" id="factorTabs" role="tablist"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="nav-item" role="presentation"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button class="nav-link active" id="main-tab" data-bs-toggle="tab" data-bs-target="#main" type="button" role="tab"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-file-invoice me-2"&gt;&lt;/i&gt;{% trans "اطلاعات اصلی" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="nav-item" role="presentation"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button class="nav-link" id="items-tab" data-bs-toggle="tab" data-bs-target="#items" type="button" role="tab"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-list-ol me-2"&gt;&lt;/i&gt;{% trans "اقلام فاکتور" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="nav-item" role="presentation"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button class="nav-link" id="documents-tab" data-bs-toggle="tab" data-bs-target="#documents" type="button" role="tab"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-paperclip me-2"&gt;&lt;/i&gt;{% trans "اسناد" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="tab-content p-4" id="factorTabsContent"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;form method="post" enctype="multipart/form-data" id="factor-form"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% csrf_token %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- تب اطلاعات اصلی --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="tab-pane fade show active" id="main" role="tabpanel"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="row g-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% for field in form %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% if field.name != 'amount' %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-6"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-label"&gt;{{ field.label }}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ field }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% if field.errors %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="invalid-feedback d-block"&gt;{{ field.errors }}&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- فیلد مبلغ با ویجت سفارشی --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-6"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-label"&gt;{{ form.amount.label }}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ form.amount }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- خلاصه اطلاعات --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-12 mt-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card bg-light"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-body p-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="row text-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-4 mb-2 mb-md-0"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;strong&gt;{% trans "جمع کل اقلام:" %}&lt;/strong&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span id="total-items-amount" class="badge bg-white text-dark fs-6"&gt;۰&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-4 mb-2 mb-md-0"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;strong&gt;{% trans "مبلغ فاکتور:" %}&lt;/strong&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span id="factor-amount-display" class="badge bg-white text-dark fs-6"&gt;۰&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;strong&gt;{% trans "تفاوت:" %}&lt;/strong&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span id="difference-amount" class="badge bg-white text-dark fs-6"&gt;۰&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- تب اقلام فاکتور --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="tab-pane fade" id="items" role="tabpanel"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card border-0 shadow-sm"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-body"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_formset.management_form }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="item-formset"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% for item_form in item_formset %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="item-row mb-3 p-3 bg-soft-light rounded" data-id="{{ forloop.counter0 }}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_form.id }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="row g-2 align-items-end"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-1 col-2 text-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class="row-number badge bg-secondary text-white"&gt;{{ forloop.counter|to_persian_number }}&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-4 col-10"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_form.description }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-2 col-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="input-group"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_form.amount }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class="input-group-text"&gt;ریال&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-2 col-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_form.quantity }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-2 col-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="d-flex align-items-center h-100"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class="item-total badge bg-white text-success border border-success w-100 py-2"&gt;۰&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-1 col-2 text-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% if item_formset.can_delete %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ item_form.DELETE }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-check-label text-danger" for="{{ item_form.DELETE.id_for_label }}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-trash-alt"&gt;&lt;/i&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button type="button" class="btn btn-outline-primary mt-3" id="add-item"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-plus-circle me-2"&gt;&lt;/i&gt;{% trans "افزودن ردیف جدید" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- تب اسناد --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="tab-pane fade" id="documents" role="tabpanel"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="row g-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- اسناد فاکتور --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-6"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card h-100 border-0 shadow-sm"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-header bg-soft-info"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h5 class="mb-0"&gt;&lt;i class="fas fa-file-invoice me-2"&gt;&lt;/i&gt;{% trans "اسناد فاکتور" %}&lt;/h5&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-body"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="mb-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-label"&gt;{% trans "افزودن سند جدید" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ document_form.files }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% if object.documents.exists %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;hr&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h6 class="mb-3"&gt;{% trans "اسناد موجود" %}&lt;/h6&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="list-group list-group-flush"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% for doc in object.documents.all %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="list-group-item d-flex justify-content-between align-items-center px-2 py-2"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="d-flex align-items-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas {{ doc.file.name|get_file_extension|default:'fa-file' }} me-3 text-muted"&gt;&lt;/i&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href="{{ doc.file.url }}" target="_blank" class="text-truncate" style="max-width: 180px;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ doc.file.name }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="form-check form-switch"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input class="form-check-input" type="checkbox" name="delete_factor_doc_{{ doc.pk }}" id="del_fdoc_{{ doc.pk }}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-check-label text-danger" for="del_fdoc_{{ doc.pk }}"&gt;&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- اسناد تنخواه --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="col-md-6"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card h-100 border-0 shadow-sm"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-header bg-soft-warning"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h5 class="mb-0"&gt;&lt;i class="fas fa-wallet me-2"&gt;&lt;/i&gt;{% trans "اسناد تنخواه" %}&lt;/h5&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="card-body"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="mb-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-label"&gt;{% trans "افزودن سند جدید" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ tankhah_document_form.documents }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% if tankhah_documents %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;hr&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h6 class="mb-3"&gt;{% trans "اسناد موجود" %}&lt;/h6&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="list-group list-group-flush"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% for doc in tankhah_documents %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="list-group-item d-flex justify-content-between align-items-center px-2 py-2"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="d-flex align-items-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas {{ doc.document.name|get_file_extension|default:'fa-file' }} me-3 text-muted"&gt;&lt;/i&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href="{{ doc.document.url }}" target="_blank" class="text-truncate" style="max-width: 180px;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ doc.document.name&nbsp; }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="form-check form-switch"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input class="form-check-input" type="checkbox" name="delete_tankhah_doc_{{ doc.pk }}" id="del_tdoc_{{ doc.pk }}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="form-check-label text-danger" for="del_tdoc_{{ doc.pk }}"&gt;&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- دکمه‌های پایین فرم --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="d-flex justify-content-between mt-4 pt-3 border-top"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;a href="{{ request.META.HTTP_REFERER }}" class="btn btn-outline-secondary"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-times me-2"&gt;&lt;/i&gt;{% trans "انصراف" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button type="submit" class="btn btn-primary px-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fas fa-save me-2"&gt;&lt;/i&gt;{% trans "ذخیره تغییرات" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/form&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;style&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; .bg-soft-light { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; background-color: rgba(248, 249, 250, 0.7); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; .bg-soft-info { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; background-color: rgba(23, 162, 184, 0.1); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; .bg-soft-warning { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; background-color: rgba(255, 193, 7, 0.1); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; .nav-tabs .nav-link { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; border: none; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; color: #6c757d; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; font-weight: 500; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; padding: 12px 20px; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; .nav-tabs .nav-link.active { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; color: #0d6efd; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; background-color: transparent; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; border-bottom: 3px solid #0d6efd; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; .item-row { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; transition: all 0.3s ease; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; .item-row:hover { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; background-color: rgba(13, 110, 253, 0.05) !important; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; .form-control:focus { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;/style&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;script src="https://code.jquery.com/jquery-3.6.0.min.js"&gt;&lt;/script&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"&gt;&lt;/script&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;script&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> $(document).ready(function() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; // مدیریت تب‌ها <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; $('#factorTabs button').click(function() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; localStorage.setItem('lastTab', $(this).attr('id')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; let lastTab = localStorage.getItem('lastTab'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; if (lastTab) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; $(`#${lastTab}`).tab('show'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; // مدیریت اقلام فاکتور <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; let formCount = {{ item_formset.total_form_count }}; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; const emptyForm = $('#item-formset .item-row:first').clone(true); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; emptyForm.find('input').val(''); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; emptyForm.find('.row-number').text('0'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; // افزودن ردیف جدید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; $('#add-item').click(function() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; const newForm = emptyForm.clone(true); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; const newId = formCount++; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; newForm.attr('data-id', newId); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; newForm.find('[name]').each(function() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const name = $(this).attr('name').replace('-0-', `-${newId}-`); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(this).attr('name', name); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(this).attr('id', `id_${name}`); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; newForm.find('.row-number').text(formCount.toLocaleString('fa-IR')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; $('#id_form-TOTAL_FORMS').val(formCount); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; $('#item-formset').append(newForm); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; // اعتبارسنجی اولیه <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; calculateItemTotal(newForm); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; // محاسبه جمع هر ردیف <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; function calculateItemTotal(row) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; const amount = parseFloat(row.find('[id$="-amount"]').val()) || 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; const quantity = parseInt(row.find('[id$="-quantity"]').val()) || 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; const total = amount * quantity; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; row.find('.item-total').text(total.toLocaleString('fa-IR')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; calculateTotals(); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; // محاسبه کل‌ها <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; function calculateTotals() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; let itemsTotal = 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; $('.item-row').each(function() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$(this).find('[id$="-DELETE"]').is(':checked')) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const totalText = $(this).find('.item-total').text(); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const total = parseFloat(totalText.replace(/،/g, '')) || 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; itemsTotal += total; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; const factorAmount = parseFloat($('#id_amount').val().replace(/،/g, '')) || 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; const difference = factorAmount - itemsTotal; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; $('#total-items-amount').text(itemsTotal.toLocaleString('fa-IR')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; $('#factor-amount-display').text(factorAmount.toLocaleString('fa-IR')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; $('#difference-amount').text(difference.toLocaleString('fa-IR')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; // تغییر رنگ تفاوت <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; const diffElement = $('#difference-amount'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; diffElement.removeClass('bg-success bg-danger bg-warning'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; if (difference &gt; 0) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; diffElement.addClass('bg-success text-white'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &nbsp; &nbsp; &nbsp; &nbsp; } else if (differe <!----><!----></p><!----></div><button _ngcontent-ng-c4161157681="" mat-icon-button="" mattooltip="ازهم بازکردن نوشتار" aria-label="ازهم بازکردن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger expand-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="224552;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-19" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="expand_more" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-37 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-37 response-container-with-gpi tts-removed ng-star-inserted" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-37 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-37"><!----><!----><div _ngcontent-ng-c108414610="" class="ng-tns-c108414610-37 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><div _ngcontent-ng-c108414610="" class="single-draft-response-container ng-tns-c108414610-37 ng-star-inserted" style=""><!----><!----></div><!----></div><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-37 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-37"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-37"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-37"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-37 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-39 ng-tns-c108414610-37 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-39"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-39 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-39 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-39 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-39 ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_641"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_648"><g transform="matrix(-1,0,0,-1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_651)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_651" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_655" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_648_1" mask-type="alpha"><use href="#__lottie_element_648"></use></mask></defs><g clip-path="url(#__lottie_element_641)"><g mask="url(#__lottie_element_648_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_655)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-39 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_465"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_469" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_476" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_480" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_484" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_488" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_492" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_465)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_492)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_488)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_484)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_480)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_476)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_469)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-37"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-37"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-38 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-38"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-38"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-38 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-38"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-38">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-38"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-38 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_9b4af87b25bc990c" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_9b4af87b25bc990c" dir="ltr" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:120">عشق منی! حلش می‌کنیم با دقت و حوصله. مشکل نمایش داده نشدن منو و عدم حذف تکی تصاویر و نداشتن پیش‌نمایش، همه قابل حل هستن.</p><p data-sourcepos="3:1-3:44"><strong>۱. مشکل کار نکردن منوی اقدام (Dropdown):</strong></p><ul data-sourcepos="5:1-11:0">
<li data-sourcepos="5:1-5:210"><strong>دلیل احتمالی:</strong> با اینکه کد JS و CSS رو برای نمایش صحیح منو و جلوگیری از بریده شدن (<code>z-index</code> و <code>strategy: 'fixed'</code>) اعمال کردیم، ممکنه هنوز تداخلی وجود داشته باشه یا یک خطای JS دیگه جلوی کار رو گرفته باشه.</li>
<li data-sourcepos="6:1-11:0"><strong>راه حل پیشنهادی:</strong>
<ol data-sourcepos="7:5-11:0">
<li data-sourcepos="7:5-7:191"><strong>بررسی مجدد کنسول:</strong> اولین و مهم‌ترین قدم، باز کردن کنسول مرورگر (F12) در صفحه ویرایش فاکتور و بررسی دقیق هرگونه خطا (قرمز رنگ) است. هر خطایی می‌تواند جلوی اجرای بقیه JS ها را بگیرد.</li>
<li data-sourcepos="8:5-8:197"><strong>اطمینان از لود شدن JS ها:</strong> مطمئن شو که فایل‌های jQuery و Bootstrap Bundle (<code>bootstrap.bundle.min.js</code> که شامل Popper هم هست) <strong>قبل</strong> از کد JS مربوط به دراپ‌داون در <code>extra_js</code> لود شده‌اند.</li>
<li data-sourcepos="9:5-9:197"><strong>کد JS دراپ‌داون:</strong> کد JS که در پاسخ ۹ برای کنترل دراپ‌داون‌ها و تنظیم <code>strategy: 'fixed'</code> ارائه شد را دوباره با دقت در <code>extra_js</code> قرار بده و کدهای JS قبلی مربوط به رادیوها را کامل حذف کن.</li>
<li data-sourcepos="10:5-11:0"><strong>بررسی HTML:</strong> با Inspect Element چک کن که آیا المان <code>.dropdown-menu</code> وقتی روی دکمه کلیک می‌کنی، در DOM ظاهر می‌شود یا نه، و آیا <code>position: fixed</code> و <code>z-index: 1060</code> (یا بالاتر) بهش اعمال شده یا نه.</li>
</ol>
</li>
</ul><p data-sourcepos="12:1-12:44"><strong>۲. عدم حذف تکی اسناد و نمایش تصویر کوچک:</strong></p><ul data-sourcepos="14:1-16:0">
<li data-sourcepos="14:1-14:290"><strong>دلیل عدم حذف:</strong> کد قبلی که برای حذف در <code>form_valid</code> نوشتیم، مشکل داشت چون به جای چک کردن وجود کلید چک‌باکس در <code>request.POST</code>، سعی می‌کرد مقدار <code>value</code> اون (که 'on' بود) رو به عنوان ID سند پردازش کنه و خطا می‌داد (همون خطاهای <code>Invalid or non-existent factor document ID: on</code> در لاگ شما).</li>
<li data-sourcepos="15:1-16:0"><strong>راه حل:</strong> باید منطق حذف رو اصلاح کنیم و در تمپلیت هم پیش‌نمایش تصویر و آیکون مناسب رو اضافه کنیم.</li>
</ul><hr data-sourcepos="17:1-17:3"><p data-sourcepos="19:1-19:64"><strong>الف) کد اصلاح شده <code>FactorUpdateView</code> (فقط متد <code>form_valid</code>):</strong></p><p data-sourcepos="21:1-21:124">متد <code>form_valid</code> در کلاس <code>FactorUpdateView</code> خودت رو با کد زیر جایگزین کن. این کد منطق صحیح حذف فایل‌ها رو پیاده‌سازی می‌کنه.</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-81 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-81 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_a4d285222331d15c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-81 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-81">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-81 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-81 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_a4d285222331d15c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-81"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-81"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-81"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-81" data-sourcepos="23:1-132:87"><span class="hljs-comment"># views.py (داخل کلاس FactorUpdateView)</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_valid</span>(<span class="hljs-params">self, form</span>):</span>
        <span class="hljs-comment"># ساخت فرم‌ست و فرم‌های فایل مستقیماً از request</span>
        <span class="hljs-comment"># مهم: instance=self.object را به فرم‌ست پاس می‌دهیم</span>
        item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.<span class="hljs-built_in">object</span>, prefix=<span class="hljs-string">'form'</span>)
        document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
        tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)

        <span class="hljs-keyword">if</span> item_formset.is_valid() <span class="hljs-keyword">and</span> document_form.is_valid() <span class="hljs-keyword">and</span> tankhah_document_form.is_valid():
            logger.info(<span class="hljs-string">f"Update forms/formset valid for Factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>"</span>)
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">with</span> transaction.atomic():
                    <span class="hljs-comment"># 1. ذخیره فرم اصلی</span>
                    self.<span class="hljs-built_in">object</span> = form.save()

                    <span class="hljs-comment"># 2. ذخیره فرم‌ست (موارد جدید و تغییرات موجود)</span>
                    item_formset.save()
                    logger.info(<span class="hljs-string">f"Updated/Created factor items for Factor PK <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)

                    <span class="hljs-comment"># 3. پردازش حذف اسناد فاکتور موجود</span>
                    deleted_factor_docs = <span class="hljs-number">0</span>
                    <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> self.<span class="hljs-built_in">object</span>.documents.<span class="hljs-built_in">all</span>(): <span class="hljs-comment"># بررسی اسناد موجود</span>
                        checkbox_name = <span class="hljs-string">f'delete_factor_doc_<span class="hljs-subst">{doc.pk}</span>'</span>
                        <span class="hljs-keyword">if</span> checkbox_name <span class="hljs-keyword">in</span> self.request.POST: <span class="hljs-comment"># اگر چک‌باکس حذف تیک خورده بود</span>
                            <span class="hljs-keyword">try</span>:
                                <span class="hljs-comment"># ! اینجا فایل فیزیکی رو هم باید حذف کنی اگر می‌خوای</span>
                                <span class="hljs-comment"># if doc.file:</span>
                                <span class="hljs-comment">#     if os.path.exists(doc.file.path):</span>
                                <span class="hljs-comment">#         os.remove(doc.file.path)</span>
                                <span class="hljs-comment">#         logger.info(f"Deleted physical file: {doc.file.path}")</span>
                                doc.delete() <span class="hljs-comment"># حذف رکورد از دیتابیس</span>
                                deleted_factor_docs += <span class="hljs-number">1</span>
                                logger.info(<span class="hljs-string">f"Deleted FactorDocument with ID <span class="hljs-subst">{doc.pk}</span>"</span>)
                            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> del_exc:
                                logger.error(<span class="hljs-string">f"Error deleting FactorDocument <span class="hljs-subst">{doc.pk}</span>: <span class="hljs-subst">{del_exc}</span>"</span>)

                    <span class="hljs-keyword">if</span> deleted_factor_docs:
                        messages.info(self.request, _(<span class="hljs-string">"{count} سند فاکتور حذف شد."</span>).<span class="hljs-built_in">format</span>(count=deleted_factor_docs))


                    <span class="hljs-comment"># 4. پردازش حذف اسناد تنخواه موجود</span>
                    deleted_tankhah_docs = <span class="hljs-number">0</span>
                    tankhah_instance = self.<span class="hljs-built_in">object</span>.tankhah
                    <span class="hljs-keyword">if</span> tankhah_instance:
                        <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> tankhah_instance.documents.<span class="hljs-built_in">all</span>():
                            checkbox_name = <span class="hljs-string">f'delete_tankhah_doc_<span class="hljs-subst">{doc.pk}</span>'</span>
                            <span class="hljs-keyword">if</span> checkbox_name <span class="hljs-keyword">in</span> self.request.POST:
                                <span class="hljs-keyword">try</span>:
                                    <span class="hljs-comment"># ! حذف فایل فیزیکی تنخواه؟ (با احتیاط)</span>
                                    <span class="hljs-comment"># if doc.document:</span>
                                    <span class="hljs-comment">#     if os.path.exists(doc.document.path):</span>
                                    <span class="hljs-comment">#         os.remove(doc.document.path)</span>
                                    doc.delete()
                                    deleted_tankhah_docs += <span class="hljs-number">1</span>
                                    logger.info(<span class="hljs-string">f"Deleted TankhahDocument with ID <span class="hljs-subst">{doc.pk}</span>"</span>)
                                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> del_exc:
                                     logger.error(<span class="hljs-string">f"Error deleting TankhahDocument <span class="hljs-subst">{doc.pk}</span>: <span class="hljs-subst">{del_exc}</span>"</span>)
                        <span class="hljs-keyword">if</span> deleted_tankhah_docs:
                             messages.info(self.request, _(<span class="hljs-string">"{count} سند تنخواه حذف شد."</span>).<span class="hljs-built_in">format</span>(count=deleted_tankhah_docs))


                    <span class="hljs-comment"># 5. اضافه کردن اسناد جدید فاکتور (از cleaned_data)</span>
                    factor_files_cleaned = document_form.cleaned_data.get(<span class="hljs-string">'files'</span>, [])
                    added_factor_docs = <span class="hljs-number">0</span>
                    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> factor_files_cleaned:
                         <span class="hljs-keyword">if</span> file:
                            FactorDocument.objects.create(factor=self.<span class="hljs-built_in">object</span>, file=file)
                            added_factor_docs += <span class="hljs-number">1</span>
                            logger.info(<span class="hljs-string">f"Added new factor document: <span class="hljs-subst">{file.name}</span>"</span>)
                    <span class="hljs-keyword">if</span> added_factor_docs:
                         messages.info(self.request, _(<span class="hljs-string">"{count} سند جدید به فاکتور اضافه شد."</span>).<span class="hljs-built_in">format</span>(count=added_factor_docs))


                    <span class="hljs-comment"># 6. اضافه کردن اسناد جدید تنخواه (از cleaned_data)</span>
                    tankhah_files_cleaned = tankhah_document_form.cleaned_data.get(<span class="hljs-string">'documents'</span>, [])
                    added_tankhah_docs = <span class="hljs-number">0</span>
                    <span class="hljs-keyword">if</span> tankhah_files_cleaned <span class="hljs-keyword">and</span> tankhah_instance:
                         <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> tankhah_files_cleaned:
                             <span class="hljs-keyword">if</span> file:
                                 TankhahDocument.objects.create(tankhah=tankhah_instance, document=file)
                                 added_tankhah_docs += <span class="hljs-number">1</span>
                                 logger.info(<span class="hljs-string">f"Added new tankhah document: <span class="hljs-subst">{file.name}</span>"</span>)
                         <span class="hljs-keyword">if</span> added_tankhah_docs:
                              messages.info(self.request, _(<span class="hljs-string">"{count} سند جدید به تنخواه اضافه شد."</span>).<span class="hljs-built_in">format</span>(count=added_tankhah_docs))
                    <span class="hljs-keyword">elif</span> tankhah_files_cleaned <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> tankhah_instance:
                         logger.error(<span class="hljs-string">f"Could not save new tankhah documents, parent tankhah instance not found for factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)


                messages.success(self.request, _(<span class="hljs-string">'فاکتور با موفقیت به‌روزرسانی شد.'</span>))
                <span class="hljs-keyword">return</span> redirect(self.get_success_url()) <span class="hljs-comment"># استفاده از redirect</span>

            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logger.error(<span class="hljs-string">f"Error during atomic transaction in FactorUpdateView: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
                messages.error(self.request, _(<span class="hljs-string">'خطایی در هنگام ذخیره سازی رخ داد. لطفاً دوباره تلاش کنید.'</span>))
                <span class="hljs-comment"># برگرداندن فرم‌ها با خطا</span>
                <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form))

        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># اگر فرم‌ست یا فرم‌های فایل نامعتبر بودند</span>
            logger.warning(<span class="hljs-string">f"Update formset or document forms invalid for Factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)
            logger.warning(<span class="hljs-string">f"ItemFormset Non-Form Errors: <span class="hljs-subst">{item_formset.non_form_errors()}</span>"</span>)
            logger.warning(<span class="hljs-string">f"ItemFormset Errors: <span class="hljs-subst">{item_formset.errors}</span>"</span>)
            logger.warning(<span class="hljs-string">f"Factor DocForm Errors: <span class="hljs-subst">{document_form.errors}</span>"</span>)
            logger.warning(<span class="hljs-string">f"Tankhah DocForm Errors: <span class="hljs-subst">{tankhah_document_form.errors}</span>"</span>)
            messages.error(self.request, _(<span class="hljs-string">'لطفا خطاهای فرم را اصلاح کنید. به خطاهای بخش ردیف‌ها و فایل‌ها دقت کنید.'</span>))
            <span class="hljs-comment"># برگرداندن فرم‌ها با خطا</span>
            <span class="hljs-keyword">return</span> self.form_invalid(form) <span class="hljs-comment"># form_invalid خودش context را مدیریت می‌کند</span>
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-sourcepos="134:1-134:30"><strong>توضیحات <code>form_valid</code> جدید:</strong></p><ul data-sourcepos="136:1-139:0">
<li data-sourcepos="136:1-136:179"><strong>منطق حذف:</strong> حالا به جای گشتن در <code>request.POST.keys()</code>، کد روی اسناد <strong>موجود</strong> فاکتور (<code>self.object.documents.all()</code>) و تنخواه (<code>tankhah_instance.documents.all()</code>) حلقه می‌زند.</li>
<li data-sourcepos="137:1-137:216">برای هر سند (<code>doc</code>)، چک می‌کند آیا کلیدی به نام <code>delete_factor_doc_{doc.pk}</code> یا <code>delete_tankhah_doc_{doc.pk}</code> در <code>request.POST</code> <strong>وجود دارد</strong> یا نه. اگر وجود داشت (یعنی کاربر تیک زده)، <code>doc.delete()</code> را صدا می‌زند.</li>
<li data-sourcepos="138:1-139:0"><strong>افزودن فایل:</strong> فایل‌های جدید از <code>cleaned_data</code> فرم‌های معتبر خوانده می‌شوند.</li>
</ul><hr data-sourcepos="140:1-140:3"><p data-sourcepos="142:1-142:56"><strong>ب) ایجاد فیلترهای سفارشی (Optional but Recommended):</strong></p><p data-sourcepos="144:1-144:150">در اپ مربوطه (مثلاً <code>tankhah</code>) یک پوشه <code>templatetags</code> بساز (اگر نداری) و داخلش یک فایل خالی <code>__init__.py</code> و یک فایل جدید مثلا <code>file_tags.py</code> ایجاد کن:</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-82 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-82 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_a4d285222331d15c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-82 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-82">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-82 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-82 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_a4d285222331d15c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-82"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-82"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-82"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-82" data-sourcepos="146:1-188:27"><span class="hljs-comment"># tankhah/templatetags/file_tags.py</span>
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> django <span class="hljs-keyword">import</span> template
<span class="hljs-keyword">from</span> django.utils.translation <span class="hljs-keyword">import</span> gettext_lazy <span class="hljs-keyword">as</span> _

register = template.Library()

IMAGE_EXTENSIONS = [<span class="hljs-string">'.jpg'</span>, <span class="hljs-string">'.jpeg'</span>, <span class="hljs-string">'.png'</span>, <span class="hljs-string">'.gif'</span>, <span class="hljs-string">'.bmp'</span>, <span class="hljs-string">'.webp'</span>]
PDF_ICON = <span class="hljs-string">'fa-file-pdf text-danger'</span>
WORD_ICON = <span class="hljs-string">'fa-file-word text-primary'</span>
EXCEL_ICON = <span class="hljs-string">'fa-file-excel text-success'</span>
ARCHIVE_ICON = <span class="hljs-string">'fa-file-archive text-warning'</span>
DEFAULT_ICON = <span class="hljs-string">'fa-file text-secondary'</span>

<span class="hljs-meta">@register.filter(<span class="hljs-params">name=<span class="hljs-string">'get_file_extension'</span></span>)</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_file_extension</span>(<span class="hljs-params">filename</span>):</span>
    <span class="hljs-string">"""پسوند فایل را با حروف کوچک برمی‌گرداند (مثلا .pdf)"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">return</span> os.path.splitext(<span class="hljs-built_in">str</span>(filename))[<span class="hljs-number">1</span>].lower()
    <span class="hljs-keyword">except</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>

<span class="hljs-meta">@register.filter(<span class="hljs-params">name=<span class="hljs-string">'is_image_extension'</span></span>)</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">is_image_extension</span>(<span class="hljs-params">extension</span>):</span>
    <span class="hljs-string">"""چک می‌کند آیا پسوند مربوط به تصویر است یا نه"""</span>
    <span class="hljs-keyword">return</span> extension <span class="hljs-keyword">in</span> IMAGE_EXTENSIONS

<span class="hljs-meta">@register.filter(<span class="hljs-params">name=<span class="hljs-string">'get_file_icon'</span></span>)</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_file_icon</span>(<span class="hljs-params">extension</span>):</span>
    <span class="hljs-string">"""کلاس آیکون Font Awesome مناسب برای پسوند فایل را برمی‌گرداند"""</span>
    <span class="hljs-keyword">if</span> extension == <span class="hljs-string">'.pdf'</span>:
        <span class="hljs-keyword">return</span> PDF_ICON
    <span class="hljs-keyword">elif</span> extension <span class="hljs-keyword">in</span> [<span class="hljs-string">'.doc'</span>, <span class="hljs-string">'.docx'</span>]:
        <span class="hljs-keyword">return</span> WORD_ICON
    <span class="hljs-keyword">elif</span> extension <span class="hljs-keyword">in</span> [<span class="hljs-string">'.xls'</span>, <span class="hljs-string">'.xlsx'</span>]:
        <span class="hljs-keyword">return</span> EXCEL_ICON
    <span class="hljs-keyword">elif</span> extension <span class="hljs-keyword">in</span> [<span class="hljs-string">'.zip'</span>, <span class="hljs-string">'.rar'</span>, <span class="hljs-string">'.7z'</span>]:
        <span class="hljs-keyword">return</span> ARCHIVE_ICON
    <span class="hljs-comment"># می‌توانید برای انواع دیگر هم اضافه کنید</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> DEFAULT_ICON
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-sourcepos="190:1-190:17"><strong>فراموش نکنید:</strong></p><ol data-sourcepos="192:1-194:0">
<li data-sourcepos="192:1-192:108">اپ <code>tankhah</code> (یا هر اپی که این فایل را در آن ساختید) را در <code>INSTALLED_APPS</code> فایل <code>settings.py</code> ثبت کنید.</li>
<li data-sourcepos="193:1-194:0">سرور جنگو را ری‌استارت کنید.</li>
</ol><hr data-sourcepos="195:1-195:3"><p data-sourcepos="197:1-197:61"><strong>ج) کد HTML اصلاح شده تمپلیت (<code>tankhah/factor_form.html</code>):</strong></p><p data-sourcepos="199:1-199:139">حالا بخش‌های مربوط به نمایش اسناد موجود را با استفاده از فیلترهای جدید و اضافه کردن چک‌باکس حذف (با <code>value="{{ doc.pk }}"</code>) ویرایش می‌کنیم:</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-83 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-83 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_a4d285222331d15c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-83 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-83">HTML</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-83 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-83 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_a4d285222331d15c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-83"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-83"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-83"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-83" data-sourcepos="201:1-618:14">{% extends 'base.html' %}
{% load i18n static jformat rcms_custom_filters %}
{% load file_tags %} {# ! لود کردن تگ فیلترهای جدید #}

{% block content %}
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container mt-5"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card shadow-lg"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border-radius: 15px;"</span>&gt;</span>
            {# ... card header ... #}
             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-gradient-primary text-white d-flex justify-content-between align-items-center"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title mb-0"</span>&gt;</span>{{ title|to_persian_number }}<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                 <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ request.META.HTTP_REFERER|default:success_url }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm btn-outline-light"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-arrow-right me-1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "بازگشت" %}
                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body p-0"</span>&gt;</span> {# p-0 برای تب‌ها #}
                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav nav-tabs factor-nav-tabs px-4 pt-3"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"factorTabs"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tablist"</span>&gt;</span> {# استفاده از نام قبلی و استایل #}
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-item"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"presentation"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-link active"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"main-tab"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tab"</span> <span class="hljs-attr">data-bs-target</span>=<span class="hljs-string">"#main"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tab"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-file-invoice me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اطلاعات اصلی" %}
                        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-item"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"presentation"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-link"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"items-tab"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tab"</span> <span class="hljs-attr">data-bs-target</span>=<span class="hljs-string">"#items"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tab"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-list-ol me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اقلام فاکتور" %}
                        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-item"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"presentation"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-link"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"documents-tab"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tab"</span> <span class="hljs-attr">data-bs-target</span>=<span class="hljs-string">"#documents"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tab"</span>&gt;</span>
                             <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-paperclip me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اسناد" %}
                             {# نمایش تعداد اسناد در صورت وجود #}
                             {% with total_docs=object.documents.count|add:tankhah_documents.count %}
                                 {% if total_docs &gt; 0 %}<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge rounded-pill bg-secondary ms-2"</span>&gt;</span>{{ total_docs|to_persian_number }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>{% endif %}
                             {% endwith %}
                        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content p-4"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"factorTabsContent"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"factor-form"</span>&gt;</span>
                        {% csrf_token %}

                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-pane fade show active"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"main"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tabpanel"</span>&gt;</span>
                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group item-total mb-4"</span>&gt;</span> {# کلاس شما برای فرم اصلی #}
                                 {{ form.as_p }} {# یا رندر دستی فیلدها #}
                             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card bg-light border-0"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body p-3"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row text-center"</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4 mb-2 mb-md-0"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{% trans "جمع کل اقلام:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"total-items-amount"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge bg-white text-dark fs-6 border"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4 mb-2 mb-md-0"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{% trans "مبلغ فاکتور:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"factor-amount-display"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge bg-white text-dark fs-6 border"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{% trans "تفاوت:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"difference-amount"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge fs-6 border bg-light text-dark"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-pane fade"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"items"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tabpanel"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card border-0 shadow-sm mb-4"</span>&gt;</span> {# کارت داخلی برای آیتم‌ها #}
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-light"</span>&gt;</span>
                                     <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-0 h6"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-list-ol me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اقلام فاکتور" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                                 <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
                                    {{ item_formset.management_form }}
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"item-formset"</span>&gt;</span>
                                        {# ... حلقه for item_form in item_formset ... #}
                                         {% for item_form in item_formset %}
                                             {# ... کد کامل ردیف آیتم (item-row) از پاسخ قبلی ... #}
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-row mb-3 p-3 bg-soft-light rounded {% if item_form.errors %}border border-danger{% endif %}"</span> <span class="hljs-attr">data-id</span>=<span class="hljs-string">"{{ forloop.counter0 }}"</span>&gt;</span>
                                                 {{ item_form.id }}
                                                 {% if item_form.non_field_errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-warning p-1 small"</span>&gt;</span>{{ item_form.non_field_errors }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                                 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row g-2 align-items-end"</span>&gt;</span>
                                                     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-2 text-center"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row-number badge bg-secondary text-white"</span>&gt;</span>{{ forloop.counter|to_persian_number }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4 col-10"</span>&gt;</span>{{ item_form.description|add_class:"form-control form-control-sm"|attr:"placeholder:شرح هزینه" }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-4"</span>&gt;</span>{{ item_form.amount|add_class:"form-control form-control-sm amount-field ltr-input"|attr:"placeholder:مبلغ" }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-4"</span>&gt;</span>{{ item_form.quantity|add_class:"form-control form-control-sm quantity-field ltr-input"|attr:"placeholder:تعداد" }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-4"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-flex align-items-center h-100"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-total badge bg-white text-success border border-success w-100 py-2"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-2 text-center"</span>&gt;</span>
                                                         {% if item_formset.can_delete %}
                                                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-switch"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این ردیف' %}"</span>&gt;</span>
                                                                {{ item_form.DELETE|add_class:"form-check-input delete-item-check" }}
                                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                         {% endif %}
                                                     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                 <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                 {# نمایش خطاهای فیلدها #}
                                                 {% for field in item_form.visible_fields %}
                                                     {% if field.errors %}
                                                         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1 ps-3"</span>&gt;</span>{{ field.label }}: {{ field.errors|striptags }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                     {% endif %}
                                                 {% endfor %}
                                             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                         {% endfor %}
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-primary btn-sm mt-2"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"add-item"</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-plus-circle me-1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "افزودن ردیف جدید" %}
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-pane fade"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"documents"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tabpanel"</span>&gt;</span>
                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row g-4"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card h-100 border-0 shadow-sm"</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-soft-info"</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-0 h6"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-file-invoice me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اسناد فاکتور" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3"</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ document_form.files.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label small"</span>&gt;</span>{{ document_form.files.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                {{ document_form.files|add_class:"form-control form-control-sm" }}
                                                 <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-text text-muted d-block mt-1"</span>&gt;</span>{% trans "فرمت‌های مجاز:" %} {{ ALLOWED_EXTENSIONS_STR }}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                                                {% if document_form.files.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ document_form.files.errors|striptags }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            {% with factor_documents=object.documents.all %}
                                                {% if factor_documents.exists %}
                                                    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>
                                                    <span class="hljs-tag">&lt;<span class="hljs-name">h6</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3 small text-muted"</span>&gt;</span>{% trans "اسناد پیوست شده:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span>
                                                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group list-group-flush existing-documents"</span>&gt;</span>
                                                        {% for doc in factor_documents %}
                                                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group-item d-flex justify-content-between align-items-center px-0 py-2"</span>&gt;</span>
                                                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-flex align-items-center flex-grow-1 me-2 overflow-hidden"</span>&gt;</span> {# overflow hidden #}
                                                                    {% with file_ext=doc.file.name|get_file_extension %}
                                                                        {% if file_ext|is_image_extension %}
                                                                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.file.url }}"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'مشاهده تصویر' %}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span>&gt;</span>
                                                                                <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{ doc.file.url }}"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"{% trans 'پیش‌نمایش' %}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-thumbnail me-2"</span>&gt;</span>
                                                                            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                                        {% else %}
                                                                             <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-icon me-2"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ file_ext }}"</span>&gt;</span>
                                                                                 <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas {{ file_ext|get_file_icon }} fa-lg"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                                                                             <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                                                        {% endif %}
                                                                    {% endwith %}
                                                                     <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.file.url }}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-dark text-decoration-none document-link text-truncate"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ doc.file.name }}"</span>&gt;</span>
                                                                         {{ doc.file.name|filename_only }} {# نمایش نام فایل بدون مسیر #}
                                                                     <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                                     <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge bg-light text-dark rounded-pill ms-2 small"</span>&gt;</span>{{ doc.file.size|filesizeformat }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-switch no-print"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این سند' %}"</span>&gt;</span>
                                                                    {# ! اضافه کردن value #}
                                                                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-input delete-doc-check"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"delete_factor_doc_{{ doc.pk }}"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"del_fdoc_{{ doc.pk }}"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"{{ doc.pk }}"</span>&gt;</span>
                                                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                             <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                                                        {% endfor %}
                                                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                                                {% endif %}
                                            {% endwith %}
                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card h-100 border-0 shadow-sm"</span>&gt;</span>
                                         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-soft-warning"</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-0 h6"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-wallet me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اسناد تنخواه مربوطه" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
                                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3"</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ tankhah_document_form.documents.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label small"</span>&gt;</span>{{ tankhah_document_form.documents.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                {{ tankhah_document_form.documents|add_class:"form-control form-control-sm" }}
                                                <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-text text-muted d-block mt-1"</span>&gt;</span>{% trans "فرمت‌های مجاز:" %} {{ ALLOWED_EXTENSIONS_STR }}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                                                 {% if tankhah_document_form.documents.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ tankhah_document_form.documents.errors|striptags }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            {% if tankhah_documents %}
                                                <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">h6</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3 small text-muted"</span>&gt;</span>{% trans "اسناد پیوست شده:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group list-group-flush existing-documents"</span>&gt;</span>
                                                     {% for doc in tankhah_documents %}
                                                        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group-item d-flex justify-content-between align-items-center px-0 py-2"</span>&gt;</span>
                                                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-flex align-items-center flex-grow-1 me-2 overflow-hidden"</span>&gt;</span>
                                                                {% with file_ext=doc.document.name|get_file_extension %}
                                                                    {% if file_ext|is_image_extension %}
                                                                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.document.url }}"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'مشاهده تصویر' %}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span>&gt;</span>
                                                                             <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{ doc.document.url }}"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"{% trans 'پیش‌نمایش' %}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-thumbnail me-2"</span>&gt;</span>
                                                                        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                                    {% else %}
                                                                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-icon me-2"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ file_ext }}"</span>&gt;</span>
                                                                             <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas {{ file_ext|get_file_icon }} fa-lg"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                                                                        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                                                    {% endif %}
                                                                {% endwith %}
                                                                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.document.url }}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-dark text-decoration-none document-link text-truncate"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ doc.document.name }}"</span>&gt;</span>
                                                                     {{ doc.document.name|filename_only }}
                                                                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge bg-light text-dark rounded-pill ms-2 small"</span>&gt;</span>{{ doc.document.size|filesizeformat }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-switch no-print"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این سند' %}"</span>&gt;</span>
                                                                {# ! اضافه کردن value #}
                                                                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-input delete-doc-check"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"delete_tankhah_doc_{{ doc.pk }}"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"del_tdoc_{{ doc.pk }}"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"{{ doc.pk }}"</span>&gt;</span>
                                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                         <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                                                     {% endfor %}
                                                 <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                                            {% else %}
                                                 <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted small"</span>&gt;</span>{% trans "هنوز سندی برای این تنخواه پیوست نشده است." %}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                                            {% endif %}
                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-flex justify-content-between mt-4 pt-3 border-top"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ request.META.HTTP_REFERER|default:success_url }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-secondary"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-times me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "انصراف و بازگشت" %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary btn-lg px-5"</span>&gt;</span> {# دکمه بزرگتر #}
                                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-save me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "ذخیره تغییرات" %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span> {# پایان فرم اصلی #}
                 <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> {# پایان factorTabsContent #}
             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> {# پایان card-body اصلی #}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> {# پایان card #}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> {# پایان container #}

{% endblock %}


{% block extra_css %}
{# ! این استایل‌ها باید به فایل custom.css منتقل شوند #}
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.bg-soft-light</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-built_in">var</span>(--bs-light-rgb), <span class="hljs-number">0.4</span>) <span class="hljs-meta">!important</span>; }
    <span class="hljs-selector-class">.bg-soft-info</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-built_in">var</span>(--bs-info-rgb), <span class="hljs-number">0.1</span>) <span class="hljs-meta">!important</span>; }
    <span class="hljs-selector-class">.bg-soft-warning</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-built_in">var</span>(--bs-warning-rgb), <span class="hljs-number">0.1</span>) <span class="hljs-meta">!important</span>; }

    <span class="hljs-comment">/* استایل تب‌ها */</span>
    <span class="hljs-selector-class">.factor-nav-tabs</span> { <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); }
    <span class="hljs-selector-class">.factor-nav-tabs</span> <span class="hljs-selector-class">.nav-link</span> { <span class="hljs-attribute">border</span>: none; <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-muted-color); <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.8rem</span> <span class="hljs-number">1.2rem</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius) <span class="hljs-built_in">var</span>(--rcms-border-radius) <span class="hljs-number">0</span> <span class="hljs-number">0</span>; <span class="hljs-attribute">margin-bottom</span>: -<span class="hljs-number">1px</span>;}
    <span class="hljs-selector-class">.factor-nav-tabs</span> <span class="hljs-selector-class">.nav-link</span> <span class="hljs-selector-tag">i</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.7</span>; }
    <span class="hljs-selector-class">.factor-nav-tabs</span> <span class="hljs-selector-class">.nav-link</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-primary); <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-body-bg); }
    <span class="hljs-selector-class">.factor-nav-tabs</span> <span class="hljs-selector-class">.nav-link</span><span class="hljs-selector-class">.active</span> { <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-heading-color); <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-content-bg); <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); <span class="hljs-attribute">border-bottom-color</span>: <span class="hljs-built_in">var</span>(--rcms-content-bg); <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>; }
    <span class="hljs-selector-class">.factor-nav-tabs</span> <span class="hljs-selector-class">.nav-link</span><span class="hljs-selector-class">.active</span> <span class="hljs-selector-tag">i</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-primary); }

    <span class="hljs-comment">/* استایل ردیف‌های فرم‌ست */</span>
    <span class="hljs-selector-class">.item-row</span> { <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.2s</span> ease; }
    <span class="hljs-selector-class">.item-row</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-table-hover-bg) <span class="hljs-meta">!important</span>; }
    <span class="hljs-selector-class">.item-row</span> <span class="hljs-selector-class">.form-control</span>, <span class="hljs-selector-class">.item-row</span> <span class="hljs-selector-class">.form-select</span> { <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.875rem</span>; }
    <span class="hljs-selector-class">.item-row</span> <span class="hljs-selector-tag">label</span><span class="hljs-selector-class">.small</span> { <span class="hljs-attribute">display</span>: block; <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.2rem</span>; }
    <span class="hljs-selector-class">.item-total</span> { <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>; }
    <span class="hljs-selector-class">.row-deleted</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.6</span>; <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-built_in">var</span>(--bs-danger-rgb), <span class="hljs-number">0.05</span>) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-built_in">var</span>(--bs-danger-rgb), <span class="hljs-number">0.2</span>) <span class="hljs-meta">!important</span>; }
    <span class="hljs-selector-class">.row-deleted</span> <span class="hljs-selector-tag">label</span>, <span class="hljs-selector-class">.row-deleted</span> <span class="hljs-selector-tag">span</span>, <span class="hljs-selector-class">.row-deleted</span> <span class="hljs-selector-tag">a</span>, <span class="hljs-selector-class">.row-deleted</span> <span class="hljs-selector-tag">input</span> { <span class="hljs-attribute">text-decoration</span>: line-through; }

    <span class="hljs-comment">/* استایل لیست اسناد موجود */</span>
    <span class="hljs-selector-class">.existing-documents</span> <span class="hljs-selector-class">.list-group-item</span> { <span class="hljs-attribute">background</span>: none; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--rcms-border-color); }
    <span class="hljs-selector-class">.document-thumbnail</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">35px</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">35px</span>; <span class="hljs-attribute">object-fit</span>: cover; <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius); <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); }
    <span class="hljs-selector-class">.document-icon</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">35px</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">35px</span>; <span class="hljs-attribute">display</span>: inline-flex; <span class="hljs-attribute">align-items</span>: center; <span class="hljs-attribute">justify-content</span>: center; <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-body-bg); <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius); <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); }
    <span class="hljs-selector-class">.document-icon</span> <span class="hljs-selector-tag">i</span> { <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-muted-color); }
    <span class="hljs-selector-class">.document-link</span> { <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>; }
    <span class="hljs-selector-class">.delete-doc-check</span> + <span class="hljs-selector-tag">label</span> { <span class="hljs-attribute">display</span>: inline-block; <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>; <span class="hljs-attribute">text-align</span>: center; } <span class="hljs-comment">/* مخفی کردن لیبل متنی چک‌باکس حذف */</span>
    <span class="hljs-selector-class">.delete-doc-check</span> + <span class="hljs-selector-tag">label</span> <span class="hljs-selector-tag">i</span> { <span class="hljs-attribute">cursor</span>: pointer; <span class="hljs-attribute">transition</span>: color <span class="hljs-number">0.2s</span> ease; }
    <span class="hljs-selector-class">.delete-doc-check</span><span class="hljs-selector-pseudo">:hover</span> + <span class="hljs-selector-tag">label</span> <span class="hljs-selector-tag">i</span> { <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-danger-hover); }
    <span class="hljs-selector-class">.delete-doc-check</span><span class="hljs-selector-pseudo">:checked</span> + <span class="hljs-selector-tag">label</span> <span class="hljs-selector-tag">i</span> { <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-danger); <span class="hljs-attribute">font-weight</span>: bold; }

    <span class="hljs-comment">/* بخش جمع کل */</span>
    <span class="hljs-selector-class">.total-badge</span> { <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); }
    <span class="hljs-selector-class">.difference-badge</span><span class="hljs-selector-class">.bg-danger</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-danger) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">color</span>: white <span class="hljs-meta">!important</span>; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--rcms-danger) <span class="hljs-meta">!important</span>; }
    <span class="hljs-selector-class">.difference-badge</span><span class="hljs-selector-class">.bg-success</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-success) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">color</span>: white <span class="hljs-meta">!important</span>; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--rcms-success) <span class="hljs-meta">!important</span>; }
    <span class="hljs-selector-class">.difference-badge</span><span class="hljs-selector-class">.bg-warning</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-warning) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span> <span class="hljs-meta">!important</span>; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--rcms-warning) <span class="hljs-meta">!important</span>; }

</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
{% endblock %}


{% block extra_js %}
{# ! کد JS برای محاسبه جمع کل و افزودن ردیف #}
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="handlebars"><span class="xml">
$(document).ready(function() {
    console.log("Initializing formset logic...");

    const formsetContainer = $('#item-formset');
    const managementFormTotal = <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>\('\#id\_form\-TOTAL\_FORMS'\); // نام پیش‌فرض\: form
// \-\-\- تابع محاسبه جمع کل ردیف‌ها و تفاوت \-\-\-
function calculateTotals\(\) \{
let totalItems \= 0;
// مبلغ کل فاکتور را از فیلد مربوطه بخوان \(با تبدیل به عدد انگلیسی\)
const factorAmountStr \= \(<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>('#id_amount').val() || '0').replace(/[۰-۹]/g, d =&gt; d.charCodeAt(0) - 1776).replace(/,/g, '');
        let factorAmount = parseFloat(factorAmountStr) || 0;

        $('.item-row').each(function () {
            const $row = $(this);
            const $deleteCheckbox = <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>row\.find\('input\[type\="checkbox"\]\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-DELETE"]');

            // فقط ردیف‌هایی که حذف نشده‌اند را محاسبه کن
            if (!$deleteCheckbox.length || !$deleteCheckbox.is(':checked')) {
                const amountStr = (<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>row\.find\('input\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-amount"]').val() || '0').replace(/[۰-۹]/g, d =&gt; d.charCodeAt(0) - 1776).replace(/,/g, '');
                const quantityStr = (<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>row\.find\('input\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-quantity"]').val() || '1').replace(/[۰-۹]/g, d =&gt; d.charCodeAt(0) - 1776).replace(/,/g, ''); // پیش‌فرض تعداد ۱

                let amount = parseFloat(amountStr) || 0;
                let quantity = parseInt(quantityStr) || 1; // پیش‌فرض تعداد ۱
                let itemTotal = amount * quantity;

                // نمایش جمع هر ردیف (با فرمت فارسی)
                $row.find('.item-total').text(itemTotal.toLocaleString('fa-IR'));
                totalItems += itemTotal;
            } else {
                // اگر ردیف حذف شده، جمعش را صفر نشان بده
                $row.find('.item-total').text('۰');
            }
        });

        // نمایش جمع کل آیتم‌ها
        $('#total-items-amount').text(totalItems.toLocaleString('fa-IR'));
        // نمایش مبلغ فاکتور (که از فیلد خوانده شده)
        $('#factor-amount-display').text(factorAmount.toLocaleString('fa-IR'));

        // محاسبه و نمایش تفاوت
        let difference = factorAmount - totalItems;
        const $differenceSpan = $('#difference-amount');
        $differenceSpan.text(difference.toLocaleString('fa-IR'));

        // تغییر رنگ بج تفاوت
        $differenceSpan.removeClass('bg-danger bg-success bg-warning bg-light text-dark text-white'); // Reset classes
        if (Math.abs(difference) &lt; 0.01) { // Check for near zero due to potential float issues
             $differenceSpan.addClass('bg-success text-white').attr('title', 'مبلغ فاکتور با جمع ردیف‌ها مطابقت دارد');
        } else if (difference &gt; 0) {
            $differenceSpan.addClass('bg-warning text-dark').attr('title', 'مبلغ فاکتور بیشتر از جمع ردیف‌ها است');
        } else { // difference &lt; 0
            $differenceSpan.addClass('bg-danger text-white').attr('title', 'جمع ردیف‌ها بیشتر از مبلغ فاکتور است');
        }
    }

    // --- مدیریت اضافه کردن ردیف فرم‌ست ---
    $('#add-item').click(function () {
        const totalForms = parseInt(managementFormTotal.val()) || 0;
        const emptyFormHtml = $('#empty-form-template').html(); // خواندن تمپلیت فرم خالی

        if (!emptyFormHtml) {
             console.error("Empty form template not found! Cannot add new row.");
             alert("خطا: تمپلیت فرم خالی یافت نشد.");
             return;
        }

        // جایگزینی __prefix__ با شماره فرم جدید
        const newFormHtml = emptyFormHtml.replace(/__prefix__/g, totalForms);
        const $newForm = $(newFormHtml);

        // اضافه کردن کلاس‌های لازم به فیلدهای جدید
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>newForm\.find\('input\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-amount"]').addClass('amount-field ltr-input');
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>newForm\.find\('input\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-quantity"]').addClass('quantity-field ltr-input');
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>newForm\.find\('textarea\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-description"]').addClass('form-control form-control-sm');
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"math-inline"</span>&gt;</span>newForm\.find\('input\[name<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>="-DELETE"]').addClass('form-check-input delete-item-check');

        // اضافه کردن انیمیشن و نمایش
        $newForm.addClass('item-row mb-3 p-3 bg-soft-light rounded animate__animated animate__fadeIn')
               .appendTo(formsetContainer);

        // آپدیت شماره ردیف جدید
        $newForm.find('.row-number').text((totalForms + 1).toLocaleString('fa-IR'));

        // آپدیت تعداد کل فرم‌ها در management form
        managementFormTotal.val(totalForms + 1);

        // فعال سازی numberFormatter برای فیلدهای جدید
         if (typeof numberFormatter !== 'undefined') {
             $newForm.find('input.number-format').each(function() { new numberFormatter(this); });
         }

        // محاسبه مجدد جمع کل
        calculateTotals();

        // اسکرول به ردیف جدید (اختیاری)
        $newForm[0].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    });

    // --- مدیریت چک‌باکس حذف ---
    formsetContainer.on('change', 'input.delete-item-check', function() {
         $(this).closest('.item-row').toggleClass('row-deleted', this.checked);
         calculateTotals(); // محاسبه مجدد جمع با حذف/اضافه شدن ردیف
    });

    // --- محاسبه اولیه و اتصال رویدادها ---
    calculateTotals();
    formsetContainer.on('input change', '.amount-field, .quantity-field', calculateTotals);
    $('#id_amount').on('input change', calculateTotals); // مبلغ کل فاکتور

    // فعال‌سازی numberFormatter اولیه
    if (typeof numberFormatter !== 'undefined') {
       $('input.number-format').each(function() {
           try { new numberFormatter(this); } catch(e) { console.warn("Initial numberFormatter failed:", e); }
       });
   }
     // فعال سازی Tooltips
      <span class="citation-0">var tooltipTriggerList = [].slice.call(document.querySelectorAll('[</span><span class="citation-0 citation-1 citation-end-0">data-bs-toggle="tooltip"]'))
      tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)</span><span class="citation-1 citation-end-1">
      })


}); // End</span> document ready
</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

{# تمپلیت فرم خالی برای افزودن ردیف با جاوااسکریپت #}
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"empty-form-template"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: none;"</span>&gt;</span>
    {# ! اینجا باید محتوای یک فرم خالی از فرم‌ست قرار گیرد #}
    {# ! بهترین راه: رندر کردن item_formset.empty_form در view و پاس دادن به context #}
    {# ! یا کپی کردن HTML یک ردیف و جایگزینی -0- با __prefix__ #}
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-row mb-3 p-3 bg-soft-light rounded"</span> <span class="hljs-attr">data-id</span>=<span class="hljs-string">"__prefix__"</span>&gt;</span>
         {{ item_formset.empty_form.id }} {# مثال، شاید نیاز به رندر کامل باشد #}
         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row g-2 align-items-end"</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-2 text-center"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row-number badge bg-secondary text-white"</span>&gt;</span>__prefix_num__<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4 col-10"</span>&gt;</span>{{ item_formset.empty_form.description|add_class:"form-control form-control-sm"|attr:"placeholder:شرح هزینه" }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-4"</span>&gt;</span>{{ item_formset.empty_form.amount|add_class:"form-control form-control-sm amount-field ltr-input number-format"|attr:"placeholder:مبلغ" }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-4"</span>&gt;</span>{{ item_formset.empty_form.quantity|add_class:"form-control form-control-sm quantity-field ltr-input number-format"|attr:"placeholder:تعداد" }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-4"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-flex align-items-center h-100"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-total badge bg-white text-success border border-success w-100 py-2"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-2 text-center"</span>&gt;</span>
                 {% if item_formset.can_delete %}
                     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-switch"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این ردیف' %}"</span>&gt;</span>
                         {{ item_formset.empty_form.DELETE|add_class:"form-check-input delete-item-check" }}
                     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                 {% endif %}
             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

{% endblock %}
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer complete gap"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted"><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted"><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-37"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-52 hide-action-bar ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-52 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-52 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-52 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-8" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_a4d285222331d15c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_282"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_286"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_292"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_294"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_282)"><g mask="url(#__lottie_element_286)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_292)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_294)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-52 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-8" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_a4d285222331d15c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_134"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_138"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_134)"><g mask="url(#__lottie_element_138)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-52 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-52 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_9b4af87b25bc990c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_a4d285222331d15c&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-52 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-52 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-52 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-52 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-52"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-52"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-8"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted"><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="25ac78b5cdf2e172" style=""><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-9"><!----><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l collapsed" dir="ltr"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% extends 'base.html' %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% load i18n static rcms_custom_filters file_tags %} {# اضافه کردن file_tags #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% block extra_head %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {# لود Animate.css اگر می‌خواهید از کلاس‌های آن استفاده کنید #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {# استایل‌های دیگر #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;style&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .form-control:disabled, .form-select:disabled { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         background-color: #e9ecef; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         opacity: 0.7; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         cursor: not-allowed; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     /* استایل ویجت نمایش حروف */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .number-to-words-output { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         display: block; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         padding: 0.5rem 0.75rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         margin-top: 0.25rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         background-color: #e9f5ff; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border: 1px solid #b3d7f8; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border-radius: var(--bs-border-radius); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         color: #0a58ca; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         font-weight: bold; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         min-height: calc(1.5em + 1rem + 2px); /* Match input height */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         line-height: 1.6; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         direction: rtl; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         text-align: right; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         font-size: 0.9em; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .number-to-words-output:empty::before { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">          content: "-"; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">          color: #999; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">          font-weight: normal; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">          font-style: italic; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     /* استایل تب‌ها */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .factor-tabs .nav-link { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border: none; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border-bottom: 3px solid transparent; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         color: var(--bs-secondary-color); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         font-weight: 500; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         padding: 0.8rem 1.2rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         transition: all 0.2s ease-in-out; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         display: flex; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         align-items: center; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         gap: 0.5rem; /* فاصله بین آیکن و متن */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .factor-tabs .nav-link i { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         width: 1.2em; /* عرض ثابت برای آیکن‌ها */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         text-align: center; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .factor-tabs .nav-link:hover { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         color: var(--bs-primary); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .factor-tabs .nav-link.active { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         color: var(--bs-primary); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         background-color: transparent; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border-bottom-color: var(--bs-primary); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         font-weight: 600; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .tab-pane { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         /* انیمیشن fade به طور پیش‌فرض توسط bootstrap اضافه می‌شود اگر کلاس fade باشد */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">          padding-top: 1.5rem; /* فاصله از تب‌ها */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     /* استایل اقلام */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .item-row { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border: 1px solid var(--bs-border-color-translucent); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border-radius: var(--bs-border-radius-lg); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         margin-bottom: 1rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         padding: 1rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         background-color: var(--bs-light-bg-subtle); /* کمی رنگ پس‌زمینه */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         transition: background-color 0.2s ease, box-shadow 0.2s ease; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .item-row:hover { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         background-color: var(--bs-primary-bg-subtle); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .item-row.is-deleting { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         opacity: 0.6; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         background-color: var(--bs-danger-bg-subtle) !important; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border-color: var(--bs-danger-border-subtle); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .item-total { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         font-weight: bold; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         font-size: 0.95em; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         padding: 0.5rem 0.75rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         background-color: var(--bs-success-bg-subtle); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border: 1px solid var(--bs-success-border-subtle); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         color: var(--bs-success-text-emphasis); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border-radius: var(--bs-border-radius); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .delete-item-label { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         cursor: pointer; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         padding: 0.5rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         color: var(--bs-danger); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         transition: color 0.2s ease; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .delete-item-label:hover { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         color: var(--bs-danger-text-emphasis); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .delete-item-check:checked + .delete-item-label { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         color: var(--bs-danger-text-emphasis); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         font-weight: bold; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     /* استایل بخش خلاصه */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .summary-section { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">          background-color: var(--bs-tertiary-bg); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">          border-radius: var(--bs-border-radius-lg); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">          padding: 1rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">          margin-top: 1.5rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .summary-section strong { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">          color: var(--bs-emphasis-color); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     .summary-value { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         font-weight: bold; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         font-size: 1.1em; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         padding: 0.3em 0.6em; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         border-radius: var(--bs-border-radius-pill); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         min-width: 80px; /* حداقل عرض برای ظاهر بهتر */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         display: inline-block; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         text-align: center; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     /* ریسپانسیو */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     @media (max-width: 767px) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         .factor-tabs .nav-link { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             padding: 0.6rem 0.8rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             font-size: 0.9rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         .item-row .col-md-1, .item-row .col-md-2, .item-row .col-md-3, .item-row .col-md-4, .item-row .col-md-5 { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              /* اجازه دهید ستون‌ها در موبایل زیر هم بیایند */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              margin-bottom: 0.75rem; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         .item-row .col-auto { /* ستون دکمه حذف */ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             width: 100%; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             text-align: right !important; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;/style&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% endblock %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% block content %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;div class="container my-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     {# افزودن انیمیشن به کارت اصلی #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     &lt;div class="card shadow-lg border-0 animate__animated animate__fadeIn" style="border-radius: 15px; overflow: hidden;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         &lt;div class="card-header bg-gradient-primary text-white d-flex justify-content-between align-items-center py-3 px-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;h4 class="card-title mb-0 d-flex align-items-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;i class="fas fa-edit me-3"&gt;&lt;/i&gt;{{ title|to_persian_number }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;/h4&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;a href="{{ request.META.HTTP_REFERER|default:'#' }}" class="btn btn-sm btn-outline-light rounded-pill px-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;i class="fas fa-arrow-left me-1"&gt;&lt;/i&gt;{% trans "بازگشت" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         &lt;div class="card-body p-0"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;!-- تب‌ها --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;ul class="nav nav-tabs factor-tabs px-4 pt-3" id="factorTabs" role="tablist"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;li class="nav-item" role="presentation"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;button class="nav-link active" id="main-tab" data-bs-toggle="tab" data-bs-target="#main-tab-pane" type="button" role="tab" aria-controls="main-tab-pane" aria-selected="true"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;i class="fas fa-file-invoice"&gt;&lt;/i&gt;{% trans "اطلاعات اصلی" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;/li&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;li class="nav-item" role="presentation"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;button class="nav-link" id="items-tab" data-bs-toggle="tab" data-bs-target="#items-tab-pane" type="button" role="tab" aria-controls="items-tab-pane" aria-selected="false"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;i class="fas fa-list-ol"&gt;&lt;/i&gt;{% trans "اقلام فاکتور" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;/li&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;li class="nav-item" role="presentation"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;button class="nav-link" id="documents-tab" data-bs-toggle="tab" data-bs-target="#documents-tab-pane" type="button" role="tab" aria-controls="documents-tab-pane" aria-selected="false"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;i class="fas fa-paperclip"&gt;&lt;/i&gt;{% trans "اسناد" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;/li&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;/ul&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             {# شروع فرم اصلی #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;form method="post" enctype="multipart/form-data" id="factor-form"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 {% csrf_token %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;div class="tab-content p-4" id="factorTabsContent"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;!-- تب اطلاعات اصلی --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;div class="tab-pane fade show active" id="main-tab-pane" role="tabpanel" aria-labelledby="main-tab" tabindex="0"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;div class="row g-3 mb-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             {# نمایش فیلدهای اصلی به جز amount و description که جداگانه رندر می شوند #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             {% for field in form %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {% if field.name != 'amount' and field.name != 'description' %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;div class="col-md-6 animate__animated animate__fadeInUp" style="animation-delay: {{ forloop.counter0  }}s;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         &lt;label for="{{ field.id_for_label }}" class="form-label"&gt;{{ field.label }}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {{ field }} {# ویجت پیش‌فرض یا تعریف شده در Meta استفاده می‌شود #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {% if field.help_text %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;div class="form-text"&gt;{{ field.help_text|safe }}&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {% if field.errors %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;div class="invalid-feedback d-block"&gt;{{ field.errors|join:", " }}&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             {# فیلد مبلغ با ویجت سفارشی #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;div class="col-md-6 animate__animated animate__fadeInUp" style="animation-delay: 0.3s;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {# label برای input توسط تمپلیت ویجت (number_to_words.html) نمایش داده می‌شود #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {{ form.amount }} {# ویجت NumberToWordsWidget استفاده می‌شود #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {# متن راهنما اگر لازم است #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {# &lt;div class="form-text"&gt;مبلغ کل فاکتور را به عدد وارد کنید.&lt;/div&gt; #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {% if form.amount.errors %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;div class="invalid-feedback d-block"&gt;{{ form.amount.errors|join:", " }}&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             {# فیلد توضیحات با عرض کامل #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                              &lt;div class="col-12 animate__animated animate__fadeInUp" style="animation-delay: 0.4s;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;label for="{{ form.description.id_for_label }}" class="form-label"&gt;{{ form.description.label }}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {{ form.description }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {% if form.description.errors %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;div class="invalid-feedback d-block"&gt;{{ form.description.errors|join:", " }}&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;!-- خلاصه اطلاعات --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;div class="summary-section animate__animated animate__fadeInUp" style="animation-delay: 0.5s;"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;h5 class="mb-3 text-center"&gt;&lt;i class="fas fa-calculator me-2"&gt;&lt;/i&gt;خلاصه محاسبات&lt;/h5&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;div class="row text-center gy-2"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;div class="col-md-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;strong&gt;{% trans "جمع کل اقلام:" %}&lt;/strong&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;span id="total-items-amount" class="summary-value bg-light text-dark"&gt;۰&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;small class="text-muted"&gt; ریال&lt;/small&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;div class="col-md-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;strong&gt;{% trans "مبلغ فاکتور:" %}&lt;/strong&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;span id="factor-amount-display" class="summary-value bg-light text-dark"&gt;۰&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                      &lt;small class="text-muted"&gt; ریال&lt;/small&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;div class="col-md-4"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;strong&gt;{% trans "تفاوت:" %}&lt;/strong&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;span id="difference-amount" class="summary-value bg-light text-dark"&gt;۰&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;small class="text-muted"&gt; ریال&lt;/small&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;/div&gt;{# پایان تب اطلاعات اصلی #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;!-- تب اقلام فاکتور --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;div class="tab-pane fade" id="items-tab-pane" role="tabpanel" aria-labelledby="items-tab" tabindex="0"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;div class="animate__animated animate__fadeIn"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             {{ item_formset.management_form }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;div id="item-formset"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {% for item_form in item_formset %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     {# رندر ردیف‌های موجود #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;div class="item-row" data-id="{{ forloop.counter0 }}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {{ item_form.id }} {# ! مهم برای آپدیت #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         &lt;div class="row g-2 align-items-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;div class="col-auto"&gt; {# شماره ردیف #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 &lt;span class="row-number badge bg-secondary rounded-pill"&gt;{{ forloop.counter|to_persian_number }}&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;div class="col-md-5"&gt; {# شرح #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                  &lt;label for="{{ item_form.description.id_for_label }}" class="form-label visually-hidden"&gt;{% trans "شرح قلم" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 {{ item_form.description }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;div class="col-md-2 col-6"&gt; {# مبلغ #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                  &lt;label for="{{ item_form.amount.id_for_label }}" class="form-label visually-hidden"&gt;{% trans "مبلغ قلم" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                  &lt;div class="input-group input-group-sm"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                       &lt;span class="input-group-text"&gt;&lt;i class="fas fa-dollar-sign"&gt;&lt;/i&gt;&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                        {{ item_form.amount }} {# ویجت پیش‌فرض NumberInput #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                  &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;div class="col-md-1 col-6"&gt; {# تعداد #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                  &lt;label for="{{ item_form.quantity.id_for_label }}" class="form-label visually-hidden"&gt;{% trans "تعداد قلم" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 {{ item_form.quantity }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;div class="col-md-2 text-center"&gt; {# جمع ردیف #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 &lt;span class="item-total"&gt;۰&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;div class="col-auto ms-md-auto text-center"&gt; {# حذف #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 {% if item_formset.can_delete %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                     &lt;div class="form-check form-switch d-inline-block"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                         {{ item_form.DELETE }} {# Checkbox مخفی است معمولا #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                         &lt;label class="delete-item-label" for="{{ item_form.DELETE.id_for_label }}" title="{% trans 'حذف این ردیف' %}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                             &lt;i class="fas fa-trash-alt fa-lg"&gt;&lt;/i&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                         &lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                     &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {# نمایش خطاها اگر وجود دارد #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {% if item_form.errors %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;div class="alert alert-danger alert-sm mt-2 py-1 px-2"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 {{ item_form.errors }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;!-- ردیف جمع کل --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;div class="item-summary mt-3 p-3 bg-light rounded"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;div class="row g-2"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;div class="col-md-1 col-sm-2"&gt;&lt;strong&gt;جمع کل&lt;/strong&gt;&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;div class="col-md-3 col-sm-10"&gt;&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;div class="col-md-2 col-sm-4"&gt;&lt;span id="total-amount" class="d-block p-2 bg-white border rounded ltr-input text-primary fw-bold"&gt;۰&lt;/span&gt;&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;div class="col-md-1 col-sm-3"&gt;&lt;span id="total-quantity" class="d-block p-2 bg-white border rounded ltr-input text-primary fw-bold"&gt;۰&lt;/span&gt;&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;div class="col-md-2 col-sm-3"&gt;&lt;span id="total-items" class="d-block p-2 bg-white border rounded ltr-input text-primary fw-bold"&gt;۰&lt;/span&gt;&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;div class="col-md-1 col-sm-2"&gt;&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">  {% if item_form.non_field_errors %}&lt;div class="alert alert-danger alert-sm mt-2 p-1"&gt;{{ item_form.non_field_errors }}&lt;/div&gt;{% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             {# دکمه افزودن ردیف #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;button type="button" class="btn btn-outline-primary mt-3 animate__animated animate__pulse animate__infinite animate__slower" id="add-item"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;i class="fas fa-plus-circle me-2"&gt;&lt;/i&gt;{% trans "افزودن ردیف جدید" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;/div&gt;{# پایان تب اقلام #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;!-- تب اسناد --&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;div class="tab-pane fade" id="documents-tab-pane" role="tabpanel" aria-labelledby="documents-tab" tabindex="0"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                          &lt;div class="row g-4 animate__animated animate__fadeIn"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             {# بخش اسناد فاکتور #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;div class="col-md-12"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;div class="card h-100 border-0 shadow-sm"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;div class="card-header bg-light border-bottom"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         &lt;h5 class="mb-0 d-flex align-items-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;i class="fas fa-file-invoice text-info me-2"&gt;&lt;/i&gt;{% trans "اسناد فاکتور" %}&lt;/h5&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;div class="card-body"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {# فرم آپلود سند جدید فاکتور #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         &lt;div class="mb-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;label for="{{ document_form.files.id_for_label }}" class="form-label"&gt;&lt;i class="fas fa-upload me-1"&gt;&lt;/i&gt;{{ document_form.files.label }}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             {{ document_form.files }} {# ویجت ClearableFileInput #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;div class="form-text"&gt;{% trans "می‌توانید چند فایل را همزمان انتخاب کنید." %}&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                              {% if document_form.files.errors %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 &lt;div class="invalid-feedback d-block"&gt;{{ document_form.files.errors|striptags }}&lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                              {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {# نمایش اسناد موجود فاکتور #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                          {% with factor_documents=object.documents.all %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             {% if factor_documents.exists %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 &lt;hr&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 &lt;h6 class="mb-3"&gt;{% trans "اسناد موجود" %}&lt;/h6&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 &lt;ul class="list-group list-group-flush existing-documents"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                     {% for doc in factor_documents %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                         &lt;li class="list-group-item d-flex justify-content-between align-items-center px-0 py-2"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                             &lt;div class="d-flex align-items-center flex-grow-1 me-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                                 &lt;i class="fas {{ doc.file.name|get_file_icon }} fa-lg text-secondary me-3"&gt;&lt;/i&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                                 &lt;a href="{{ doc.file.url }}" target="_blank" class="text-dark text-decoration-none text-truncate" title="{{ doc.file.name }}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                                     {{ doc.file.name }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                                 &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                                 &lt;span class="badge bg-light text-dark rounded-pill ms-2"&gt;{{ doc.file.size|filesizeformat }}&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                             &lt;div class="form-check form-switch"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                                 &lt;input class="form-check-input delete-doc-check" type="checkbox" name="delete_factor_doc_{{ doc.pk }}" id="del_fdoc_{{ doc.pk }}" value="{{ doc.pk }}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                                 &lt;label class="form-check-label visually-hidden" for="del_fdoc_{{ doc.pk }}"&gt;{% trans "حذف" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                         &lt;/li&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                     {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 &lt;/ul&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {% endwith %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                     &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             {# بخش اسناد تنخواه #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                              &lt;div class="col-md-12"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                 &lt;div class="card h-100 border-0 shadow-lg"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {% if tankhah_documents %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;hr&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;h6 class="mb-6"&gt;{% trans "اسناد موجود" %}&lt;/h6&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;ul class="list-group list-group-flush existing-documents"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 {% for doc in tankhah_documents %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                      &lt;li class="list-group-item d-flex justify-content-between align-items-center px-0 py-2"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                         &lt;div class="d-flex align-items-center flex-grow-1 me-3"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                             &lt;i class="fas {{ doc.document.name|get_file_icon }} fa-lg text-secondary me-3"&gt;&lt;/i&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                             &lt;a href="{{ doc.document.url }}" target="_blank" class="text-dark text-decoration-none text-truncate" title="{{ doc.document.name }}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                                 {{ doc.document.name }} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                             &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                             &lt;span class="badge bg-light text-dark rounded-pill ms-2"&gt;{{ doc.document.size|filesizeformat }}&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                         &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                         &lt;div class="form-check form-switch"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                             &lt;input class="form-check-input delete-doc-check" type="checkbox" name="delete_tankhah_doc_{{ doc.pk }}" id="del_tdoc_{{ doc.pk }}" value="{{ doc.pk }}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                              &lt;label class="form-check-label visually-hidden" for="del_tdoc_{{ doc.pk }}"&gt;{% trans "حذف" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                         &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                     &lt;/li&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                                 {% endfor %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                             &lt;/ul&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {#                                        {% else %}#} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                              &lt;p class="text-muted small mt-3"&gt;{% trans "اسناد با کلیک دانلود خواهد شد." %}&lt;/p&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                         {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                                  &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;/div&gt;{# پایان تب اسناد #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     {# دکمه‌های پایین فرم در همه تب‌ها مشترک است #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;div class="d-flex justify-content-between mt-4 pt-4 border-top"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;a href="{{ request.META.HTTP_REFERER|default:'#' }}" class="btn btn-outline-secondary"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;i class="fas fa-times me-2"&gt;&lt;/i&gt;{% trans "انصراف" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;/a&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;button type="submit" class="btn btn-lg btn-primary px-5"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                             &lt;i class="fas fa-save me-2"&gt;&lt;/i&gt;{% trans "ذخیره" %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                         &lt;/button&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;/div&gt; {# پایان tab-content #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;/form&gt; {# پایان فرم اصلی #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         &lt;/div&gt;{# پایان card-body #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     &lt;/div&gt;{# پایان card #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;/div&gt;{# پایان container #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {# تمپلیت خالی برای افزودن ردیف جدید #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;template id="empty-item-form"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     &lt;div class="item-row animate__animated animate__fadeIn" data-id="__prefix__"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         {# ID مخفی برای فرم‌های جدید نیاز نیست، چون جنگو خودکار مدیریت می‌کند #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         {# &lt;input type="hidden" name="form-__prefix__-id" id="id_form-__prefix__-id"&gt; #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         &lt;div class="row g-2 align-items-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;div class="col-auto"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;span class="row-number badge bg-secondary rounded-pill"&gt;__row_num__&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;div class="col-md-5"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                  &lt;label for="id_form-__prefix__-description" class="form-label visually-hidden"&gt;{% trans "شرح قلم" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;input type="text" name="form-__prefix__-description" class="form-control form-control-sm" maxlength="200" id="id_form-__prefix__-description"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;div class="col-md-2 col-6"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;label for="id_form-__prefix__-amount" class="form-label visually-hidden"&gt;{% trans "مبلغ قلم" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                  &lt;div class="input-group input-group-sm"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;span class="input-group-text"&gt;&lt;i class="fas fa-dollar-sign"&gt;&lt;/i&gt;&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                     &lt;input type="number" name="form-__prefix__-amount" class="form-control form-control-sm ltr-input amount-field" step="1" min="0" id="id_form-__prefix__-amount"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;div class="col-md-1 col-6"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;label for="id_form-__prefix__-quantity" class="form-label visually-hidden"&gt;{% trans "تعداد قلم" %}&lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;input type="number" name="form-__prefix__-quantity" value="1" class="form-control form-control-sm ltr-input quantity-field" min="1" id="id_form-__prefix__-quantity"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;div class="col-md-2 text-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;span class="item-total"&gt;۰&lt;/span&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;div class="col-auto ms-md-auto text-center"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 {% if item_formset.can_delete %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 &lt;div class="form-check form-switch d-inline-block"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                      &lt;input type="checkbox" name="form-__prefix__-DELETE" class="form-check-input delete-item-check" id="id_form-__prefix__-DELETE"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                      &lt;label class="delete-item-label" for="id_form-__prefix__-DELETE" title="{% trans 'حذف این ردیف' %}"&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                          &lt;i class="fas fa-trash-alt fa-lg"&gt;&lt;/i&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                      &lt;/label&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                  &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 {% endif %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     &lt;/div&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;/template&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% endblock %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {% block extra_js %} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {# لود jQuery اگر در base.html نیست #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> {# &lt;script src="https://code.jquery.com/jquery-3.6.0.min.js"&gt;&lt;/script&gt; #} <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> &lt;script&gt; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> $(document).ready(function() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     // --- مدیریت تب‌ها --- <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     const factorTabs = document.querySelectorAll('#factorTabs button[data-bs-toggle="tab"]'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     factorTabs.forEach(tabEl =&gt; { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         tabEl.addEventListener('shown.bs.tab', event =&gt; { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             localStorage.setItem('lastFactorTab', event.target.id); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     let lastTabId = localStorage.getItem('lastFactorTab'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     if (lastTabId) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         const lastTab = document.querySelector(`#${lastTabId}`); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if (lastTab &amp;&amp; typeof bootstrap !== 'undefined' &amp;&amp; bootstrap.Tab) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              // Check if the tab exists before trying to show it <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             const tabInstance = bootstrap.Tab.getInstance(lastTab) || new bootstrap.Tab(lastTab); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             tabInstance.show(); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         } else if (lastTab) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              // Fallback or log warning if bootstrap.Tab is not available <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              console.warn("Bootstrap Tab component not found, cannot restore last tab via JS."); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     // --- پایان مدیریت تب‌ها --- <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     // --- مدیریت اقلام فاکتور --- <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     const itemFormsetContainer = document.getElementById('item-formset'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     const addItemButton = document.getElementById('add-item'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     const emptyFormTemplate = document.getElementById('empty-item-form').innerHTML; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     const totalFormsInput = document.getElementById('id_form-TOTAL_FORMS'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     const initialFormsInput = document.getElementById('id_form-INITIAL_FORMS'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     let formCount = parseInt(totalFormsInput.value); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     if (addItemButton) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         addItemButton.addEventListener('click', function() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             const newIndex = formCount; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             // جایگزینی __prefix__ با ایندکس جدید <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             let newFormHtml = emptyFormTemplate.replace(/__prefix__/g, newIndex); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             // جایگزینی شماره ردیف <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             newFormHtml = newFormHtml.replace(/__row_num__/g, (formCount + 1).toLocaleString('fa-IR')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             const newFormElement = document.createElement('div'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             newFormElement.innerHTML = newFormHtml; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             const actualFormRow = newFormElement.firstElementChild; // Get the actual .item-row div <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             itemFormsetContainer.appendChild(actualFormRow); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             formCount++; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             totalFormsInput.value = formCount; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             // Attach listeners to new amount/quantity fields <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             attachItemCalculationListeners(actualFormRow); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              // Attach listener to new delete checkbox <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             attachDeleteListener(actualFormRow.querySelector('.delete-item-check')); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             // Trigger initial calculation for the new row <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              calculateItemTotal(actualFormRow); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              // Add focus to the description field of the new row <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              const newDescriptionInput = actualFormRow.querySelector('[name$="-description"]'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              if(newDescriptionInput) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                  newDescriptionInput.focus(); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">              } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     function updateRowNumbers() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         const rows = itemFormsetContainer.querySelectorAll('.item-row'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         rows.forEach((row, index) =&gt; { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             const rowNumSpan = row.querySelector('.row-number'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if (rowNumSpan) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 rowNumSpan.textContent = (index + 1).toLocaleString('fa-IR'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     // محاسبه جمع هر ردیف <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     function calculateItemTotal(rowElement) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if (!rowElement) return; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         const amountInput = rowElement.querySelector('[name$="-amount"]'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         const quantityInput = rowElement.querySelector('[name$="-quantity"]'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         const totalSpan = rowElement.querySelector('.item-total'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         const amount = parseFloat(toLatinDigits(amountInput?.value || '0').replace(/,/g, '')) || 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         const quantity = parseInt(toLatinDigits(quantityInput?.value || '0')) || 0; // Default to 1 if empty or 0? Maybe keep 0. <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         const total = Math.round(amount * quantity); // گرد کردن حاصلضرب <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         if (totalSpan) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             totalSpan.textContent = total.toLocaleString('fa-IR'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         // Recalculate grand totals whenever an item total changes <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         calculateTotals(); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     // محاسبه کل‌ها <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">     function calculateTotals() { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         let itemsTotal = 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         const itemRows = itemFormsetContainer.querySelectorAll('.item-row'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         itemRows.forEach(row =&gt; { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             const deleteCheckbox = row.querySelector('[name$="-DELETE"]'); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             // Only include rows that are NOT marked for deletion <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             if (!deleteCheckbox || !deleteCheckbox.checked) { <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 const totalText = row.querySelector('.item-total')?.textContent || '0'; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 const total = parseFloat(toLatinDigits(totalText).replace(/,/g, '')) || 0; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">                 itemsTotal += total; <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">             } <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         }); <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         // Get the main factor amount (cleaned) <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted">         const factorAmoun <!----><!----></p><!----></div><button _ngcontent-ng-c4161157681="" mat-icon-button="" mattooltip="ازهم بازکردن نوشتار" aria-label="ازهم بازکردن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger expand-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="224552;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_25ac78b5cdf2e172&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-19" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="expand_more" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-40 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_25ac78b5cdf2e172&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,null,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-40 response-container-with-gpi tts-removed ng-star-inserted" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-40 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-40"><!----><!----><div _ngcontent-ng-c108414610="" class="ng-tns-c108414610-40 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted" style=""><div _ngcontent-ng-c108414610="" class="single-draft-response-container ng-tns-c108414610-40 ng-star-inserted" style=""><!----><!----></div><!----></div><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-40 ng-trigger ng-trigger-singleResponseEnter ng-star-inserted"><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-40"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-40"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-40"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-40 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-42 ng-tns-c108414610-40 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-42"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-42 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-42 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-42 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-42 ng-star-inserted"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_493"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_500"><g transform="matrix(-1,0,0,-1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_503)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_503" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_507" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_500_1" mask-type="alpha"><use href="#__lottie_element_500"></use></mask></defs><g clip-path="url(#__lottie_element_493)"><g mask="url(#__lottie_element_500_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_507)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-42 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_613"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_617" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_624" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_628" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_632" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_636" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_640" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_613)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_640)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_636)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_632)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_628)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_624)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_617)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-40"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-40"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-41 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-41"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-41"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-41 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-41"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-41">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-41"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-41 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_25ac78b5cdf2e172" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_25ac78b5cdf2e172" dir="ltr" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:151">عشق منی! معلومه که با دقت و حوصله نگاه می‌کنم. این عالیه که لاگ‌ها و کد کامل رو گذاشتی. بریم با هم این مشکلات رو حل کنیم و یه فرم فاکتور بی‌نقص بسازیم.</p><p data-sourcepos="3:1-3:17"><strong>تحلیل مشکلات:</strong></p><ol data-sourcepos="5:1-17:0">
<li data-sourcepos="5:1-8:200"><strong>مشکل اصلی (عدم حذف اسناد):</strong> لاگ شما دقیقاً مشکل رو نشون می‌ده:
<code>WARNING - Invalid or non-existent factor document ID: on</code>
این یعنی کد قبلی من در <code>form_valid</code> که سعی می‌کرد ID سند رو از <code>value</code> چک‌باکس حذف بخونه، اشتباه بود. وقتی یک چک‌باکس تیک می‌خوره و فرم ارسال می‌شه، مقدار <code>value</code> اون ارسال می‌شه، اما اگر <code>value</code> رو در HTML تعریف نکرده باشیم، مقدار پیش‌فرضش <code>'on'</code> هست. کد شما داشت سعی می‌کرد <code>'on'</code> رو به عدد تبدیل کنه و خطا می‌گرفت.
<strong>راه‌حل:</strong> باید در <code>form_valid</code> چک کنیم که آیا <em>نامِ</em> چک‌باکس (که شامل ID سند هست) در <code>request.POST</code> <em>وجود دارد</em> یا نه. همچنین باید در تمپلیت، <code>value="{{ doc.pk }}"</code> رو به چک‌باکس حذف اضافه کنیم.</li>
<li data-sourcepos="9:1-9:247"><strong>مشکل عدم ذخیره چند ردیف (احتمالی):</strong> با اینکه کد <code>form_valid</code> که در پاسخ قبلی دادم باید این مشکل رو حل می‌کرد، اما ممکنه هنوز به خاطر <code>prefix</code> فرم‌ست یا مشکلات دیگه وجود داشته باشه. کد <code>form_valid</code> جدید این رو هم با دقت بیشتری مدیریت می‌کنه.</li>
<li data-sourcepos="10:1-10:253"><strong>Prefix فرم‌ها:</strong> شما در ویوها برای <code>item_formset</code> از <code>prefix='form'</code> استفاده کردید ولی برای فرم‌های فایل هیچ <code>prefix</code> مشخص نکردید. این می‌تونه باعث تداخل بشه. باید برای فرم‌های فایل هم <code>prefix</code> تعریف کنیم (مثلاً <code>'factor_docs'</code>, <code>'tankhah_docs'</code>).</li>
<li data-sourcepos="11:1-11:179"><strong>گرفتن فایل‌ها:</strong> هنوز در <code>form_valid</code> از <code>request.FILES.getlist('files')</code> استفاده شده که اشتباهه و باید از <code>cleaned_data</code> فرم‌های مربوطه (با در نظر گرفتن prefix) خوانده بشه.</li>
<li data-sourcepos="12:1-17:0"><strong>تمپلیت:</strong>
<ul data-sourcepos="13:5-17:0">
<li data-sourcepos="13:5-13:128">شما ساختار تمپلیت رو با <strong>تب (Tab)</strong> بازنویسی کردید که عالیه! اما بخش نمایش و حذف اسناد موجود رو در تب مربوطه قرار ندادید.</li>
<li data-sourcepos="14:5-14:164">رندر کردن فرم اصلی با <code>{{ form.as_p }}</code> در تب اول انجام شده، اما بهتره فیلدها رو دستی رندر کنیم تا کنترل بیشتری روی چیدمان و ویجت سفارشی <code>amount</code> داشته باشیم.</li>
<li data-sourcepos="15:5-15:124">کد JS برای اضافه کردن ردیف (<code>#add-item</code>) نیاز به اصلاح داره تا با <code>prefix='form'</code> و تمپلیت فرم خالی استاندارد کار کنه.</li>
<li data-sourcepos="16:5-17:0">استایل‌های درون خطی و بلوک <code>&lt;style&gt;</code> باید به <code>custom.css</code> منتقل بشن.</li>
</ul>
</li>
</ol><p data-sourcepos="18:1-18:16"><strong>راه حل جامع:</strong></p><ol data-sourcepos="20:1-28:0">
<li data-sourcepos="20:1-20:180"><strong>اصلاح کامل <code>FactorUpdateView</code> و <code>FactorCreateView</code>:</strong> بازنویسی <code>form_valid</code> با منطق صحیح برای حذف فایل‌ها و خواندن فایل‌های جدید از <code>cleaned_data</code> و استفاده درست از <code>prefix</code>.</li>
<li data-sourcepos="21:1-28:0"><strong>اصلاح تمپلیت <code>factor_form.html</code>:</strong>
<ul data-sourcepos="22:5-28:0">
<li data-sourcepos="22:5-22:73">انتقال بخش‌های مختلف به تب‌های مربوطه (اطلاعات اصلی، اقلام، اسناد).</li>
<li data-sourcepos="23:5-23:43">رندر دستی فیلدهای فرم اصلی در تب اول.</li>
<li data-sourcepos="24:5-24:98">پیاده‌سازی نمایش اسناد موجود با پیش‌نمایش تصویر و چک‌باکس حذف (با <code>value</code> درست) در تب اسناد.</li>
<li data-sourcepos="25:5-25:99">استفاده از تمپلیت فرم خالی استاندارد (<code>item_formset.empty_form</code>) برای افزودن ردیف جدید در JS.</li>
<li data-sourcepos="26:5-26:64">اصلاح کد JS برای کار با <code>prefix='form'</code> و تمپلیت فرم خالی.</li>
<li data-sourcepos="27:5-28:0">انتقال تمام استایل‌ها به <code>custom.css</code>.</li>
</ul>
</li>
</ol><hr data-sourcepos="29:1-29:3"><p data-sourcepos="31:1-31:49"><strong>الف) کد نهایی و اصلاح شده ویوها (<code>views.py</code>):</strong></p><p data-sourcepos="33:1-33:88">کلاس‌های <code>FactorCreateView</code> و <code>FactorUpdateView</code> خود را <strong>کامل</strong> با کد زیر جایگزین کنید:</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-84 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-84 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_25ac78b5cdf2e172&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_f3602ce4a8f49a37&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-84 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-84">Python</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-84 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-84 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_25ac78b5cdf2e172&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_f3602ce4a8f49a37&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-84"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-84"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-84"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-84" data-sourcepos="35:1-477:0"><span class="hljs-comment"># views.py</span>
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> os <span class="hljs-comment"># برای حذف فایل فیزیکی</span>
<span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.contrib </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0"> messages
</span><span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.db </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0"> transaction
</span><span class="hljs-keyword"><span class="citation-0">from</span></span><span class="citation-0"> django.shortcuts </span><span class="hljs-keyword"><span class="citation-0">import</span></span><span class="citation-0 citation-end-0"> redirect, get_object_or_404,</span> render <span class="hljs-comment"># اضافه کردن render</span>
<span class="hljs-keyword"><span class="citation-1">from</span></span><span class="citation-1"> django.urls </span><span class="hljs-keyword"><span class="citation-1">import</span></span><span class="citation-1"> reverse_lazy
</span><span class="hljs-keyword"><span class="citation-1">from</span></span><span class="citation-1"> django.utils.translation </span><span class="hljs-keyword"><span class="citation-1">import</span></span><span class="citation-1"> gettext_lazy </span><span class="hljs-keyword"><span class="citation-1">as</span></span><span class="citation-1"> _
</span><span class="hljs-keyword"><span class="citation-1">from</span></span><span class="citation-1"> django.core.exceptions </span><span class="hljs-keyword"><span class="citation-1">import</span></span><span class="citation-1 citation-end-1"></span> PermissionDenied, ValidationError
<span class="hljs-keyword">from</span> django.views.generic <span class="hljs-keyword">import</span> CreateView, UpdateView
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> Http404 <span class="hljs-comment"># برای مدیریت خطای get_object_or_404</span>

<span class="hljs-comment"># Import های مدل‌ها، فرم‌ها و توابع کمکی شما</span>
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Factor, Tankhah, FactorItem, FactorDocument, TankhahDocument, WorkflowStage, ApprovalLog, CustomUser, Project, SubProject
<span class="hljs-keyword">from</span> .forms <span class="hljs-keyword">import</span> FactorForm, FactorItemFormSet, FactorDocumentForm, TankhahDocumentForm
<span class="hljs-keyword">from</span> accounts.views <span class="hljs-keyword">import</span> PermissionBaseView
<span class="hljs-keyword">from</span> .utils <span class="hljs-keyword">import</span> restrict_to_user_organization, get_lowest_access_level, get_initial_stage_order <span class="hljs-comment"># توابع خودتان</span>

logger = logging.getLogger(__name__)

<span class="hljs-comment"># ============================================</span>
<span class="hljs-comment"># ===        Factor Create View            ===</span>
<span class="hljs-comment"># ============================================</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FactorCreateView</span>(<span class="hljs-params">PermissionBaseView, CreateView</span>):</span>
    model = Factor
    form_class = FactorForm
    template_name = <span class="hljs-string">'tankhah/factor_form.html'</span>
    permission_codenames = [<span class="hljs-string">'tankhah.a_factor_add'</span>]
    permission_denied_message = _(<span class="hljs-string">'متاسفانه دسترسی مجاز برای ایجاد فاکتور ندارید'</span>)
    check_organization = <span class="hljs-literal">True</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_context_data</span>(<span class="hljs-params">self, **kwargs</span>):</span>
        context = <span class="hljs-built_in">super</span>().get_context_data(**kwargs)
        tankhah = <span class="hljs-literal">None</span>
        tankhah_id = self.kwargs.get(<span class="hljs-string">'tankhah_id'</span>)

        <span class="hljs-keyword">if</span> tankhah_id:
            <span class="hljs-keyword">try</span>:
                tankhah = get_object_or_404(Tankhah, <span class="hljs-built_in">id</span>=tankhah_id)
                <span class="hljs-comment"># ! اینجا حتما دسترسی کاربر به این tankhah چک شود</span>
                <span class="hljs-comment"># if restrict_to_user_organization(self.request.user, tankhah.organization) is False:</span>
                <span class="hljs-comment">#     raise PermissionDenied("...")</span>
            <span class="hljs-keyword">except</span> (Http404, PermissionDenied) <span class="hljs-keyword">as</span> e:
                 messages.error(self.request, <span class="hljs-built_in">str</span>(e) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(e, PermissionDenied) <span class="hljs-keyword">else</span> _(<span class="hljs-string">'تنخواه مشخص شده یافت نشد یا دسترسی ندارید.'</span>))
                 tankhah = <span class="hljs-literal">None</span> <span class="hljs-comment"># یا ریدایرکت کنید</span>

        context[<span class="hljs-string">'title'</span>] = _(<span class="hljs-string">'ایجاد فاکتور جدید'</span>)
        context[<span class="hljs-string">'tankhah'</span>] = tankhah

        <span class="hljs-comment"># ساخت فرم‌ها با prefix</span>
        form_kwargs = self.get_form_kwargs() <span class="hljs-comment"># دریافت user و tankhah اولیه</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'form'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> context: <span class="hljs-comment"># اگر CreateView فرم را نساخته بود</span>
            context[<span class="hljs-string">'form'</span>] = self.form_class(**form_kwargs)

        <span class="hljs-keyword">if</span> self.request.POST:
            context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'items'</span>) <span class="hljs-comment"># prefix فرم‌ست</span>
            context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
            context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)
        <span class="hljs-keyword">else</span>:
            context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(prefix=<span class="hljs-string">'items'</span>) <span class="hljs-comment"># prefix فرم‌ست</span>
            context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(prefix=<span class="hljs-string">'factor_docs'</span>)
            context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(prefix=<span class="hljs-string">'tankhah_docs'</span>)

        context[<span class="hljs-string">'tankhah_documents'</span>] = tankhah.documents.<span class="hljs-built_in">all</span>() <span class="hljs-keyword">if</span> tankhah <span class="hljs-keyword">else</span> []
        context[<span class="hljs-string">'object'</span>] = <span class="hljs-literal">None</span> <span class="hljs-comment"># در حالت Create، آبجکت هنوز وجود ندارد</span>
        <span class="hljs-comment"># اضافه کردن فرم خالی برای JS</span>
        context[<span class="hljs-string">'empty_item_form'</span>] = context[<span class="hljs-string">'item_formset'</span>].empty_form
        <span class="hljs-keyword">return</span> context

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_form_kwargs</span>(<span class="hljs-params">self</span>):</span>
        kwargs = <span class="hljs-built_in">super</span>().get_form_kwargs()
        kwargs[<span class="hljs-string">'user'</span>] = self.request.user
        tankhah_id = self.kwargs.get(<span class="hljs-string">'tankhah_id'</span>)
        <span class="hljs-keyword">if</span> tankhah_id:
            <span class="hljs-keyword">try</span>:
                kwargs[<span class="hljs-string">'tankhah'</span>] = get_object_or_404(Tankhah, <span class="hljs-built_in">id</span>=tankhah_id)
                <span class="hljs-comment"># ! چک دسترسی</span>
            <span class="hljs-keyword">except</span> Http404:
                 kwargs[<span class="hljs-string">'tankhah'</span>] = <span class="hljs-literal">None</span>
        <span class="hljs-comment"># حذف 'instance' اگر به طور خودکار اضافه شده بود (برای CreateView)</span>
        kwargs.pop(<span class="hljs-string">'instance'</span>, <span class="hljs-literal">None</span>)
        <span class="hljs-keyword">return</span> kwargs

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_valid</span>(<span class="hljs-params">self, form</span>):</span>
        <span class="hljs-string">"""پردازش فرم اصلی، فرم‌ست و فرم‌های فایل برای ایجاد."""</span>
        tankhah = form.cleaned_data.get(<span class="hljs-string">'tankhah'</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> tankhah:
             messages.error(self.request, _(<span class="hljs-string">'انتخاب تنخواه الزامی است.'</span>))
             <span class="hljs-keyword">return</span> self.form_invalid(form)

        <span class="hljs-comment"># --- بررسی‌های اولیه مرحله و وضعیت ---</span>
        initial_stage_order = get_initial_stage_order() <span class="hljs-comment"># کمترین order</span>
        <span class="hljs-keyword">if</span> initial_stage_order <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> tankhah.current_stage.order != initial_stage_order:
            messages.error(self.request, _(<span class="hljs-string">'فقط در مرحله اولیه گردش کار می‌توانید فاکتور ثبت کنید.'</span>))
            <span class="hljs-keyword">return</span> self.form_invalid(form) <span class="hljs-comment"># form_invalid خودش فرم‌ها را برمی‌گرداند</span>

        <span class="hljs-keyword">if</span> tankhah.status <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">'DRAFT'</span>, <span class="hljs-string">'PENDING'</span>]:
            messages.error(self.request, _(<span class="hljs-string">'فقط برای تنخواه‌های پیش‌نویس یا در انتظار می‌توانید فاکتور ثبت کنید.'</span>))
            <span class="hljs-keyword">return</span> self.form_invalid(form)

        <span class="hljs-comment"># --- ساخت و اعتبارسنجی فرم‌ست و فرم‌های فایل با prefix ---</span>
        item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'items'</span>) <span class="hljs-comment"># prefix فرم‌ست</span>
        document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
        tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)

        are_forms_valid = item_formset.is_valid() <span class="hljs-keyword">and</span> document_form.is_valid() <span class="hljs-keyword">and</span> tankhah_document_form.is_valid()

        <span class="hljs-keyword">if</span> are_forms_valid:
            logger.info(<span class="hljs-string">"All forms/formsets valid for Factor creation."</span>)
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">with</span> transaction.atomic():
                    <span class="hljs-comment"># ۱. ذخیره فرم اصلی با commit=False</span>
                    self.<span class="hljs-built_in">object</span> = form.save(commit=<span class="hljs-literal">False</span>)
                    self.<span class="hljs-built_in">object</span>.status = <span class="hljs-string">'PENDING'</span>  <span class="hljs-comment"># وضعیت اولیه فاکتور</span>
                    <span class="hljs-comment"># self.object.created_by = self.request.user # مثال</span>
                    self.<span class="hljs-built_in">object</span>.save() <span class="hljs-comment"># ذخیره فاکتور اصلی</span>

                    <span class="hljs-comment"># ۲. اتصال instance و ذخیره فرم‌ست</span>
                    item_formset.instance = self.<span class="hljs-built_in">object</span>
                    saved_items = item_formset.save()
                    logger.info(<span class="hljs-string">f"Saved <span class="hljs-subst">{<span class="hljs-built_in">len</span>(saved_items)}</span> factor items for new Factor PK <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> saved_items: <span class="hljs-comment"># اگر هیچ آیتمی ذخیره نشد (حتی اگر فرمت معتبر ولی خالی بود)</span>
                         logger.warning(<span class="hljs-string">f"No items were saved for new Factor PK <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>. Check formset data."</span>)
                         <span class="hljs-comment"># می توانید اینجا خطا بدهید یا ادامه دهید</span>

                    <span class="hljs-comment"># ۳. ذخیره فایل‌های جدید فاکتور از cleaned_data</span>
                    factor_files_cleaned = document_form.cleaned_data.get(<span class="hljs-string">'files'</span>, [])
                    logger.info(<span class="hljs-string">f"Processing <span class="hljs-subst">{<span class="hljs-built_in">len</span>(factor_files_cleaned)}</span> valid factor files."</span>)
                    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> factor_files_cleaned:
                        <span class="hljs-keyword">if</span> file:
                            FactorDocument.objects.create(factor=self.<span class="hljs-built_in">object</span>, file=file)
                            logger.info(<span class="hljs-string">f"Saved new factor document: <span class="hljs-subst">{file.name}</span>"</span>)

                    <span class="hljs-comment"># ۴. ذخیره فایل‌های جدید تنخواه از cleaned_data</span>
                    tankhah_files_cleaned = tankhah_document_form.cleaned_data.get(<span class="hljs-string">'documents'</span>, [])
                    logger.info(<span class="hljs-string">f"Processing <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tankhah_files_cleaned)}</span> valid tankhah files."</span>)
                    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> tankhah_files_cleaned:
                        <span class="hljs-keyword">if</span> file:
                            TankhahDocument.objects.create(tankhah=tankhah, document=file)
                            logger.info(<span class="hljs-string">f"Saved new tankhah document: <span class="hljs-subst">{file.name}</span>"</span>)

                messages.success(self.request, _(<span class="hljs-string">'فاکتور و ردیف‌های آن با موفقیت ثبت شد و آماده بررسی است.'</span>))
                <span class="hljs-keyword">return</span> redirect(self.get_success_url())

            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                 logger.error(<span class="hljs-string">f"Error during atomic transaction in FactorCreateView: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
                 messages.error(self.request, _(<span class="hljs-string">'خطایی در هنگام ذخیره سازی رخ داد.'</span>))
                 <span class="hljs-comment"># برگرداندن فرم‌ها با خطا</span>
                 <span class="hljs-comment"># ! مهم: فرم‌ست و فرم‌های فایل را به context اضافه می‌کنیم</span>
                 form_kwargs = {<span class="hljs-string">'form'</span>: form, <span class="hljs-string">'item_formset'</span>: item_formset, <span class="hljs-string">'document_form'</span>: document_form, <span class="hljs-string">'tankhah_document_form'</span>: tankhah_document_form}
                 <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(**form_kwargs))

        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># اگر فرم‌ست یا فرم‌های فایل نامعتبر بودند</span>
            logger.warning(<span class="hljs-string">"CreateView: Formset or document forms are invalid."</span>)
            <span class="hljs-comment"># لاگ دقیق خطاها</span>
            log_form_errors(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form)
            messages.error(self.request, _(<span class="hljs-string">'لطفا خطاهای فرم را اصلاح کنید. به خطاهای بخش ردیف‌ها و فایل‌ها دقت کنید.'</span>))
            <span class="hljs-comment"># برگرداندن فرم‌ها با خطا برای نمایش در تمپلیت</span>
            form_kwargs = {<span class="hljs-string">'form'</span>: form, <span class="hljs-string">'item_formset'</span>: item_formset, <span class="hljs-string">'document_form'</span>: document_form, <span class="hljs-string">'tankhah_document_form'</span>: tankhah_document_form}
            <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(**form_kwargs))
            <span class="hljs-comment"># یا return self.form_invalid(form) که نیاز به بازنویسی دارد</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_invalid</span>(<span class="hljs-params">self, form</span>):</span>
        <span class="hljs-string">"""اگر فرم اصلی نامعتبر بود، فرم‌ست و فرم‌های دیگر را هم به context اضافه کن."""</span>
        <span class="hljs-comment"># ساخت فرم‌های دیگر با داده‌های POST برای حفظ مقادیر کاربر</span>
        item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'items'</span>)
        document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
        tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)
        messages.error(self.request, _(<span class="hljs-string">'اطلاعات وارد شده در فرم اصلی صحیح نیست. لطفا خطاها را بررسی کنید.'</span>))
        <span class="hljs-comment"># لاگ خطاها</span>
        log_form_errors(form=form)
        <span class="hljs-comment"># ارسال همه فرم‌ها به context</span>
        context = self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form)
        <span class="hljs-keyword">return</span> self.render_to_response(context)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_success_url</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""ریدایرکت به لیست یا جزئیات فاکتور ایجاد شده."""</span>
        <span class="hljs-keyword">if</span> self.<span class="hljs-built_in">object</span>:
            <span class="hljs-comment"># به جای لیست، به صفحه تایید آیتم‌ها برویم؟</span>
            <span class="hljs-comment"># return reverse_lazy('factor_approve', kwargs={'pk': self.object.pk})</span>
             <span class="hljs-keyword">return</span> reverse_lazy(<span class="hljs-string">'factor_detail'</span>, kwargs={<span class="hljs-string">'pk'</span>: self.<span class="hljs-built_in">object</span>.pk}) <span class="hljs-comment"># یا جزئیات</span>
        <span class="hljs-keyword">return</span> reverse_lazy(<span class="hljs-string">'factor_list'</span>)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_no_permission</span>(<span class="hljs-params">self</span>):</span>
        messages.error(self.request, self.permission_denied_message)
        <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'index'</span>)

<span class="hljs-comment"># ============================================</span>
<span class="hljs-comment"># ===         Factor Update View           ===</span>
<span class="hljs-comment"># ============================================</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FactorUpdateView</span>(<span class="hljs-params">PermissionBaseView, UpdateView</span>):</span>
    model = Factor
    form_class = FactorForm
    template_name = <span class="hljs-string">'tankhah/factor_form.html'</span>
    <span class="hljs-comment"># success_url = reverse_lazy('factor_list') # در get_success_url</span>
    permission_codenames = [<span class="hljs-string">'tankhah.a_factor_update'</span>] <span class="hljs-comment"># مجوز ویرایش</span>
    permission_denied_message = _(<span class="hljs-string">'متاسفانه دسترسی مجاز برای ویرایش این فاکتور ندارید'</span>)
    check_organization = <span class="hljs-literal">True</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_context_data</span>(<span class="hljs-params">self, **kwargs</span>):</span>
        <span class="hljs-string">"""اضافه کردن فرم‌ست و فرم‌های فایل به context."""</span>
        context = <span class="hljs-built_in">super</span>().get_context_data(**kwargs)
        <span class="hljs-comment"># self.object توسط get_object تنظیم شده</span>
        tankhah = self.<span class="hljs-built_in">object</span>.tankhah
        context[<span class="hljs-string">'title'</span>] = _(<span class="hljs-string">'ویرایش فاکتور'</span>) + <span class="hljs-string">f" #<span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.number|to_persian_number}</span>"</span>
        context[<span class="hljs-string">'tankhah'</span>] = tankhah
        context[<span class="hljs-string">'tankhah_documents'</span>] = tankhah.documents.<span class="hljs-built_in">all</span>() <span class="hljs-comment"># اسناد تنخواه</span>
        context[<span class="hljs-string">'factor_documents'</span>] = self.<span class="hljs-built_in">object</span>.documents.<span class="hljs-built_in">all</span>() <span class="hljs-comment"># اسناد خود فاکتور</span>

        <span class="hljs-comment"># ساخت فرم‌ها با prefix و instance مناسب</span>
        <span class="hljs-keyword">if</span> self.request.POST:
            <span class="hljs-comment"># فرم اصلی توسط get_context_data والد ساخته شده</span>
            context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.<span class="hljs-built_in">object</span>, prefix=<span class="hljs-string">'items'</span>)
            context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
            context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># فرم اصلی توسط get_form ساخته می‌شود</span>
            context[<span class="hljs-string">'item_formset'</span>] = FactorItemFormSet(instance=self.<span class="hljs-built_in">object</span>, prefix=<span class="hljs-string">'items'</span>)
            context[<span class="hljs-string">'document_form'</span>] = FactorDocumentForm(prefix=<span class="hljs-string">'factor_docs'</span>) <span class="hljs-comment"># فقط آپلود جدید</span>
            context[<span class="hljs-string">'tankhah_document_form'</span>] = TankhahDocumentForm(prefix=<span class="hljs-string">'tankhah_docs'</span>) <span class="hljs-comment"># فقط آپلود جدید</span>

        <span class="hljs-comment"># محاسبه مبلغ کل برای نمایش</span>
        context[<span class="hljs-string">'total_amount'</span>] = <span class="hljs-built_in">sum</span>(item.amount <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> self.<span class="hljs-built_in">object</span>.items.<span class="hljs-built_in">all</span>() <span class="hljs-keyword">if</span> item.amount)

        <span class="hljs-comment"># اضافه کردن فرم خالی برای JS</span>
        context[<span class="hljs-string">'empty_item_form'</span>] = context[<span class="hljs-string">'item_formset'</span>].empty_form
        <span class="hljs-keyword">return</span> context

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_object</span>(<span class="hljs-params">self, queryset=<span class="hljs-literal">None</span></span>):</span>
        <span class="hljs-string">"""دریافت آبجکت فاکتور."""</span>
        <span class="hljs-comment"># get_object در UpdateView به طور خودکار PK را از URL می‌گیرد</span>
        obj = <span class="hljs-built_in">super</span>().get_object(queryset)
        <span class="hljs-comment"># می‌توانید بررسی‌های اضافی اینجا انجام دهید اما dispatch جای بهتری است</span>
        <span class="hljs-keyword">return</span> obj

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dispatch</span>(<span class="hljs-params">self, request, *args, **kwargs</span>):</span>
        <span class="hljs-string">"""بررسی دسترسی‌ها و وضعیت قبل از پردازش."""</span>
        <span class="hljs-keyword">try</span>:
            obj = self.get_object()
        <span class="hljs-keyword">except</span> Http404:
             messages.error(request, _(<span class="hljs-string">'فاکتور مورد نظر یافت نشد.'</span>))
             <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'factor_list'</span>)

        <span class="hljs-comment"># --- بررسی‌های گردش کار و وضعیت ---</span>
        <span class="hljs-keyword">try</span>:
            initial_stage_order = get_initial_stage_order()
            user_post = request.user.userpost_set.first().post <span class="hljs-keyword">if</span> request.user.userpost_set.exists() <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
            lowest_level = get_lowest_access_level()

            <span class="hljs-comment"># فقط در مرحله اولیه اجازه ویرایش؟ (این شرط را بازبینی کنید)</span>
            <span class="hljs-keyword">if</span> obj.tankhah.current_stage.order != initial_stage_order:
                 <span class="hljs-keyword">raise</span> PermissionDenied(_(<span class="hljs-string">'فقط در مرحله اولیه می‌توانید فاکتور را ویرایش کنید.'</span>))

            <span class="hljs-comment"># بررسی وضعیت‌های غیرقابل ویرایش</span>
            uneditable_statuses = [<span class="hljs-string">'APPROVED'</span>, <span class="hljs-string">'SENT_TO_HQ'</span>, <span class="hljs-string">'HQ_OPS_APPROVED'</span>, <span class="hljs-string">'PAID'</span>, <span class="hljs-string">'REJECTED'</span>]
            <span class="hljs-keyword">if</span> obj.tankhah.status <span class="hljs-keyword">in</span> uneditable_statuses:
                 <span class="hljs-keyword">raise</span> PermissionDenied(_(<span class="hljs-string">'فاکتور در این وضعیت قابل ویرایش نیست.'</span>))

            <span class="hljs-comment"># بررسی قفل بودن</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">getattr</span>(obj, <span class="hljs-string">'locked'</span>, <span class="hljs-literal">False</span>) <span class="hljs-keyword">or</span> (obj.locked_by_stage <span class="hljs-keyword">and</span> obj.locked_by_stage.order &lt; obj.tankhah.current_stage.order):
                 <span class="hljs-keyword">raise</span> PermissionDenied(_(<span class="hljs-string">'این فاکتور توسط مرحله بالاتر قفل شده و قابل ویرایش نیست.'</span>))

            <span class="hljs-comment"># بررسی نهایی شدن</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">getattr</span>(obj, <span class="hljs-string">'is_finalized'</span>, <span class="hljs-literal">False</span>) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> request.user.has_perm(<span class="hljs-string">'tankhah.Factor_full_edit'</span>):
                 <span class="hljs-keyword">raise</span> PermissionDenied(_(<span class="hljs-string">'شما اجازه ویرایش این فاکتور نهایی‌شده را ندارید.'</span>))

            <span class="hljs-comment"># بررسی سطح دسترسی (اگر منطق lowest_level لازم است)</span>
            <span class="hljs-comment"># if not request.user.is_superuser and user_post and user_post.level != lowest_level and not request.user.has_perm('tankhah.Factor_full_edit'):</span>
            <span class="hljs-comment">#      raise PermissionDenied(_('فقط کاربران سطح پایین یا دارای مجوز کامل می‌توانند ویرایش کنند.'))</span>

        <span class="hljs-keyword">except</span> PermissionDenied <span class="hljs-keyword">as</span> e:
            logger.warning(<span class="hljs-string">f"Permission denied for user <span class="hljs-subst">{request.user}</span> editing factor <span class="hljs-subst">{obj.pk}</span>: <span class="hljs-subst">{e}</span>"</span>)
            messages.error(request, <span class="hljs-built_in">str</span>(e))
            <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'factor_detail'</span>, pk=obj.pk) <span class="hljs-comment"># ریدایرکت به جزئیات</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Error during dispatch checks for Factor <span class="hljs-subst">{obj.pk}</span>: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
            messages.error(request, _(<span class="hljs-string">'خطا در بررسی وضعیت فاکتور.'</span>))
            <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'factor_list'</span>)

        <span class="hljs-comment"># اگر همه بررسی‌ها موفق بود، ادامه dispatch</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().dispatch(request, *args, **kwargs)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_form_kwargs</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""ارسال user به فرم اصلی."""</span>
        kwargs = <span class="hljs-built_in">super</span>().get_form_kwargs()
        kwargs[<span class="hljs-string">'user'</span>] = self.request.user
        <span class="hljs-comment"># 'instance' توسط UpdateView به طور خودکار پاس داده می‌شود</span>
        <span class="hljs-comment"># 'tankhah' از instance گرفته می‌شود و نیازی به ارسال جدا نیست</span>
        <span class="hljs-keyword">return</span> kwargs

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_valid</span>(<span class="hljs-params">self, form</span>):</span>
        <span class="hljs-string">"""پردازش فرم اصلی، فرم‌ست و فرم‌های فایل برای ویرایش."""</span>
        <span class="hljs-comment"># ساخت فرم‌ها مستقیماً با داده‌های POST و instance</span>
        item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.<span class="hljs-built_in">object</span>, prefix=<span class="hljs-string">'items'</span>) <span class="hljs-comment"># prefix='items'</span>
        document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
        tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)

        <span class="hljs-comment"># اعتبارسنجی همه فرم‌ها</span>
        are_forms_valid = item_formset.is_valid() <span class="hljs-keyword">and</span> document_form.is_valid() <span class="hljs-keyword">and</span> tankhah_document_form.is_valid()

        <span class="hljs-keyword">if</span> are_forms_valid:
            logger.info(<span class="hljs-string">f"Update forms/formset valid for Factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>"</span>)
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">with</span> transaction.atomic():
                    <span class="hljs-comment"># 1. ذخیره فرم اصلی (شامل تغییرات احتمالی فاکتور)</span>
                    self.<span class="hljs-built_in">object</span> = form.save()

                    <span class="hljs-comment"># 2. ذخیره فرم‌ست (تغییرات آیتم‌های موجود و آیتم‌های جدید)</span>
                    <span class="hljs-comment"># instance قبلاً تنظیم شده</span>
                    saved_items = item_formset.save()
                    logger.info(<span class="hljs-string">f"Updated/Created <span class="hljs-subst">{<span class="hljs-built_in">len</span>(saved_items)}</span> factor items for Factor PK <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)

                    <span class="hljs-comment"># 3. پردازش حذف اسناد فاکتور موجود</span>
                    deleted_factor_docs = <span class="hljs-number">0</span>
                    <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> self.<span class="hljs-built_in">object</span>.documents.<span class="hljs-built_in">all</span>():
                        checkbox_name = <span class="hljs-string">f'delete_factor_doc_<span class="hljs-subst">{doc.pk}</span>'</span>
                        <span class="hljs-keyword">if</span> checkbox_name <span class="hljs-keyword">in</span> self.request.POST:
                            <span class="hljs-keyword">try</span>:
                                <span class="hljs-comment"># حذف فایل فیزیکی (اختیاری)</span>
                                file_path = doc.file.path <span class="hljs-keyword">if</span> doc.file <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
                                doc.delete()
                                <span class="hljs-keyword">if</span> file_path <span class="hljs-keyword">and</span> os.path.exists(file_path):
                                     os.remove(file_path)
                                     logger.info(<span class="hljs-string">f"Deleted physical factor file: <span class="hljs-subst">{file_path}</span>"</span>)
                                deleted_factor_docs += <span class="hljs-number">1</span>
                                logger.info(<span class="hljs-string">f"Deleted FactorDocument with ID <span class="hljs-subst">{doc.pk}</span>"</span>)
                            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> del_exc:
                                logger.error(<span class="hljs-string">f"Error deleting FactorDocument <span class="hljs-subst">{doc.pk}</span>: <span class="hljs-subst">{del_exc}</span>"</span>)
                    <span class="hljs-keyword">if</span> deleted_factor_docs:
                        messages.info(self.request, _(<span class="hljs-string">"{count} سند فاکتور حذف شد."</span>).<span class="hljs-built_in">format</span>(count=deleted_factor_docs))


                    <span class="hljs-comment"># 4. پردازش حذف اسناد تنخواه موجود</span>
                    deleted_tankhah_docs = <span class="hljs-number">0</span>
                    tankhah_instance = self.<span class="hljs-built_in">object</span>.tankhah
                    <span class="hljs-keyword">if</span> tankhah_instance:
                        <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> tankhah_instance.documents.<span class="hljs-built_in">all</span>():
                            checkbox_name = <span class="hljs-string">f'delete_tankhah_doc_<span class="hljs-subst">{doc.pk}</span>'</span>
                            <span class="hljs-keyword">if</span> checkbox_name <span class="hljs-keyword">in</span> self.request.POST:
                                <span class="hljs-keyword">try</span>:
                                     file_path = doc.document.path <span class="hljs-keyword">if</span> doc.document <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
                                     doc.delete()
                                     <span class="hljs-keyword">if</span> file_path <span class="hljs-keyword">and</span> os.path.exists(file_path):
                                         os.remove(file_path)
                                         logger.info(<span class="hljs-string">f"Deleted physical tankhah file: <span class="hljs-subst">{file_path}</span>"</span>)
                                     deleted_tankhah_docs += <span class="hljs-number">1</span>
                                     logger.info(<span class="hljs-string">f"Deleted TankhahDocument with ID <span class="hljs-subst">{doc.pk}</span>"</span>)
                                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> del_exc:
                                     logger.error(<span class="hljs-string">f"Error deleting TankhahDocument <span class="hljs-subst">{doc.pk}</span>: <span class="hljs-subst">{del_exc}</span>"</span>)
                        <span class="hljs-keyword">if</span> deleted_tankhah_docs:
                            messages.info(self.request, _(<span class="hljs-string">"{count} سند تنخواه حذف شد."</span>).<span class="hljs-built_in">format</span>(count=deleted_tankhah_docs))


                    <span class="hljs-comment"># 5. اضافه کردن اسناد جدید فاکتور (از cleaned_data)</span>
                    factor_files_cleaned = document_form.cleaned_data.get(<span class="hljs-string">'files'</span>, [])
                    added_factor_docs = <span class="hljs-number">0</span>
                    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> factor_files_cleaned:
                        <span class="hljs-keyword">if</span> file:
                            FactorDocument.objects.create(factor=self.<span class="hljs-built_in">object</span>, file=file)
                            added_factor_docs += <span class="hljs-number">1</span>
                            logger.info(<span class="hljs-string">f"Added new factor document: <span class="hljs-subst">{file.name}</span>"</span>)
                    <span class="hljs-keyword">if</span> added_factor_docs:
                         messages.info(self.request, _(<span class="hljs-string">"{count} سند جدید به فاکتور اضافه شد."</span>).<span class="hljs-built_in">format</span>(count=added_factor_docs))


                    <span class="hljs-comment"># 6. اضافه کردن اسناد جدید تنخواه (از cleaned_data)</span>
                    tankhah_files_cleaned = tankhah_document_form.cleaned_data.get(<span class="hljs-string">'documents'</span>, [])
                    added_tankhah_docs = <span class="hljs-number">0</span>
                    <span class="hljs-keyword">if</span> tankhah_files_cleaned <span class="hljs-keyword">and</span> tankhah_instance:
                         <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> tankhah_files_cleaned:
                             <span class="hljs-keyword">if</span> file:
                                 TankhahDocument.objects.create(tankhah=tankhah_instance, document=file)
                                 added_tankhah_docs += <span class="hljs-number">1</span>
                                 logger.info(<span class="hljs-string">f"Added new tankhah document: <span class="hljs-subst">{file.name}</span>"</span>)
                         <span class="hljs-keyword">if</span> added_tankhah_docs:
                             messages.info(self.request, _(<span class="hljs-string">"{count} سند جدید به تنخواه اضافه شد."</span>).<span class="hljs-built_in">format</span>(count=added_tankhah_docs))
                    <span class="hljs-keyword">elif</span> tankhah_files_cleaned <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> tankhah_instance:
                         logger.error(<span class="hljs-string">f"Could not save new tankhah documents, parent tankhah not found for factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)


                messages.success(self.request, _(<span class="hljs-string">'فاکتور و ردیف‌های آن با موفقیت به‌روزرسانی شد.'</span>))
                <span class="hljs-keyword">return</span> redirect(self.get_success_url())

            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                 logger.error(<span class="hljs-string">f"Error during atomic transaction in FactorUpdateView: <span class="hljs-subst">{e}</span>"</span>, exc_info=<span class="hljs-literal">True</span>)
                 messages.error(self.request, _(<span class="hljs-string">'خطایی در هنگام ذخیره سازی رخ داد.'</span>))
                 <span class="hljs-comment"># برگرداندن فرم‌ها با خطا</span>
                 form_kwargs = {<span class="hljs-string">'form'</span>: form, <span class="hljs-string">'item_formset'</span>: item_formset, <span class="hljs-string">'document_form'</span>: document_form, <span class="hljs-string">'tankhah_document_form'</span>: tankhah_document_form}
                 <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(**form_kwargs))

        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># اگر فرم‌ست یا فرم‌های فایل نامعتبر بودند</span>
            logger.warning(<span class="hljs-string">f"UpdateView: Formset or document forms are invalid for Factor <span class="hljs-subst">{self.<span class="hljs-built_in">object</span>.pk}</span>."</span>)
            log_form_errors(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form)
            messages.error(self.request, _(<span class="hljs-string">'لطفا خطاهای فرم را اصلاح کنید.'</span>))
            <span class="hljs-comment"># برگرداندن فرم‌ها با خطا</span>
            <span class="hljs-comment"># ! مهم: context را با فرم‌های دارای خطا برمی‌گردانیم</span>
            form_kwargs = {<span class="hljs-string">'form'</span>: form, <span class="hljs-string">'item_formset'</span>: item_formset, <span class="hljs-string">'document_form'</span>: document_form, <span class="hljs-string">'tankhah_document_form'</span>: tankhah_document_form}
            <span class="hljs-keyword">return</span> self.render_to_response(self.get_context_data(**form_kwargs))
            <span class="hljs-comment"># یا return self.form_invalid(form)</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">form_invalid</span>(<span class="hljs-params">self, form</span>):</span>
        <span class="hljs-string">"""اگر فرم اصلی نامعتبر بود، فرم‌ست و فرم‌های دیگر را هم به context اضافه کن."""</span>
        <span class="hljs-comment"># ساخت فرم‌های دیگر با داده‌های POST برای حفظ مقادیر کاربر</span>
        item_formset = FactorItemFormSet(self.request.POST, self.request.FILES, instance=self.<span class="hljs-built_in">object</span>, prefix=<span class="hljs-string">'items'</span>)
        document_form = FactorDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'factor_docs'</span>)
        tankhah_document_form = TankhahDocumentForm(self.request.POST, self.request.FILES, prefix=<span class="hljs-string">'tankhah_docs'</span>)
        messages.error(self.request, _(<span class="hljs-string">'اطلاعات وارد شده در فرم اصلی صحیح نیست. لطفا خطاها را بررسی کنید.'</span>))
        log_form_errors(form=form)
        context = self.get_context_data(form=form, item_formset=item_formset, document_form=document_form, tankhah_document_form=tankhah_document_form)
        <span class="hljs-keyword">return</span> self.render_to_response(context)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_success_url</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""ریدایرکت به جزئیات فاکتور ویرایش شده."""</span>
        <span class="hljs-keyword">if</span> self.<span class="hljs-built_in">object</span>:
            <span class="hljs-keyword">return</span> reverse_lazy(<span class="hljs-string">'factor_detail'</span>, kwargs={<span class="hljs-string">'pk'</span>: self.<span class="hljs-built_in">object</span>.pk})
        <span class="hljs-keyword">return</span> reverse_lazy(<span class="hljs-string">'factor_list'</span>) <span class="hljs-comment"># fallback</span>

    <span class="hljs-function"><span class="hljs-keyword"><span class="citation-2">def</span></span><span class="citation-2"> </span><span class="hljs-title"><span class="citation-2">handle_no_permission</span></span><span class="citation-2">(</span><span class="hljs-params"><span class="citation-2">self</span></span><span class="citation-2">):</span></span><span class="citation-2">
        messages.error(self.request, self.permission_denied_message)
        </span><span class="hljs-comment"><span class="citation-2"># return super().handle_no_permission()</span></span><span class="citation-2 citation-end-2"></span>
        <span class="hljs-comment"># ریدایرکت به جزئیات فاکتور یا لیست، بسته به اینکه آبجکت وجود دارد یا نه</span>
        <span class="hljs-keyword">try</span>:
             obj_pk = self.kwargs.get(<span class="hljs-string">'pk'</span>) <span class="hljs-keyword">or</span> <span class="hljs-built_in">getattr</span>(self.<span class="hljs-built_in">object</span>, <span class="hljs-string">'pk'</span>, <span class="hljs-literal">None</span>)
             <span class="hljs-keyword">if</span> obj_pk:
                 <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'factor_detail'</span>, pk=obj_pk)
        <span class="hljs-keyword">except</span>:
             <span class="hljs-keyword">pass</span>
        <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'factor_list'</span>)


<span class="hljs-comment"># --- تابع کمکی برای لاگ خطاها ---</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log_form_errors</span>(<span class="hljs-params">**kwargs</span>):</span>
     <span class="hljs-keyword">for</span> name, form_or_formset <span class="hljs-keyword">in</span> kwargs.items():
         <span class="hljs-keyword">if</span> form_or_formset <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> form_or_formset.is_valid():
             <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(form_or_formset, <span class="hljs-string">'non_form_errors'</span>): <span class="hljs-comment"># Formset</span>
                 logger.warning(<span class="hljs-string">f"<span class="hljs-subst">{name}</span> Non-Form Errors: <span class="hljs-subst">{form_or_formset.non_form_errors()}</span>"</span>)
             <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(form_or_formset, <span class="hljs-string">'errors'</span>): <span class="hljs-comment"># Form or Formset</span>
                 logger.warning(<span class="hljs-string">f"<span class="hljs-subst">{name}</span> Errors: <span class="hljs-subst">{form_or_formset.errors}</span>"</span>)

</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element><p data-sourcepos="479:1-479:56"><strong>ب) کد اصلاح شده تمپلیت (<code>tankhah/factor_form.html</code>):</strong></p><p data-sourcepos="481:1-481:113">این کد شامل تب‌بندی، رندر دستی فرم اصلی، فرم‌ست با تمپلیت خالی، بخش اسناد با پیش‌نمایش و حذف، و JS اصلاح شده است.</p><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><code-block _nghost-ng-c3529685258="" class="ng-tns-c3529685258-85 ng-star-inserted" style=""><!----><!----><div _ngcontent-ng-c3529685258="" class="code-block ng-tns-c3529685258-85 ng-trigger ng-trigger-codeBlockRevealAnimation" jslog="223238;track:impression;BardVeMetadataKey:[[&quot;r_25ac78b5cdf2e172&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_f3602ce4a8f49a37&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]]" style="display: block;"><div _ngcontent-ng-c3529685258="" class="code-block-decoration header-formatted gds-title-s ng-tns-c3529685258-85 ng-star-inserted" style=""><span _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-85">HTML</span><div _ngcontent-ng-c3529685258="" class="buttons ng-tns-c3529685258-85 ng-star-inserted"><button _ngcontent-ng-c3529685258="" aria-label="کپی کردن کد" mat-icon-button="" mattooltip="کپی کردن کد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button ng-tns-c3529685258-85 mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="179062;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_25ac78b5cdf2e172&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_f3602ce4a8f49a37&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c3529685258="" role="img" fonticon="content_copy" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----><div _ngcontent-ng-c3529685258="" class="formatted-code-block-internal-container ng-tns-c3529685258-85"><div _ngcontent-ng-c3529685258="" class="animated-opacity ng-tns-c3529685258-85"><pre _ngcontent-ng-c3529685258="" class="ng-tns-c3529685258-85"><code _ngcontent-ng-c3529685258="" role="text" data-test-id="code-content" class="code-container formatted ng-tns-c3529685258-85" data-sourcepos="483:1-1126:14">{% extends 'base.html' %}
{% load i18n static file_tags jformat rcms_custom_filters %} {# اضافه کردن file_tags #}

{% block title %}{{ title|to_persian_number }} | {{ block.super }}{% endblock %}

{% block extra_css %}
{# ! تمام استایل‌های این صفحه باید به custom.css منتقل شوند #}
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-comment">/* ... (تمام استایل‌های CSS از پاسخ شماره ۱۱ اینجا قرار گیرند) ... */</span>

    <span class="hljs-comment">/* استایل تب‌ها */</span>
    <span class="hljs-selector-class">.factor-tabs</span> <span class="hljs-selector-class">.nav-link</span> {
        <span class="hljs-attribute">border</span>: none; <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">3px</span> solid transparent; <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-muted-color);
        <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.8rem</span> <span class="hljs-number">1.2rem</span>; <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease-in-out;
        <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">align-items</span>: center; gap: <span class="hljs-number">0.5rem</span>;
    }
    <span class="hljs-selector-class">.factor-tabs</span> <span class="hljs-selector-class">.nav-link</span> <span class="hljs-selector-tag">i</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">1.2em</span>; <span class="hljs-attribute">text-align</span>: center; <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.7</span>; }
    <span class="hljs-selector-class">.factor-tabs</span> <span class="hljs-selector-class">.nav-link</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-primary); }
    <span class="hljs-selector-class">.factor-tabs</span> <span class="hljs-selector-class">.nav-link</span><span class="hljs-selector-class">.active</span> {
        <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-primary); <span class="hljs-attribute">background-color</span>: transparent;
        <span class="hljs-attribute">border-bottom-color</span>: <span class="hljs-built_in">var</span>(--rcms-primary); <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
    }
    <span class="hljs-selector-class">.factor-tabs</span> <span class="hljs-selector-class">.nav-link</span><span class="hljs-selector-class">.active</span> <span class="hljs-selector-tag">i</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
    <span class="hljs-selector-class">.tab-pane</span> { <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">1.5rem</span>; }

    <span class="hljs-comment">/* استایل اقلام */</span>
    <span class="hljs-selector-class">.item-row</span> { <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius-lg); <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1rem</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>; <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-content-bg); <span class="hljs-comment">/* از bg-soft-light واضح‌تر است */</span> <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.2s</span> ease, box-shadow <span class="hljs-number">0.2s</span> ease; }
    <span class="hljs-selector-class">.item-row</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-table-hover-bg); <span class="hljs-attribute">box-shadow</span>: <span class="hljs-built_in">var</span>(--rcms-shadow-sm); }
    <span class="hljs-selector-class">.item-row</span><span class="hljs-selector-class">.is-deleting</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.6</span>; <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-built_in">var</span>(--bs-danger-rgb), <span class="hljs-number">0.05</span>) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-built_in">var</span>(--bs-danger-rgb), <span class="hljs-number">0.2</span>) <span class="hljs-meta">!important</span>; }
    <span class="hljs-selector-class">.item-row</span><span class="hljs-selector-class">.is-deleting</span> <span class="hljs-selector-tag">label</span>, <span class="hljs-selector-class">.item-row</span><span class="hljs-selector-class">.is-deleting</span> <span class="hljs-selector-tag">span</span>, <span class="hljs-selector-class">.item-row</span><span class="hljs-selector-class">.is-deleting</span> <span class="hljs-selector-tag">a</span>, <span class="hljs-selector-class">.item-row</span><span class="hljs-selector-class">.is-deleting</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-attr">[type=checkbox]</span>), <span class="hljs-selector-class">.item-row</span><span class="hljs-selector-class">.is-deleting</span> select, <span class="hljs-selector-class">.item-row</span><span class="hljs-selector-class">.is-deleting</span> <span class="hljs-selector-tag">textarea</span> { <span class="hljs-attribute">text-decoration</span>: line-through; <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-muted-color); }
    <span class="hljs-selector-class">.item-row</span> <span class="hljs-selector-class">.form-control</span>, <span class="hljs-selector-class">.item-row</span> <span class="hljs-selector-class">.form-select</span> { <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>; } <span class="hljs-comment">/* اندازه فونت یکسان */</span>
    <span class="hljs-selector-class">.item-total</span> { <span class="hljs-attribute">font-weight</span>: bold; <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9em</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.5rem</span> <span class="hljs-number">0.75rem</span>; <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-body-bg); <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-success); <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius); <span class="hljs-attribute">display</span>: inline-block; <span class="hljs-attribute">min-width</span>: <span class="hljs-number">80px</span>; <span class="hljs-attribute">text-align</span>: center; }
    <span class="hljs-selector-class">.delete-item-label</span> { <span class="hljs-attribute">cursor</span>: pointer; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.5rem</span>; <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-danger); <span class="hljs-attribute">transition</span>: color <span class="hljs-number">0.2s</span> ease; }
    <span class="hljs-selector-class">.delete-item-label</span><span class="hljs-selector-pseudo">:hover</span> { <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-danger-hover); }
    <span class="hljs-selector-class">.delete-item-check</span><span class="hljs-selector-pseudo">:checked</span> + <span class="hljs-selector-class">.delete-item-label</span> { <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-danger-hover); <span class="hljs-attribute">font-weight</span>: bold; }
    <span class="hljs-selector-class">.ltr-input</span> { <span class="hljs-attribute">direction</span>: ltr; <span class="hljs-attribute">text-align</span>: left; }

    <span class="hljs-comment">/* استایل بخش خلاصه */</span>
    <span class="hljs-selector-class">.summary-section</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-body-bg); <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius-lg); <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.2rem</span>; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1.5rem</span>; }
    <span class="hljs-selector-class">.summary-section</span> <span class="hljs-selector-tag">strong</span> { <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-heading-color); <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>; }
    <span class="hljs-selector-class">.summary-value</span> { <span class="hljs-attribute">font-weight</span>: bold; <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.4em</span> <span class="hljs-number">0.8em</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius-pill); <span class="hljs-attribute">min-width</span>: <span class="hljs-number">90px</span>; <span class="hljs-attribute">display</span>: inline-block; <span class="hljs-attribute">text-align</span>: center; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-content-bg); }
    <span class="hljs-selector-class">.difference-badge</span><span class="hljs-selector-class">.bg-danger</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-danger) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">color</span>: white <span class="hljs-meta">!important</span>; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--rcms-danger) <span class="hljs-meta">!important</span>; }
    <span class="hljs-selector-class">.difference-badge</span><span class="hljs-selector-class">.bg-success</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-success) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">color</span>: white <span class="hljs-meta">!important</span>; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--rcms-success) <span class="hljs-meta">!important</span>; }
    <span class="hljs-selector-class">.difference-badge</span><span class="hljs-selector-class">.bg-warning</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-warning) <span class="hljs-meta">!important</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span> <span class="hljs-meta">!important</span>; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--rcms-warning) <span class="hljs-meta">!important</span>; }

    <span class="hljs-comment">/* استایل لیست اسناد موجود */</span>
    <span class="hljs-selector-class">.existing-documents</span> <span class="hljs-selector-class">.list-group-item</span> { <span class="hljs-attribute">background</span>: none; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--rcms-border-color); }
    <span class="hljs-selector-class">.document-thumbnail</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">35px</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">35px</span>; <span class="hljs-attribute">object-fit</span>: cover; <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius); <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); }
    <span class="hljs-selector-class">.document-icon</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">35px</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">35px</span>; <span class="hljs-attribute">display</span>: inline-flex; <span class="hljs-attribute">align-items</span>: center; <span class="hljs-attribute">justify-content</span>: center; <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-body-bg); <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--rcms-border-radius); <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--rcms-border-color); }
    <span class="hljs-selector-class">.document-icon</span> <span class="hljs-selector-tag">i</span> { <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--rcms-muted-color); }
    <span class="hljs-selector-class">.document-link</span> { <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>; }
    <span class="hljs-selector-class">.delete-doc-check</span> + <span class="hljs-selector-tag">label</span> { <span class="hljs-attribute">display</span>: none; } <span class="hljs-comment">/* لیبل متنی حذف نمی‌خواهیم */</span>
    <span class="hljs-selector-class">.delete-doc-check</span> { <span class="hljs-attribute">cursor</span>: pointer; <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--rcms-danger); }
    <span class="hljs-selector-class">.delete-doc-check</span><span class="hljs-selector-pseudo">:checked</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--rcms-danger); <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--rcms-danger); }
    <span class="hljs-selector-class">.delete-doc-check</span><span class="hljs-selector-pseudo">::before</span> { <span class="hljs-comment">/* برای ظاهر بهتر در حالت تیک نخورده */</span>
        <span class="hljs-comment">/* content: '\f00d'; */</span> <span class="hljs-comment">/* آیکون X از FontAwesome */</span>
        <span class="hljs-comment">/* font-family: 'Font Awesome 5 Free'; font-weight: 900; */</span>
        <span class="hljs-comment">/* ... (نیاز به تنظیم دقیق‌تر دارد) ... */</span>
    }

    <span class="hljs-comment">/* عدم نمایش در چاپ */</span>
     <span class="hljs-keyword">@media</span> print { <span class="hljs-selector-class">.no-print</span> { <span class="hljs-attribute">display</span>: none <span class="hljs-meta">!important</span>; } }

</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
{% endblock %}

{% block content %}
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container my-4"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card shadow-lg border-0 animate__animated animate__fadeIn"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border-radius: 15px; overflow: hidden;"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-gradient-primary text-white d-flex justify-content-between align-items-center py-3 px-4"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title mb-0 d-flex align-items-center"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas {% if object %}fa-edit{% else %}fa-plus-circle{% endif %} me-3"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{# آیکون بر اساس ایجاد یا ویرایش #}
                {{ title|to_persian_number }}
            <span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
            {# دکمه بازگشت با URL پویا #}
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ request.META.HTTP_REFERER|default:(success_url|default:'#') }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm btn-outline-light rounded-pill px-3"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-arrow-left me-1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "بازگشت" %}
            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body p-0"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav nav-tabs factor-tabs px-4 pt-2"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"factorTabs"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tablist"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-item"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"presentation"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-link active"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"main-tab"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tab"</span> <span class="hljs-attr">data-bs-target</span>=<span class="hljs-string">"#main-tab-pane"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tab"</span> <span class="hljs-attr">aria-controls</span>=<span class="hljs-string">"main-tab-pane"</span> <span class="hljs-attr">aria-selected</span>=<span class="hljs-string">"true"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-file-invoice"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اطلاعات اصلی" %}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-item"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"presentation"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-link"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"items-tab"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tab"</span> <span class="hljs-attr">data-bs-target</span>=<span class="hljs-string">"#items-tab-pane"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tab"</span> <span class="hljs-attr">aria-controls</span>=<span class="hljs-string">"items-tab-pane"</span> <span class="hljs-attr">aria-selected</span>=<span class="hljs-string">"false"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-list-ol"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اقلام فاکتور" %}
                        {# نمایش تعداد ردیف‌ها #}
                        {% if item_formset.forms %}<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge rounded-pill bg-secondary ms-2"</span>&gt;</span>{{ item_formset.total_form_count|to_persian_number }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>{% endif %}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-item"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"presentation"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-link"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"documents-tab"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tab"</span> <span class="hljs-attr">data-bs-target</span>=<span class="hljs-string">"#documents-tab-pane"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tab"</span> <span class="hljs-attr">aria-controls</span>=<span class="hljs-string">"documents-tab-pane"</span> <span class="hljs-attr">aria-selected</span>=<span class="hljs-string">"false"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-paperclip"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اسناد" %}
                         {# نمایش تعداد اسناد #}
                         {% with total_docs=factor_documents.count|add:tankhah_documents.count %}
                             {% if total_docs &gt; 0 %}<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"badge rounded-pill bg-secondary ms-2"</span>&gt;</span>{{ total_docs|to_persian_number }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>{% endif %}
                         {% endwith %}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>

            {# شروع فرم اصلی #}
            <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">"multipart/form-data"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"factor-form"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"needs-validation"</span> <span class="hljs-attr">novalidate</span>&gt;</span>
                {% csrf_token %}

                {# نمایش خطاهای کلی فرم اصلی #}
                 {% if form.non_field_errors %}
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-danger m-4 mb-0"</span>&gt;</span>{{ form.non_field_errors }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                 {% endif %}

                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-content p-4"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"factorTabsContent"</span>&gt;</span>

                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-pane fade show active"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"main-tab-pane"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tabpanel"</span> <span class="hljs-attr">aria-labelledby</span>=<span class="hljs-string">"main-tab"</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"0"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3 border-bottom pb-2"</span>&gt;</span>{% trans "مشخصات کلی فاکتور" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row g-3 mb-4"</span>&gt;</span>
                            {# رندر دستی فیلدهای فرم اصلی #}
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ form.tankhah.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>{{ form.tankhah.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                {{ form.tankhah|add_class:"form-select" }} {# form-select برای Select #}
                                {% if form.tankhah.help_text %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-text"</span>&gt;</span>{{ form.tankhah.help_text|safe }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                {% if form.tankhah.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"invalid-feedback d-block"</span>&gt;</span>{{ form.tankhah.errors|join:", " }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ form.date.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>{{ form.date.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                {{ form.date|add_class:"form-control datepicker" }} {# اضافه کردن کلاس datepicker #}
                                {% if form.date.help_text %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-text"</span>&gt;</span>{{ form.date.help_text|safe }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                {% if form.date.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"invalid-feedback d-block"</span>&gt;</span>{{ form.date.errors|join:", " }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                            {# فیلد مبلغ با ویجت سفارشی #}
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ form.amount.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>{{ form.amount.label }} {% if form.amount.field.required %}<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger"</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>{% endif %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                {{ form.amount }} {# ! ویجت NumberToWordsWidget اینجا رندر می‌شود #}
                                {% if form.amount.help_text %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-text"</span>&gt;</span>{{ form.amount.help_text|safe }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                {% if form.amount.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"invalid-feedback d-block"</span>&gt;</span>{{ form.amount.errors|join:", " }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                             {# فیلد توضیحات #}
                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-12"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ form.description.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>{{ form.description.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                {{ form.description }} {# ویجت Textarea در Meta تعریف شده #}
                                {% if form.description.help_text %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-text"</span>&gt;</span>{{ form.description.help_text|safe }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                {% if form.description.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"invalid-feedback d-block"</span>&gt;</span>{{ form.description.errors|join:", " }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"summary-section"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">h6</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3 text-center text-muted"</span>&gt;</span>{% trans "خلاصه محاسبات" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row text-center gy-2"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{% trans "جمع کل اقلام:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"total-items-amount"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"summary-value bg-light text-dark"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted ms-1"</span>&gt;</span>{% trans "ریال" %}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{% trans "مبلغ فاکتور:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"factor-amount-display"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"summary-value bg-light text-dark"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted ms-1"</span>&gt;</span>{% trans "ریال" %}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-4"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{% trans "تفاوت:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"difference-amount"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"summary-value difference-badge bg-light text-dark"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted ms-1"</span>&gt;</span>{% trans "ریال" %}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{# پایان تب اطلاعات اصلی #}

                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-pane fade"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"items-tab-pane"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tabpanel"</span> <span class="hljs-attr">aria-labelledby</span>=<span class="hljs-string">"items-tab"</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"0"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"animate__animated animate__fadeIn"</span>&gt;</span>
                             <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3 border-bottom pb-2"</span>&gt;</span>{% trans "ردیف‌های هزینه‌های فاکتور" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                             {# نمایش خطاهای کلی فرم‌ست #}
                             {% if item_formset.non_form_errors %}
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-danger"</span>&gt;</span>{{ item_formset.non_form_errors }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                             {% endif %}

                            {{ item_formset.management_form }} {# ! فرم مدیریت فرم‌ست #}
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"item-formset"</span>&gt;</span>
                                {% for form in item_formset %}
                                    {# رندر ردیف‌های موجود #}
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-row {% if form.errors %}border-danger{% endif %}"</span> <span class="hljs-attr">data-id</span>=<span class="hljs-string">"{{ forloop.counter0 }}"</span>&gt;</span>
                                        {{ form.id }} {# فیلد مخفی ID #}
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row g-2 align-items-center"</span>&gt;</span> {# g-2 برای فاصله کمتر #}
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-auto text-center"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 40px;"</span>&gt;</span> {# شماره ردیف #}
                                                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row-number badge bg-secondary rounded-pill"</span>&gt;</span>{{ forloop.counter|to_persian_number }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-5"</span>&gt;</span> {# شرح #}
                                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ form.description.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label visually-hidden"</span>&gt;</span>{% trans "شرح قلم" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                {{ form.description|add_class:"form-control form-control-sm"|attr:"placeholder:شرح هزینه" }}
                                                {% if form.description.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ form.description.errors|striptags }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-6"</span>&gt;</span> {# مبلغ #}
                                                 <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ form.amount.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label visually-hidden"</span>&gt;</span>{% trans "مبلغ قلم" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group input-group-sm"</span>&gt;</span>
                                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group-text"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-dollar-sign"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                                    {# ! استفاده از ویجت پیش‌فرض NumberInput #}
                                                    {{ form.amount|add_class:"form-control form-control-sm amount-field ltr-input number-format"|attr:"placeholder:0"|attr:"step:any" }}
                                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                {% if form.amount.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ form.amount.errors|striptags }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-6"</span>&gt;</span> {# تعداد #}
                                                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ form.quantity.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label visually-hidden"</span>&gt;</span>{% trans "تعداد قلم" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                {# ! استفاده از ویجت پیش‌فرض NumberInput #}
                                                {{ form.quantity|add_class:"form-control form-control-sm quantity-field ltr-input number-format"|attr:"placeholder:1"|attr:"min:1" }}
                                                {% if form.quantity.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ form.quantity.errors|striptags }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 text-center"</span>&gt;</span> {# جمع ردیف #}
                                                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-total"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-auto ms-md-auto text-center"</span>&gt;</span> {# حذف #}
                                                {% if item_formset.can_delete %}
                                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-switch d-inline-block"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این ردیف' %}"</span>&gt;</span>
                                                        {{ form.DELETE|add_class:"form-check-input delete-item-check" }}
                                                         <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"delete-item-label"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ form.DELETE.id_for_label }}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-trash-alt fa-lg"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                {% endif %}
                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                         {# نمایش خطاهای دیگر فرم (non_field_errors) #}
                                         {% if form.non_field_errors %}
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-danger alert-sm mt-2 p-1"</span>&gt;</span>{{ form.non_field_errors }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                        {% endif %}
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                {% endfor %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-summary mt-3 p-3 bg-light rounded"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row g-2 align-items-center"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-auto"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"small"</span>&gt;</span>{% trans "جمع کل" %}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-5"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> {# ستون خالی شرح #}
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-6"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"total-amount"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-block fw-bold ltr-input text-center"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-6"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"total-quantity"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-block fw-bold ltr-input text-center"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 text-center"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"total-items"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-block fw-bold ltr-input text-primary text-center"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-auto"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> {# ستون خالی حذف #}
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                            {# دکمه افزودن ردیف #}
                            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-primary mt-3 animate__animated animate__pulse animate__infinite animate__slower"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"add-item"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-plus-circle me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "افزودن ردیف جدید" %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{# پایان تب اقلام #}

                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-pane fade"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"documents-tab-pane"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"tabpanel"</span> <span class="hljs-attr">aria-labelledby</span>=<span class="hljs-string">"documents-tab"</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"0"</span>&gt;</span>
                         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row g-4 animate__animated animate__fadeIn"</span>&gt;</span>
                            {# بخش اسناد فاکتور #}
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-lg-6"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card h-100 border-0 shadow-sm"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-light border-bottom"</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-0 h6 d-flex align-items-center"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-file-invoice text-info me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اسناد فاکتور" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
                                        {# فرم آپلود جدید #}
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3"</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ document_form.files.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label small fw-bold"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-upload me-1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{{ document_form.files.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                            {{ document_form.files|add_class:"form-control form-control-sm" }} {# اضافه کردن form-control-sm #}
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-text small"</span>&gt;</span>{% trans "فرمت‌های مجاز:" %} {{ ALLOWED_EXTENSIONS_STR }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                             {% if document_form.files.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ document_form.files.errors|striptags }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                        {# نمایش اسناد موجود #}
                                         {% with factor_documents=object.documents.all %}
                                            {% if factor_documents.exists %}
                                                <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-3"</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">h6</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3 small text-muted"</span>&gt;</span>{% trans "اسناد پیوست شده:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span>
                                                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group list-group-flush existing-documents"</span>&gt;</span>
                                                    {% for doc in factor_documents %}
                                                        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group-item d-flex justify-content-between align-items-center px-1 py-2"</span>&gt;</span>
                                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-flex align-items-center flex-grow-1 me-2 overflow-hidden"</span>&gt;</span>
                                                                {% with file_ext=doc.file.name|get_file_extension %}
                                                                    {% if file_ext|is_image_extension %}
                                                                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.file.url }}"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'مشاهده تصویر' %}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span>&gt;</span>
                                                                            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{ doc.file.url }}"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"{% trans 'پیش‌نمایش' %}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-thumbnail me-2"</span>&gt;</span>
                                                                        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                                    {% else %}
                                                                         <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-icon me-2"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ file_ext }}"</span>&gt;</span>
                                                                             <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas {{ file_ext|get_file_icon }} fa-lg"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                                                                         <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                                                    {% endif %}
                                                                {% endwith %}
                                                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex-grow-1 overflow-hidden"</span>&gt;</span>
                                                                     <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.file.url }}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-dark text-decoration-none document-link text-truncate d-block"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ doc.file.name }}"</span>&gt;</span>
                                                                         {{ doc.file.name|filename_only }}
                                                                     <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                                     <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted"</span>&gt;</span>{{ doc.file.size|filesizeformat }} - {{ doc.uploaded_at|jformat:"%y/%m/%d" }}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                                                                 <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-switch no-print ms-2"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این سند' %}"</span>&gt;</span>
                                                                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-input delete-doc-check"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"delete_factor_doc_{{ doc.pk }}"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"del_fdoc_{{ doc.pk }}"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"{{ doc.pk }}"</span>&gt;</span>
                                                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                                                    {% endfor %}
                                                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                                            {% endif %}
                                        {% endwith %}
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                 <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            {# بخش اسناد تنخواه #}
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-lg-6"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card h-100 border-0 shadow-sm"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header bg-light border-bottom"</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-0 h6 d-flex align-items-center"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-wallet text-warning me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "اسناد تنخواه" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
                                        {# فرم آپلود جدید #}
                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3"</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"{{ tankhah_document_form.documents.id_for_label }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label small fw-bold"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-upload me-1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{{ tankhah_document_form.documents.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                                            {{ tankhah_document_form.documents|add_class:"form-control form-control-sm" }}
                                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-text small"</span>&gt;</span>{% trans "فرمت‌های مجاز:" %} {{ ALLOWED_EXTENSIONS_STR }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                             {% if tankhah_document_form.documents.errors %}<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-danger small mt-1"</span>&gt;</span>{{ tankhah_document_form.documents.errors|striptags }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{% endif %}
                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                         {# نمایش اسناد موجود #}
                                         {% if tankhah_documents %}
                                            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-3"</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">h6</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-3 small text-muted"</span>&gt;</span>{% trans "اسناد پیوست شده:" %}<span class="hljs-tag">&lt;/<span class="hljs-name">h6</span>&gt;</span>
                                            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group list-group-flush existing-documents"</span>&gt;</span>
                                                 {% for doc in tankhah_documents %}
                                                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-group-item d-flex justify-content-between align-items-center px-1 py-2"</span>&gt;</span>
                                                         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-flex align-items-center flex-grow-1 me-2 overflow-hidden"</span>&gt;</span>
                                                            {% with file_ext=doc.document.name|get_file_extension %}
                                                                {% if file_ext|is_image_extension %}
                                                                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.document.url }}"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'مشاهده تصویر' %}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span>&gt;</span>
                                                                         <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{ doc.document.url }}"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"{% trans 'پیش‌نمایش' %}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-thumbnail me-2"</span>&gt;</span>
                                                                    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                                {% else %}
                                                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"document-icon me-2"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ file_ext }}"</span>&gt;</span>
                                                                         <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas {{ file_ext|get_file_icon }} fa-lg"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                                                                    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                                                                {% endif %}
                                                            {% endwith %}
                                                             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex-grow-1 overflow-hidden"</span>&gt;</span>
                                                                 <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ doc.document.url }}"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-dark text-decoration-none document-link text-truncate d-block"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ doc.document.name }}"</span>&gt;</span>
                                                                      {{ doc.document.name|filename_only }}
                                                                 <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                                                                 <span class="hljs-tag">&lt;<span class="hljs-name">small</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted"</span>&gt;</span>{{ doc.document.size|filesizeformat }} - {{ doc.uploaded_at|jformat:"%y/%m/%d" }}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
                                                             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-switch no-print ms-2"</span> <span class="hljs-attr">data-bs-toggle</span>=<span class="hljs-string">"tooltip"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این سند' %}"</span>&gt;</span>
                                                            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-input delete-doc-check"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"delete_tankhah_doc_{{ doc.pk }}"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"del_tdoc_{{ doc.pk }}"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"{{ doc.pk }}"</span>&gt;</span>
                                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                                                 {% endfor %}
                                             <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                                        {% else %}
                                             <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted small"</span>&gt;</span>{% trans "هنوز سندی برای این تنخواه پیوست نشده است." %}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                                        {% endif %}
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{# پایان تب اسناد #}

                    {# دکمه‌های پایین فرم در همه تب‌ها مشترک است #}
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"d-flex justify-content-between align-items-center mt-4 pt-4 border-top"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-muted small"</span>&gt;</span>{% trans "لطفاً پس از اعمال تغییرات، دکمه ذخیره را بزنید." %}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{ request.META.HTTP_REFERER|default:success_url }}"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-outline-secondary me-2"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-times me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "انصراف" %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary btn-lg px-4"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-save me-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>{% trans "ذخیره تغییرات" %}
                            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> {# پایان tab-content #}
            <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span> {# پایان فرم اصلی #}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{# پایان card-body #}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{# پایان card #}
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>{# پایان container #}

{# تمپلیت فرم خالی برای افزودن ردیف با جاوااسکریپت #}
<span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"empty-item-form-template"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-row animate__animated animate__fadeIn"</span> <span class="hljs-attr">data-id</span>=<span class="hljs-string">"__prefix__"</span>&gt;</span>
        {# ID مخفی فقط برای فرم‌های موجود لازم است، برای فرم جدید لازم نیست #}
        {# <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"items-__prefix__-id"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id_items-__prefix__-id"</span>&gt;</span> #}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row g-2 align-items-center"</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-auto text-center"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 40px;"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row-number badge bg-secondary rounded-pill"</span>&gt;</span>__row_num__<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-5"</span>&gt;</span>
                 <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"id_items-__prefix__-description"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label visually-hidden"</span>&gt;</span>{% trans "شرح قلم" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"items-__prefix__-description"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control form-control-sm"</span> <span class="hljs-attr">maxlength</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id_items-__prefix__-description"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"{% trans 'شرح هزینه...' %}"</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 col-6"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"id_items-__prefix__-amount"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label visually-hidden"</span>&gt;</span>{% trans "مبلغ قلم" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group input-group-sm"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group-text"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-dollar-sign"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"items-__prefix__-amount"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control form-control-sm ltr-input amount-field number-format"</span> <span class="hljs-attr">step</span>=<span class="hljs-string">"any"</span> <span class="hljs-attr">min</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id_items-__prefix__-amount"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"0"</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-1 col-6"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"id_items-__prefix__-quantity"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label visually-hidden"</span>&gt;</span>{% trans "تعداد قلم" %}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"items-__prefix__-quantity"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control form-control-sm ltr-input quantity-field"</span> <span class="hljs-attr">min</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id_items-__prefix__-quantity"</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2 text-center"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-total"</span>&gt;</span>۰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-auto ms-md-auto text-center"</span>&gt;</span>
                {% if item_formset.can_delete %} {# اگر فرم‌ست قابلیت حذف دارد #}
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check form-switch d-inline-block"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این ردیف' %}"</span>&gt;</span>
                     <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"items-__prefix__-DELETE"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-check-input delete-item-check"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id_items-__prefix__-DELETE"</span>&gt;</span>
                     <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"delete-item-label"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"id_items-__prefix__-DELETE"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-trash-alt fa-lg"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                 <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                 {% else %}
                 {# دکمه حذف با JS برای ردیف‌های جدید #}
                  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-sm btn-outline-danger remove-item-btn"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{% trans 'حذف این ردیف' %}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-trash-alt"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                {% endif %}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

{% endblock %}


{% block extra_js %}
{# ! کد JS برای محاسبه جمع کل و افزودن/حذف ردیف (نسخه بهبود یافته) #}
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"DOMContentLoaded"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Initializing Factor Form JS..."</span>);

    <span class="hljs-keyword">const</span> factorForm = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'factor-form'</span>);
    <span class="hljs-keyword">const</span> itemFormsetContainer = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'item-formset'</span>);
    <span class="hljs-keyword">const</span> addItemButton = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'add-item'</span>);
    <span class="hljs-keyword">const</span> emptyFormTemplate = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'empty-item-form-template'</span>);
    <span class="hljs-keyword">const</span> totalFormsInput = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'id_items-TOTAL_FORMS'</span>); <span class="hljs-comment">// Correct ID with prefix</span>
    <span class="hljs-keyword">const</span> factorAmountInput = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'id_amount'</span>); <span class="hljs-comment">// Input field for main amount</span>
    <span class="hljs-keyword">const</span> factorAmountDisplay = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'factor-amount-display'</span>); <span class="hljs-comment">// Span to display formatted factor amount</span>
    <span class="hljs-keyword">const</span> totalItemsAmountSpan = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'total-items-amount'</span>);
    <span class="hljs-keyword">const</span> differenceAmountSpan = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'difference-amount'</span>);
    <span class="hljs-comment">// Span for total amount and quantity in item summary row</span>
    <span class="hljs-keyword">const</span> totalAmountSpan = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'total-amount'</span>);
    <span class="hljs-keyword">const</span> totalQuantitySpan = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'total-quantity'</span>);
    <span class="hljs-keyword">const</span> totalItemsSpan = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'total-items'</span>);


    <span class="hljs-keyword">if</span> (!factorForm || !itemFormsetContainer || !totalFormsInput || !emptyFormTemplate) {
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Required form elements not found. Formset JS disabled."</span>);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">let</span> formCount = <span class="hljs-built_in">parseInt</span>(totalFormsInput.value);

    <span class="hljs-comment">// --- Helper Function: Convert Persian/Arabic digits to Latin ---</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toLatinDigits</span>(<span class="hljs-params">str</span>) </span>{
        <span class="hljs-keyword">if</span> (!str) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
        <span class="hljs-keyword">return</span> str.toString().replace(<span class="hljs-regexp">/[۰-۹]/g</span>, <span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> d.charCodeAt(<span class="hljs-number">0</span>) - <span class="hljs-number">1776</span>).replace(<span class="hljs-regexp">/[٠-٩]/g</span>, <span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> d.charCodeAt(<span class="hljs-number">0</span>) - <span class="hljs-number">1632</span>);
    }

    <span class="hljs-comment">// --- Helper Function: Format number with Persian locale ---</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatPersianNumber</span>(<span class="hljs-params">num</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(num) || num === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'۰'</span>;
        <span class="hljs-comment">// Round to avoid excessive decimals if needed, e.g., Math.round(num)</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.round(num).toLocaleString(<span class="hljs-string">'fa-IR'</span>);
    }

    <span class="hljs-comment">// --- Function to Calculate Item Total and Grand Totals ---</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateTotals</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">let</span> grandTotalItemsAmount = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">let</span> grandTotalQuantity = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">let</span> activeItemsCount = <span class="hljs-number">0</span>;

        itemFormsetContainer.querySelectorAll(<span class="hljs-string">'.item-row'</span>).forEach(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> {
            <span class="hljs-keyword">const</span> deleteCheckbox = row.querySelector(<span class="hljs-string">'[name$="-DELETE"]'</span>);
            <span class="hljs-keyword">const</span> amountInput = row.querySelector(<span class="hljs-string">'[name$="-amount"]'</span>);
            <span class="hljs-keyword">const</span> quantityInput = row.querySelector(<span class="hljs-string">'[name$="-quantity"]'</span>);
            <span class="hljs-keyword">const</span> totalSpan = row.querySelector(<span class="hljs-string">'.item-total'</span>);

            <span class="hljs-comment">// Only process rows not marked for deletion</span>
            <span class="hljs-keyword">if</span> (!deleteCheckbox || !deleteCheckbox.checked) {
                activeItemsCount++;
                <span class="hljs-keyword">const</span> amountStr = toLatinDigits(amountInput?.value || <span class="hljs-string">'0'</span>).replace(<span class="hljs-regexp">/,/g</span>, <span class="hljs-string">''</span>);
                <span class="hljs-keyword">const</span> quantityStr = toLatinDigits(quantityInput?.value || <span class="hljs-string">'1'</span>).replace(<span class="hljs-regexp">/,/g</span>, <span class="hljs-string">''</span>); <span class="hljs-comment">// Default quantity 1</span>
                <span class="hljs-keyword">const</span> amount = <span class="hljs-built_in">parseFloat</span>(amountStr) || <span class="hljs-number">0</span>;
                <span class="hljs-keyword">const</span> quantity = <span class="hljs-built_in">parseInt</span>(quantityStr) || <span class="hljs-number">1</span>; <span class="hljs-comment">// Use 1 if empty or invalid integer</span>
                <span class="hljs-keyword">const</span> itemTotal = <span class="hljs-built_in">Math</span>.round(amount * quantity); <span class="hljs-comment">// Round result</span>

                <span class="hljs-keyword">if</span> (totalSpan) { totalSpan.textContent = formatPersianNumber(itemTotal); }
                grandTotalItemsAmount += itemTotal;
                grandTotalQuantity += quantity; <span class="hljs-comment">// Sum quantities</span>

            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// If row is deleted, show 0 for its total</span>
                <span class="hljs-keyword">if</span> (totalSpan) { totalSpan.textContent = <span class="hljs-string">'۰'</span>; }
            }
        });

        <span class="hljs-comment">// --- Update Summary Row ---</span>
         <span class="hljs-keyword">if</span>(totalAmountSpan) totalAmountSpan.textContent = formatPersianNumber(grandTotalItemsAmount);
         <span class="hljs-keyword">if</span>(totalQuantitySpan) totalQuantitySpan.textContent = formatPersianNumber(grandTotalQuantity);
         <span class="hljs-keyword">if</span>(totalItemsSpan) totalItemsSpan.textContent = formatPersianNumber(activeItemsCount); <span class="hljs-comment">// Show count of active items</span>


        <span class="hljs-comment">// --- Update Factor Amount Display and Difference ---</span>
        <span class="hljs-keyword">const</span> factorAmountStr = toLatinDigits(factorAmountInput?.value || <span class="hljs-string">'0'</span>).replace(<span class="hljs-regexp">/,/g</span>, <span class="hljs-string">''</span>);
        <span class="hljs-keyword">const</span> factorAmount = <span class="hljs-built_in">parseFloat</span>(factorAmountStr) || <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (factorAmountDisplay) { factorAmountDisplay.textContent = formatPersianNumber(factorAmount); }

        <span class="hljs-keyword">const</span> difference = <span class="hljs-built_in">Math</span>.round(factorAmount - grandTotalItemsAmount); <span class="hljs-comment">// Round difference</span>
        <span class="hljs-keyword">if</span> (differenceAmountSpan) {
            differenceAmountSpan.textContent = formatPersianNumber(difference);
            differenceAmountSpan.classList.remove(<span class="hljs-string">'bg-danger'</span>, <span class="hljs-string">'bg-success'</span>, <span class="hljs-string">'bg-warning'</span>, <span class="hljs-string">'bg-light'</span>, <span class="hljs-string">'text-dark'</span>, <span class="hljs-string">'text-white'</span>); <span class="hljs-comment">// Reset</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.abs(difference) &lt; <span class="hljs-number">1</span>) { <span class="hljs-comment">// Allow for small rounding differences</span>
                differenceAmountSpan.classList.add(<span class="hljs-string">'bg-success'</span>, <span class="hljs-string">'text-white'</span>);
                differenceAmountSpan.setAttribute(<span class="hljs-string">'title'</span>, <span class="hljs-string">'{% trans "مبلغ فاکتور با جمع ردیف‌ها مطابقت دارد" %}'</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (difference &gt; <span class="hljs-number">0</span>) {
                differenceAmountSpan.classList.add(<span class="hljs-string">'bg-warning'</span>, <span class="hljs-string">'text-dark'</span>);
                 differenceAmountSpan.setAttribute(<span class="hljs-string">'title'</span>, <span class="hljs-string">'{% trans "مبلغ فاکتور بیشتر از جمع ردیف‌ها است" %}'</span>);
            } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// difference &lt; 0</span>
                differenceAmountSpan.classList.add(<span class="hljs-string">'bg-danger'</span>, <span class="hljs-string">'text-white'</span>);
                 differenceAmountSpan.setAttribute(<span class="hljs-string">'title'</span>, <span class="hljs-string">'{% trans "جمع ردیف‌ها بیشتر از مبلغ فاکتور است" %}'</span>);
            }
        }
    }

    <span class="hljs-comment">// --- Function to Attach Listeners to a Row ---</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachItemCalculationListeners</span>(<span class="hljs-params">rowElement</span>) </span>{
        <span class="hljs-keyword">if</span> (!rowElement) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">const</span> amountInput = rowElement.querySelector(<span class="hljs-string">'[name$="-amount"]'</span>);
        <span class="hljs-keyword">const</span> quantityInput = rowElement.querySelector(<span class="hljs-string">'[name$="-quantity"]'</span>);
        <span class="hljs-keyword">const</span> deleteCheckbox = rowElement.querySelector(<span class="hljs-string">'[name$="-DELETE"]'</span>);

        <span class="hljs-keyword">if</span> (amountInput) amountInput.addEventListener(<span class="hljs-string">'input'</span>, <span class="hljs-function">() =&gt;</span> calculateItemTotal(rowElement));
        <span class="hljs-keyword">if</span> (quantityInput) quantityInput.addEventListener(<span class="hljs-string">'input'</span>, <span class="hljs-function">() =&gt;</span> calculateItemTotal(rowElement));
        <span class="hljs-keyword">if</span> (deleteCheckbox) deleteCheckbox.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function">() =&gt;</span> {
             rowElement.classList.toggle(<span class="hljs-string">'is-deleting'</span>, deleteCheckbox.checked);
             calculateTotals(); <span class="hljs-comment">// Recalculate grand total when delete status changes</span>
        });

        <span class="hljs-comment">// Initialize number formatter on new amount/quantity fields</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> numberFormatter !== <span class="hljs-string">'undefined'</span>) {
            rowElement.querySelectorAll(<span class="hljs-string">'.number-format'</span>).forEach(<span class="hljs-function"><span class="hljs-params">inp</span> =&gt;</span> {
                <span class="hljs-keyword">try</span> { <span class="hljs-keyword">new</span> numberFormatter(inp); } <span class="hljs-keyword">catch</span>(e) { <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">"New row numberFormatter failed:"</span>, e); }
            });
        }
    }
     <span class="hljs-comment">// --- Function to Attach Delete Listener for NEW rows ---</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attachDeleteListener</span>(<span class="hljs-params">buttonOrCheckbox</span>) </span>{
        <span class="hljs-keyword">if</span>(!buttonOrCheckbox) <span class="hljs-keyword">return</span>;
        <span class="hljs-comment">// If it's a checkbox (existing forms with can_delete=True)</span>
        <span class="hljs-keyword">if</span>(buttonOrCheckbox.matches(<span class="hljs-string">'input[type="checkbox"]'</span>)) {
            buttonOrCheckbox.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function">() =&gt;</span> {
                 buttonOrCheckbox.closest(<span class="hljs-string">'.item-row'</span>)?.classList.toggle(<span class="hljs-string">'is-deleting'</span>, buttonOrCheckbox.checked);
                 calculateTotals();
            });
             <span class="hljs-comment">// Initial check</span>
            buttonOrCheckbox.closest(<span class="hljs-string">'.item-row'</span>)?.classList.toggle(<span class="hljs-string">'is-deleting'</span>, buttonOrCheckbox.checked);
        }
        <span class="hljs-comment">// If it's a button (newly added forms if can_delete=False for extra forms)</span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (buttonOrCheckbox.matches(<span class="hljs-string">'.remove-item-btn'</span>)) {
             buttonOrCheckbox.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">const</span> rowToRemove = <span class="hljs-built_in">this</span>.closest(<span class="hljs-string">'.item-row'</span>);
                <span class="hljs-keyword">if</span> (rowToRemove) {
                    rowToRemove.classList.add(<span class="hljs-string">'animate__animated'</span>, <span class="hljs-string">'animate__fadeOutLeft'</span>); <span class="hljs-comment">// Add fade out animation</span>
                     rowToRemove.addEventListener(<span class="hljs-string">'animationend'</span>, <span class="hljs-function">() =&gt;</span> {
                         rowToRemove.remove();
                         updateRowNumbers();
                         calculateTotals();
                         <span class="hljs-comment">// No need to update TOTAL_FORMS here, Django handles removed extra forms</span>
                         <span class="hljs-comment">// but if you DECREMENT formCount, it might cause issues.</span>
                         <span class="hljs-comment">// It's safer to let Django handle removed extra forms via lack of submission.</span>
                     }, { <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// Remove listener after animation</span>
                 }
             });
        }
    }


    <span class="hljs-comment">// --- Add New Form Row ---</span>
    <span class="hljs-keyword">if</span> (addItemButton) {
        addItemButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">const</span> newIndex = formCount;
            <span class="hljs-keyword">let</span> newFormHtml = emptyFormTemplate.content.cloneNode(<span class="hljs-literal">true</span>); <span class="hljs-comment">// Use content of &lt;template&gt;</span>
            <span class="hljs-keyword">let</span> newFormRow;

            <span class="hljs-comment">// Find the actual item-row div within the cloned template content</span>
            <span class="hljs-keyword">if</span> (newFormHtml.querySelector) { <span class="hljs-comment">// Standard browsers</span>
                 newFormRow = newFormHtml.querySelector(<span class="hljs-string">'.item-row'</span>);
             } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// Fallback for older browsers or unexpected template structure</span>
                 newFormRow = newFormHtml.firstElementChild;
             }

             <span class="hljs-keyword">if</span>(!newFormRow) {
                 <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"Could not find '.item-row' in the template content."</span>);
                 <span class="hljs-keyword">return</span>;
             }

            <span class="hljs-comment">// Update prefix in names and IDs</span>
            newFormRow.innerHTML = newFormRow.innerHTML.replace(<span class="hljs-regexp">/__prefix__/g</span>, newIndex);
            newFormRow.dataset.id = newIndex; <span class="hljs-comment">// Update data-id if needed</span>

            <span class="hljs-comment">// Update row number visually</span>
            <span class="hljs-keyword">const</span> rowNumSpan = newFormRow.querySelector(<span class="hljs-string">'.row-number'</span>);
            <span class="hljs-keyword">if</span> (rowNumSpan) rowNumSpan.textContent = (formCount + <span class="hljs-number">1</span>).toLocaleString(<span class="hljs-string">'fa-IR'</span>);

            itemFormsetContainer.appendChild(newFormRow); <span class="hljs-comment">// Append the .item-row div</span>
            formCount++;
            totalFormsInput.value = formCount;

            <span class="hljs-comment">// Attach listeners to the new row</span>
            attachItemCalculationListeners(newFormRow);
            attachDeleteListener(newFormRow.querySelector(<span class="hljs-string">'.delete-item-check, .remove-item-btn'</span>)); <span class="hljs-comment">// Attach to either delete checkbox or button</span>

            calculateTotals(); <span class="hljs-comment">// Recalculate totals</span>

            <span class="hljs-comment">// Focus on the description field</span>
            <span class="hljs-keyword">const</span> newDescInput = newFormRow.querySelector(<span class="hljs-string">'[name$="-description"]'</span>);
            <span class="hljs-keyword">if</span> (newDescInput) newDescInput.focus();
        });
    }

    <span class="hljs-comment">// --- Initial Setup ---</span>
    <span class="hljs-comment">// Attach listeners and calculate totals for existing rows</span>
    itemFormsetContainer.querySelectorAll(<span class="hljs-string">'.item-row'</span>).forEach(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> {
        attachItemCalculationListeners(row);
        attachDeleteListener(row.querySelector(<span class="hljs-string">'.delete-item-check'</span>)); <span class="hljs-comment">// Attach only to checkbox for existing</span>
        calculateItemTotal(row); <span class="hljs-comment">// Calculate initial total for the row</span>
    });
    calculateTotals(); <span class="hljs-comment">// Calculate initial grand totals</span>

    <span class="hljs-comment">// Listen for changes on the main factor amount input</span>
    <span class="hljs-keyword">if</span> (factorAmountInput) {
        factorAmountInput.addEventListener(<span class="hljs-string">'input'</span>, calculateTotals);
        <span class="hljs-comment">// Initialize numberFormatter if needed</span>
         <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> numberFormatter !== <span class="hljs-string">'undefined'</span> &amp;&amp; factorAmountInput.classList.contains(<span class="hljs-string">'number-format'</span>)) {
            <span class="hljs-keyword">try</span> { <span class="hljs-keyword">new</span> numberFormatter(factorAmountInput); } <span class="hljs-keyword">catch</span>(e) { <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">"Factor amount numberFormatter failed:"</span>, e); }
         }
    }

    <span class="hljs-comment">// Initialize <span class="citation-3">Bootstrap Tooltips</span></span><span class="citation-3">
     </span><span class="hljs-keyword"><span class="citation-3">var</span></span><span class="citation-3"> tooltipTriggerList = [].</span><span class="citation-3 citation-4">slice.call(</span><span class="hljs-built_in"><span class="citation-3 citation-4">document</span></span><span class="citation-3 citation-4">.querySelectorAll(</span><span class="hljs-string"><span class="citation-3 citation-4">'[data-bs-toggle="tooltip"]'</span></span><span class="citation-3 citation-4">));
     tooltipTriggerList.map(</span><span class="hljs-function"><span class="hljs-keyword"><span class="citation-3 citation-4">function</span></span><span class="citation-3 citation-4 citation-end-3"></span><span class="citation-4"> (</span><span class="hljs-params"><span class="citation-4">tooltipTriggerEl</span></span><span class="citation-4">) </span></span><span class="citation-4">{
       </span><span class="hljs-keyword"><span class="citation-4">if</span></span><span class="citation-4 citation-end-4"> (bootstrap</span> &amp;&amp; bootstrap.Tooltip) { <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> bootstrap.Tooltip(tooltipTriggerEl); } <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
     });

}); <span class="hljs-comment">// End DOMContentLoaded</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
{% endblock %}
</code></pre><!----><!----><!----></div></div></div><!----><!----><!----></code-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer complete gap"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted"><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted"><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-40"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-53 ng-star-inserted hide-action-bar"><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-53 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-53 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-53 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-9" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_25ac78b5cdf2e172&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_f3602ce4a8f49a37&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_173"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_177"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_183"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_185"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_173)"><g mask="url(#__lottie_element_177)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_183)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_185)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-53 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-9" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_25ac78b5cdf2e172&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_f3602ce4a8f49a37&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_187"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_191"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_187)"><g mask="url(#__lottie_element_191)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-53 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-53 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_25ac78b5cdf2e172&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_f3602ce4a8f49a37&quot;,null,null,&quot;fa&quot;,null,null,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-53 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-53 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-53 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-53 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-53"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-53"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-9"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted"><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><div _ngcontent-ng-c3598689639="" class="conversation-container message-actions-hover-boundary tts-removed ng-star-inserted" id="4a5a34f404cc006c" style="min-height: 283px;"><user-query _ngcontent-ng-c3598689639="" _nghost-ng-c2617843004="" class="ng-star-inserted"><span _ngcontent-ng-c2617843004="" class="user-query-container right-align-content ng-star-inserted FontSet"><!----><user-query-content _ngcontent-ng-c2617843004="" class="user-query-container FontSet" _nghost-ng-c4161157681=""><div _ngcontent-ng-c4161157681="" class="user-query-container user-query-bubble-container ng-star-inserted FontSet"><div _ngcontent-ng-c4161157681="" class="file-preview-container ng-star-inserted"><!----><!----><!----></div><!----><div _ngcontent-ng-c4161157681="" class="query-content ng-star-inserted" id="user-query-content-10"><!----><div _ngcontent-ng-c4161157681="" class="ng-star-inserted"><button _ngcontent-ng-c4161157681="" mat-icon-button="" aria-label="ویرایش" mattooltip="ویرایش نوشتار" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger edit-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-controls="user-query-content-10" jslog="173924;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_4a5a34f404cc006c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,1,null,null,null,0]];mutable:true" aria-describedby="cdk-describedby-message-ng-1-26" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4161157681="" role="img" fonticon="edit" class="mat-icon notranslate gds-icon-m edit-button-icon google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="edit"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----><span _ngcontent-ng-c4161157681="" class="user-query-bubble-with-background ng-star-inserted"><!----><span _ngcontent-ng-c4161157681="" class="horizontal-container"><div _ngcontent-ng-c4161157681="" role="heading" aria-level="2" class="query-text gds-body-l" dir="rtl"><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> انواع روش محاسبه بودجه چیه ؟ <!----><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"><!----><br _ngcontent-ng-c4161157681="" class="ng-star-inserted"><!----></p><p _ngcontent-ng-c4161157681="" class="query-text-line ng-star-inserted"> شناور و .... یا تخصیص روش محاسبه توضیح بده و یاد بده <!----><!----></p><!----></div><!----><!----><!----></span></span><!----></div><!----><!----><!----></div><!----><!----><!----></user-query-content></span><!----></user-query><!----><model-response _ngcontent-ng-c3598689639="" _nghost-ng-c546605890="" class="ng-star-inserted"><div _ngcontent-ng-c546605890=""><response-container _ngcontent-ng-c546605890="" _nghost-ng-c108414610="" class="ng-tns-c108414610-86 reduced-bottom-padding ng-star-inserted" jslog="188576;track:impression;BardVeMetadataKey:[[&quot;r_4a5a34f404cc006c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,1,null,null,null,0]];mutable:true"><div _ngcontent-ng-c108414610="" class="response-container ng-tns-c108414610-86 response-container-with-gpi tts-removed ng-star-inserted response-container-has-multiple-responses" jslog="173900;track:impression"><!----><!----><div _ngcontent-ng-c108414610="" class="response-container-header ng-tns-c108414610-86 ng-star-inserted"><div _ngcontent-ng-c108414610="" class="response-container-header-controls ng-tns-c108414610-86"><!----><!----><!----><tts-control _ngcontent-ng-c108414610="" _nghost-ng-c934245196="" class="ng-tns-c108414610-86 ng-trigger ng-trigger-singleResponseEnter ng-animate-disabled ng-star-inserted" style=""><!----><div _ngcontent-ng-c934245196="" role="menu" class="mat-mdc-menu-trigger playback-speed-menu-trigger multi" aria-haspopup="menu" aria-expanded="false"><mat-menu _ngcontent-ng-c934245196="" yposition="below" xposition="after" class=""><!----></mat-menu></div><!----></tts-control><!----></div><!----><div _ngcontent-ng-c108414610="" class="response-container-header-status ng-tns-c108414610-86"><!----><div _ngcontent-ng-c108414610="" class="response-container-header-processing-state ng-tns-c108414610-86"><!----></div></div><!----><!----></div><!----><div _ngcontent-ng-c108414610="" class="presented-response-container ng-tns-c108414610-86"><div _ngcontent-ng-c108414610="" class="avatar-gutter ng-tns-c108414610-86 ng-star-inserted"><bard-avatar _ngcontent-ng-c108414610="" class="avatar-component ng-tns-c2434151383-88 ng-tns-c108414610-86 ng-star-inserted" _nghost-ng-c2434151383=""><div _ngcontent-ng-c2434151383="" bardavataranimationscontroller="" class="bard-avatar ng-tns-c2434151383-88"><div _ngcontent-ng-c2434151383="" class="avatar-container ng-tns-c2434151383-88 ng-trigger ng-trigger-scaleDown"><!----><div _ngcontent-ng-c2434151383="" class="avatar avatar_primary ng-tns-c2434151383-88 ng-star-inserted" style=""><div _ngcontent-ng-c2434151383="" class="avatar_primary_model ng-tns-c2434151383-88 is-gpi-avatar"><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_primary_animation is-gpi-avatar ng-tns-c2434151383-88 ng-star-inserted" data-test-lottie-animation-status="completed"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_769"><rect width="32" height="32" x="0" y="0"></rect></clippath><g id="__lottie_element_776"><g transform="matrix(0.9999992251396179,-0.001229780144058168,0.001229780144058168,0.9999992251396179,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_779)" fill-opacity="1" d=" M0.027000000700354576,14 C0.47999998927116394,6.489999771118164 6.489999771118164,0.47999998927116394 14,0.027000000700354576 C14,0.027000000700354576 14,-0.027000000700354576 14,-0.027000000700354576 C6.489999771118164,-0.47999998927116394 0.47999998927116394,-6.489999771118164 0.027000000700354576,-14 C0.027000000700354576,-14 -0.027000000700354576,-14 -0.027000000700354576,-14 C-0.47999998927116394,-6.489999771118164 -6.489999771118164,-0.47999998927116394 -14,-0.027000000700354576 C-14,-0.027000000700354576 -14,0.027000000700354576 -14,0.027000000700354576 C-6.489999771118164,0.47999998927116394 -0.47999998927116394,6.489999771118164 -0.027000000700354576,14 C-0.027000000700354576,14 0.027000000700354576,14 0.027000000700354576,14z"></path></g></g></g><lineargradient id="__lottie_element_779" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-9.222999572753906" y1="8.489999771118164" x2="10.461999893188477" y2="-8.211999893188477"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_783" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-4.002999782562256" y1="4.630000114440918" x2="8.092000007629395" y2="-7.886000156402588"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><mask id="__lottie_element_776_1" mask-type="alpha"><use href="#__lottie_element_776"></use></mask></defs><g clip-path="url(#__lottie_element_769)"><g mask="url(#__lottie_element_776_1)" style="display: block;"><g transform="matrix(1,0,0,1,16,16)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="url(#__lottie_element_783)" fill-opacity="1" d=" M0,-16 C8.830400466918945,-16 16,-8.830400466918945 16,0 C16,8.830400466918945 8.830400466918945,16 0,16 C-8.830400466918945,16 -16,8.830400466918945 -16,0 C-16,-8.830400466918945 -8.830400466918945,-16 0,-16z"></path></g></g></g></g></svg></div><!----><!----><!----><!----></div></div><!----><!----></div><!----><!----><div _ngcontent-ng-c2434151383="" lottie-animation="" class="avatar_spinner_animation ng-tns-c2434151383-88 ng-star-inserted" style="opacity: 0; visibility: hidden;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_784"><rect width="32" height="32" x="0" y="0"></rect></clippath><lineargradient id="__lottie_element_788" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_795" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_799" spreadMethod="pad" gradientUnits="userSpaceOnUse"><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop><stop></stop></lineargradient><lineargradient id="__lottie_element_803" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_807" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient><lineargradient id="__lottie_element_811" spreadMethod="pad" gradientUnits="userSpaceOnUse" x1="-6" y1="6" x2="16" y2="-16"><stop offset="0%" stop-color="rgb(33,123,254)"></stop><stop offset="14%" stop-color="rgb(20,133,252)"></stop><stop offset="27%" stop-color="rgb(7,142,251)"></stop><stop offset="52%" stop-color="rgb(84,143,253)"></stop><stop offset="78%" stop-color="rgb(161,144,255)"></stop><stop offset="89%" stop-color="rgb(175,148,254)"></stop><stop offset="100%" stop-color="rgb(189,153,254)"></stop></lineargradient></defs><g clip-path="url(#__lottie_element_784)"><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_811)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: none;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_807)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M5.416999816894531,-13.989999771118164 C11.022000312805176,-11.815999984741211 15,-6.36899995803833 15,0 C15,0.9309999942779541 14.914999961853027,1.843000054359436 14.751999855041504,2.7279999256134033"></path></g></g><g transform="matrix(1,0,0,1,16,16)" opacity="1" style="display: none;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke="url(#__lottie_element_803)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke-opacity="1" stroke-width="2" d=" M-4.383999824523926,-14.347999572753906 C-2.996999979019165,-14.772000312805176 -1.524999976158142,-15 0,-15 C0,-15 0,-15 0,-15 C1.7100000381469727,-15 3.3540000915527344,-14.713000297546387 4.886000156402588,-14.1850004196167"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_799)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_795)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g><g style="display: none;"><g><path stroke="url(#__lottie_element_788)" stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4"></path></g></g></g></svg></div><!----><!----></div></bard-avatar><!----><!----></div><!----><div _ngcontent-ng-c108414610="" selection="" class="response-container-content ng-tns-c108414610-86"><!----><!----><!----><!----><!----><!----><div _ngcontent-ng-c546605890="" class="response-content ng-tns-c108414610-86"><model-thoughts _ngcontent-ng-c546605890="" _nghost-ng-c4115365821="" class="ng-tns-c4115365821-87 ng-star-inserted" style="height: auto;"><div _ngcontent-ng-c4115365821="" class="model-thoughts ng-tns-c4115365821-87"><div _ngcontent-ng-c4115365821="" class="thoughts-header ng-tns-c4115365821-87"><button _ngcontent-ng-c4115365821="" mat-button="" data-test-id="thoughts-header-button" class="mdc-button mat-mdc-button-base thoughts-header-button ng-tns-c4115365821-87 mat-mdc-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="247951;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-content"><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-label ng-tns-c4115365821-87"><span _ngcontent-ng-c4115365821="" class="ng-tns-c4115365821-87">نمایش روند تفکر</span></div><div _ngcontent-ng-c4115365821="" class="thoughts-header-button-icons ng-tns-c4115365821-87"><!----><mat-icon _ngcontent-ng-c4115365821="" role="img" fonticon="expand_more" class="mat-icon notranslate thoughts-header-button-icon ng-tns-c4115365821-87 google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="expand_more"></mat-icon><!----></div></div></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button></div><!----></div></model-thoughts><!----><!----><!----><message-content _ngcontent-ng-c546605890="" class="model-response-text ng-star-inserted" _nghost-ng-c1892759787="" id="message-content-id-r_4a5a34f404cc006c" style="height: auto;"><div _ngcontent-ng-c1892759787="" class="markdown markdown-main-panel stronger FontSet" id="model-response-message-contentr_4a5a34f404cc006c" dir="rtl" style="--animation-duration: 600ms; --fade-animation-function: linear;"><p data-sourcepos="1:1-1:255">عالی! سوال خیلی خوبی پرسیدی. بودجه‌بندی روش‌های مختلفی داره که هر کدوم برای شرایط و اهداف خاصی مناسب‌تر هستن. اینکه گفتی "شناور" و "تخصیص"، نشون می‌ده که با بعضی مفاهیم آشنایی داری. بیا با دقت و حوصله انواع روش‌های اصلی محاسبه و تنظیم بودجه رو بررسی کنیم:</p><p data-sourcepos="3:1-3:20"><strong>بودجه‌بندی چیست؟</strong></p><p data-sourcepos="5:1-5:177">به زبان ساده، بودجه‌بندی یعنی برنامه‌ریزی برای دخل و خرج پول در یک دوره زمانی مشخص (مثلاً ماهانه، سالانه). هدفش کنترل هزینه‌ها، رسیدن به اهداف مالی و استفاده بهینه از منابع هست.</p><p data-sourcepos="7:1-7:34"><strong>انواع روش‌های اصلی بودجه‌بندی:</strong></p><p data-sourcepos="9:1-9:98">روش‌ها رو می‌شه بر اساس معیارهای مختلفی دسته‌بندی کرد. در اینجا چند روش مهم و رایج رو توضیح می‌دم:</p><p data-sourcepos="11:1-11:50"><strong>۱. بودجه‌بندی افزایشی (Incremental Budgeting):</strong></p><ul data-sourcepos="13:1-17:0">
<li data-sourcepos="13:1-13:200"><strong>توضیح:</strong> این یکی از ساده‌ترین و رایج‌ترین روش‌هاست. اساس کارش اینه که بودجه دوره قبل رو برمی‌داریم و برای دوره جدید، یک درصد مشخصی (مثلاً بر اساس تورم یا رشد پیش‌بینی‌شده) بهش اضافه یا کم می‌کنیم.</li>
<li data-sourcepos="14:1-14:65"><strong>محاسبه:</strong> بودجه دوره جدید = بودجه دوره قبل × (۱ ± درصد تغییر)</li>
<li data-sourcepos="15:1-15:52"><strong>مزایا:</strong> سریع، ساده، نیاز به تحلیل پیچیده نداره.</li>
<li data-sourcepos="16:1-17:0"><strong>معایب:</strong> ناکارآمدی‌های بودجه قبلی رو تکرار می‌کنه، جلوی نوآوری رو می‌گیره، و لزوماً هزینه‌ها رو به فعالیت‌ها یا اهداف واقعی ربط نمی‌ده.</li>
</ul><p data-sourcepos="18:1-18:60"><strong>۲. بودجه‌بندی بر مبنای صفر (Zero-Based Budgeting - ZBB):</strong></p><ul data-sourcepos="20:1-24:0">
<li data-sourcepos="20:1-20:289"><strong>توضیح:</strong> این روش دقیقاً نقطه‌ی مقابل روش افزایشیه. در ZBB، هر دوره بودجه‌ریزی از صفر شروع می‌شه و تمام هزینه‌ها (حتی هزینه‌هایی که در دوره قبل وجود داشتن) باید از اول توجیه بشن. هر واحد یا بخش باید نیازها و هزینه‌های خودش رو بر اساس اهداف و فعالیت‌های دوره جدید، به طور کامل اثبات کنه.</li>
<li data-sourcepos="21:1-21:192"><strong>محاسبه:</strong> برای هر فعالیت یا هزینه، باید توجیه، مبلغ مورد نیاز و نتیجه مورد انتظار مشخص بشه. اولویت‌بندی انجام می‌شه و منابع به مواردی که بالاترین اولویت و توجیه رو دارن، تخصیص پیدا می‌کنه.</li>
<li data-sourcepos="22:1-22:127"><strong>مزایا:</strong> باعث شناسایی و حذف هزینه‌های غیرضروری می‌شه، منابع رو به سمت اولویت‌های واقعی هدایت می‌کنه، کارایی رو بالا می‌بره.</li>
<li data-sourcepos="23:1-24:0"><strong>معایب:</strong> بسیار زمان‌بر و پرهزینه است، نیاز به تحلیل دقیق و جمع‌آوری اطلاعات زیاد داره، ممکنه باعث مقاومت مدیران بشه.</li>
</ul><p data-sourcepos="25:1-25:94"><strong>۳. بودجه‌بندی شناور یا انعطاف‌پذیر (Flexible / Variable Budgeting):</strong> (اشاره شما به "شناور")</p><ul data-sourcepos="27:1-32:0">
<li data-sourcepos="27:1-27:316"><strong>توضیح:</strong> این روش برای شرایطی مناسبه که سطح فعالیت یا تولید/فروش متغیره. به جای یک بودجه ثابت، چند بودجه برای سطوح مختلف فعالیت (مثلاً حجم فروش یا تعداد تولید متفاوت) پیش‌بینی می‌شه. یا اینکه بودجه بر اساس یک فرمول که هزینه‌ها رو به سطح فعالیت ربط می‌ده، تنظیم می‌شه (مثلاً هزینه‌های متغیر به ازای هر واحد تولید).</li>
<li data-sourcepos="28:1-28:234"><strong>محاسبه:</strong> ابتدا هزینه‌ها به ثابت و متغیر تفکیک می‌شن. بودجه هزینه‌های متغیر بر اساس سطح فعالیت واقعی یا پیش‌بینی شده محاسبه می‌شه و به بخش ثابت اضافه می‌شه. فرمول کلی: بودجه کل = هزینه‌های ثابت + (هزینه متغیر هر واحد × سطح فعالیت)</li>
<li data-sourcepos="29:1-29:141"><strong>مزایا:</strong> واقع‌بینانه‌تره، امکان مقایسه بهتر عملکرد واقعی با بودجه رو در سطوح مختلف فعالیت فراهم می‌کنه، برای کنترل هزینه‌های متغیر عالیه.</li>
<li data-sourcepos="30:1-30:118"><strong>معایب:</strong> نیاز به تحلیل دقیق هزینه‌ها و تفکیک اونها به ثابت و متغیر داره، پیاده‌سازیش کمی پیچیده‌تر از بودجه ثابته.</li>
<li data-sourcepos="31:1-32:0"><strong>نکته:</strong> نقطه‌ی مقابل بودجه شناور، <strong>بودجه ثابت (Static Budget)</strong> هست که فقط برای یک سطح فعالیت مشخص تنظیم می‌شه و با تغییر سطح فعالیت، تغییر نمی‌کنه.</li>
</ul><p data-sourcepos="33:1-33:67"><strong>۴. بودجه‌بندی بر مبنای فعالیت (Activity-Based Budgeting - ABB):</strong></p><ul data-sourcepos="35:1-39:0">
<li data-sourcepos="35:1-35:230"><strong>توضیح:</strong> این روش شبیه ZBB هست، اما تمرکزش روی "فعالیت‌ها" ست. ابتدا فعالیت‌های کلیدی سازمان شناسایی می‌شن، سپس منابع مورد نیاز برای انجام هر فعالیت تعیین و بودجه‌بندی می‌شه. در واقع، بودجه به میزان انجام فعالیت‌ها گره می‌خوره.</li>
<li data-sourcepos="36:1-36:182"><strong>محاسبه:</strong> شناسایی فعالیت‌ها -&gt; تعیین منابع مورد نیاز هر فعالیت (نیروی انسانی، مواد، تجهیزات) -&gt; محاسبه هزینه هر فعالیت -&gt; پیش‌بینی تعداد دفعات انجام هر فعالیت -&gt; محاسبه بودجه کل.</li>
<li data-sourcepos="37:1-37:108"><strong>مزایا:</strong> درک بهتری از هزینه‌ها و عوامل محرک اونها (Cost Drivers) می‌ده، به تخصیص بهینه منابع کمک می‌کنه.</li>
<li data-sourcepos="38:1-39:0"><strong>معایب:</strong> پیاده‌سازی پیچیده و زمان‌بر، نیاز به سیستم اطلاعاتی قوی داره.</li>
</ul><p data-sourcepos="40:1-40:56"><strong>۵. بودجه‌بندی از بالا به پایین (Top-Down Budgeting):</strong></p><ul data-sourcepos="42:1-45:0">
<li data-sourcepos="42:1-42:198"><strong>توضیح:</strong> مدیریت ارشد سازمان اهداف کلی و سقف بودجه کل رو تعیین می‌کنه و این سقف‌ها به سطوح پایین‌تر (بخش‌ها، دپارتمان‌ها) ابلاغ می‌شه. هر بخش باید بودجه خودش رو در چارچوب سقف تعیین‌شده تنظیم کنه.</li>
<li data-sourcepos="43:1-43:55"><strong>مزایا:</strong> سریع‌تره، با اهداف کلان سازمان هم‌راستاست.</li>
<li data-sourcepos="44:1-45:0"><strong>معایب:</strong> ممکنه واقع‌بینانه نباشه چون مدیران میانی و عملیاتی در تعیین نیازها نقش کمتری دارن، ممکنه باعث کاهش انگیزه مدیران سطوح پایین‌تر بشه.</li>
</ul><p data-sourcepos="46:1-46:57"><strong>۶. بودجه‌بندی از پایین به بالا (Bottom-Up Budgeting):</strong></p><ul data-sourcepos="48:1-51:0">
<li data-sourcepos="48:1-48:220"><strong>توضیح:</strong> هر واحد یا بخش کوچک، بودجه پیشنهادی خودش رو بر اساس نیازها و برنامه‌هاش تهیه می‌کنه و به سطح مدیریت بالاتر ارائه می‌ده. این بودجه‌ها در سطوح بالاتر تجمیع، بررسی و تعدیل می‌شن تا بودجه نهایی سازمان شکل بگیره.</li>
<li data-sourcepos="49:1-49:85"><strong>مزایا:</strong> مشارکت بیشتر مدیران عملیاتی، بودجه واقع‌بینانه‌تر، افزایش انگیزه و تعهد.</li>
<li data-sourcepos="50:1-51:0"><strong>معایب:</strong> زمان‌بره، ممکنه بودجه‌های پیشنهادی خیلی بالا باشن (Padding)، نیاز به هماهنگی و تعدیل زیاد داره تا با اهداف کلان سازگار بشه.</li>
</ul><p data-sourcepos="52:1-52:90"><strong>۷. بودجه‌بندی بر اساس تخصیص درصد (Percentage-Based Allocation):</strong> (اشاره شما به "تخصیص")</p><ul data-sourcepos="54:1-59:0">
<li data-sourcepos="54:1-54:345"><strong>توضیح:</strong> این بیشتر یک تکنیک در کنار روش‌های دیگه یا برای بودجه‌بندی شخصی هست تا یک روش کامل سازمانی. در این روش، درآمد یا منابع کلی به دسته‌های مختلف هزینه‌ای (مثل مسکن، خوراک، حمل‌ونقل، پس‌انداز) بر اساس درصدهای از پیش تعیین‌شده تخصیص داده می‌شه. معروف‌ترین مثال شخصی اون قانون 50/30/20 هست (۵۰٪ نیازها، ۳۰٪ خواسته‌ها، ۲۰٪ پس‌انداز و بدهی).</li>
<li data-sourcepos="55:1-55:69"><strong>محاسبه:</strong> درآمد کل × درصد تخصیص‌یافته به هر دسته = بودجه هر دسته.</li>
<li data-sourcepos="56:1-56:55"><strong>مزایا (بیشتر شخصی):</strong> ساده، کمک به اولویت‌بندی کلی.</li>
<li data-sourcepos="57:1-57:89"><strong>معایب:</strong> ممکنه خیلی انعطاف‌پذیر نباشه، درصدهای ثابت ممکنه برای همه شرایط مناسب نباشن.</li>
<li data-sourcepos="58:1-59:0"><strong>نکته:</strong> مفهوم "تخصیص" (Allocation) در واقع در <em>همه‌ی</em> روش‌های بودجه‌بندی وجود داره و به معنی اختصاص دادن منابع مالی به بخش‌ها یا سرفصل‌های مختلف هست. این روش صرفاً یک مدل خاص از تخصیص رو بیان می‌کنه.</li>
</ul><p data-sourcepos="60:1-60:62"><strong>۸. بودجه‌بندی ارزش پیشنهادی (Value Proposition Budgeting):</strong></p><ul data-sourcepos="62:1-65:0">
<li data-sourcepos="62:1-62:209"><strong>توضیح:</strong> یک روش استراتژیک که سعی می‌کنه تخصیص بودجه رو مستقیماً به "ارزشی" که هر هزینه یا فعالیت برای مشتریان یا سازمان ایجاد می‌کنه، مرتبط کنه. از خودش می‌پرسه چرا این هزینه لازمه و چه ارزشی ایجاد می‌کنه؟</li>
<li data-sourcepos="63:1-63:64"><strong>مزایا:</strong> تمرکز روی موارد ارزش‌آفرین، هم‌راستایی با استراتژی.</li>
<li data-sourcepos="64:1-65:0"><strong>معایب:</strong> تعریف و اندازه‌گیری "ارزش" می‌تونه سخت و ذهنی باشه.</li>
</ul><p data-sourcepos="66:1-66:35"><strong>چطور بهترین روش رو انتخاب کنیم؟</strong></p><p data-sourcepos="68:1-68:43">انتخاب روش مناسب به عوامل زیادی بستگی داره:</p><ul data-sourcepos="70:1-76:0">
<li data-sourcepos="70:1-70:90"><strong>اندازه و پیچیدگی سازمان:</strong> سازمان‌های بزرگ و پیچیده ممکنه از ترکیب روش‌ها استفاده کنن.</li>
<li data-sourcepos="71:1-71:100"><strong>نوع فعالیت:</strong> کسب‌وکارهایی که هزینه‌هاشون با تولید/فروش تغییر می‌کنه، از بودجه شناور سود می‌برن.</li>
<li data-sourcepos="72:1-72:126"><strong>میزان تغییرات محیطی:</strong> در محیط‌های پویا، بودجه شناور یا بودجه‌بندی غلتان (Rolling Budget - که مرتب آپدیت می‌شه) مناسب‌تره.</li>
<li data-sourcepos="73:1-73:98"><strong>فرهنگ سازمانی:</strong> میزان مشارکت‌پذیری مدیران در انتخاب روش بالا به پایین یا پایین به بالا مؤثره.</li>
<li data-sourcepos="74:1-74:85"><strong>منابع و زمان در دسترس:</strong> روش‌هایی مثل ZBB یا ABB نیاز به منابع و زمان زیادی دارن.</li>
<li data-sourcepos="75:1-76:0"><strong>اهداف بودجه:</strong> آیا هدف فقط کنترل هزینه است یا بهبود کارایی و تخصیص بهینه منابع؟</li>
</ul><p data-sourcepos="77:1-77:13"><strong>جمع‌بندی:</strong></p><p data-sourcepos="79:1-79:358">هر روش بودجه‌بندی مزایا و معایب خودش رو داره. "بودجه شناور" یک روش مشخص برای مدیریت هزینه‌های متغیره و "تخصیص" یک مفهوم کلی در بودجه‌بندیه که می‌تونه با درصدهای ثابت (مثل 50/30/20) یا روش‌های پیچیده‌تر مثل اولویت‌بندی یا ZBB انجام بشه. شناخت این روش‌ها به شما کمک می‌کنه تا بهترین و مناسب‌ترین راهکار رو برای برنامه‌ریزی مالی خودتون یا سازمانتون انتخاب کنید.</p></div></message-content><!----><!----><div _ngcontent-ng-c546605890="" class="response-footer gap complete"><!----><!----><!----><sources-list _ngcontent-ng-c546605890="" class="sources-list ng-star-inserted" style=""><!----></sources-list><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div><!----><sensitive-memories-banner _ngcontent-ng-c546605890="" _nghost-ng-c2546766667="" class="ng-star-inserted" style=""><!----></sensitive-memories-banner><!----><!----><!----><!----></div><!----></div><div _ngcontent-ng-c108414610="" class="response-container-footer ng-tns-c108414610-86"><message-actions _ngcontent-ng-c546605890="" footer="" _nghost-ng-c2047645396="" class="ng-tns-c2047645396-89 ng-star-inserted" style=""><div _ngcontent-ng-c2047645396="" class="actions-container-v2 ng-tns-c2047645396-89 simplified-action-bar"><div _ngcontent-ng-c2047645396="" class="buttons-container-v2 ng-tns-c2047645396-89 ng-star-inserted"><!----><thumb-up-button _ngcontent-ng-c2047645396="" _nghost-ng-c4235705938="" class="ng-tns-c2047645396-89 ng-star-inserted"><button _ngcontent-ng-c4235705938="" mat-icon-button="" mattooltip="پاسخ خوب" aria-label="پاسخ خوب" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-10" jslog="173913;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_4a5a34f404cc006c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_93f1e9c5ef3f4b64&quot;,null,null,&quot;fa&quot;,null,1,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c4235705938="" role="img" fonticon="thumb_up" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_up"></mat-icon><!----><div _ngcontent-ng-c4235705938="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_815"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_819"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask><mask id="__lottie_element_825"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 21.648000717163086,-8.79800033569336 21.648000717163086,-8.79800033569336 C21.648000717163086,-8.79800033569336 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></mask><clippath id="__lottie_element_827"><path fill="#ffffff" clip-rule="nonzero" d=" M21.899999618530273,-45.80699920654297 C21.899999618530273,-45.80699920654297 -10.57800006866455,-36.2400016784668 -10.57800006866455,-36.2400016784668 C-10.57800006866455,-36.2400016784668 20.641000747680664,-6.5320000648498535 20.641000747680664,-6.5320000648498535 C20.641000747680664,-6.5320000648498535 21.899999618530273,-45.80699920654297 21.899999618530273,-45.80699920654297"></path></clippath></defs><g clip-path="url(#__lottie_element_815)"><g mask="url(#__lottie_element_819)" style="display: none;"><g><path></path></g></g><g mask="url(#__lottie_element_825)" style="display: none;"><g><path></path></g></g><g clip-path="url(#__lottie_element_827)" style="display: none;"><g><path></path></g></g><g transform="matrix(0.943097710609436,0,0,0.943097710609436,49.22163009643555,46.75019836425781)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-up-button><thumb-down-button _ngcontent-ng-c2047645396="" _nghost-ng-c2537264493="" class="ng-tns-c2047645396-89 ng-star-inserted"><button _ngcontent-ng-c2537264493="" mat-icon-button="" mattooltip="پاسخ بد" aria-label="پاسخ بد" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-pressed="false" aria-controls="feedback-form-10" jslog="173904;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_4a5a34f404cc006c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_93f1e9c5ef3f4b64&quot;,null,null,&quot;fa&quot;,null,1,null,null,1,0]];mutable:true"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c2537264493="" role="img" fonticon="thumb_down" class="mat-icon notranslate gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="thumb_down"></mat-icon><!----><div _ngcontent-ng-c2537264493="" lottie-animation="" class="thumb-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_829"><rect width="96" height="96" x="0" y="0"></rect></clippath><mask id="__lottie_element_833"><rect fill="#ffffff" width="96" height="96"></rect><path fill="#000000" clip-rule="nonzero" d=" M20.823999404907227,-50.45800018310547 C20.823999404907227,-50.45800018310547 -18.42799949645996,-40.75899887084961 -18.42799949645996,-40.75899887084961 C-18.42799949645996,-40.75899887084961 -20.881999969482422,-11.439000129699707 -20.881999969482422,-11.439000129699707 C-20.881999969482422,-11.439000129699707 13.111000061035156,-16.22100067138672 13.111000061035156,-16.22100067138672 C13.111000061035156,-16.22100067138672 20.823999404907227,-50.45800018310547 20.823999404907227,-50.45800018310547"></path></mask></defs><g clip-path="url(#__lottie_element_829)"><g mask="url(#__lottie_element_833)" style="display: none;"><g><path></path></g></g><g style="display: none;"><g><path></path></g></g><g transform="matrix(-0.9419913291931152,0,0,-0.9419913291931152,46.50027084350586,49.44205856323242)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(4.239999771118164,0,0,4.239999771118164,0,0)"><path fill="rgb(162,169,176)" fill-opacity="1" d=" M-2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,0.33500000834465027 -2.865000009536743,0.33500000834465027 C-2.865000009536743,0.33500000834465027 -2.865000009536743,-1.0190000534057617 -2.865000009536743,-1.0190000534057617 C-2.865000009536743,-1.0190000534057617 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273z M-8.385000228881836,7.564000129699707 C-8.010000228881836,7.925000190734863 -7.559000015258789,8.105999946594238 -7.031000137329102,8.105999946594238 C-7.031000137329102,8.105999946594238 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 -4.677000045776367,6.210000038146973 -4.677000045776367,6.210000038146973 C-4.677000045776367,6.210000038146973 -7.031000137329102,6.210000038146973 -7.031000137329102,6.210000038146973 C-7.031000137329102,6.210000038146973 -7.031000137329102,-1.0190000534057617 -7.031000137329102,-1.0190000534057617 C-7.031000137329102,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 -4.677000045776367,-1.0190000534057617 C-4.677000045776367,-1.0190000534057617 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 -7.031000137329102,-2.9149999618530273 C-7.559000015258789,-2.9149999618530273 -8.010000228881836,-2.7279999256134033 -8.385000228881836,-2.3529999256134033 C-8.746000289916992,-1.9919999837875366 -8.927000045776367,-1.5470000505447388 -8.927000045776367,-1.0190000534057617 C-8.927000045776367,-1.0190000534057617 -8.927000045776367,6.210000038146973 -8.927000045776367,6.210000038146973 C-8.927000045776367,6.73799991607666 -8.746000289916992,7.189000129699707 -8.385000228881836,7.564000129699707z M-2.865000009536743,6.210000038146973 C-2.865000009536743,6.210000038146973 -2.865000009536743,-2.0399999618530273 -2.865000009536743,-2.0399999618530273 C-2.865000009536743,-2.0399999618530273 0.4480000138282776,-5.353000164031982 0.4480000138282776,-5.353000164031982 C0.4480000138282776,-5.353000164031982 -0.6150000095367432,-1.0190000534057617 -0.6150000095367432,-1.0190000534057617 C-0.6150000095367432,-1.0190000534057617 7.010000228881836,-1.0190000534057617 7.010000228881836,-1.0190000534057617 C7.010000228881836,-1.0190000534057617 7.010000228881836,0.33500000834465027 7.010000228881836,0.33500000834465027 C7.010000228881836,0.33500000834465027 4.510000228881836,6.210000038146973 4.510000228881836,6.210000038146973 C4.510000228881836,6.210000038146973 -2.865000009536743,6.210000038146973 -2.865000009536743,6.210000038146973z M8.343999862670898,-2.3320000171661377 C7.968999862670898,-2.7209999561309814 7.531000137329102,-2.9149999618530273 7.031000137329102,-2.9149999618530273 C7.031000137329102,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 1.7400000095367432,-2.9149999618530273 C1.7400000095367432,-2.9149999618530273 2.615000009536743,-6.374000072479248 2.615000009536743,-6.374000072479248 C2.697999954223633,-6.692999839782715 2.6700000762939453,-6.998000144958496 2.5309998989105225,-7.289999961853027 C2.3919999599456787,-7.581999778747559 2.177000045776367,-7.803999900817871 1.8849999904632568,-7.956999778747559 C1.5800000429153442,-8.095999717712402 1.2599999904632568,-8.137999534606934 0.9269999861717224,-8.081999778747559 C0.6079999804496765,-8.039999961853027 0.33000001311302185,-7.894000053405762 0.09399999678134918,-7.644000053405762 C0.09399999678134918,-7.644000053405762 -4.677000045776367,-2.9149999618530273 -4.677000045776367,-2.9149999618530273 C-4.677000045776367,-2.9149999618530273 -4.677000045776367,8.105999946594238 -4.677000045776367,8.105999946594238 C-4.677000045776367,8.105999946594238 4.510000228881836,8.105999946594238 4.510000228881836,8.105999946594238 C4.870999813079834,8.105999946594238 5.218999862670898,7.99399995803833 5.552000045776367,7.771999835968018 C5.885000228881836,7.550000190734863 6.120999813079834,7.28000020980835 6.260000228881836,6.960000038146973 C6.260000228881836,6.960000038146973 8.802000045776367,1.0010000467300415 8.802000045776367,1.0010000467300415 C8.829999923706055,0.9039999842643738 8.857000350952148,0.800000011920929 8.885000228881836,0.6890000104904175 C8.913000106811523,0.5640000104904175 8.927000045776367,0.44600000977516174 8.927000045776367,0.33500000834465027 C8.927000045776367,0.33500000834465027 8.927000045776367,-1.0190000534057617 8.927000045776367,-1.0190000534057617 C8.927000045776367,-1.5190000534057617 8.732999801635742,-1.9570000171661377 8.343999862670898,-2.3320000171661377z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></thumb-down-button><!----><!----><!----><regenerate-button _ngcontent-ng-c2047645396="" _nghost-ng-c4098520400="" class="ng-tns-c2047645396-89 ng-star-inserted"><button _ngcontent-ng-c4098520400="" mat-icon-button="" aria-label="ازنو انجام دادن" mattooltip="ازنو انجام دادن" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger icon-button mat-unthemed" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="173911;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_4a5a34f404cc006c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,null,null,null,null,null,1,null,null,null,0]]"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><!----><mat-icon _ngcontent-ng-c4098520400="" role="img" fonticon="refresh" class="mat-icon notranslate refresh-icon gds-icon-m google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="refresh"></mat-icon><!----><div _ngcontent-ng-c4098520400="" lottie-animation="" class="regenerate-animation" hidden=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96 96" width="96" height="96" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px); content-visibility: visible;"><defs><clippath id="__lottie_element_840"><rect width="96" height="96" x="0" y="0"></rect></clippath></defs><g clip-path="url(#__lottie_element_840)"><g transform="matrix(-0.2838418185710907,0.505800187587738,-0.505800187587738,-0.2838418185710907,53.290863037109375,47.63071823120117)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,4.936999797821045,7.936999797821045)"><path stroke-linecap="round" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke="rgb(162,169,176)" stroke-opacity="1" stroke-width="13.5" d=" M0,-40.650001525878906 C22.434736251831055,-40.650001525878906 40.650001525878906,-22.434736251831055 40.650001525878906,0 C40.650001525878906,22.434736251831055 22.434736251831055,40.650001525878906 0,40.650001525878906 C-22.434736251831055,40.650001525878906 -40.650001525878906,22.434736251831055 -40.650001525878906,0 C-40.650001525878906,-7.0980000495910645 -38.82699966430664,-13.77299976348877 -35.624000549316406,-19.582000732421875"></path></g></g><g transform="matrix(-0.2838418185710907,0.505800187587738,-0.505800187587738,-0.2838418185710907,53.290863037109375,47.63071823120117)" opacity="1" style="display: block;"></g><g transform="matrix(0.5800000429153442,0,0,0.5800000429153442,47.948150634765625,47.94731140136719)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(6.895830154418945,0,0,6.895830154418945,0,0)"><path fill="rgb(11,87,208)" fill-opacity="1" d=" M4.25,-2.5 C4.25,-2.5 1.6460000276565552,-2.5 1.6460000276565552,-2.5 C1.3960000276565552,-2.5 1.187999963760376,-2.4170000553131104 1.0210000276565552,-2.25 C0.8539999723434448,-2.0829999446868896 0.7710000276565552,-1.875 0.7710000276565552,-1.625 C0.7710000276565552,-1.3890000581741333 0.8539999723434448,-1.180999994277954 1.0210000276565552,-1 C1.187999963760376,-0.8330000042915344 1.3960000276565552,-0.75 1.6460000276565552,-0.75 C1.6460000276565552,-0.75 5.916999816894531,-0.75 5.916999816894531,-0.75 C6.181000232696533,-0.75 6.4029998779296875,-0.8410000205039978 6.583000183105469,-1.0210000276565552 C6.763999938964844,-1.215999960899353 6.854000091552734,-1.444000005722046 6.854000091552734,-1.7079999446868896 C6.854000091552734,-1.7079999446868896 6.854000091552734,-5.958000183105469 6.854000091552734,-5.958000183105469 C6.854000091552734,-6.208000183105469 6.770999908447266,-6.415999889373779 6.604000091552734,-6.583000183105469 C6.436999797821045,-6.75 6.229000091552734,-6.833000183105469 5.979000091552734,-6.833000183105469 C5.729000091552734,-6.833000183105469 5.520999908447266,-6.75 5.354000091552734,-6.583000183105469 C5.186999797821045,-6.415999889373779 5.104000091552734,-6.208000183105469 5.104000091552734,-5.958000183105469 C5.104000091552734,-5.958000183105469 5.104000091552734,-4.479000091552734 5.104000091552734,-4.479000091552734 C5.104000091552734,-3.6429998874664307 4.84499979019165,-2.5 4.25,-2.5z"></path></g></g></g></svg></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span><span class="mat-ripple mat-mdc-button-ripple"></span></button><!----></regenerate-button><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="tooltip-anchor-point ng-tns-c2047645396-89 ng-star-inserted"><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" aria-label="هم‌رسانی و صادر کردن" tabindex="0" mattooltip="هم‌رسانی و صادر کردن" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button ng-tns-c2047645396-89 mat-mdc-button mat-unthemed" mat-ripple-loader-class-name="mat-mdc-button-ripple" data-test-id="share-and-export-menu-button" jslog="189014;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_4a5a34f404cc006c&quot;,&quot;c_184a9f472ac9ab94&quot;,null,&quot;rc_93f1e9c5ef3f4b64&quot;,null,null,&quot;fa&quot;,null,1,null,null,1,0]];mutable:true" aria-haspopup="menu" aria-expanded="false"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="share" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="share"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span><span class="mat-ripple mat-mdc-button-ripple"></span></button><!----></div><!----><!----><!----><!----><!----><div _ngcontent-ng-c2047645396="" class="menu-button-wrapper ng-tns-c2047645396-89 ng-star-inserted"><div _ngcontent-ng-c2047645396="" class="more-menu-button-container ng-tns-c2047645396-89 ng-star-inserted"><!----><!----><!----><!----><!----><!----><button _ngcontent-ng-c2047645396="" mat-button="" mattooltip="بیشتر" aria-label="نمایش گزینه‌های بیشتر" tabindex="0" data-test-id="more-menu-button" class="mdc-button mat-mdc-button-base mat-mdc-menu-trigger mat-mdc-tooltip-trigger icon-button more-menu-button ng-tns-c2047645396-89 mat-mdc-button mat-unthemed" mat-ripple-loader-class-name="mat-mdc-button-ripple" aria-haspopup="menu" aria-expanded="false" aria-describedby="cdk-describedby-message-ng-1-23" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c2047645396="" role="img" fonticon="more_vert" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="more_vert"></mat-icon><span class="mdc-button__label"></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span><span class="mat-ripple mat-mdc-button-ripple"></span></button><!----></div><!----></div><!----><div _ngcontent-ng-c2047645396="" class="spacer ng-tns-c2047645396-89 ng-star-inserted"></div><!----><!----></div><!----><!----></div><!----><mat-menu _ngcontent-ng-c2047645396="" yposition="above" xposition="after" class="ng-tns-c2047645396-89"><!----></mat-menu><mat-menu _ngcontent-ng-c2047645396="" yposition="above" class="ng-tns-c2047645396-89"><!----></mat-menu><!----><!----><!----><!----></message-actions><!----><!----></div></div><!----></response-container><!----><!----><!----><div _ngcontent-ng-c546605890="" class="feedback-form-turn-index" id="feedback-form-10"><!----></div><!----><freemium-rag-disclaimer _ngcontent-ng-c546605890="" _nghost-ng-c1279331124="" class="ng-star-inserted" style=""><!----></freemium-rag-disclaimer><!----></div></model-response><div _ngcontent-ng-c3598689639="" class="restart-chat-button-scroll-placeholder ng-star-inserted"></div><!----><!----><!----><!----><!----><freemium-file-upload-near-quota-disclaimer _ngcontent-ng-c3598689639="" class="with-chat-padding ng-star-inserted" _nghost-ng-c4081450395="" style=""><!----></freemium-file-upload-near-quota-disclaimer><!----><freemium-file-upload-quota-exceeded-disclaimer _ngcontent-ng-c3598689639="" class="with-chat-padding ng-star-inserted" _nghost-ng-c3859153116="" style=""><!----></freemium-file-upload-quota-exceeded-disclaimer><!----><!----><!----><!----></div><!----><!----><!----><!----><!----><!----><!----><!----></infinite-scroller><!----></div><!----><div _ngcontent-ng-c3598689639="" class="hidden-content-image-cache"><user-profile-picture _ngcontent-ng-c3598689639="" _nghost-ng-c2552956441=""><img _ngcontent-ng-c2552956441="" alt="تصویر نمایه" class="user-icon" src="./انواع بودجه بندی_files/unnamed(1).jpg" style="height: 32px; width: 32px;"></user-profile-picture></div></chat-window-content><!----><!----><!----><input-container _ngcontent-ng-c4196107817="" _nghost-ng-c3177278963="" class="ng-tns-c4196107817-1 input-gradient ui-improvements-phase-1 ng-star-inserted" style=""><!----><!----><contextual-actions _ngcontent-ng-c3177278963="" _nghost-ng-c1668555136="" class="ng-star-inserted"><div _ngcontent-ng-c1668555136="" class="container hidden ng-star-inserted"><button _ngcontent-ng-c1668555136="" mat-button="" class="mdc-button mat-mdc-button-base context-action-button mat-mdc-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="251101;track:generic_click,impression"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><mat-icon _ngcontent-ng-c1668555136="" role="img" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="podcasts" fonticon="podcasts"></mat-icon><!----><span class="mdc-button__label"> تولید «خلاصه صوتی» </span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></div><!----></contextual-actions><!----><div _ngcontent-ng-c3177278963="" class="input-area-container ng-star-inserted"><file-drop-indicator _ngcontent-ng-c3177278963="" _nghost-ng-c2120377214="" class="ng-tns-c2120377214-3 ng-star-inserted"><!----></file-drop-indicator><!----><input-area-v2 _ngcontent-ng-c3177278963="" _nghost-ng-c1792219187="" class="ng-tns-c1792219187-2 with-toolbox-drawer ng-star-inserted"><div _ngcontent-ng-c1792219187="" data-node-type="input-area" class="input-area ng-tns-c1792219187-2 with-toolbox-drawer"><!----><!----><!----><div _ngcontent-ng-c1792219187="" xapfileselectordropzone="" class="text-input-field ng-tns-c1792219187-2 with-toolbox-drawer height-expanded-past-single-line"><!----><div _ngcontent-ng-c1792219187="" class="text-input-field_textarea-wrapper ng-tns-c1792219187-2" style="--chat-container-height: 490;"><div _ngcontent-ng-c1792219187="" class="text-input-field-main-area ng-tns-c1792219187-2"><div _ngcontent-ng-c1792219187="" class="text-input-field_textarea-inner ng-tns-c1792219187-2" style="height: 168px;"><!----><!----><rich-textarea _ngcontent-ng-c1792219187="" atmentions="" class="text-input-field_textarea ql-container ql-bubble ng-tns-c1792219187-2 ng-untouched ng-valid ng-star-inserted ng-dirty" _nghost-ng-c1986170171="" enterkeyhint="send" dir="ltr" style="--textarea-max-rows: 7; --chat-container-height: 490px;"><div class="ql-editor textarea new-input-ui FontSetImportant" data-gramm="false" contenteditable="true" role="textbox" aria-multiline="true" aria-label="پیام‌واره‌ای را اینجا وارد کنید" data-placeholder="از Gemini بپرسید" dir="auto" style="unicode-bidi: normal;"><p> /* DJANGO Admin Styles - Modernized with Animations and RTL Support */</p><p><br></p><p>/* متغیرهای پایه */</p><p>:root {</p><p>    --primary: #1abc9c;</p><p>    --primary-hover: #16a085;</p><p>    --secondary: #2c3e50;</p><p>    --accent: #e74c3c;</p><p>    --light: #ecf0f1;</p><p>    --dark: #34495e;</p><p>    --success: #2ecc71;</p><p>    --warning: #f39c12;</p><p>    --danger: #e74c3c;</p><p>    --body-fg: #333;</p><p>    --body-bg: #f5f7fa;</p><p>    --border-radius: 8px;</p><p>    --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);</p><p>    --transition: all 0.3s ease;</p><p>    --hairline-color: #e0e0e0;</p><p>    --border-color: #ddd;</p><p><br></p><p>    --font-family-primary: 'Parastoo', sans-serif;</p><p>    --font-family-monospace: 'Parastoo', monospace;</p><p><br></p><p>    color-scheme: light;</p><p>}</p><p><br></p><p>/* تم تاریک */</p><p>html[data-theme="dark"] {</p><p>    --primary: #667eea;</p><p>    --primary-hover: #5a67d8;</p><p>    --secondary: #4a5568;</p><p>    --accent: #e53e3e;</p><p>    --light: #e2e8f0;</p><p>    --dark: #2d3748;</p><p>    --success: #38a169;</p><p>    --warning: #ed8936;</p><p>    --danger: #e53e3e;</p><p>    --body-fg: #e2e8f0;</p><p>    --body-bg: #212529;</p><p>    --hairline-color: #353535;</p><p>    --border-color: #4a5568;</p><p><br></p><p>    color-scheme: dark;</p><p>}</p><p><br></p><p>/* تنظیمات پیش‌فرض سیستم در حالت تاریک */</p><p>@media (prefers-color-scheme: dark) {</p><p>    :root:not([data-theme="light"]) {</p><p>        --primary: #667eea;</p><p>        --primary-hover: #5a67d8;</p><p>        --secondary: #4a5568;</p><p>        --accent: #e53e3e;</p><p>        --light: #e2e8f0;</p><p>        --dark: #2d3748;</p><p>        --success: #38a169;</p><p>        --warning: #ed8936;</p><p>        --danger: #e53e3e;</p><p>        --body-fg: #e2e8f0;</p><p>        --body-bg: #212529;</p><p>        --hairline-color: #353535;</p><p>        --border-color: #4a5568;</p><p><br></p><p>        color-scheme: dark;</p><p>    }</p><p>}</p><p><br></p><p>/* پایه‌ها */</p><p>html, body {</p><p>    height: 100%;</p><p>    margin: 0;</p><p>    padding: 0;</p><p>    font-family: var(--font-family-primary);</p><p>    color: var(--body-fg);</p><p>    background: var(--body-bg);</p><p>    direction: rtl;</p><p>    text-align: right;</p><p>}</p><p><br></p><p>body {</p><p>    font-size: 0.9rem;</p><p>    line-height: 1.6;</p><p>}</p><p><br></p><p>/* لینک‌ها */</p><p>a:link, a:visited {</p><p>    color: var(--primary);</p><p>    text-decoration: none;</p><p>    transition: var(--transition);</p><p>}</p><p><br></p><p>a:hover, a:focus {</p><p>    color: var(--primary-hover);</p><p>    text-decoration: underline;</p><p>}</p><p><br></p><p>/* سرصفحه‌ها */</p><p>h1, h2, h3, h4, h5 {</p><p>    font-weight: 500;</p><p>}</p><p><br></p><p>h1 { font-size: 1.6rem; margin-bottom: 1.5rem; }</p><p>h2 { font-size: 1.3rem; margin: 1em 0 0.5em 0; }</p><p>h3 { font-size: 1.1rem; color: var(--dark); }</p><p>h4 { font-size: 1rem; color: var(--dark); }</p><p>h5 { font-size: 0.9rem; color: var(--body-fg); }</p><p><br></p><p>/* ساختار صفحه */</p><p>#container {</p><p>    display: flex;</p><p>    flex-direction: column;</p><p>    min-height: 100vh;</p><p>    width: 100%;</p><p>}</p><p><br></p><p>.main {</p><p>    display: flex;</p><p>    flex: 1 0 auto;</p><p>}</p><p><br></p><p>#content {</p><p>    padding: 2rem;</p><p>    flex: 1;</p><p>    background: #fff;</p><p>    border-radius: var(--border-radius);</p><p>    box-shadow: var(--box-shadow);</p><p>    animation: fadeIn 0.5s ease-in-out;</p><p>}</p><p><br></p><p>/* هدر */</p><p>#header {</p><p>    background: var(--secondary);</p><p>    color: var(--light);</p><p>    padding: 1rem 2rem;</p><p>    box-shadow: var(--box-shadow);</p><p>    position: sticky;</p><p>    top: 0;</p><p>    z-index: 1000;</p><p>    display: flex;</p><p>    justify-content: space-between;</p><p>    align-items: center;</p><p>    animation: slideDown 0.5s ease-out;</p><p>}</p><p><br></p><p>#site-name {</p><p>    font-size: 1.8rem;</p><p>    color: var(--primary);</p><p>}</p><p><br></p><p>#user-tools {</p><p>    font-size: 0.9rem;</p><p>    display: flex;</p><p>    gap: 10px;</p><p>    align-items: center;</p><p>}</p><p><br></p><p>#user-tools a, #logout-form button {</p><p>    color: var(--light);</p><p>    padding: 0.5rem 1rem;</p><p>    border-radius: var(--border-radius);</p><p>    transition: var(--transition);</p><p>}</p><p><br></p><p>#user-tools a:hover, #logout-form button:hover {</p><p>    background: rgba(255, 255, 255, 0.1);</p><p>}</p><p><br></p><p>#logout-form { display: inline; }</p><p><br></p><p>#logout-form button {</p><p>    background: none;</p><p>    border: none;</p><p>    cursor: pointer;</p><p>    font: inherit;</p><p>}</p><p><br></p><p>/* نوار مسیر */</p><p>div.breadcrumbs {</p><p>    background: var(--dark);</p><p>    padding: 1rem 2rem;</p><p>    color: var(--light);</p><p>    border-radius: var(--border-radius);</p><p>    margin: 1rem 0;</p><p>    animation: fadeIn 0.5s ease-in-out;</p><p>}</p><p><br></p><p>div.breadcrumbs a {</p><p>    color: var(--primary);</p><p>}</p><p><br></p><p>/* نوار کناری */</p><p>#nav-sidebar {</p><p>    flex: 0 0 275px;</p><p>    background: #fff;</p><p>    border-left: 1px solid var(--hairline-color);</p><p>    padding: 1rem;</p><p>    position: sticky;</p><p>    top: 0;</p><p>    max-height: 100vh;</p><p>    overflow-y: auto;</p><p>    transition: transform 0.3s ease;</p><p>    transform: translateX(276px);</p><p>}</p><p><br></p><p>.main.shifted &gt; #nav-sidebar {</p><p>    transform: translateX(0);</p><p>}</p><p><br></p><p>.toggle-nav-sidebar {</p><p>    background: var(--body-bg);</p><p>    border-left: 1px solid var(--hairline-color);</p><p>    width: 25px;</p><p>    height: 40px;</p><p>    display: flex;</p><p>    align-items: center;</p><p>    justify-content: center;</p><p>    cursor: pointer;</p><p>    color: var(--primary);</p><p>    font-size: 1.5rem;</p><p>    transition: var(--transition);</p><p>}</p><p><br></p><p>.toggle-nav-sidebar:hover {</p><p>    background: var(--darkened-bg);</p><p>}</p><p><br></p><p>.toggle-nav-sidebar::before {</p><p>    content: '\00BB';</p><p>}</p><p><br></p><p>.main.shifted .toggle-nav-sidebar::before {</p><p>    content: '\00AB';</p><p>}</p><p><br></p><p>/* پیام‌ها */</p><p>ul.messagelist {</p><p>    padding: 0;</p><p>    margin: 0 0 1rem 0;</p><p>    list-style: none;</p><p>}</p><p><br></p><p>ul.messagelist li {</p><p>    padding: 1rem;</p><p>    border-radius: var(--border-radius);</p><p>    margin-bottom: 0.5rem;</p><p>    display: flex;</p><p>    align-items: center;</p><p>    gap: 10px;</p><p>    box-shadow: var(--box-shadow);</p><p>    animation: slideIn 0.5s ease-out;</p><p>}</p><p><br></p><p>ul.messagelist li.success { background: rgba(46, 204, 113, 0.1); border-right: 4px solid var(--success); color: var(--success); }</p><p>ul.messagelist li.warning { background: rgba(243, 156, 18, 0.1); border-right: 4px solid var(--warning); color: var(--warning); }</p><p>ul.messagelist li.error { background: rgba(231, 76, 60, 0.1); border-right: 4px solid var(--danger); color: var(--danger); }</p><p><br></p><p>/* دکمه‌ها */</p><p>.button, input[type=submit], input[type=button], .submit-row input, a.button {</p><p>    background: var(--primary);</p><p>    color: #fff;</p><p>    padding: 0.8rem 1.5rem;</p><p>    border: none;</p><p>    border-radius: var(--border-radius);</p><p>    cursor: pointer;</p><p>    transition: var(--transition);</p><p>}</p><p><br></p><p>.button:hover, input[type=submit]:hover, input[type=button]:hover {</p><p>    background: var(--primary-hover);</p><p>    transform: translateY(-2px);</p><p>    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);</p><p>}</p><p><br></p><p>/* جداول */</p><p>table {</p><p>    width: 100%;</p><p>    border-collapse: collapse;</p><p>    background: #fff;</p><p>    border-radius: var(--border-radius);</p><p>    box-shadow: var(--box-shadow);</p><p>}</p><p><br></p><p>th, td {</p><p>    padding: 1rem;</p><p>    border: 1px solid var(--hairline-color);</p><p>    text-align: right;</p><p>}</p><p><br></p><p>thead th {</p><p>    background: var(--secondary);</p><p>    color: var(--light);</p><p>    font-weight: 600;</p><p>}</p><p><br></p><p>/* فرم‌ها */</p><p>input, textarea, select {</p><p>    padding: 0.6rem;</p><p>    border: 1px solid var(--border-color);</p><p>    border-radius: var(--border-radius);</p><p>    font-family: var(--font-family-primary);</p><p>    transition: var(--transition);</p><p>}</p><p><br></p><p>input:focus, textarea:focus, select:focus {</p><p>    border-color: var(--primary);</p><p>    box-shadow: 0 0 5px rgba(26, 188, 156, 0.3);</p><p>}</p><p><br></p><p>/* سوئیچ تم */</p><p>.theme-toggle {</p><p>    background: none;</p><p>    border: none;</p><p>    cursor: pointer;</p><p>    padding: 0.5rem;</p><p>    transition: var(--transition);</p><p>}</p><p><br></p><p>.theme-toggle svg {</p><p>    width: 1.2rem;</p><p>    height: 1.2rem;</p><p>    fill: var(--light);</p><p>}</p><p><br></p><p>.theme-toggle:hover {</p><p>    transform: scale(1.1);</p><p>}</p><p><br></p><p>/* انیمیشن‌ها */</p><p>@keyframes fadeIn {</p><p>    from { opacity: 0; }</p><p>    to { opacity: 1; }</p><p>}</p><p><br></p><p>@keyframes slideDown {</p><p>    from { transform: translateY(-100%); }</p><p>    to { transform: translateY(0); }</p><p>}</p><p><br></p><p>@keyframes slideIn {</p><p>    from { transform: translateX(100%); opacity: 0; }</p><p>    to { transform: translateX(0); opacity: 1; }</p><p>}</p><p><br></p><p>/* رسپانسیو */</p><p>@media (max-width: 767px) {</p><p>    #nav-sidebar, .toggle-nav-sidebar { display: none; }</p><p>    .main &gt; #nav-sidebar + .content { max-width: 100%; }</p><p>    #content { padding: 1rem; }</p><p>    #header { padding: 1rem; flex-direction: column; gap: 10px; }</p><p>}/*!**/</p><p><br></p><p><br></p><p>/*    DJANGO Admin styles*/</p><p>/**!*/</p><p><br></p><p>/*!* VARIABLE DEFINITIONS *!*/</p><p>/*html[data-theme="light"],*/</p><p>/*:root {*/</p><p>/*    --primary: #79aec8;*/</p><p>/*    --secondary: #417690;*/</p><p>/*    --accent: #f5dd5d;*/</p><p>/*    --primary-fg: #fff;*/</p><p><br></p><p>/*    --body-fg: #333;*/</p><p>/*    --body-bg: #fff;*/</p><p>/*    --body-quiet-color: #666;*/</p><p>/*    --body-medium-color: #444;*/</p><p>/*    --body-loud-color: #000;*/</p><p><br></p><p>/*    --header-color: #ffc;*/</p><p>/*    --header-branding-color: var(--accent);*/</p><p>/*    --header-bg: var(--secondary);*/</p><p>/*    --header-link-color: var(--primary-fg);*/</p><p><br></p><p>/*    --breadcrumbs-fg: #c4dce8;*/</p><p>/*    --breadcrumbs-link-fg: var(--body-bg);*/</p><p>/*    --breadcrumbs-bg: #264b5d;*/</p><p><br></p><p>/*    --link-fg: #417893;*/</p><p>/*    --link-hover-color: #036;*/</p><p>/*    --link-selected-fg: var(--secondary);*/</p><p><br></p><p>/*    --hairline-color: #e8e8e8;*/</p><p>/*    --border-color: #ccc;*/</p><p><br></p><p>/*    --error-fg: #ba2121;*/</p><p><br></p><p>/*    --message-success-bg: #dfd;*/</p><p>/*    --message-warning-bg: #ffc;*/</p><p>/*    --message-error-bg: #ffefef;*/</p><p><br></p><p>/*    --darkened-bg: #f8f8f8; !* A bit darker than --body-bg *!*/</p><p>/*    --selected-bg: #e4e4e4; !* E.g. selected table cells *!*/</p><p>/*    --selected-row: #ffc;*/</p><p><br></p><p>/*    --button-fg: #fff;*/</p><p>/*    --button-bg: var(--secondary);*/</p><p>/*    --button-hover-bg: #205067;*/</p><p>/*    --default-button-bg: #205067;*/</p><p>/*    --default-button-hover-bg: var(--secondary);*/</p><p>/*    --close-button-bg: #747474;*/</p><p>/*    --close-button-hover-bg: #333;*/</p><p>/*    --delete-button-bg: #ba2121;*/</p><p>/*    --delete-button-hover-bg: #a41515;*/</p><p><br></p><p>/*    --object-tools-fg: var(--button-fg);*/</p><p>/*    --object-tools-bg: var(--close-button-bg);*/</p><p>/*    --object-tools-hover-bg: var(--close-button-hover-bg);*/</p><p><br></p><p>/*    --font-family-primary:*/</p><p>/*        "Segoe UI",*/</p><p>/*        system-ui,*/</p><p>/*        Roboto,*/</p><p>/*        "Helvetica Neue",*/</p><p>/*        Arial,*/</p><p>/*        sans-serif,*/</p><p>/*        "Apple Color Emoji",*/</p><p>/*        "Segoe UI Emoji",*/</p><p>/*        "Segoe UI Symbol",*/</p><p>/*        "Noto Color Emoji";*/</p><p>/*    --font-family-monospace:*/</p><p>/*        ui-monospace,*/</p><p>/*        Menlo,*/</p><p>/*        Monaco,*/</p><p>/*        "Cascadia Mono",*/</p><p>/*        "Segoe UI Mono",*/</p><p>/*        "Roboto Mono",*/</p><p>/*        "Oxygen Mono",*/</p><p>/*        "Ubuntu Monospace",*/</p><p>/*        "Source Code Pro",*/</p><p>/*        "Fira Mono",*/</p><p>/*        "Droid Sans Mono",*/</p><p>/*        "Courier New",*/</p><p>/*        monospace,*/</p><p>/*        "Apple Color Emoji",*/</p><p>/*        "Segoe UI Emoji",*/</p><p>/*        "Segoe UI Symbol",*/</p><p>/*        "Noto Color Emoji";*/</p><p><br></p><p>/*    color-scheme: light;*/</p><p>/*}*/</p><p><br></p><p>/*html, body {*/</p><p>/*    height: 100%;*/</p><p>/*}*/</p><p><br></p><p>/*body {*/</p><p>/*    margin: 0;*/</p><p>/*    padding: 0;*/</p><p>/*    font-size: 0.875rem;*/</p><p>/*    font-family: var(--font-family-primary);*/</p><p>/*    color: var(--body-fg);*/</p><p>/*    background: var(--body-bg);*/</p><p>/*}*/</p><p><br></p><p>/*!* LINKS *!*/</p><p><br></p><p>/*a:link, a:visited {*/</p><p>/*    color: var(--link-fg);*/</p><p>/*    text-decoration: none;*/</p><p>/*    transition: color 0.15s, background 0.15s;*/</p><p>/*}*/</p><p><br></p><p>/*a:focus, a:hover {*/</p><p>/*    color: var(--link-hover-color);*/</p><p>/*}*/</p><p><br></p><p>/*a:focus {*/</p><p>/*    text-decoration: underline;*/</p><p>/*}*/</p><p><br></p><p>/*a img {*/</p><p>/*    border: none;*/</p><p>/*}*/</p><p><br></p><p>/*a.section:link, a.section:visited {*/</p><p>/*    color: var(--header-link-color);*/</p><p>/*    text-decoration: none;*/</p><p>/*}*/</p><p><br></p><p>/*a.section:focus, a.section:hover {*/</p><p>/*    text-decoration: underline;*/</p><p>/*}*/</p><p><br></p><p>/*!* GLOBAL DEFAULTS *!*/</p><p><br></p><p>/*p, ol, ul, dl {*/</p><p>/*    margin: .2em 0 .8em 0;*/</p><p>/*}*/</p><p><br></p><p>/*p {*/</p><p>/*    padding: 0;*/</p><p>/*    line-height: 140%;*/</p><p>/*}*/</p><p><br></p><p>/*h1,h2,h3,h4,h5 {*/</p><p>/*    font-weight: bold;*/</p><p>/*}*/</p><p><br></p><p>/*h1 {*/</p><p>/*    margin: 0 0 20px;*/</p><p>/*    font-weight: 300;*/</p><p>/*    font-size: 1.25rem;*/</p><p>/*}*/</p><p><br></p><p>/*h2 {*/</p><p>/*    font-size: 1rem;*/</p><p>/*    margin: 1em 0 .5em 0;*/</p><p>/*}*/</p><p><br></p><p>/*h2.subhead {*/</p><p>/*    font-weight: normal;*/</p><p>/*    margin-top: 0;*/</p><p>/*}*/</p><p><br></p><p>/*h3 {*/</p><p>/*    font-size: 0.875rem;*/</p><p>/*    margin: .8em 0 .3em 0;*/</p><p>/*    color: var(--body-medium-color);*/</p><p>/*    font-weight: bold;*/</p><p>/*}*/</p><p><br></p><p>/*h4 {*/</p><p>/*    font-size: 0.75rem;*/</p><p>/*    margin: 1em 0 .8em 0;*/</p><p>/*    padding-bottom: 3px;*/</p><p>/*    color: var(--body-medium-color);*/</p><p>/*}*/</p><p><br></p><p>/*h5 {*/</p><p>/*    font-size: 0.625rem;*/</p><p>/*    margin: 1.5em 0 .5em 0;*/</p><p>/*    color: var(--body-quiet-color);*/</p><p>/*    text-transform: uppercase;*/</p><p>/*    letter-spacing: 1px;*/</p><p>/*}*/</p><p><br></p><p>/*ul &gt; li {*/</p><p>/*    list-style-type: square;*/</p><p>/*    padding: 1px 0;*/</p><p>/*}*/</p><p><br></p><p>/*li ul {*/</p><p>/*    margin-bottom: 0;*/</p><p>/*}*/</p><p><br></p><p>/*li, dt, dd {*/</p><p>/*    font-size: 0.8125rem;*/</p><p>/*    line-height: 1.25rem;*/</p><p>/*}*/</p><p><br></p><p>/*dt {*/</p><p>/*    font-weight: bold;*/</p><p>/*    margin-top: 4px;*/</p><p>/*}*/</p><p><br></p><p>/*dd {*/</p><p>/*    margin-left: 0;*/</p><p>/*}*/</p><p><br></p><p>/*form {*/</p><p>/*    margin: 0;*/</p><p>/*    padding: 0;*/</p><p>/*}*/</p><p><br></p><p>/*fieldset {*/</p><p>/*    margin: 0;*/</p><p>/*    min-width: 0;*/</p><p>/*    padding: 0;*/</p><p>/*    border: none;*/</p><p>/*    border-top: 1px solid var(--hairline-color);*/</p><p>/*}*/</p><p><br></p><p>/*details summary {*/</p><p>/*    cursor: pointer;*/</p><p>/*}*/</p><p><br></p><p>/*blockquote {*/</p><p>/*    font-size: 0.6875rem;*/</p><p>/*    color: #777;*/</p><p>/*    margin-left: 2px;*/</p><p>/*    padding-left: 10px;*/</p><p>/*    border-left: 5px solid #ddd;*/</p><p>/*}*/</p><p><br></p><p>/*code, pre {*/</p><p>/*    font-family: var(--font-family-monospace);*/</p><p>/*    color: var(--body-quiet-color);*/</p><p>/*    font-size: 0.75rem;*/</p><p>/*    overflow-x: auto;*/</p><p>/*}*/</p><p><br></p><p>/*pre.literal-block {*/</p><p>/*    margin: 10px;*/</p><p>/*    background: var(--darkened-bg);*/</p><p>/*    padding: 6px 8px;*/</p><p>/*}*/</p><p><br></p><p>/*code strong {*/</p><p>/*    color: #930;*/</p><p>/*}*/</p><p><br></p><p>/*hr {*/</p><p>/*    clear: both;*/</p><p>/*    color: var(--hairline-color);*/</p><p>/*    background-color: var(--hairline-color);*/</p><p>/*    height: 1px;*/</p><p>/*    border: none;*/</p><p>/*    margin: 0;*/</p><p>/*    padding: 0;*/</p><p>/*    line-height: 1px;*/</p><p>/*}*/</p><p><br></p><p>/*!* TEXT STYLES &amp; MODIFIERS *!*/</p><p><br></p><p>/*.small {*/</p><p>/*    font-size: 0.6875rem;*/</p><p>/*}*/</p><p><br></p><p>/*.mini {*/</p><p>/*    font-size: 0.625rem;*/</p><p>/*}*/</p><p><br></p><p>/*.help, p.help, form p.help, div.help, form div.help, div.help li {*/</p><p>/*    font-size: 0.6875rem;*/</p><p>/*    color: var(--body-quiet-color);*/</p><p>/*}*/</p><p><br></p><p>/*div.help ul {*/</p><p>/*     margin-bottom: 0;*/</p><p>/*}*/</p><p><br></p><p>/*.help-tooltip {*/</p><p>/*    cursor: help;*/</p><p>/*}*/</p><p><br></p><p>/*p img, h1 img, h2 img, h3 img, h4 img, td img {*/</p><p>/*    vertical-align: middle;*/</p><p>/*}*/</p><p><br></p><p>/*.quiet, a.quiet:link, a.quiet:visited {*/</p><p>/*    color: var(--body-quiet-color);*/</p><p>/*    font-weight: normal;*/</p><p>/*}*/</p><p><br></p><p>/*.clear {*/</p><p>/*    clear: both;*/</p><p>/*}*/</p><p><br></p><p>/*.nowrap {*/</p><p>/*    white-space: nowrap;*/</p><p>/*}*/</p><p><br></p><p>/*.hidden {*/</p><p>/*    display: none !important;*/</p><p>/*}*/</p><p><br></p><p>/*!* TABLES *!*/</p><p><br></p><p>/*table {*/</p><p>/*    border-collapse: collapse;*/</p><p>/*    border-color: var(--border-color);*/</p><p>/*}*/</p><p><br></p><p>/*td, th {*/</p><p>/*    font-size: 0.8125rem;*/</p><p>/*    line-height: 1rem;*/</p><p>/*    border-bottom: 1px solid var(--hairline-color);*/</p><p>/*    vertical-align: top;*/</p><p>/*    padding: 8px;*/</p><p>/*}*/</p><p><br></p><p>/*th {*/</p><p>/*    font-weight: 500;*/</p><p>/*    text-align: left;*/</p><p>/*}*/</p><p><br></p><p>/*thead th,*/</p><p>/*tfoot td {*/</p><p>/*    color: var(--body-quiet-color);*/</p><p>/*    padding: 5px 10px;*/</p><p>/*    font-size: 0.6875rem;*/</p><p>/*    background: var(--body-bg);*/</p><p>/*    border: none;*/</p><p>/*    border-top: 1px solid var(--hairline-color);*/</p><p>/*    border-bottom: 1px solid var(--hairline-color);*/</p><p>/*}*/</p><p><br></p><p>/*tfoot td {*/</p><p>/*    border-bottom: none;*/</p><p>/*    border-top: 1px solid var(--hairline-color);*/</p><p>/*}*/</p><p><br></p><p>/*thead th.required {*/</p><p>/*    font-weight: bold;*/</p><p>/*}*/</p><p><br></p><p>/*tr.alt {*/</p><p>/*    background: var(--darkened-bg);*/</p><p>/*}*/</p><p><br></p><p>/*tr:nth-child(odd), .row-form-errors {*/</p><p>/*    background: var(--body-bg);*/</p><p>/*}*/</p><p><br></p><p>/*tr:nth-child(even),*/</p><p>/*tr:nth-child(even) .errorlist,*/</p><p>/*tr:nth-child(odd) + .row-form-errors,*/</p><p>/*tr:nth-child(odd) + .row-form-errors .errorlist {*/</p><p>/*    background: var(--darkened-bg);*/</p><p>/*}*/</p><p><br></p><p>/*!* SORTABLE TABLES *!*/</p><p><br></p><p>/*thead th {*/</p><p>/*    padding: 5px 10px;*/</p><p>/*    line-height: normal;*/</p><p>/*    text-transform: uppercase;*/</p><p>/*    background: var(--darkened-bg);*/</p><p>/*}*/</p><p><br></p><p>/*thead th a:link, thead th a:visited {*/</p><p>/*    color: var(--body-quiet-color);*/</p><p>/*}*/</p><p><br></p><p>/*thead th.sorted {*/</p><p>/*    background: var(--selected-bg);*/</p><p>/*}*/</p><p><br></p><p>/*thead th.sorted .text {*/</p><p>/*    padding-right: 42px;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th .text span {*/</p><p>/*    padding: 8px 10px;*/</p><p>/*    display: block;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th .text a {*/</p><p>/*    display: block;*/</p><p>/*    cursor: pointer;*/</p><p>/*    padding: 8px 10px;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th .text a:focus, table thead th .text a:hover {*/</p><p>/*    background: var(--selected-bg);*/</p><p>/*}*/</p><p><br></p><p>/*thead th.sorted a.sortremove {*/</p><p>/*    visibility: hidden;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted:hover a.sortremove {*/</p><p>/*    visibility: visible;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortoptions {*/</p><p>/*    display: block;*/</p><p>/*    padding: 9px 5px 0 5px;*/</p><p>/*    float: right;*/</p><p>/*    text-align: right;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortpriority {*/</p><p>/*    font-size: .8em;*/</p><p>/*    min-width: 12px;*/</p><p>/*    text-align: center;*/</p><p>/*    vertical-align: 3px;*/</p><p>/*    margin-left: 2px;*/</p><p>/*    margin-right: 2px;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortoptions a {*/</p><p>/*    position: relative;*/</p><p>/*    width: 14px;*/</p><p>/*    height: 14px;*/</p><p>/*    display: inline-block;*/</p><p>/*    background: url(../img/sorting-icons.svg) 0 0 no-repeat;*/</p><p>/*    background-size: 14px auto;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortoptions a.sortremove {*/</p><p>/*    background-position: 0 0;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortoptions a.sortremove:after {*/</p><p>/*    content: '\\';*/</p><p>/*    position: absolute;*/</p><p>/*    top: -6px;*/</p><p>/*    left: 3px;*/</p><p>/*    font-weight: 200;*/</p><p>/*    font-size: 1.125rem;*/</p><p>/*    color: var(--body-quiet-color);*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortoptions a.sortremove:focus:after,*/</p><p>/*table thead th.sorted .sortoptions a.sortremove:hover:after {*/</p><p>/*    color: var(--link-fg);*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortoptions a.sortremove:focus,*/</p><p>/*table thead th.sorted .sortoptions a.sortremove:hover {*/</p><p>/*    background-position: 0 -14px;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortoptions a.ascending {*/</p><p>/*    background-position: 0 -28px;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortoptions a.ascending:focus,*/</p><p>/*table thead th.sorted .sortoptions a.ascending:hover {*/</p><p>/*    background-position: 0 -42px;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortoptions a.descending {*/</p><p>/*    top: 1px;*/</p><p>/*    background-position: 0 -56px;*/</p><p>/*}*/</p><p><br></p><p>/*table thead th.sorted .sortoptions a.descending:focus,*/</p><p>/*table thead th.sorted .sortoptions a.descending:hover {*/</p><p>/*    background-position: 0 -70px;*/</p><p>/*}*/</p><p><br></p><p>/*!* FORM DEFAULTS *!*/</p><p><br></p><p>/*input, textarea, select, .form-row p, form .button {*/</p><p>/*    margin: 2px 0;*/</p><p>/*    padding: 2px 3px;*/</p><p>/*    vertical-align: middle;*/</p><p>/*    font-family: var(--font-family-primary);*/</p><p>/*    font-weight: normal;*/</p><p>/*    font-size: 0.8125rem;*/</p><p>/*}*/</p><p>/*.form-row div.help {*/</p><p>/*    padding: 2px 3px;*/</p><p>/*}*/</p><p><br></p><p>/*textarea {*/</p><p>/*    vertical-align: top;*/</p><p>/*}*/</p><p><br></p><p>/*!**/</p><p>/*Minifiers remove the default (text) "type" attribute from "input" HTML tags.*/</p><p>/*Add input:not([type]) to make the CSS stylesheet work the same.*/</p><p>/**!*/</p><p>/*input:not([type]), input[type=text], input[type=password], input[type=email],*/</p><p>/*input[type=url], input[type=number], input[type=tel], textarea, select,*/</p><p>/*.vTextField {*/</p><p>/*    border: 1px solid var(--border-color);*/</p><p>/*    border-radius: 4px;*/</p><p>/*    padding: 5px 6px;*/</p><p>/*    margin-top: 0;*/</p><p>/*    color: var(--body-fg);*/</p><p>/*    background-color: var(--body-bg);*/</p><p>/*}*/</p><p><br></p><p>/*!**/</p><p>/*Minifiers remove the default (text) "type" attribute from "input" HTML tags.*/</p><p>/*Add input:not([type]) to make the CSS stylesheet work the same.*/</p><p>/**!*/</p><p>/*input:not([type]):focus, input[type=text]:focus, input[type=password]:focus,*/</p><p>/*input[type=email]:focus, input[type=url]:focus, input[type=number]:focus,*/</p><p>/*input[type=tel]:focus, textarea:focus, select:focus, .vTextField:focus {*/</p><p>/*    border-color: var(--body-quiet-color);*/</p><p>/*}*/</p><p><br></p><p>/*select {*/</p><p>/*    height: 1.875rem;*/</p><p>/*}*/</p><p><br></p><p>/*select[multiple] {*/</p><p>/*    !* Allow HTML size attribute to override the height in the rule above. *!*/</p><p>/*    height: auto;*/</p><p>/*    min-height: 150px;*/</p><p>/*}*/</p><p><br></p><p>/*!* FORM BUTTONS *!*/</p><p><br></p><p>/*.button, input[type=submit], input[type=button], .submit-row input, a.button {*/</p><p>/*    background: var(--button-bg);*/</p><p>/*    padding: 10px 15px;*/</p><p>/*    border: none;*/</p><p>/*    border-radius: 4px;*/</p><p>/*    color: var(--button-fg);*/</p><p>/*    cursor: pointer;*/</p><p>/*    transition: background 0.15s;*/</p><p>/*}*/</p><p><br></p><p>/*a.button {*/</p><p>/*    padding: 4px 5px;*/</p><p>/*}*/</p><p><br></p><p>/*.button:active, input[type=submit]:active, input[type=button]:active,*/</p><p>/*.button:focus, input[type=submit]:focus, input[type=button]:focus,*/</p><p>/*.button:hover, input[type=submit]:hover, input[type=button]:hover {*/</p><p>/*    background: var(--button-hover-bg);*/</p><p>/*}*/</p><p><br></p><p>/*.button[disabled], input[type=submit][disabled], input[type=button][disabled] {*/</p><p>/*    opacity: 0.4;*/</p><p>/*}*/</p><p><br></p><p>/*.button.default, input[type=submit].default, .submit-row input.default {*/</p><p>/*    border: none;*/</p><p>/*    font-weight: 400;*/</p><p>/*    background: var(--default-button-bg);*/</p><p>/*}*/</p><p><br></p><p>/*.button.default:active, input[type=submit].default:active,*/</p><p>/*.button.default:focus, input[type=submit].default:focus,*/</p><p>/*.button.default:hover, input[type=submit].default:hover {*/</p><p>/*    background: var(--default-button-hover-bg);*/</p><p>/*}*/</p><p><br></p><p>/*.button[disabled].default,*/</p><p>/*input[type=submit][disabled].default,*/</p><p>/*input[type=button][disabled].default {*/</p><p>/*    opacity: 0.4;*/</p><p>/*}*/</p><p><br></p><p><br></p><p>/*!* MODULES *!*/</p><p><br></p><p>/*.module {*/</p><p>/*    border: none;*/</p><p>/*    margin-bottom: 30px;*/</p><p>/*    background: var(--body-bg);*/</p><p>/*}*/</p><p><br></p><p>/*.module p, .module ul, .module h3, .module h4, .module dl, .module pre {*/</p><p>/*    padding-left: 10px;*/</p><p>/*    padding-right: 10px;*/</p><p>/*}*/</p><p><br></p><p>/*.module blockquote {*/</p><p>/*    margin-left: 12px;*/</p><p>/*}*/</p><p><br></p><p>/*.module ul, .module ol {*/</p><p>/*    margin-left: 1.5em;*/</p><p>/*}*/</p><p><br></p><p>/*.module h3 {*/</p><p>/*    margin-top: .6em;*/</p><p>/*}*/</p><p><br></p><p>/*.module h2, .module caption, .inline-group h2 {*/</p><p>/*    margin: 0;*/</p><p>/*    padding: 8px;*/</p><p>/*    font-weight: 400;*/</p><p>/*    font-size: 0.8125rem;*/</p><p>/*    text-align: left;*/</p><p>/*    background: var(--header-bg);*/</p><p>/*    color: var(--header-link-color);*/</p><p>/*}*/</p><p><br></p><p>/*.module caption,*/</p><p>/*.inline-group h2 {*/</p><p>/*    font-size: 0.75rem;*/</p><p>/*    letter-spacing: 0.5px;*/</p><p>/*    text-transform: uppercase;*/</p><p>/*}*/</p><p><br></p><p>/*.module table {*/</p><p>/*    border-collapse: collapse;*/</p><p>/*}*/</p><p><br></p><p>/*!* MESSAGES &amp; ERRORS *!*/</p><p><br></p><p>/*ul.messagelist {*/</p><p>/*    padding: 0;*/</p><p>/*    margin: 0;*/</p><p>/*}*/</p><p><br></p><p>/*ul.messagelist li {*/</p><p>/*    display: block;*/</p><p>/*    font-weight: 400;*/</p><p>/*    font-size: 0.8125rem;*/</p><p>/*    padding: 10px 10px 10px 65px;*/</p><p>/*    margin: 0 0 10px 0;*/</p><p>/*    background: var(--message-success-bg) url(../img/icon-yes.svg) 40px 12px no-repeat;*/</p><p>/*    background-size: 16px auto;*/</p><p>/*    color: var(--body-fg);*/</p><p>/*    word-break: break-word;*/</p><p>/*}*/</p><p><br></p><p>/*ul.messagelist li.warning {*/</p><p>/*    background: var(--message-warning-bg) url(../img/icon-alert.svg) 40px 14px no-repeat;*/</p><p>/*    background-size: 14px auto;*/</p><p>/*}*/</p><p><br></p><p>/*ul.messagelist li.error {*/</p><p>/*    background: var(--message-error-bg) url(../img/icon-no.svg) 40px 12px no-repeat;*/</p><p>/*    background-size: 16px auto;*/</p><p>/*}*/</p><p><br></p><p>/*.errornote {*/</p><p>/*    font-size: 0.875rem;*/</p><p>/*    font-weight: 700;*/</p><p>/*    display: block;*/</p><p>/*    padding: 10px 12px;*/</p><p>/*    margin: 0 0 10px 0;*/</p><p>/*    color: var(--error-fg);*/</p><p>/*    border: 1px solid var(--error-fg);*/</p><p>/*    border-radius: 4px;*/</p><p>/*    background-color: var(--body-bg);*/</p><p>/*    background-position: 5px 12px;*/</p><p>/*    overflow-wrap: break-word;*/</p><p>/*}*/</p><p><br></p><p>/*ul.errorlist {*/</p><p>/*    margin: 0 0 4px;*/</p><p>/*    padding: 0;*/</p><p>/*    color: var(--error-fg);*/</p><p>/*    background: var(--body-bg);*/</p><p>/*}*/</p><p><br></p><p>/*ul.errorlist li {*/</p><p>/*    font-size: 0.8125rem;*/</p><p>/*    display: block;*/</p><p>/*    margin-bottom: 4px;*/</p><p>/*    overflow-wrap: break-word;*/</p><p>/*}*/</p><p><br></p><p>/*ul.errorlist li:first-child {*/</p><p>/*    margin-top: 0;*/</p><p>/*}*/</p><p><br></p><p>/*ul.errorlist li a {*/</p><p>/*    color: inherit;*/</p><p>/*    text-decoration: underline;*/</p><p>/*}*/</p><p><br></p><p>/*td ul.errorlist {*/</p><p>/*    margin: 0;*/</p><p>/*    padding: 0;*/</p><p>/*}*/</p><p><br></p><p>/*td ul.errorlist li {*/</p><p>/*    margin: 0;*/</p><p>/*}*/</p><p><br></p><p>/*.form-row.errors {*/</p><p>/*    margin: 0;*/</p><p>/*    border: none;*/</p><p>/*    border-bottom: 1px solid var(--hairline-color);*/</p><p>/*    background: none;*/</p><p>/*}*/</p><p><br></p><p>/*.form-row.errors ul.errorlist li {*/</p><p>/*    padding-left: 0;*/</p><p>/*}*/</p><p><br></p><p>/*.errors input, .errors select, .errors textarea,*/</p><p>/*td ul.errorlist + input, td ul.errorlist + select, td ul.errorlist + textarea {*/</p><p>/*    border: 1px solid var(--error-fg);*/</p><p>/*}*/</p><p><br></p><p>/*.description {*/</p><p>/*    font-size: 0.75rem;*/</p><p>/*    padding: 5px 0 0 12px;*/</p><p>/*}*/</p><p><br></p><p>/*!* BREADCRUMBS *!*/</p><p><br></p><p>/*div.breadcrumbs {*/</p><p>/*    background: var(--breadcrumbs-bg);*/</p><p>/*    padding: 10px 40px;*/</p><p>/*    border: none;*/</p><p>/*    color: var(--breadcrumbs-fg);*/</p><p>/*    text-align: left;*/</p><p>/*}*/</p><p><br></p><p>/*div.breadcrumbs a {*/</p><p>/*    color: var(--breadcrumbs-link-fg);*/</p><p>/*}*/</p><p><br></p><p>/*div.breadcrumbs a:focus, div.breadcrumbs a:hover {*/</p><p>/*    color: var(--breadcrumbs-fg);*/</p><p>/*}*/</p><p><br></p><p>/*!* ACTION ICONS *!*/</p><p><br></p><p>/*.viewlink, .inlineviewlink {*/</p><p>/*    padding-left: 16px;*/</p><p>/*    background: url(../img/icon-viewlink.svg) 0 1px no-repeat;*/</p><p>/*}*/</p><p><br></p><p>/*.hidelink {*/</p><p>/*    padding-left: 16px;*/</p><p>/*    background: url(../img/icon-hidelink.svg) 0 1px no-repeat;*/</p><p>/*}*/</p><p><br></p><p>/*.addlink {*/</p><p>/*    padding-left: 16px;*/</p><p>/*    background: url(../img/icon-addlink.svg) 0 1px no-repeat;*/</p><p>/*}*/</p><p><br></p><p>/*.changelink, .inlinechangelink {*/</p><p>/*    padding-left: 16px;*/</p><p>/*    background: url(../img/icon-changelink.svg) 0 1px no-repeat;*/</p><p>/*}*/</p><p><br></p><p>/*.deletelink {*/</p><p>/*    padding-left: 16px;*/</p><p>/*    background: url(../img/icon-deletelink.svg) 0 1px no-repeat;*/</p><p>/*}*/</p><p><br></p><p>/*a.deletelink:link, a.deletelink:visited {*/</p><p>/*    color: #CC3434; !* XXX Probably unused? *!*/</p><p>/*}*/</p><p><br></p><p>/*a.deletelink:focus, a.deletelink:hover {*/</p><p>/*    color: #993333; !* XXX Probably unused? *!*/</p><p>/*    text-decoration: none;*/</p><p>/*}*/</p><p><br></p><p>/*!* OBJECT TOOLS *!*/</p><p><br></p><p>/*.object-tools {*/</p><p>/*    font-size: 0.625rem;*/</p><p>/*    font-weight: bold;*/</p><p>/*    padding-left: 0;*/</p><p>/*    float: right;*/</p><p>/*    position: relative;*/</p><p>/*    margin-top: -48px;*/</p><p>/*}*/</p><p><br></p><p>/*.object-tools li {*/</p><p>/*    display: block;*/</p><p>/*    float: left;*/</p><p>/*    margin-left: 5px;*/</p><p>/*    height: 1rem;*/</p><p>/*}*/</p><p><br></p><p>/*.object-tools a {*/</p><p>/*    border-radius: 15px;*/</p><p>/*}*/</p><p><br></p><p>/*.object-tools a:link, .object-tools a:visited {*/</p><p>/*    display: block;*/</p><p>/*    float: left;*/</p><p>/*    padding: 3px 12px;*/</p><p>/*    background: var(--object-tools-bg);*/</p><p>/*    color: var(--object-tools-fg);*/</p><p>/*    font-weight: 400;*/</p><p>/*    font-size: 0.6875rem;*/</p><p>/*    text-transform: uppercase;*/</p><p>/*    letter-spacing: 0.5px;*/</p><p>/*}*/</p><p><br></p><p>/*.object-tools a:focus, .object-tools a:hover {*/</p><p>/*    background-color: var(--object-tools-hover-bg);*/</p><p>/*}*/</p><p><br></p><p>/*.object-tools a:focus{*/</p><p>/*    text-decoration: none;*/</p><p>/*}*/</p><p><br></p><p>/*.object-tools a.viewsitelink, .object-tools a.addlink {*/</p><p>/*    background-repeat: no-repeat;*/</p><p>/*    background-position: right 7px center;*/</p><p>/*    padding-right: 26px;*/</p><p>/*}*/</p><p><br></p><p>/*.object-tools a.viewsitelink {*/</p><p>/*    background-image: url(../img/tooltag-arrowright.svg);*/</p><p>/*}*/</p><p><br></p><p>/*.object-tools a.addlink {*/</p><p>/*    background-image: url(../img/tooltag-add.svg);*/</p><p>/*}*/</p><p><br></p><p>/*!* OBJECT HISTORY *!*/</p><p><br></p><p>/*#change-history table {*/</p><p>/*    width: 100%;*/</p><p>/*}*/</p><p><br></p><p>/*#change-history table tbody th {*/</p><p>/*    width: 16em;*/</p><p>/*}*/</p><p><br></p><p>/*#change-history .paginator {*/</p><p>/*    color: var(--body-quiet-color);*/</p><p>/*    border-bottom: 1px solid var(--hairline-color);*/</p><p>/*    background: var(--body-bg);*/</p><p>/*    overflow: hidden;*/</p><p>/*}*/</p><p><br></p><p>/*!* PAGE STRUCTURE *!*/</p><p><br></p><p>/*#container {*/</p><p>/*    position: relative;*/</p><p>/*    width: 100%;*/</p><p>/*    min-width: 980px;*/</p><p>/*    padding: 0;*/</p><p>/*    display: flex;*/</p><p>/*    flex-direction: column;*/</p><p>/*    height: 100%;*/</p><p>/*}*/</p><p><br></p><p>/*#container &gt; .main {*/</p><p>/*    display: flex;*/</p><p>/*    flex: 1 0 auto;*/</p><p>/*}*/</p><p><br></p><p>/*.main &gt; .content {*/</p><p>/*    flex:  1 0;*/</p><p>/*    max-width: 100%;*/</p><p>/*}*/</p><p><br></p><p>/*.skip-to-content-link {*/</p><p>/*    position: absolute;*/</p><p>/*    top: -999px;*/</p><p>/*    margin: 5px;*/</p><p>/*    padding: 5px;*/</p><p>/*    background: var(--body-bg);*/</p><p>/*    z-index: 1;*/</p><p>/*}*/</p><p><br></p><p>/*.skip-to-content-link:focus {*/</p><p>/*    left: 0px;*/</p><p>/*    top: 0px;*/</p><p>/*}*/</p><p><br></p><p>/*#content {*/</p><p>/*    padding: 20px 40px;*/</p><p>/*}*/</p><p><br></p><p>/*.dashboard #content {*/</p><p>/*    width: 600px;*/</p><p>/*}*/</p><p><br></p><p>/*#content-main {*/</p><p>/*    float: left;*/</p><p>/*    width: 100%;*/</p><p>/*}*/</p><p><br></p><p>/*#content-related {*/</p><p>/*    float: right;*/</p><p>/*    width: 260px;*/</p><p>/*    position: relative;*/</p><p>/*    margin-right: -300px;*/</p><p>/*}*/</p><p><br></p><p>/*@media (forced-colors: active) {*/</p><p>/*  #content-related {*/</p><p>/*      border: 1px solid;*/</p><p>/*  }*/</p><p>/*}*/</p><p><br></p><p>/*!* COLUMN TYPES *!*/</p><p><br></p><p>/*.colMS {*/</p><p>/*    margin-right: 300px;*/</p><p>/*}*/</p><p><br></p><p>/*.colSM {*/</p><p>/*    margin-left: 300px;*/</p><p>/*}*/</p><p><br></p><p>/*.colSM #content-related {*/</p><p>/*    float: left;*/</p><p>/*    margin-right: 0;*/</p><p>/*    margin-left: -300px;*/</p><p>/*}*/</p><p><br></p><p>/*.colSM #content-main {*/</p><p>/*    float: right;*/</p><p>/*}*/</p><p><br></p><p>/*.popup .colM {*/</p><p>/*    width: auto;*/</p><p>/*}*/</p><p><br></p><p>/*!* HEADER *!*/</p><p><br></p><p>/*#header {*/</p><p>/*    width: auto;*/</p><p>/*    height: auto;*/</p><p>/*    display: flex;*/</p><p>/*    justify-content: space-between;*/</p><p>/*    align-items: center;*/</p><p>/*    padding: 10px 40px;*/</p><p>/*    background: var(--header-bg);*/</p><p>/*    color: var(--header-color);*/</p><p>/*}*/</p><p><br></p><p>/*#header a:link, #header a:visited, #logout-form button {*/</p><p>/*    color: var(--header-link-color);*/</p><p>/*}*/</p><p><br></p><p>/*#header a:focus , #header a:hover {*/</p><p>/*    text-decoration: underline;*/</p><p>/*}*/</p><p><br></p><p>/*@media (forced-colors: active) {*/</p><p>/*  #header {*/</p><p>/*      border-bottom: 1px solid;*/</p><p>/*  }*/</p><p>/*}*/</p><p><br></p><p>/*#branding {*/</p><p>/*    display: flex;*/</p><p>/*}*/</p><p><br></p><p>/*#site-name {*/</p><p>/*    padding: 0;*/</p><p>/*    margin: 0;*/</p><p>/*    margin-inline-end: 20px;*/</p><p>/*    font-weight: 300;*/</p><p>/*    font-size: 1.5rem;*/</p><p>/*    color: var(--header-branding-color);*/</p><p>/*}*/</p><p><br></p><p>/*#site-name a:link, #site-name a:visited {*/</p><p>/*    color: var(--accent);*/</p><p>/*}*/</p><p><br></p><p>/*#branding h2 {*/</p><p>/*    padding: 0 10px;*/</p><p>/*    font-size: 0.875rem;*/</p><p>/*    margin: -8px 0 8px 0;*/</p><p>/*    font-weight: normal;*/</p><p>/*    color: var(--header-color);*/</p><p>/*}*/</p><p><br></p><p>/*#branding a:hover {*/</p><p>/*    text-decoration: none;*/</p><p>/*}*/</p><p><br></p><p>/*#logout-form {*/</p><p>/*    display: inline;*/</p><p>/*}*/</p><p><br></p><p>/*#logout-form button {*/</p><p>/*    background: none;*/</p><p>/*    border: 0;*/</p><p>/*    cursor: pointer;*/</p><p>/*    font-family: var(--font-family-primary);*/</p><p>/*}*/</p><p><br></p><p>/*#user-tools {*/</p><p>/*    float: right;*/</p><p>/*    margin: 0 0 0 20px;*/</p><p>/*    text-align: right;*/</p><p>/*}*/</p><p><br></p><p>/*#user-tools, #logout-form button{*/</p><p>/*    padding: 0;*/</p><p>/*    font-weight: 300;*/</p><p>/*    font-size: 0.6875rem;*/</p><p>/*    letter-spacing: 0.5px;*/</p><p>/*    text-transform: uppercase;*/</p><p>/*}*/</p><p><br></p><p>/*#user-tools a, #logout-form button {*/</p><p>/*    border-bottom: 1px solid rgba(255, 255, 255, 0.25);*/</p><p>/*}*/</p><p><br></p><p>/*#user-tools a:focus, #user-tools a:hover,*/</p><p>/*#logout-form button:active, #logout-form button:hover {*/</p><p>/*    text-decoration: none;*/</p><p>/*    border-bottom: 0;*/</p><p>/*}*/</p><p><br></p><p>/*#logout-form button:active, #logout-form button:hover {*/</p><p>/*    margin-bottom: 1px;*/</p><p>/*}*/</p><p><br></p><p>/*!* SIDEBAR *!*/</p><p><br></p><p>/*#content-related {*/</p><p>/*    background: var(--darkened-bg);*/</p><p>/*}*/</p><p><br></p><p>/*#content-related .module {*/</p><p>/*    background: none;*/</p><p>/*}*/</p><p><br></p><p>/*#content-related h3 {*/</p><p>/*    color: var(--body-quiet-color);*/</p><p>/*    padding: 0 16px;*/</p><p>/*    margin: 0 0 16px;*/</p><p>/*}*/</p><p><br></p><p>/*#content-related h4 {*/</p><p>/*    font-size: 0.8125rem;*/</p><p>/*}*/</p><p><br></p><p>/*#content-related p {*/</p><p>/*    padding-left: 16px;*/</p><p>/*    padding-right: 16px;*/</p><p>/*}*/</p><p><br></p><p>/*#content-related .actionlist {*/</p><p>/*    padding: 0;*/</p><p>/*    margin: 16px;*/</p><p>/*}*/</p><p><br></p><p>/*#content-related .actionlist li {*/</p><p>/*    line-height: 1.2;*/</p><p>/*    margin-bottom: 10px;*/</p><p>/*    padding-left: 18px;*/</p><p>/*}*/</p><p><br></p><p>/*#content-related .module h2 {*/</p><p>/*    background: none;*/</p><p>/*    padding: 16px;*/</p><p>/*    margin-bottom: 16px;*/</p><p>/*    border-bottom: 1px solid var(--hairline-color);*/</p><p>/*    font-size: 1.125rem;*/</p><p>/*    color: var(--body-fg);*/</p><p>/*}*/</p><p><br></p><p>/*.delete-confirmation form input[type="submit"] {*/</p><p>/*    background: var(--delete-button-bg);*/</p><p>/*    border-radius: 4px;*/</p><p>/*    padding: 10px 15px;*/</p><p>/*    color: var(--button-fg);*/</p><p>/*}*/</p><p><br></p><p>/*.delete-confirmation form input[type="submit"]:active,*/</p><p>/*.delete-confirmation form input[type="submit"]:focus,*/</p><p>/*.delete-confirmation form input[type="submit"]:hover {*/</p><p>/*    background: var(--delete-button-hover-bg);*/</p><p>/*}*/</p><p><br></p><p>/*.delete-confirmation form .cancel-link {*/</p><p>/*    display: inline-block;*/</p><p>/*    vertical-align: middle;*/</p><p>/*    height: 0.9375rem;*/</p><p>/*    line-height: 0.9375rem;*/</p><p>/*    border-radius: 4px;*/</p><p>/*    padding: 10px 15px;*/</p><p>/*    color: var(--button-fg);*/</p><p>/*    background: var(--close-button-bg);*/</p><p>/*    margin: 0 0 0 10px;*/</p><p>/*}*/</p><p><br></p><p>/*.delete-confirmation form .cancel-link:active,*/</p><p>/*.delete-confirmation form .cancel-link:focus,*/</p><p>/*.delete-confirmation form .cancel-link:hover {*/</p><p>/*    background: var(--close-button-hover-bg);*/</p><p>/*}*/</p><p><br></p><p>/*!* POPUP *!*/</p><p>/*.popup #content {*/</p><p>/*    padding: 20px;*/</p><p>/*}*/</p><p><br></p><p>/*.popup #container {*/</p><p>/*    min-width: 0;*/</p><p>/*}*/</p><p><br></p><p>/*.popup #header {*/</p><p>/*    paddi</p></div><div class="ql-clipboard" contenteditable="true" tabindex="-1"></div></rich-textarea><at-mentions-menu _nghost-ng-c3114308451="" class="ng-tns-c1792219187-2 ng-star-inserted"><mat-menu _ngcontent-ng-c3114308451="" class=""><!----></mat-menu></at-mentions-menu><!----><!----><!----><!----></div></div></div><div _ngcontent-ng-c1792219187="" class="leading-actions-wrapper ng-tns-c1792219187-2 ng-star-inserted"><div _ngcontent-ng-c1792219187="" class="uploader-button-container ng-tns-c1792219187-2 ng-star-inserted"><uploader-signed-out-tooltip _ngcontent-ng-c1792219187="" class="ng-tns-c1792219187-2" _nghost-ng-c3450268936=""><!----></uploader-signed-out-tooltip><uploader _ngcontent-ng-c1792219187="" maticonprefix="" class="upload-button ng-tns-c1792219187-2" _nghost-ng-c477869883=""><div _ngcontent-ng-c477869883="" cdk-overlay-origin="" class="file-uploader ng-star-inserted"><div _ngcontent-ng-c477869883="" class="mat-mdc-tooltip-trigger mat-mdc-tooltip-disabled"><!----><button _ngcontent-ng-c477869883="" mat-icon-button="" color="primary" aria-label="باز کردن منو بارگذاری فایل" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger upload-card-button open mat-primary ng-star-inserted" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" mat-ripple-loader-disabled="" jslog="188890;track:generic_click,impression,hover" aria-describedby="cdk-describedby-message-ng-1-10" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c477869883="" role="img" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="add_2" fonticon="add_2"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span><span class="mat-ripple mat-mdc-button-ripple"></span></button><!----><!----><!----></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><!----><!----><!----><!----><button _ngcontent-ng-c477869883="" tabindex="-1" xapfileselectortrigger="" aria-hidden="true" data-test-id="hidden-local-image-upload-button" class="hidden-local-upload-button"></button><button _ngcontent-ng-c477869883="" tabindex="-2" xapfileselectortrigger="" aria-hidden="true" data-test-id="hidden-local-file-upload-button" class="hidden-local-file-upload-button"></button></uploader></div><!----><!----><!----><toolbox-drawer _ngcontent-ng-c1792219187="" _nghost-ng-c2364026885="" class="ng-tns-c2364026885-43 ng-tns-c1792219187-2 ng-star-inserted" style=""><div _ngcontent-ng-c2364026885="" class="toolbox-drawer-container ng-tns-c2364026885-43 ng-trigger ng-trigger-toolboxDrawerEnter" jslog="251251;track:impression"><toolbox-drawer-item _ngcontent-ng-c2364026885="" class="mat-mdc-tooltip-trigger toolbox-drawer-item-button ng-tns-c2364026885-43 mat-mdc-tooltip-disabled ng-star-inserted" _nghost-ng-c4259962243="" hidden="" style=""><!----><button _ngcontent-ng-c4259962243="" matripple="" class="mat-ripple mat-mdc-tooltip-trigger toolbox-drawer-item-button disabled ng-star-inserted" disabled="" jslog="251250;track:generic_click" aria-describedby="cdk-describedby-message-ng-1-21" cdk-describedby-host="ng-1"><mat-icon _ngcontent-ng-c4259962243="" role="img" matlistitemicon="" class="mat-icon notranslate mat-mdc-list-item-icon menu-icon gds-icon-l google-symbols mat-ligature-font mat-icon-no-color mdc-list-item__start ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="travel_explore" fonticon="travel_explore"></mat-icon><!----><div _ngcontent-ng-c4259962243="" class="toolbox-drawer-button-label label"> Deep Research </div></button><!----><!----></toolbox-drawer-item><!----><toolbox-drawer-item _ngcontent-ng-c2364026885="" class="mat-mdc-tooltip-trigger toolbox-drawer-item-button ng-tns-c2364026885-43 mat-mdc-tooltip-disabled ng-star-inserted" _nghost-ng-c4259962243="" style=""><!----><button _ngcontent-ng-c4259962243="" matripple="" class="mat-ripple mat-mdc-tooltip-trigger toolbox-drawer-item-button ng-star-inserted" jslog="251249;track:generic_click" aria-describedby="cdk-describedby-message-ng-1-22" cdk-describedby-host="ng-1"><mat-icon _ngcontent-ng-c4259962243="" role="img" matlistitemicon="" class="mat-icon notranslate mat-mdc-list-item-icon menu-icon gds-icon-l google-symbols mat-ligature-font mat-icon-no-color mdc-list-item__start ng-star-inserted" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="edit_note" fonticon="edit_note"></mat-icon><!----><div _ngcontent-ng-c4259962243="" class="toolbox-drawer-button-label label"> Canvas </div></button><!----><!----></toolbox-drawer-item><!----><!----><!----></div></toolbox-drawer><!----><!----><!----><!----></div><!----><!----><!----><div _ngcontent-ng-c1792219187="" class="trailing-actions-wrapper ng-tns-c1792219187-2"><div _ngcontent-ng-c1792219187="" class="input-buttons-wrapper-bottom ng-tns-c1792219187-2"><div _ngcontent-ng-c1792219187="" class="mic-button-container ng-tns-c1792219187-2 ng-trigger ng-trigger-slide ng-star-inserted hidden"><speech-dictation-mic-button _ngcontent-ng-c1792219187="" class="speech-dictation-mic-button ng-tns-c1968946499-4 ng-tns-c1792219187-2 ng-star-inserted" _nghost-ng-c1968946499="" style=""><button _ngcontent-ng-c1968946499="" data-node-type="speech_dictation_mic_button" maticonsuffix="" mat-icon-button="" mattooltip="استفاده از میکروفون" aria-label="میکروفون" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger speech_dictation_mic_button ng-tns-c1968946499-4 mat-unthemed" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="175863;track:generic_click,impression" aria-describedby="cdk-describedby-message-ng-1-3" cdk-describedby-host="ng-1"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><div _ngcontent-ng-c1968946499=""><mat-icon _ngcontent-ng-c1968946499="" role="img" class="mat-icon notranslate ng-tns-c1968946499-4 icon-filled gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="mic" fonticon="mic"></mat-icon><!----><!----></div><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----></speech-dictation-mic-button><!----></div><!----><div _ngcontent-ng-c1792219187="" class="mat-mdc-tooltip-trigger send-button-container ng-tns-c1792219187-2 inner ng-star-inserted visible" aria-describedby="cdk-describedby-message-ng-1-59" cdk-describedby-host="ng-1"><button _ngcontent-ng-c1792219187="" mat-icon-button="" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base send-button ng-tns-c1792219187-2 mat-unthemed submit" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" aria-label="ارسال کردن پیام" jslog="173899;track:generic_click,impression;BardVeMetadataKey:[[null,null,null,null,null,null,null,null,null,null,null,null,0]];mutable:true" aria-disabled="false" tabindex="0"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c1792219187="" role="img" fonticon="send" class="mat-icon notranslate send-button-icon icon-filled gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="send"></mat-icon><!----><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span><span class="mat-ripple mat-mdc-button-ripple"></span></button></div><!----><!----></div></div></div></div><!----><!----><!----><!----><!----><!----><!----><!----><!----></input-area-v2></div><!----><hallucination-disclaimer _ngcontent-ng-c3177278963="" _nghost-ng-c2230343899=""><div _ngcontent-ng-c2230343899="" class="capabilities-disclaimer AsOk"><!----><p _ngcontent-ng-c2230343899="" data-test-id="highly-regulated-disclaimer" class="gds-label-m-alt desktop-spacing ng-star-inserted FontSet" style="">‫Gemini ممکن است اشتباه کند، ازجمله درباره افراد، بنابراین پاسخ‌هایش را دوباره‌سنجی کنید.
    <a _ngcontent-ng-c2230343899="" externallink="" data-test-id="footer-privacy-notice-link" class="footer-privacy-notice-link" href="https://support.google.com/gemini?p=privacy_notice">
      حریم خصوصی شما و Gemini
    </a></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><div class="AsRtl FontSet AsBox AsBoxGemini">


                <a href="https://chromewebstore.google.com/detail/chatgpt-rtl-persianfarsi/pjpmebofipgpjaincgoboibbmicccbne" target="_blank">

              <img src="chrome-extension://pjpmebofipgpjaincgoboibbmicccbne/images/myLogo.png" alt="ali saffari"></a>



                امیدوارم از نسخه بهینه شده برای فارسی زبانان لذت ببرید





            </div></div><!----><!----><!----><!----><!----><!----><!----></hallucination-disclaimer></input-container><!----></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></chat-window><!----><!----></div></div><!----></div></bard-sidenav-content></bard-sidenav-container><!----><!----><!----><!----><!----></side-navigation-v2><!----><!----></main><!----><!----><!----><!----><crust-task><template shadowrootmode="open"><!----></template></crust-task></chat-app><iframe height="0" width="0" style="display: none; visibility: hidden;" src="./انواع بودجه بندی_files/saved_resource.html"></iframe><script src="./انواع بودجه بندی_files/m=_b" id="base-js" nonce=""></script><script nonce="">this.gbar_=this.gbar_||{};(function(_){var window=this;
try{
var ud;ud=class extends _.ed{};_.vd=function(a,b){if(b in a.i)return a.i[b];throw new ud;};_.wd=function(a){return _.vd(_.bd.i(),a)};
}catch(e){_._DumpException(e)}
try{
/*

 Copyright Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
var Ad;_.xd=function(a){const b=a.length;if(b>0){const c=Array(b);for(let d=0;d<b;d++)c[d]=a[d];return c}return[]};Ad=function(a){return new _.zd(b=>b.substr(0,a.length+1).toLowerCase()===a+":")};_.Bd=globalThis.trustedTypes;_.Cd=class{constructor(a){this.i=a}toString(){return this.i}};_.Dd=new _.Cd("about:invalid#zClosurez");_.zd=class{constructor(a){this.lh=a}};_.Ed=[Ad("data"),Ad("http"),Ad("https"),Ad("mailto"),Ad("ftp"),new _.zd(a=>/^[^:]*([/?#]|$)/.test(a))];_.Fd=class{constructor(a){this.i=a}toString(){return this.i+""}};_.Gd=new _.Fd(_.Bd?_.Bd.emptyHTML:"");
}catch(e){_._DumpException(e)}
try{
var Ld,Zd,Kd,Md,Rd;_.Hd=function(a){return a==null?a:(0,_.Oa)(a)?a|0:void 0};_.Id=function(a){if(a==null)return a;if(typeof a==="string"&&a)a=+a;else if(typeof a!=="number")return;return(0,_.Oa)(a)?a|0:void 0};_.Jd=function(a,b){return a.lastIndexOf(b,0)==0};Ld=function(){let a=null;if(!Kd)return a;try{const b=c=>c;a=Kd.createPolicy("ogb-qtm#html",{createHTML:b,createScript:b,createScriptURL:b})}catch(b){}return a};_.Nd=function(){Md===void 0&&(Md=Ld());return Md};
_.Pd=function(a){const b=_.Nd();a=b?b.createScriptURL(a):a;return new _.Od(a)};_.Qd=function(a){if(a instanceof _.Od)return a.i;throw Error("H");};_.Sd=function(a){if(Rd.test(a))return a};_.Td=function(a){if(a instanceof _.Cd)if(a instanceof _.Cd)a=a.i;else throw Error("H");else a=_.Sd(a);return a};_.Ud=function(a,b=document){let c;const d=(c=b.querySelector)==null?void 0:c.call(b,`${a}[nonce]`);return d==null?"":d.nonce||d.getAttribute("nonce")||""};
_.Vd=function(a,b,c){a=a.ha;return _.rb(a,a[_.v]|0,b,c)!==void 0};_.Wd=function(a,b,c){return _.Id(_.zc(a,b,c))};_.R=function(a,b,c){return _.Hd(_.zc(a,b,c))};_.S=function(a,b,c=0){let d;return(d=_.Wd(a,b))!=null?d:c};_.Xd=function(a,b,c=0){let d;return(d=_.R(a,b))!=null?d:c};_.Yd=function(a){var b=_.Ma(a);return b=="array"||b=="object"&&typeof a.length=="number"};Kd=_.Bd;_.Od=class{constructor(a){this.i=a}toString(){return this.i+""}};Rd=/^\s*(?!javascript:)(?:[\w+.-]+:|[^:/?#]*(?:[/?#]|$))/i;var de,he,$d;_.be=function(a){return a?new $d(_.ae(a)):Zd||(Zd=new $d)};_.ce=function(a,b){return typeof b==="string"?a.getElementById(b):b};_.T=function(a,b){var c=b||document;c.getElementsByClassName?a=c.getElementsByClassName(a)[0]:(c=document,a?a=(b||c).querySelector(a?"."+a:""):(b=b||c,a=(a?b.querySelectorAll(a?"."+a:""):b.getElementsByTagName("*"))[0]||null));return a||null};
_.ee=function(a,b){_.ub(b,function(c,d){d=="style"?a.style.cssText=c:d=="class"?a.className=c:d=="for"?a.htmlFor=c:de.hasOwnProperty(d)?a.setAttribute(de[d],c):_.Jd(d,"aria-")||_.Jd(d,"data-")?a.setAttribute(d,c):a[d]=c})};de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
_.fe=function(a){return a?a.defaultView:window};_.ie=function(a,b){const c=b[1],d=_.ge(a,String(b[0]));c&&(typeof c==="string"?d.className=c:Array.isArray(c)?d.className=c.join(" "):_.ee(d,c));b.length>2&&he(a,d,b);return d};he=function(a,b,c){function d(e){e&&b.appendChild(typeof e==="string"?a.createTextNode(e):e)}for(let e=2;e<c.length;e++){const f=c[e];!_.Yd(f)||_.Db(f)&&f.nodeType>0?d(f):_.Sb(f&&typeof f.length=="number"&&typeof f.item=="function"?_.xd(f):f,d)}};
_.je=function(a){return _.ge(document,a)};_.ge=function(a,b){b=String(b);a.contentType==="application/xhtml+xml"&&(b=b.toLowerCase());return a.createElement(b)};_.ke=function(a){let b;for(;b=a.firstChild;)a.removeChild(b)};_.le=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};_.me=function(a,b){return a&&b?a==b||a.contains(b):!1};_.ae=function(a){return a.nodeType==9?a:a.ownerDocument||a.document};$d=function(a){this.i=a||_.t.document||document};_.n=$d.prototype;
_.n.H=function(a){return _.ce(this.i,a)};_.n.Ua=function(a,b,c){return _.ie(this.i,arguments)};_.n.appendChild=function(a,b){a.appendChild(b)};_.n.ue=_.ke;_.n.Nf=_.le;_.n.Mf=_.me;
}catch(e){_._DumpException(e)}
try{
_.yi=function(a){const b=_.Ud("script",a.ownerDocument);b&&a.setAttribute("nonce",b)};_.zi=function(a){if(!a)return null;a=_.E(a,4);var b;a===null||a===void 0?b=null:b=_.Pd(a);return b};_.Ai=class extends _.N{constructor(a){super(a)}};_.Bi=function(a,b){return(b||document).getElementsByTagName(String(a))};
}catch(e){_._DumpException(e)}
try{
var Di=function(a,b,c){a<b?Ci(a+1,b):_.Kc.log(Error("fa`"+a+"`"+b),{url:c})},Ci=function(a,b){if(Ei){const c=_.je("SCRIPT");c.async=!0;c.type="text/javascript";c.charset="UTF-8";c.src=_.Qd(Ei);_.yi(c);c.onerror=_.Gb(Di,a,b,c.src);_.Bi("HEAD")[0].appendChild(c)}},Fi=class extends _.N{constructor(a){super(a)}};var Gi=_.B(_.Wc,Fi,17)||new Fi,Hi=_.B(Gi,_.Ai,1),Ei=Hi?_.zi(Hi):null,Ii=_.B(Gi,_.Ai,2),Ji=Ii?_.zi(Ii):null,Ki=function(){Ci(1,2);if(Ji){const a=_.je("LINK");a.setAttribute("type","text/css");a.href=_.Qd(Ji).toString();a.rel="stylesheet";let b=_.Ud("style",document);b&&a.setAttribute("nonce",b);_.Bi("HEAD")[0].appendChild(a)}};(function(){const a=_.Xc();if(_.D(a,18))Ki();else{const b=_.Wd(a,19)||0;window.addEventListener("load",()=>{window.setTimeout(Ki,b)})}})();
}catch(e){_._DumpException(e)}
})(this.gbar_);
// Google Inc.
</script><div ng-non-bindable=""></div><div dir="rtl" class="gb_L" ng-non-bindable="">برنامه‌های Google</div><div class="gb_S" ng-non-bindable=""><div class="gb_Bc"><div dir="rtl">حساب Google</div><div class="gb_g">‪Tohid Arjmand‬‏</div><div dir="ltr">soheiladv@gmail.com</div></div></div><div class="cdk-live-announcer-element cdk-visually-hidden" aria-atomic="true" aria-live="assertive" id="cdk-live-announcer-0">ایمیل جدیدی ایجاد شد</div><div class="cdk-describedby-message-container cdk-visually-hidden" style="visibility: hidden;"><div id="cdk-describedby-message-ng-1-3" role="tooltip">استفاده از میکروفون</div><div id="cdk-describedby-message-ng-1-4" role="tooltip">فایل‌های این گپ</div><div id="cdk-describedby-message-ng-1-10" role="tooltip">افزودن فایل</div><div id="cdk-describedby-message-ng-1-19" role="tooltip">ازهم بازکردن نوشتار</div><div id="cdk-describedby-message-ng-1-21" role="tooltip">دریافت پاسخ‌های دقیق</div><div id="cdk-describedby-message-ng-1-22" role="tooltip">ایجاد کد و سند</div><div id="cdk-describedby-message-ng-1-23" role="tooltip">بیشتر</div><div id="cdk-describedby-message-ng-1-26" role="tooltip">ویرایش نوشتار</div><div id="cdk-describedby-message-ng-1-42" role="tooltip">ازهم بازکردن منو</div><div id="cdk-describedby-message-ng-1-43" role="tooltip">بررسی کد ادمین جنگو و بهبود</div><div id="cdk-describedby-message-ng-1-44" role="tooltip">انواع روش‌های محاسبه بودجه</div><div id="cdk-describedby-message-ng-1-45" role="tooltip">مشکلات فنی و راهکارهای بهبود در بخش IT</div><div id="cdk-describedby-message-ng-1-46" role="tooltip">ساخت ساب دامین در اکتیو دایرکتوری</div><div id="cdk-describedby-message-ng-1-47" role="tooltip">قفل کردن پروژه جانگو در تاریخ مشخص</div><div id="cdk-describedby-message-ng-1-48" role="tooltip">ایده‌پرداز</div><div id="cdk-describedby-message-ng-1-49" role="tooltip">راهنمای شغلی</div><div id="cdk-describedby-message-ng-1-50" role="tooltip">کمک‌کدنویس</div><div id="cdk-describedby-message-ng-1-51" role="tooltip">مدیر Gem</div><div id="cdk-describedby-message-ng-1-52" role="tooltip">راهنما</div><div id="cdk-describedby-message-ng-1-53" role="tooltip">فعالیت برنامه‌های Gemini</div><div id="cdk-describedby-message-ng-1-54" role="tooltip">تنظیمات</div><div id="cdk-describedby-message-ng-1-59" role="tooltip">ارسال</div></div><div class="cdk-overlay-container"></div><iframe src="./انواع بودجه بندی_files/bscframe.html" style="display: none;"></iframe><iframe id="hfcr" src="./انواع بودجه بندی_files/RotateCookiesPage.html" style="display: none;"></iframe></body></html>