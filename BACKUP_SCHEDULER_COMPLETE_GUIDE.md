# ุฑุงูููุง ฺฉุงูู ุณุณุชู ุงุณฺฉฺูู ูพุดุชุจุงูโฺฏุฑ ู ุงุนูุงูโูุง

## โ ุณุณุชู ฺฉุงูู ูพุงุฏูโุณุงุฒ ุดุฏู

### **ูฺฺฏโูุง ุงุตู**:
- โ **ุงุณฺฉฺูู ุฎูุฏฺฉุงุฑ ูพุดุชุจุงูโฺฏุฑ**: ุฑูุฒุงููุ ููุชฺฏุ ูุงูุงููุ ุณูุงุฑุด
- โ **ุงุนูุงูโูุง ููุดููุฏ**: ุจู ูุฏุฑุงู ุณุณุชู
- โ **ูุงฺฏ ฺฉุงูู**: ุฑุฏุงุจ ุชูุงู ุนููุงุช
- โ **Admin Interface**: ูุฏุฑุช ุขุณุงู
- โ **Cron Integration**: ุงุฌุฑุง ุฎูุฏฺฉุงุฑ

## ๐ฏ ูุฏูโูุง ุฌุฏุฏ

### **1. BackupSchedule**:
```python
class BackupSchedule(models.Model):
    name = models.CharField(max_length=100)  # ูุงู ุงุณฺฉฺูู
    frequency = models.CharField(max_length=20)  # ูุฑฺฉุงูุณ (ุฑูุฒุงููุ ููุชฺฏุ ูุงูุงูู)
    database = models.CharField(max_length=10)  # ุฏุชุงุจุณ ูุฏู
    format_type = models.CharField(max_length=10)  # ูุฑูุช (JSON/SQL)
    encrypt = models.BooleanField(default=False)  # ุฑูุฒฺฏุฐุงุฑ
    is_active = models.BooleanField(default=True)  # ูุนุงู/ุบุฑูุนุงู
    notify_on_success = models.BooleanField(default=True)  # ุงุนูุงู ููููุช
    notify_on_failure = models.BooleanField(default=True)  # ุงุนูุงู ุฎุทุง
    notify_recipients = models.ManyToManyField(CustomUser)  # ฺฏุฑูุฏฺฏุงู
```

### **2. BackupLog**:
```python
class BackupLog(models.Model):
    schedule = models.ForeignKey(BackupSchedule)  # ุงุณฺฉฺูู ูุฑุจูุทู
    status = models.CharField(max_length=20)  # ูุถุนุช (ุดุฑูุนุ ุชฺฉููุ ุฎุทุง)
    started_at = models.DateTimeField()  # ุฒูุงู ุดุฑูุน
    finished_at = models.DateTimeField()  # ุฒูุงู ูพุงุงู
    duration = models.DurationField()  # ูุฏุช ุฒูุงู
    file_size = models.BigIntegerField()  # ุญุฌู ูุงู
    error_message = models.TextField()  # ูพุงู ุฎุทุง
```

### **3. Notification (ุจูุจูุฏ ุงูุชู)**:
```python
# ุงููุงุน ุฌุฏุฏ ููุฌูุฏุช
entity_type = [
    ('BACKUP', 'ูพุดุชุจุงู\u200cฺฏุฑ'),
    ('SYSTEM', 'ุณุณุชู'),
    ('SECURITY', 'ุงููุช'),
    ('MAINTENANCE', 'ูฺฏูุฏุงุฑ')
]

# ุงููุงุน ุฌุฏุฏ ุงูุฏุงู
action = [
    ('COMPLETED', 'ุชฺฉูู'),
    ('FAILED', 'ูุงูููู'),
    ('SCHEDULED', 'ุฒูุงู\u200cุจูุฏ ุดุฏู'),
    ('STARTED', 'ุดุฑูุน ุดุฏู'),
    ('FINISHED', 'ูพุงุงู ุงูุชู')
]
```

## ๐ง ุชูุงุจุน ุฌุฏุฏ

### **1. send_backup_notification()**:
```python
def send_backup_notification(schedule, status, message=None, file_path=None, file_size=None):
    """
    ุงุฑุณุงู ุงุนูุงู ูพุดุชุจุงูโฺฏุฑ ุจู ูุฏุฑุงู ุณุณุชู
    - ุงุนูุงู ุดุฑูุน ูพุดุชุจุงูโฺฏุฑ
    - ุงุนูุงู ููููุช
    - ุงุนูุงู ุฎุทุง ุจุง ุงูู
    """
```

### **2. execute_scheduled_backup()**:
```python
def execute_scheduled_backup(schedule_id):
    """
    ุงุฌุฑุง ูพุดุชุจุงูโฺฏุฑ ุฒูุงูโุจูุฏ ุดุฏู
    - ุงุฌุงุฏ ูุงฺฏ
    - ุงุฌุฑุง ูพุดุชุจุงูโฺฏุฑ
    - ุจุฑูุฒุฑุณุงู ุฒูุงู ุงุฌุฑุง ุจุนุฏ
    - ุงุฑุณุงู ุงุนูุงู
    """
```

### **3. check_and_execute_scheduled_backups()**:
```python
def check_and_execute_scheduled_backups():
    """
    ุจุฑุฑุณ ู ุงุฌุฑุง ูพุดุชุจุงูโฺฏุฑโูุง ุฒูุงูโุจูุฏ ุดุฏู
    - ูพุฏุง ฺฉุฑุฏู ุงุณฺฉฺููโูุง ุขูุงุฏู ุงุฌุฑุง
    - ุงุฌุฑุง ูุฑ ฺฉุฏุงู
    """
```

## ๐ Management Commands

### **1. run_backup_scheduler**:
```bash
# ุงุฌุฑุง ููู ุงุณฺฉฺููโูุง
python manage.py run_backup_scheduler

# ุงุฌุฑุง ุงุณฺฉฺูู ุฎุงุต
python manage.py run_backup_scheduler --schedule-id 1
```

## ๐ ุชูุธู Cron

### **1. Linux/Mac**:
```bash
# ูุฑ 5 ุฏููู ฺฉุจุงุฑ ุจุฑุฑุณ ฺฉู
*/5 * * * * /path/to/python /path/to/scripts/backup_scheduler.py

# ูุฑ ุณุงุนุช ฺฉุจุงุฑ ุจุฑุฑุณ ฺฉู
0 * * * * /path/to/python /path/to/scripts/backup_scheduler.py

# ูุฑ ุฑูุฒ ุณุงุนุช 2 ุตุจุญ
0 2 * * * /path/to/python /path/to/scripts/backup_scheduler.py
```

### **2. Windows (Task Scheduler)**:
```batch
# ุงุฌุฑุง ุงุณฺฉุฑูพุช batch
scripts/backup_scheduler.bat
```

## ๐จ Admin Interface

### **1. BackupSchedule Admin**:
- โ **ูุณุช ููุงุด**: ูุงูุ ูุฑฺฉุงูุณุ ุฏุชุงุจุณุ ูุฑูุชุ ูุถุนุช
- โ **ููุชุฑูุง**: ูุฑฺฉุงูุณุ ุฏุชุงุจุณุ ูุฑูุชุ ูุนุงู/ุบุฑูุนุงู
- โ **ุฌุณุชุฌู**: ูุงูุ ุชูุถุญุงุช
- โ **ุชูุธูุงุช**: ฺฏุฑูุฏฺฏุงู ุงุนูุงูุ ุฑูุฒฺฏุฐุงุฑ

### **2. BackupLog Admin**:
- โ **ูุณุช ููุงุด**: ุงุณฺฉฺููุ ูุถุนุชุ ุฒูุงู ุดุฑูุนุ ูุฏุช ุฒูุงู
- โ **ููุชุฑูุง**: ูุถุนุชุ ุฒูุงูุ ุงุณฺฉฺูู
- โ **ุฑูฺฏโุจูุฏ**: ูุถุนุชโูุง ุจุง ุฑูฺฏโูุง ูุฎุชูู
- โ **ุฌุฒุฆุงุช**: ูุณุฑ ูุงูุ ุญุฌูุ ูพุงู ุฎุทุง

### **3. Notification Admin**:
- โ **ูุณุช ููุงุด**: ฺฏุฑูุฏูุ ูุนูุ ููุนุ ุงูููุชุ ุฎูุงูุฏูโูุดุฏู
- โ **ููุชุฑูุง**: ููุนุ ุงูููุชุ ุฎูุงูุฏูโูุดุฏูุ ุฒูุงู
- โ **ุฑูฺฏโุจูุฏ**: ุงูููุชโูุง ุจุง ุฑูฺฏโูุง ูุฎุชูู
- โ **ุฌุณุชุฌู**: ฺฏุฑูุฏูุ ูุนูุ ุชูุถุญุงุช

## ๐ ุฏุณุชุฑุณโูุง

### **1. Admin Panel**:
```
http://127.0.0.1:8000/admin/notificationApp/
```

### **2. ูุฏูโูุง ููุฌูุฏ**:
- **NotificationRule**: ููุงูู ุงุนูุงู
- **Notification**: ุงุนูุงูโูุง
- **BackupSchedule**: ุงุณฺฉฺููโูุง ูพุดุชุจุงูโฺฏุฑ
- **BackupLog**: ูุงฺฏโูุง ูพุดุชุจุงูโฺฏุฑ

## ๐ ูุญูู ุงุณุชูุงุฏู

### **1. ุงุฌุงุฏ ุงุณฺฉฺูู ุฌุฏุฏ**:
1. ูุงุฑุฏ Admin Panel ุดูุฏ
2. ุจู ุจุฎุด "BackupSchedule" ุจุฑูุฏ
3. ุฑู "Add" ฺฉูฺฉ ฺฉูุฏ
4. ุงุทูุงุนุงุช ุฑุง ูพุฑ ฺฉูุฏ:
   - **ูุงู**: ูุงู ุงุณฺฉฺูู
   - **ูุฑฺฉุงูุณ**: ุฑูุฒุงููุ ููุชฺฏุ ูุงูุงูู
   - **ุฏุชุงุจุณ**: ุงุตูุ ูุงฺฏุ ุง ูุฑ ุฏู
   - **ูุฑูุช**: JSON ุง SQL
   - **ฺฏุฑูุฏฺฏุงู ุงุนูุงู**: ฺฉุงุฑุจุฑุงู ููุฑุฏ ูุธุฑ

### **2. ุชูุธู Cron**:
```bash
# ุงุถุงูู ฺฉุฑุฏู ุจู crontab
crontab -e

# ุงุถุงูู ฺฉุฑุฏู ุฎุท ุฒุฑ
*/5 * * * * /path/to/python /path/to/scripts/backup_scheduler.py
```

### **3. ุจุฑุฑุณ ูุงฺฏโูุง**:
1. ูุงุฑุฏ Admin Panel ุดูุฏ
2. ุจู ุจุฎุด "BackupLog" ุจุฑูุฏ
3. ูุถุนุช ุงุฌุฑุงูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ

## ๐ง ุงุนูุงูโูุง

### **1. ุงููุงุน ุงุนูุงู**:
- โ **ุดุฑูุน ูพุดุชุจุงูโฺฏุฑ**: ุงุทูุงุนโุฑุณุงู ุดุฑูุน
- โ **ููููุช**: ุงุทูุงุนโุฑุณุงู ุชฺฉูู ูููู
- โ **ุฎุทุง**: ุงุทูุงุนโุฑุณุงู ุฎุทุง + ุงูู

### **2. ฺฉุงูุงูโูุง ุงุนูุงู**:
- โ **ุฏุฑููโุจุฑูุงูู**: ุงุนูุงู ุฏุฑ ุณุณุชู
- โ **ุงูู**: ุงุฑุณุงู ุงูู
- โ **WebSocket**: ุงุนูุงู real-time

### **3. ุงูููุชโูุง**:
- โ **LOW**: ููููุช (ุณุจุฒ)
- โ **MEDIUM**: ุดุฑูุน (ูุงุฑูุฌ)
- โ **HIGH**: ุฎุทุง (ูุฑูุฒ)
- โ **WARNING**: ูุดุฏุงุฑ (ุฒุฑุฏ)
- โ **ERROR**: ุฎุทุง (ูุฑูุฒ)
- โ **LOCKED**: ูููโุดุฏู (ุจููุด)

## โจ ูฺฺฏโูุง ูพุดุฑูุชู

### **1. Cron ุณูุงุฑุด**:
```python
# ูุซุงูโูุง cron
"0 2 * * *"  # ูุฑ ุฑูุฒ ุณุงุนุช 2 ุตุจุญ
"0 */6 * * *"  # ูุฑ 6 ุณุงุนุช
"0 0 * * 0"  # ูุฑ ฺฉุดูุจู
"0 0 1 * *"  # ุงูู ูุฑ ูุงู
```

### **2. ุฑูุฒฺฏุฐุงุฑ ุฎูุฏฺฉุงุฑ**:
- โ **ุฑูุฒฺฏุฐุงุฑ ูุงูโูุง**: ุจุง ุฑูุฒ ุนุจูุฑ
- โ **ุงููุช ุจุงูุง**: ุญูุงุธุช ุงุฒ ุฏุงุฏูโูุง

### **3. ูุงฺฏ ฺฉุงูู**:
- โ **ุฑุฏุงุจ ฺฉุงูู**: ุชูุงู ุนููุงุช
- โ **ุฌุฒุฆุงุช**: ุฒูุงูุ ุญุฌูุ ุฎุทุงูุง
- โ **ุชุงุฑุฎฺู**: ูฺฏูุฏุงุฑ ูุงฺฏโูุง

## ๐ฏ ูุชุฌู

**ุณุณุชู ฺฉุงูู ุงุณฺฉฺูู ูพุดุชุจุงูโฺฏุฑ ู ุงุนูุงูโูุง ูพุงุฏูโุณุงุฒ ุดุฏ!**

**ูฺฺฏโูุง ููุง**:
- โ **ุงุณฺฉฺูู ุฎูุฏฺฉุงุฑ**: ุฑูุฒุงููุ ููุชฺฏุ ูุงูุงููุ ุณูุงุฑุด
- โ **ุงุนูุงูโูุง ููุดููุฏ**: ุจู ูุฏุฑุงู ุณุณุชู
- โ **ูุงฺฏ ฺฉุงูู**: ุฑุฏุงุจ ุชูุงู ุนููุงุช
- โ **Admin Interface**: ูุฏุฑุช ุขุณุงู
- โ **Cron Integration**: ุงุฌุฑุง ุฎูุฏฺฉุงุฑ
- โ **ุงููุช**: ุฑูุฒฺฏุฐุงุฑ ู ุญูุงุธุช
- โ **ุงูุนุทุงู**: ุชูุธูุงุช ฺฉุงูู

**ุญุงูุง ูโุชูุงูุฏ ุงุณฺฉฺููโูุง ูพุดุชุจุงูโฺฏุฑ ุฑุง ุชูุธู ฺฉูุฏ ู ุงุนูุงูโูุง ุฎูุฏฺฉุงุฑ ุฏุฑุงูุช ฺฉูุฏ!** ๐
